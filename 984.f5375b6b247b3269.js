(self.webpackChunkng_jointjs_demo=self.webpackChunkng_jointjs_demo||[]).push([[984],{984:(ei,Vr,Wt)=>{"use strict";Wt.r(Vr),Wt.d(Vr,{DemosModule:()=>Qu});var xr={};Wt.r(xr),Wt.d(xr,{ellipseWithEllipse:()=>ca,ellipseWithLine:()=>hi,exists:()=>la,lineWithLine:()=>Ni,pathWithEllipse:()=>Mi,pathWithLine:()=>Rn,pathWithPath:()=>Yi,pathWithPolygon:()=>Ss,pathWithPolyline:()=>Ws,pathWithRect:()=>Ms,polygonWithEllipse:()=>Kr,polygonWithLine:()=>cr,polygonWithPolygon:()=>Zs,polygonWithPolyline:()=>is,polygonWithRect:()=>da,polylineWithEllipse:()=>di,polylineWithLine:()=>js,polylineWithPolyline:()=>_i,polylineWithRect:()=>Wi,rectWithEllipse:()=>ha,rectWithLine:()=>fa,rectWithRect:()=>Gs});var G={};Wt.r(G),Wt.d(G,{Curve:()=>Se,Ellipse:()=>ce,Line:()=>tt,Path:()=>_t,Point:()=>I,Polygon:()=>Vn,Polyline:()=>Ue,Rect:()=>Lt,bezier:()=>Rs,ellipse:()=>vn,intersection:()=>_s,line:()=>Ct,normalizeAngle:()=>$n,point:()=>T,random:()=>Ir,rect:()=>ji,scale:()=>ar,snapToGrid:()=>Rr,toDeg:()=>Gi,toRad:()=>Ne,types:()=>Ht});var Nr={};Wt.r(Nr),Wt.d(Nr,{absolute:()=>Zt,bottom:()=>cu,ellipse:()=>U,ellipseSpread:()=>z,fn:()=>fe,left:()=>Mn,line:()=>Ve,right:()=>rn,top:()=>Ia});var se={};Wt.r(se),Wt.d(se,{bottom:()=>oe,inside:()=>Sn,insideOriented:()=>Ft,left:()=>zt,manual:()=>Et,outside:()=>en,outsideOriented:()=>Te,radial:()=>gr,radialOriented:()=>yr,right:()=>Jt,top:()=>$t});var St={};Wt.r(St),Wt.d(St,{BorderedImage:()=>wc,Circle:()=>Ac,Cylinder:()=>_r,DoubleLink:()=>ro,Ellipse:()=>Cc,EmbeddedImage:()=>el,HeaderedRectangle:()=>xc,Image:()=>fu,InscribedImage:()=>bc,Link:()=>Po,Path:()=>yc,Polygon:()=>Do,Polyline:()=>Lo,Rectangle:()=>Aa,ShadowLink:()=>hu,TextBlock:()=>Sc});var Je={};Wt.r(Je),Wt.d(Je,{manhattan:()=>Go,metro:()=>ks,normal:()=>E,oneSide:()=>Oa,orthogonal:()=>vu});var Ci={};Wt.r(Ci),Wt.d(Ci,{curve:()=>kr,jumpover:()=>Al,normal:()=>ms,rounded:()=>Au,smooth:()=>Zo});var Mr={};Wt.r(Mr),Wt.d(Mr,{addClass:()=>Ml,mask:()=>xl,opacity:()=>_o,stroke:()=>bu});var nn={};Wt.r(nn),Wt.d(nn,{connectionClosest:()=>Dl,connectionLength:()=>Hc,connectionPerpendicular:()=>Mu,connectionRatio:()=>Sl,resolveRef:()=>wa});var zr={};Wt.r(zr),Wt.d(zr,{anchor:()=>Yo,bbox:()=>Tu,boundary:()=>kl,rectangle:()=>Pl});var bn={};Wt.r(bn),Wt.d(bn,{bottom:()=>Lu,bottomLeft:()=>tf,bottomRight:()=>sa,center:()=>Uo,left:()=>Ol,midSide:()=>Rl,modelCenter:()=>Eu,perpendicular:()=>Bl,right:()=>Pu,top:()=>zl,topLeft:()=>ku,topRight:()=>ia});var qn={};Wt.r(qn),Wt.d(qn,{Circle:()=>Fu,Ellipse:()=>Os,Generic:()=>Xe,Image:()=>df,Path:()=>qo,Polygon:()=>ti,Polyline:()=>Vu,Rect:()=>Ql,Rhombus:()=>gf,Text:()=>hf,TextBlock:()=>po,TextBlockView:()=>ql,TextView:()=>ff});var Or={};Wt.r(Or),Wt.d(Or,{Atomic:()=>pf,Coupled:()=>vf,Link:()=>mf,Model:()=>tu});var ni={};Wt.r(ni),Wt.d(ni,{And:()=>ec,Gate:()=>eu,Gate11:()=>vo,Gate21:()=>aa,IO:()=>nu,Input:()=>$l,Nand:()=>nc,Nor:()=>ru,Not:()=>Xu,Or:()=>tc,Output:()=>If,Repeater:()=>mo,Wire:()=>Af,Xnor:()=>xa,Xor:()=>Is});var Ce={};Wt.r(Ce),Wt.d(Ce,{BishopBlack:()=>Mf,BishopWhite:()=>Nf,KingBlack:()=>Cf,KingWhite:()=>rc,KnightBlack:()=>Tf,KnightWhite:()=>Sf,PawnBlack:()=>Lf,PawnWhite:()=>Df,QueenBlack:()=>wf,QueenWhite:()=>yf,RookBlack:()=>xf,RookWhite:()=>bf});var Ut={};Wt.r(Ut),Wt.d(Ut,{Attribute:()=>Io,Derived:()=>sc,Entity:()=>Hu,ISA:()=>Of,IdentifyingRelationship:()=>Pf,Key:()=>Ef,Line:()=>Bf,Multivalued:()=>kf,Normal:()=>zf,Relationship:()=>Ju,WeakEntity:()=>ic});var Un={};Wt.r(Un),Wt.d(Un,{Arrow:()=>jf,EndState:()=>zi,StartState:()=>Gf,State:()=>Rf});var Ie={};Wt.r(Ie),Wt.d(Ie,{Arrow:()=>Wf,Member:()=>Zf});var Ye={};Wt.r(Ye),Wt.d(Ye,{Link:()=>Uf,Place:()=>ac,PlaceView:()=>_f,Transition:()=>Yf});var yn={};Wt.r(yn),Wt.d(yn,{Abstract:()=>Ff,AbstractView:()=>Vf,Aggregation:()=>Qf,Association:()=>$f,Class:()=>Ku,ClassView:()=>Ao,Composition:()=>qf,EndState:()=>nh,Generalization:()=>Jf,Implementation:()=>Kf,Interface:()=>Xf,InterfaceView:()=>Hf,StartState:()=>eh,State:()=>th,Transition:()=>rh});var gn={};Wt.r(gn),Wt.d(gn,{basic:()=>qn,chess:()=>Ce,devs:()=>Or,erd:()=>Ut,fsa:()=>Un,logic:()=>ni,org:()=>Ie,pn:()=>Ye,standard:()=>St,uml:()=>yn});var ri=Wt(895),y=Wt(887);function Sr(t,e,n,r,s,o,l){try{var f=t[o](l),d=f.value}catch(m){return void n(m)}f.done?e(d):Promise.resolve(d).then(r,s)}function sr(t){return function(){var e=this,n=arguments;return new Promise(function(r,s){var o=t.apply(e,n);function l(d){Sr(o,r,s,l,f,"next",d)}function f(d){Sr(o,r,s,l,f,"throw",d)}l(void 0)})}}const{round:Br,floor:ys,PI:$i}=Math,ar={linear:function(t,e,n){return(n-t[0])/(t[1]-t[0])*(e[1]-e[0])+e[0]||0}},$n=function(t){return t%360+(t<0?360:0)},Rr=function(t,e){return e*Br(t/e)},Gi=function(t){return 180*t/$i%360},Ne=function(t,e){return(t=(e=e||!1)?t:t%360)*$i/180},Ir=function(t,e){if(void 0===e)e=void 0===t?1:t,t=0;else if(e<t){const n=t;t=e,e=n}return ys(Math.random()*(e-t+1)+t)},{cos:yi,sin:ii,atan2:Tr}=Math,tr=function(t,e){var n=Ne(t.y),r=Ne(e.y),l=Ne(e.x-t.x),f=ii(l)*yi(r),d=yi(n)*ii(r)-ii(n)*yi(r)*yi(l),p=Gi(Tr(f,d))-22.5;return p<0&&(p+=360),["NE","E","SE","S","SW","W","NW","N"][p=parseInt(p/45)]},Xr=function(t,e){var n=t.x,r=t.y;return(n-=e.x)*n+(r-=e.y)*r},Fn=function(t,e){return Math.sqrt(Xr(t,e))},Ht={Point:1,Line:2,Ellipse:3,Rect:4,Polyline:5,Polygon:6,Curve:7,Path:8},{abs:Gr,cos:ts,sin:jr,sqrt:Ln,min:Dr,max:si,atan2:es,round:ws,pow:pn,PI:Ke}=Math,I=function(t,e){if(!(this instanceof I))return new I(t,e);if("string"==typeof t){var n=t.split(-1===t.indexOf("@")?" ":"@");t=parseFloat(n[0]),e=parseFloat(n[1])}else Object(t)===t&&(e=t.y,t=t.x);this.x=void 0===t?0:t,this.y=void 0===e?0:e};I.fromPolar=function(t,e,n){n=new I(n);var r=Gr(t*ts(e)),s=Gr(t*jr(e)),o=$n(Gi(e));return o<90?s=-s:o<180?(r=-r,s=-s):o<270&&(r=-r),new I(n.x+r,n.y+s)},I.random=function(t,e,n,r){return new I(Ir(t,e),Ir(n,r))},I.prototype={type:Ht.Point,chooseClosest:function(t){var e=t.length;if(1===e)return new I(t[0]);for(var n=null,r=1/0,s=0;s<e;s++){var o=new I(t[s]),l=this.squaredDistance(o);l<r&&(n=o,r=l)}return n},adhereToRect:function(t){return t.containsPoint(this)||(this.x=Dr(si(this.x,t.x),t.x+t.width),this.y=Dr(si(this.y,t.y),t.y+t.height)),this},angleBetween:function(t,e){var n=this.equals(t)||this.equals(e)?NaN:this.theta(e)-this.theta(t);return n<0&&(n+=360),n},bearing:function(t){return tr(this,t)},changeInAngle:function(t,e,n){return this.clone().offset(-t,-e).theta(n)-this.theta(n)},clone:function(){return new I(this)},cross:function(t,e){return t&&e?(e.x-this.x)*(t.y-this.y)-(e.y-this.y)*(t.x-this.x):NaN},difference:function(t,e){return Object(t)===t&&(e=t.y,t=t.x),new I(this.x-(t||0),this.y-(e||0))},distance:function(t){return Fn(this,t)},dot:function(t){return t?this.x*t.x+this.y*t.y:NaN},equals:function(t){return!!t&&this.x===t.x&&this.y===t.y},lerp:function(t,e){return new I((1-e)*this.x+e*t.x,(1-e)*this.y+e*t.y)},magnitude:function(){return Ln(this.x*this.x+this.y*this.y)||.01},manhattanDistance:function(t){return Gr(t.x-this.x)+Gr(t.y-this.y)},move:function(t,e){var n=Ne(new I(t).theta(this));return this.offset(ts(n)*e,-jr(n)*e)},normalize:function(t){var e=(t||1)/this.magnitude();return this.scale(e,e)},offset:function(t,e){return Object(t)===t&&(e=t.y,t=t.x),this.x+=t||0,this.y+=e||0,this},reflection:function(t){return new I(t).move(this,this.distance(t))},rotate:function(t,e){if(0===e)return this;t=t||new I(0,0),e=Ne($n(-e));var n=ts(e),r=jr(e),o=r*(this.x-t.x)+n*(this.y-t.y)+t.y;return this.x=n*(this.x-t.x)-r*(this.y-t.y)+t.x,this.y=o,this},round:function(t){let e=1;if(t)switch(t){case 1:e=10;break;case 2:e=100;break;case 3:e=1e3;break;default:e=pn(10,t)}return this.x=ws(this.x*e)/e,this.y=ws(this.y*e)/e,this},scale:function(t,e,n){return n=n&&new I(n)||new I(0,0),this.x=n.x+t*(this.x-n.x),this.y=n.y+e*(this.y-n.y),this},snapToGrid:function(t,e){return this.x=Rr(this.x,t),this.y=Rr(this.y,e||t),this},squaredDistance:function(t){return Xr(this,t)},theta:function(t){t=new I(t);var r=es(-(t.y-this.y),t.x-this.x);return r<0&&(r=2*Ke+r),180*r/Ke},toJSON:function(){return{x:this.x,y:this.y}},toPolar:function(t){t=t&&new I(t)||new I(0,0);var e=this.x,n=this.y;return this.x=Ln((e-t.x)*(e-t.x)+(n-t.y)*(n-t.y)),this.y=Ne(t.theta(new I(e,n))),this},toString:function(){return this.x+"@"+this.y},serialize:function(){return this.x+","+this.y},update:function(t,e){return Object(t)===t&&(e=t.y,t=t.x),this.x=t||0,this.y=e||0,this},vectorAngle:function(t){return new I(0,0).angleBetween(this,t)}},I.prototype.translate=I.prototype.offset;const T=I,{max:W,min:K}=Math,tt=function(t,e){return this instanceof tt?t instanceof tt?new tt(t.start,t.end):(this.start=new I(t),void(this.end=new I(e))):new tt(t,e)};tt.prototype={type:Ht.Line,angle:function(){var t=new I(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,t)},bbox:function(){var t=K(this.start.x,this.end.x),e=K(this.start.y,this.end.y),n=W(this.start.x,this.end.x),r=W(this.start.y,this.end.y);return new Lt(t,e,n-t,r-e)},bearing:function(){return tr(this.start,this.end)},clone:function(){return new tt(this.start,this.end)},closestPoint:function(t){return this.pointAt(this.closestPointNormalizedLength(t))},closestPointLength:function(t){return this.closestPointNormalizedLength(t)*this.length()},closestPointNormalizedLength:function(t){var e=this.vector().dot(new tt(this.start,t).vector()),n=K(1,W(0,e/this.squaredLength()));return n!=n?0:n},closestPointTangent:function(t){return this.tangentAt(this.closestPointNormalizedLength(t))},containsPoint:function(t){var e=this.start,n=this.end;if(0!==e.cross(t,n))return!1;var r=this.length();return!(new tt(e,t).length()>r||new tt(t,n).length()>r)},divideAt:function(t){var e=this.pointAt(t);return[new tt(this.start,e),new tt(e,this.end)]},divideAtLength:function(t){var e=this.pointAtLength(t);return[new tt(this.start,e),new tt(e,this.end)]},equals:function(t){return!!t&&this.start.x===t.start.x&&this.start.y===t.start.y&&this.end.x===t.end.x&&this.end.y===t.end.y},intersect:function(t,e){if(t&&t.intersectionWithLine){var n=t.intersectionWithLine(this,e);return n&&t instanceof tt&&(n=n[0]),n}return null},intersectionWithLine:function(t){var e=new I(this.end.x-this.start.x,this.end.y-this.start.y),n=new I(t.end.x-t.start.x,t.end.y-t.start.y),r=e.x*n.y-e.y*n.x,s=new I(t.start.x-this.start.x,t.start.y-this.start.y),o=s.x*n.y-s.y*n.x,l=s.x*e.y-s.y*e.x;if(0===r||o*r<0||l*r<0)return null;if(r>0){if(o>r||l>r)return null}else if(o<r||l<r)return null;return[new I(this.start.x+o*e.x/r,this.start.y+o*e.y/r)]},isDifferentiable:function(){return!this.start.equals(this.end)},length:function(){return Fn(this.start,this.end)},midpoint:function(){return new I((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)},parallel:function(t){const e=this.clone();if(!this.isDifferentiable())return e;const{start:n,end:r}=e,s=n.clone().rotate(r,270),o=r.clone().rotate(n,90);return n.move(o,t),r.move(s,t),e},pointAt:function(t){var e=this.start,n=this.end;return t<=0?e.clone():t>=1?n.clone():e.lerp(n,t)},pointAtLength:function(t){var e=this.start,n=this.end,r=!0;t<0&&(r=!1,t=-t);var s=this.length();return t>=s?r?n.clone():e.clone():this.pointAt((r?t:s-t)/s)},pointOffset:function(t){t=new I(t);var e=this.start,n=this.end;return((n.x-e.x)*(t.y-e.y)-(n.y-e.y)*(t.x-e.x))/this.length()},rotate:function(t,e){return this.start.rotate(t,e),this.end.rotate(t,e),this},round:function(t){return this.start.round(t),this.end.round(t),this},scale:function(t,e,n){return this.start.scale(t,e,n),this.end.scale(t,e,n),this},setLength:function(t){var e=this.length();if(!e)return this;var n=t/e;return this.scale(n,n,this.start)},squaredLength:function(){return Xr(this.start,this.end)},tangentAt:function(t){if(!this.isDifferentiable())return null;var e=this.start,n=this.end,r=this.pointAt(t),s=new tt(e,n);return s.translate(r.x-e.x,r.y-e.y),s},tangentAtLength:function(t){if(!this.isDifferentiable())return null;var e=this.start,n=this.end,r=this.pointAtLength(t),s=new tt(e,n);return s.translate(r.x-e.x,r.y-e.y),s},toString:function(){return this.start.toString()+" "+this.end.toString()},serialize:function(){return this.start.serialize()+" "+this.end.serialize()},translate:function(t,e){return this.start.translate(t,e),this.end.translate(t,e),this},vector:function(){return new I(this.end.x-this.start.x,this.end.y-this.start.y)}},tt.prototype.intersection=tt.prototype.intersect;const Ct=tt,{sqrt:jt,round:ue,pow:Qe}=Math,ce=function(t,e,n){return this instanceof ce?t instanceof ce?new ce(new I(t.x,t.y),t.a,t.b):(t=new I(t),this.x=t.x,this.y=t.y,this.a=e,void(this.b=n)):new ce(t,e,n)};ce.fromRect=function(t){return t=new Lt(t),new ce(t.center(),t.width/2,t.height/2)},ce.prototype={type:Ht.Ellipse,bbox:function(){return new Lt(this.x-this.a,this.y-this.b,2*this.a,2*this.b)},center:function(){return new I(this.x,this.y)},clone:function(){return new ce(this)},containsPoint:function(t){return this.normalizedDistance(t)<=1},equals:function(t){return!!t&&t.x===this.x&&t.y===this.y&&t.a===this.a&&t.b===this.b},inflate:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.a+=2*t,this.b+=2*e,this},intersectionWithLine:function(t){var e=[],n=t.start,r=t.end,s=this.a,o=this.b,l=t.vector(),f=n.difference(new I(this)),d=new I(l.x/(s*s),l.y/(o*o)),m=new I(f.x/(s*s),f.y/(o*o)),A=l.dot(d),p=l.dot(m),B=p*p-A*(f.dot(m)-1);if(B<0)return null;if(B>0){var j=jt(B),q=(-p-j)/A,et=(-p+j)/A;if((q<0||1<q)&&(et<0||1<et))return null;0<=q&&q<=1&&e.push(n.lerp(r,q)),0<=et&&et<=1&&e.push(n.lerp(r,et))}else{var ht=-p/A;if(!(0<=ht&&ht<=1))return null;e.push(n.lerp(r,ht))}return e},intersectionWithLineFromCenterToPoint:function(t,e){t=new I(t),e&&t.rotate(new I(this.x,this.y),e);var s,n=t.x-this.x,r=t.y-this.y;if(0===n)return s=this.bbox().pointNearestToPoint(t),e?s.rotate(new I(this.x,this.y),-e):s;var o=r/n,m=jt(1/(1/(this.a*this.a)+o*o/(this.b*this.b)));return s=new I(this.x+(m=n<0?-m:m),this.y+o*m),e?s.rotate(new I(this.x,this.y),-e):s},normalizedDistance:function(t){var e=t.x,n=t.y,r=this.a,s=this.b,o=this.x,l=this.y;return(e-o)*(e-o)/(r*r)+(n-l)*(n-l)/(s*s)},round:function(t){let e=1;if(t)switch(t){case 1:e=10;break;case 2:e=100;break;case 3:e=1e3;break;default:e=Qe(10,t)}return this.x=ue(this.x*e)/e,this.y=ue(this.y*e)/e,this.a=ue(this.a*e)/e,this.b=ue(this.b*e)/e,this},tangentTheta:function(t){var p,D,n=t.x,r=t.y,s=this.a,o=this.b,l=this.bbox().center(),f=l.x,d=l.y;return n>l.x+s/2||n<l.x-s/2?D=s*s/(n-f)-s*s*(r-d)*((p=n>l.x?r-30:r+30)-d)/(o*o*(n-f))+f:p=o*o/(r-d)-o*o*(n-f)*((D=r>l.y?n+30:n-30)-f)/(s*s*(r-d))+d,new I(D,p).theta(t)},toString:function(){return new I(this.x,this.y).toString()+" "+this.a+" "+this.b}};const vn=ce,{abs:Me,cos:On,sin:or,min:Hr,max:cn,round:wn,pow:Pn}=Math,Lt=function(t,e,n,r){if(!(this instanceof Lt))return new Lt(t,e,n,r);Object(t)===t&&(e=t.y,n=t.width,r=t.height,t=t.x),this.x=void 0===t?0:t,this.y=void 0===e?0:e,this.width=void 0===n?0:n,this.height=void 0===r?0:r};Lt.fromEllipse=function(t){return t=new ce(t),new Lt(t.x-t.a,t.y-t.b,2*t.a,2*t.b)},Lt.fromPointUnion=function(...t){if(0===t.length)return null;const e=new I;let n,r,s,o;n=r=1/0,s=o=-1/0;for(let l=0;l<t.length;l++){e.update(t[l]);const f=e.x,d=e.y;f<n&&(n=f),f>s&&(s=f),d<r&&(r=d),d>o&&(o=d)}return new Lt(n,r,s-n,o-r)},Lt.fromRectUnion=function(...t){if(0===t.length)return null;const e=new Lt;let n,r,s,o;n=r=1/0,s=o=-1/0;for(let l=0;l<t.length;l++){e.update(t[l]);const f=e.x,d=e.y,m=f+e.width,A=d+e.height;f<n&&(n=f),m>s&&(s=m),d<r&&(r=d),A>o&&(o=A)}return new Lt(n,r,s-n,o-r)},Lt.prototype={type:Ht.Rect,bbox:function(t){return this.clone().rotateAroundCenter(t)},rotateAroundCenter:function(t){if(!t)return this;const{width:e,height:n}=this,r=Ne(t),s=Me(or(r)),o=Me(On(r)),l=e*o+n*s,f=e*s+n*o;return this.x+=(e-l)/2,this.y+=(n-f)/2,this.width=l,this.height=f,this},bottomLeft:function(){return new I(this.x,this.y+this.height)},bottomLine:function(){return new tt(this.bottomLeft(),this.bottomRight())},bottomMiddle:function(){return new I(this.x+this.width/2,this.y+this.height)},center:function(){return new I(this.x+this.width/2,this.y+this.height/2)},clone:function(){return new Lt(this)},containsPoint:function(t){return(t=new I(t)).x>=this.x&&t.x<=this.x+this.width&&t.y>=this.y&&t.y<=this.y+this.height},containsRect:function(t){var e=new Lt(this).normalize(),n=new Lt(t).normalize(),r=e.width,s=e.height,o=n.width,l=n.height;if(!(r&&s&&o&&l))return!1;var f=e.x,d=e.y,m=n.x,A=n.y;return o+=m,r+=f,l+=A,s+=d,f<=m&&o<=r&&d<=A&&l<=s},corner:function(){return new I(this.x+this.width,this.y+this.height)},equals:function(t){var e=new Lt(this).normalize(),n=new Lt(t).normalize();return e.x===n.x&&e.y===n.y&&e.width===n.width&&e.height===n.height},inflate:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},intersect:function(t){var e=this.origin(),n=this.corner(),r=t.origin(),s=t.corner();if(s.x<=e.x||s.y<=e.y||r.x>=n.x||r.y>=n.y)return null;var o=cn(e.x,r.x),l=cn(e.y,r.y);return new Lt(o,l,Hr(n.x,s.x)-o,Hr(n.y,s.y)-l)},intersectionWithLine:function(t){var o,l,e=this,n=[e.topLine(),e.rightLine(),e.bottomLine(),e.leftLine()],r=[],s=[],f=n.length;for(l=0;l<f;l++)null!==(o=t.intersect(n[l]))&&s.indexOf(o.toString())<0&&(r.push(o),s.push(o.toString()));return r.length>0?r:null},intersectionWithLineFromCenterToPoint:function(t,e){t=new I(t);var r,n=new I(this.x+this.width/2,this.y+this.height/2);e&&t.rotate(n,e);for(var s=[this.topLine(),this.rightLine(),this.bottomLine(),this.leftLine()],o=new tt(n,t),l=s.length-1;l>=0;--l){var f=s[l].intersection(o);if(null!==f){r=f;break}}return r&&e&&r.rotate(n,-e),r},leftLine:function(){return new tt(this.topLeft(),this.bottomLeft())},leftMiddle:function(){return new I(this.x,this.y+this.height/2)},maxRectScaleToFit:function(t,e){t=new Lt(t),e||(e=t.center());var n,r,s,o,l,f,d,m,A=e.x,p=e.y;n=r=s=o=l=f=d=m=1/0;var D=t.topLeft();D.x<A&&(n=(this.x-A)/(D.x-A)),D.y<p&&(l=(this.y-p)/(D.y-p));var B=t.bottomRight();B.x>A&&(r=(this.x+this.width-A)/(B.x-A)),B.y>p&&(f=(this.y+this.height-p)/(B.y-p));var j=t.topRight();j.x>A&&(s=(this.x+this.width-A)/(j.x-A)),j.y<p&&(d=(this.y-p)/(j.y-p));var q=t.bottomLeft();return q.x<A&&(o=(this.x-A)/(q.x-A)),q.y>p&&(m=(this.y+this.height-p)/(q.y-p)),{sx:Hr(n,r,s,o),sy:Hr(l,f,d,m)}},maxRectUniformScaleToFit:function(t,e){var n=this.maxRectScaleToFit(t,e);return Hr(n.sx,n.sy)},moveAndExpand:function(t){return this.x+=t.x||0,this.y+=t.y||0,this.width+=t.width||0,this.height+=t.height||0,this},normalize:function(){var t=this.x,e=this.y,n=this.width,r=this.height;return this.width<0&&(t=this.x+this.width,n=-this.width),this.height<0&&(e=this.y+this.height,r=-this.height),this.x=t,this.y=e,this.width=n,this.height=r,this},offset:function(t,e){return I.prototype.offset.call(this,t,e)},origin:function(){return new I(this.x,this.y)},pointNearestToPoint:function(t){if(t=new I(t),this.containsPoint(t))switch(this.sideNearestToPoint(t)){case"right":return new I(this.x+this.width,t.y);case"left":return new I(this.x,t.y);case"bottom":return new I(t.x,this.y+this.height);case"top":return new I(t.x,this.y)}return t.adhereToRect(this)},rightLine:function(){return new tt(this.topRight(),this.bottomRight())},rightMiddle:function(){return new I(this.x+this.width,this.y+this.height/2)},round:function(t){let e=1;if(t)switch(t){case 1:e=10;break;case 2:e=100;break;case 3:e=1e3;break;default:e=Pn(10,t)}return this.x=wn(this.x*e)/e,this.y=wn(this.y*e)/e,this.width=wn(this.width*e)/e,this.height=wn(this.height*e)/e,this},scale:function(t,e,n){return n=this.origin().scale(t,e,n),this.x=n.x,this.y=n.y,this.width*=t,this.height*=e,this},sideNearestToPoint:function(t){t=new I(t);var n=this.x+this.width-t.x,r=t.y-this.y,o=t.x-this.x,l="left";return n<o&&(o=n,l="right"),r<o&&(o=r,l="top"),this.y+this.height-t.y<o&&(l="bottom"),l},snapToGrid:function(t,e){var n=this.origin().snapToGrid(t,e),r=this.corner().snapToGrid(t,e);return this.x=n.x,this.y=n.y,this.width=r.x-n.x,this.height=r.y-n.y,this},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},topLine:function(){return new tt(this.topLeft(),this.topRight())},topMiddle:function(){return new I(this.x+this.width/2,this.y)},topRight:function(){return new I(this.x+this.width,this.y)},toString:function(){return this.origin().toString()+" "+this.corner().toString()},union:function(t){return Lt.fromRectUnion(this,t)},update:function(t,e,n,r){return Object(t)===t&&(e=t.y,n=t.width,r=t.height,t=t.x),this.x=t||0,this.y=e||0,this.width=n||0,this.height=r||0,this}},Lt.prototype.bottomRight=Lt.prototype.corner,Lt.prototype.topLeft=Lt.prototype.origin,Lt.prototype.translate=Lt.prototype.offset;const ji=Lt;function Zr(t){if(""===(t=t.trim()))return[];const e=[],n=t.split(/\s*,\s*|\s+/),r=n.length;for(let s=0;s<r;s+=2)e.push({x:+n[s],y:+n[s+1]});return e}function Bn(t){const e=t.length;if(0===e)return[];const n=[];for(let r=0;r<e;r++){const s=t[r].clone();n.push(s)}return n}function kn(t){const{abs:e}=Math;var n,r,o,s=t.length;if(0===s)return[];for(n=0;n<s;n++)(void 0===o||t[n].y<o.y||t[n].y===o.y&&t[n].x>o.x)&&(o=t[n]);var l=[];for(n=0;n<s;n++){var f=o.theta(t[n]);0===f&&(f=360),l.push([t[n],n,f])}l.sort(function(Pt,Ot){var Bt=Pt[2]-Ot[2];return 0===Bt&&(Bt=Ot[1]-Pt[1]),Bt}),l.length>2&&l.unshift(l[l.length-1]);for(var D,B,j,q,et,ht,A={},p=[];0!==l.length;)if(B=(D=l.pop())[0],!A.hasOwnProperty(D[0]+"@@"+D[1]))for(var ft=!1;!ft;)if(p.length<2)p.push(D),ft=!0;else{q=(j=p.pop())[0];var w=(ht=(et=p.pop())[0]).cross(q,B);if(w<0)p.push(et),p.push(j),p.push(D),ft=!0;else if(0===w){var P=q.angleBetween(ht,B);e(P-180)<1e-10||q.equals(B)||ht.equals(q)?(A[j[0]+"@@"+j[1]]=q,p.push(et)):e((P+1)%360-1)<1e-10&&(p.push(et),l.push(j))}else A[j[0]+"@@"+j[1]]=q,p.push(et)}p.length>2&&p.pop();var Z,X=-1;for(r=p.length,n=0;n<r;n++){var st=p[n][1];(void 0===Z||st<Z)&&(Z=st,X=n)}var ot=[];if(X>0){var vt=p.slice(X),Tt=p.slice(0,X);ot=vt.concat(Tt)}else ot=p;var xt=[];for(r=ot.length,n=0;n<r;n++)xt.push(ot[n][0]);return xt}const Ue=function(t){return this instanceof Ue?"string"==typeof t?new Ue.parse(t):void(this.points=Array.isArray(t)?t.map(I):[]):new Ue(t)};Ue.parse=function(t){return new Ue(Zr(t))},Ue.fromRect=function(t){return new Ue([t.topLeft(),t.topRight(),t.bottomRight(),t.bottomLeft(),t.topLeft()])},Ue.prototype={type:Ht.Polyline,bbox:function(){var t=1/0,e=-1/0,n=1/0,r=-1/0,s=this.points,o=s.length;if(0===o)return null;for(var l=0;l<o;l++){var f=s[l],d=f.x,m=f.y;d<t&&(t=d),d>e&&(e=d),m<n&&(n=m),m>r&&(r=m)}return new Lt(t,n,e-t,r-n)},clone:function(){return new Ue(Bn(this.points))},closestPoint:function(t){var e=this.closestPointLength(t);return this.pointAtLength(e)},closestPointLength:function(t){var e=this.lengthPoints(),n=e.length;if(0===n||1===n)return 0;for(var r,s=1/0,o=0,l=n-1,f=0;f<l;f++){var d=new tt(e[f],e[f+1]),m=d.length(),A=d.closestPointNormalizedLength(t),D=d.pointAt(A).squaredDistance(t);D<s&&(s=D,r=o+A*m),o+=m}return r},closestPointNormalizedLength:function(t){var e=this.closestPointLength(t);if(0===e)return 0;var n=this.length();return 0===n?0:e/n},closestPointTangent:function(t){var e=this.closestPointLength(t);return this.tangentAtLength(e)},containsPoint:function(t){var e=this.points,n=e.length;if(0===n)return!1;for(var r=t.x,s=t.y,o=n-1,l=0,f=0,d=new tt,m=new tt,A=new I;l<n;l++){var p=e[o],D=e[l];if(t.equals(p)||(d.start=p,d.end=D,d.containsPoint(t)))return!0;if(s<=p.y&&s>D.y||s>p.y&&s<=D.y){var B=p.x-r>D.x-r?p.x-r:D.x-r;B>=0&&(A.x=r+B,A.y=s,m.start=t,m.end=A,d.intersect(m)&&f++)}o=l}return f%2==1},close:function(){const{start:t,end:e,points:n}=this;return t&&e&&!t.equals(e)&&n.push(t.clone()),this},lengthPoints:function(){return this.points},convexHull:function(){return new Ue(kn(this.points))},equals:function(t){if(!t)return!1;var e=this.points,r=e.length;if(t.points.length!==r)return!1;for(var s=0;s<r;s++)if(!e[s].equals(t.points[s]))return!1;return!0},intersectionWithLine:function(t){for(var e=new tt(t),n=[],r=this.lengthPoints(),s=new tt,o=0,l=r.length-1;o<l;o++){s.start=r[o],s.end=r[o+1];var f=e.intersectionWithLine(s);f&&n.push(f[0])}return n.length>0?n:null},isDifferentiable:function(){var t=this.points,e=t.length;if(0===e)return!1;for(var n=new tt,r=e-1,s=0;s<r;s++)if(n.start=t[s],n.end=t[s+1],n.isDifferentiable())return!0;return!1},length:function(){var t=this.lengthPoints(),e=t.length;if(0===e)return 0;for(var n=0,r=e-1,s=0;s<r;s++)n+=t[s].distance(t[s+1]);return n},pointAt:function(t){var e=this.lengthPoints(),n=e.length;if(0===n)return null;if(1===n||t<=0)return e[0].clone();if(t>=1)return e[n-1].clone();var r=this.length();return this.pointAtLength(r*t)},pointAtLength:function(t){var e=this.lengthPoints(),n=e.length;if(0===n)return null;if(1===n)return e[0].clone();var r=!0;t<0&&(r=!1,t=-t);for(var s=0,o=n-1,l=0;l<o;l++){var f=r?l:o-1-l,d=e[f],m=e[f+1],A=new tt(d,m),p=d.distance(m);if(t<=s+p)return A.pointAtLength((r?1:-1)*(t-s));s+=p}return(r?e[n-1]:e[0]).clone()},round:function(t){for(var e=this.points,n=e.length,r=0;r<n;r++)e[r].round(t);return this},scale:function(t,e,n){for(var r=this.points,s=r.length,o=0;o<s;o++)r[o].scale(t,e,n);return this},simplify:function(t={}){const e=this.points;if(e.length<3)return this;const n=t.threshold||0;let r=0;for(;e[r+2];){const o=r+1,d=e[o];new tt(e[r],e[r+2]).closestPoint(d).distance(d)<=n?e.splice(o,1):r+=1}return this},tangentAt:function(t){var n=this.lengthPoints().length;if(0===n||1===n)return null;t<0&&(t=0),t>1&&(t=1);var r=this.length();return this.tangentAtLength(r*t)},tangentAtLength:function(t){var e=this.lengthPoints(),n=e.length;if(0===n||1===n)return null;var r=!0;t<0&&(r=!1,t=-t);for(var s,o=0,l=n-1,f=0;f<l;f++){var d=r?f:l-1-f,m=e[d],A=e[d+1],p=new tt(m,A),D=m.distance(A);if(p.isDifferentiable()){if(t<=o+D)return p.tangentAtLength((r?1:-1)*(t-o));s=p}o+=D}return s?s.tangentAt(r?1:0):null},toString:function(){return this.points+""},translate:function(t,e){for(var n=this.points,r=n.length,s=0;s<r;s++)n[s].translate(t,e);return this},serialize:function(){var t=this.points,e=t.length;if(0===e)return"";for(var n="",r=0;r<e;r++){var s=t[r];n+=s.x+","+s.y+" "}return n.trim()}},Object.defineProperty(Ue.prototype,"start",{configurable:!0,enumerable:!0,get:function(){return 0===this.points.length?null:this.points[0]}}),Object.defineProperty(Ue.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var e=this.points.length;return 0===e?null:this.points[e-1]}});const{abs:bs,sqrt:ns,min:xs,max:wi,pow:fi}=Math,Se=function(t,e,n,r){return this instanceof Se?t instanceof Se?new Se(t.start,t.controlPoint1,t.controlPoint2,t.end):(this.start=new I(t),this.controlPoint1=new I(e),this.controlPoint2=new I(n),void(this.end=new I(r))):new Se(t,e,n,r)};function Zi(t){var e,n,r=[];for(n=arguments.length,e=1;e<n;e++)r.push(arguments[e]);if(!t)throw new Error("Missing a parent object.");var s=Object.create(t);for(n=r.length,e=0;e<n;e++){var l,f,o=r[e];for(f in o)o.hasOwnProperty(f)&&(delete s[f],l=Object.getOwnPropertyDescriptor(o,f),Object.defineProperty(s,f,l))}return s}Se.throughPoints=function(){function e(n){var r=n.length,s=[],o=[],l=2;s[0]=n[0]/l;for(var f=1;f<r;f++)o[f]=1/l,s[f]=(n[f]-s[f-1])/(l=(f<r-1?4:3.5)-o[f]);for(f=1;f<r;f++)s[r-f-1]-=o[r-f]*s[r-f];return s}return function(n){if(!n||Array.isArray(n)&&n.length<2)throw new Error("At least 2 points are required");for(var r=function t(n){var l,r=[],s=[],o=n.length-1;if(1==o)return r[0]=new I((2*n[0].x+n[1].x)/3,(2*n[0].y+n[1].y)/3),s[0]=new I(2*r[0].x-n[0].x,2*r[0].y-n[0].y),[r,s];var f=[];for(l=1;l<o-1;l++)f[l]=4*n[l].x+2*n[l+1].x;f[0]=n[0].x+2*n[1].x,f[o-1]=(8*n[o-1].x+n[o].x)/2;var d=e(f);for(l=1;l<o-1;++l)f[l]=4*n[l].y+2*n[l+1].y;f[0]=n[0].y+2*n[1].y,f[o-1]=(8*n[o-1].y+n[o].y)/2;var m=e(f);for(l=0;l<o;l++)r.push(new I(d[l],m[l])),s.push(l<o-1?new I(2*n[l+1].x-d[l+1],2*n[l+1].y-m[l+1]):new I((n[o].x+d[o-1])/2,(n[o].y+m[o-1])/2));return[r,s]}(n),s=[],o=r[0].length,l=0;l<o;l++){var f=new I(r[0][l].x,r[0][l].y),d=new I(r[1][l].x,r[1][l].y);s.push(new Se(n[l],f,d,n[l+1]))}return s}}(),Se.prototype={type:Ht.Curve,bbox:function(){for(var q,et,ht,ft,w,S,P,Z,t=this.start,e=this.controlPoint1,n=this.controlPoint2,r=this.end,s=t.x,o=t.y,l=e.x,f=e.y,d=n.x,m=n.y,A=r.x,p=r.y,D=new Array,B=new Array,j=[new Array,new Array],X=0;X<2;++X)if(0===X?(et=6*s-12*l+6*d,q=-3*s+9*l-9*d+3*A,ht=3*l-3*s):(et=6*o-12*f+6*m,q=-3*o+9*f-9*m+3*p,ht=3*f-3*o),bs(q)<1e-12){if(bs(et)<1e-12)continue;0<(ft=-ht/et)&&ft<1&&B.push(ft)}else Z=ns(P=et*et-4*ht*q),!(P<0)&&(0<(w=(-et+Z)/(2*q))&&w<1&&B.push(w),0<(S=(-et-Z)/(2*q))&&S<1&&B.push(S));for(var vt,Tt,xt,st=B.length,ot=st;st--;)j[0][st]=Tt=(vt=1-(ft=B[st]))*vt*vt*s+3*vt*vt*ft*l+3*vt*ft*ft*d+ft*ft*ft*A,j[1][st]=xt=vt*vt*vt*o+3*vt*vt*ft*f+3*vt*ft*ft*m+ft*ft*ft*p,D[st]={X:Tt,Y:xt};B[ot]=0,B[ot+1]=1,D[ot]={X:s,Y:o},D[ot+1]={X:A,Y:p},j[0][ot]=s,j[1][ot]=o,j[0][ot+1]=A,j[1][ot+1]=p,B.length=ot+2,j[0].length=ot+2,j[1].length=ot+2,D.length=ot+2;var Pt=xs.apply(null,j[0]),Ot=xs.apply(null,j[1]),Bt=wi.apply(null,j[0]),Vt=wi.apply(null,j[1]);return new Lt(Pt,Ot,Bt-Pt,Vt-Ot)},clone:function(){return new Se(this.start,this.controlPoint1,this.controlPoint2,this.end)},closestPoint:function(t,e){return this.pointAtT(this.closestPointT(t,e))},closestPointLength:function(t,e){var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,s={precision:n,subdivisions:void 0===e.subdivisions?this.getSubdivisions({precision:n}):e.subdivisions};return this.lengthAtT(this.closestPointT(t,s),s)},closestPointNormalizedLength:function(t,e){var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,s={precision:n,subdivisions:void 0===e.subdivisions?this.getSubdivisions({precision:n}):e.subdivisions},o=this.closestPointLength(t,s);if(!o)return 0;var l=this.length(s);return 0===l?0:o/l},closestPointT:function(t,e){for(var s,o,l,f,d,m,A,n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,r=void 0===e.subdivisions?this.getSubdivisions({precision:n}):e.subdivisions,p=r.length,D=p?1/p:0,B=0;B<p;B++){var j=r[B],q=j.start.distance(t),et=j.end.distance(t),ht=q+et;(!A||ht<A)&&(s=j,o=B*D,l=(B+1)*D,f=q,d=et,m=j.start.distance(j.end),A=ht)}for(var ft=fi(10,-n);;){var w=f?bs(f-d)/f:0,S=d?bs(f-d)/d:0;if(w<ft||S<ft||!f||f<m*ft||!d||d<m*ft)return f<=d?o:l;var ot=s.divide(.5);D/=2;var vt=ot[0].start.distance(t),Tt=ot[0].end.distance(t),xt=vt+Tt,Pt=ot[1].start.distance(t),Ot=ot[1].end.distance(t);xt<=Pt+Ot?(s=ot[0],l-=D,f=vt,d=Tt):(s=ot[1],o+=D,f=Pt,d=Ot)}},closestPointTangent:function(t,e){return this.tangentAtT(this.closestPointT(t,e))},containsPoint:function(t,e){return this.toPolyline(e).containsPoint(t)},divideAt:function(t,e){if(t<=0)return this.divideAtT(0);if(t>=1)return this.divideAtT(1);var n=this.tAt(t,e);return this.divideAtT(n)},divideAtLength:function(t,e){var n=this.tAtLength(t,e);return this.divideAtT(n)},divideAtT:function(t){var e=this.start,n=this.controlPoint1,r=this.controlPoint2,s=this.end;if(t<=0)return[new Se(e,e,e,e),new Se(e,n,r,s)];if(t>=1)return[new Se(e,n,r,s),new Se(s,s,s,s)];var o=this.getSkeletonPoints(t),d=o.divider,m=o.dividerControlPoint1,A=o.dividerControlPoint2;return[new Se(e,o.startControlPoint1,o.startControlPoint2,d),new Se(d,m,A,s)]},endpointDistance:function(){return this.start.distance(this.end)},equals:function(t){return!!t&&this.start.x===t.start.x&&this.start.y===t.start.y&&this.controlPoint1.x===t.controlPoint1.x&&this.controlPoint1.y===t.controlPoint1.y&&this.controlPoint2.x===t.controlPoint2.x&&this.controlPoint2.y===t.controlPoint2.y&&this.end.x===t.end.x&&this.end.y===t.end.y},getSkeletonPoints:function(t){var e=this.start,n=this.controlPoint1,r=this.controlPoint2,s=this.end;if(t<=0)return{startControlPoint1:e.clone(),startControlPoint2:e.clone(),divider:e.clone(),dividerControlPoint1:n.clone(),dividerControlPoint2:r.clone()};if(t>=1)return{startControlPoint1:n.clone(),startControlPoint2:r.clone(),divider:s.clone(),dividerControlPoint1:s.clone(),dividerControlPoint2:s.clone()};var o=new tt(e,n).pointAt(t),l=new tt(n,r).pointAt(t),f=new tt(r,s).pointAt(t),d=new tt(o,l).pointAt(t),m=new tt(l,f).pointAt(t);return{startControlPoint1:o,startControlPoint2:d,divider:new tt(d,m).pointAt(t),dividerControlPoint1:m,dividerControlPoint2:f}},getSubdivisions:function(t){var e=void 0===(t=t||{}).precision?this.PRECISION:t.precision,n=[new Se(this.start,this.controlPoint1,this.controlPoint2,this.end)];if(0===e)return n;for(var r=this.endpointDistance(),s=fi(10,-e),o=0;;){o+=1;for(var l=[],f=n.length,d=0;d<f;d++){var A=n[d].divide(.5);l.push(A[0],A[1])}for(var p=0,D=l.length,B=0;B<D;B++)p+=l[B].endpointDistance();if(o>1&&(0!==p?(p-r)/p:0)<s)return l;n=l,r=p}},isDifferentiable:function(){var e=this.controlPoint1,n=this.controlPoint2,r=this.end;return!(this.start.equals(e)&&e.equals(n)&&n.equals(r))},length:function(t){for(var n=void 0===(t=t||{}).subdivisions?this.getSubdivisions({precision:void 0===t.precision?this.PRECISION:t.precision}):t.subdivisions,r=0,s=n.length,o=0;o<s;o++)r+=n[o].endpointDistance();return r},lengthAtT:function(t,e){if(t<=0)return 0;var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision;return this.divide(t)[0].length({precision:n})},pointAt:function(t,e){if(t<=0)return this.start.clone();if(t>=1)return this.end.clone();var n=this.tAt(t,e);return this.pointAtT(n)},pointAtLength:function(t,e){var n=this.tAtLength(t,e);return this.pointAtT(n)},pointAtT:function(t){return t<=0?this.start.clone():t>=1?this.end.clone():this.getSkeletonPoints(t).divider},PRECISION:3,round:function(t){return this.start.round(t),this.controlPoint1.round(t),this.controlPoint2.round(t),this.end.round(t),this},scale:function(t,e,n){return this.start.scale(t,e,n),this.controlPoint1.scale(t,e,n),this.controlPoint2.scale(t,e,n),this.end.scale(t,e,n),this},tangentAt:function(t,e){if(!this.isDifferentiable())return null;t<0?t=0:t>1&&(t=1);var n=this.tAt(t,e);return this.tangentAtT(n)},tangentAtLength:function(t,e){if(!this.isDifferentiable())return null;var n=this.tAtLength(t,e);return this.tangentAtT(n)},tangentAtT:function(t){if(!this.isDifferentiable())return null;t<0?t=0:t>1&&(t=1);var e=this.getSkeletonPoints(t),n=e.startControlPoint2,s=e.divider,o=new tt(n,e.dividerControlPoint1);return o.translate(s.x-n.x,s.y-n.y),o},tAt:function(t,e){if(t<=0)return 0;if(t>=1)return 1;var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,s={precision:n,subdivisions:void 0===e.subdivisions?this.getSubdivisions({precision:n}):e.subdivisions},o=this.length(s);return this.tAtLength(o*t,s)},tAtLength:function(t,e){var n=!0;t<0&&(n=!1,t=-t);for(var l,f,d,m,A,r=void 0===(e=e||{}).precision?this.PRECISION:e.precision,s=void 0===e.subdivisions?this.getSubdivisions({precision:r}):e.subdivisions,o={precision:r,subdivisions:s},p=0,D=s.length,B=1/D,j=0;j<D;j++){var q=n?j:D-1-j,et=s[j],ht=et.endpointDistance();if(t<=p+ht){l=et,f=q*B,d=(q+1)*B,m=n?t-p:ht+p-t,A=n?ht+p-t:t-p;break}p+=ht}if(!l)return n?1:0;for(var ft=this.length(o),w=fi(10,-r);;){if((0!==ft?m/ft:0)<w)return f;if((0!==ft?A/ft:0)<w)return d;var P,Z,X=l.divide(.5);B/=2;var st=X[0].endpointDistance(),ot=X[1].endpointDistance();m<=st?(l=X[0],d-=B,Z=st-(P=m)):(l=X[1],f+=B,Z=ot-(P=m-st)),m=P,A=Z}},toPoints:function(t){for(var n=void 0===(t=t||{}).subdivisions?this.getSubdivisions({precision:void 0===t.precision?this.PRECISION:t.precision}):t.subdivisions,r=[n[0].start.clone()],s=n.length,o=0;o<s;o++)r.push(n[o].end.clone());return r},toPolyline:function(t){return new Ue(this.toPoints(t))},toString:function(){return this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(t,e){return this.start.translate(t,e),this.controlPoint1.translate(t,e),this.controlPoint2.translate(t,e),this.end.translate(t,e),this}},Se.prototype.divide=Se.prototype.divideAtT;const _t=function(t){if(!(this instanceof _t))return new _t(t);if("string"==typeof t)return new _t.parse(t);var e,n;if(this.segments=[],t)if(Array.isArray(t)&&0!==t.length)if(n=(t=t.reduce(function(f,d){return f.concat(d)},[])).length,t[0].isSegment)for(e=0;e<n;e++)this.appendSegment(t[e]);else{var s=null;for(e=0;e<n;e++){var o=t[e];if(!(o instanceof tt||o instanceof Se))throw new Error("Cannot construct a path segment from the provided object.");0===e&&this.appendSegment(_t.createSegment("M",o.start)),s&&!s.end.equals(o.start)&&this.appendSegment(_t.createSegment("M",o.start)),o instanceof tt?this.appendSegment(_t.createSegment("L",o.end)):o instanceof Se&&this.appendSegment(_t.createSegment("C",o.controlPoint1,o.controlPoint2,o.end)),s=o}}else if(t.isSegment)this.appendSegment(t);else if(t instanceof tt)this.appendSegment(_t.createSegment("M",t.start)),this.appendSegment(_t.createSegment("L",t.end));else if(t instanceof Se)this.appendSegment(_t.createSegment("M",t.start)),this.appendSegment(_t.createSegment("C",t.controlPoint1,t.controlPoint2,t.end));else{if(!(t instanceof Ue))throw new Error("Cannot construct a path from the provided object.");if(!t.points||0===t.points.length)return;for(n=t.points.length,e=0;e<n;e++){this.appendSegment(_t.createSegment(0===e?"M":"L",t.points[e]))}}};function ur(t,e){return e.unshift(null),new(Function.prototype.bind.apply(t,e))}_t.parse=function(t){if(!t)return new _t;for(var e=new _t,r=t.match(/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g),s=r.length,o=0;o<s;o++){var d=r[o].match(/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g),m=_t.createSegment.apply(this,d);e.appendSegment(m)}return e},_t.createSegment=function(t){if(!t)throw new Error("Type must be provided.");var e=_t.segmentTypes[t];if(!e)throw new Error(t+" is not a recognized path segment type.");for(var n=[],r=arguments.length,s=1;s<r;s++)n.push(arguments[s]);return ur(e,n)},_t.prototype={type:Ht.Path,appendSegment:function(t){var r,e=this.segments,n=e.length,s=0!==n?e[n-1]:null;if(Array.isArray(t)){if(!(t=t.reduce(function(m,A){return m.concat(A)},[]))[0].isSegment)throw new Error("Segments required.");for(var l=t.length,f=0;f<l;f++)r=this.prepareSegment(t[f],s,null),e.push(r),s=r}else{if(!t||!t.isSegment)throw new Error("Segment required.");r=this.prepareSegment(t,s,null),e.push(r)}},bbox:function(){var t=this.segments,e=t.length;if(0===e)return null;for(var n,r=0;r<e;r++){var s=t[r];if(s.isVisible){var o=s.bbox();n=n?n.union(o):o}}if(n)return n;var l=t[e-1];return new Lt(l.end.x,l.end.y,0,0)},clone:function(){for(var t=this.segments,e=t.length,n=new _t,r=0;r<e;r++){var s=t[r].clone();n.appendSegment(s)}return n},closestPoint:function(t,e){var n=this.closestPointT(t,e);return n?this.pointAtT(n):null},closestPointLength:function(t,e){var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,s={precision:n,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions},o=this.closestPointT(t,s);return o?this.lengthAtT(o,s):0},closestPointNormalizedLength:function(t,e){var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,s={precision:n,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions},o=this.closestPointLength(t,s);if(0===o)return 0;var l=this.length(s);return 0===l?0:o/l},closestPointT:function(t,e){var n=this.segments,r=n.length;if(0===r)return null;for(var l,s=void 0===(e=e||{}).precision?this.PRECISION:e.precision,o=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:s}):e.segmentSubdivisions,f=1/0,d=0;d<r;d++){var m=n[d];if(m.isVisible){var p=m.closestPointT(t,{precision:s,subdivisions:o[d]}),D=m.pointAtT(p),B=new tt(D,t).squaredLength();B<f&&(l={segmentIndex:d,value:p},f=B)}}return l||{segmentIndex:r-1,value:1}},closestPointTangent:function(t,e){var n=this.segments,r=n.length;if(0===r)return null;for(var l,s=void 0===(e=e||{}).precision?this.PRECISION:e.precision,o=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:s}):e.segmentSubdivisions,f=1/0,d=0;d<r;d++){var m=n[d],A=o[d];if(m.isDifferentiable()){var p=m.closestPointT(t,{precision:s,subdivisions:A}),D=m.pointAtT(p),B=new tt(D,t).squaredLength();B<f&&(l=m.tangentAtT(p),f=B)}}return l||null},containsPoint:function(t,e){var n=this.toPolylines(e);if(!n)return!1;for(var r=n.length,s=0,o=0;o<r;o++)n[o].containsPoint(t)&&s++;return s%2==1},divideAt:function(t,e){if(0===this.segments.length)return null;t<0&&(t=0),t>1&&(t=1);var s=void 0===(e=e||{}).precision?this.PRECISION:e.precision,l={precision:s,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:s}):e.segmentSubdivisions},f=this.length(l);return this.divideAtLength(f*t,l)},divideAtLength:function(t,e){var n=this.segments.length;if(0===n)return null;var r=!0;t<0&&(r=!1,t=-t);var l,f,m,A,p,D,s=void 0===(e=e||{}).precision?this.PRECISION:e.precision,o=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:s}):e.segmentSubdivisions,d=0;for(l=0;l<n;l++){var j=r?l:n-1-l;f=this.getSegment(j);var q=o[j],et=f.length({precision:s,subdivisions:q});if(f.isDifferentiable()&&(p=f,D=j,t<=d+et)){A=j,m=f.divideAtLength((r?1:-1)*(t-d),{precision:s,subdivisions:q});break}d+=et}if(!p)return null;m||(A=D,m=p.divideAtT(r?1:0));var ht=this.clone();ht.replaceSegment(A,m);var ft=A,w=A+1,S=A+2;m[0].isDifferentiable()||(ht.removeSegment(ft),w-=1,S-=1);var P=ht.getSegment(w).start;ht.insertSegment(w,_t.createSegment("M",P)),S+=1,m[1].isDifferentiable()||(ht.removeSegment(S-1),S-=1);var Z=S-ft-1;for(l=S;l<ht.segments.length;l++){var X=this.getSegment(l-Z);if("Z"===(f=ht.getSegment(l)).type&&!X.subpathStartSegment.end.equals(f.subpathStartSegment.end)){var st=_t.createSegment("L",X.end);ht.replaceSegment(l,st)}}return[new _t(ht.segments.slice(0,w)),new _t(ht.segments.slice(w))]},equals:function(t){if(!t)return!1;var e=this.segments,n=t.segments,r=e.length;if(n.length!==r)return!1;for(var s=0;s<r;s++){var o=e[s],l=n[s];if(o.type!==l.type||!o.equals(l))return!1}return!0},getSegment:function(t){var e=this.segments,n=e.length;if(0===n)throw new Error("Path has no segments.");if(t<0&&(t=n+t),t>=n||t<0)throw new Error("Index out of range.");return e[t]},getSegmentSubdivisions:function(t){for(var e=this.segments,n=e.length,r=void 0===(t=t||{}).precision?this.PRECISION:t.precision,s=[],o=0;o<n;o++){var f=e[o].getSubdivisions({precision:r});s.push(f)}return s},getSubpaths:function(){const e=this.clone().validate().segments,n=e.length,r=[];for(let s=0;s<n;s++){const o=e[s];o.isSubpathStart?r.push(new _t(o)):r[r.length-1].appendSegment(o)}return r},insertSegment:function(t,e){var n=this.segments,r=n.length;if(t<0&&(t=r+t+1),t>r||t<0)throw new Error("Index out of range.");var s,o=null,l=null;if(0!==r&&(l=t>=1?(o=n[t-1]).nextSegment:n[0]),Array.isArray(e)){if(!(e=e.reduce(function(A,p){return A.concat(p)},[]))[0].isSegment)throw new Error("Segments required.");for(var f=e.length,d=0;d<f;d++)s=this.prepareSegment(e[d],o,l),n.splice(t+d,0,s),o=s}else{if(!e||!e.isSegment)throw new Error("Segment required.");s=this.prepareSegment(e,o,l),n.splice(t,0,s)}},intersectionWithLine:function(t,e){var n=null,r=this.toPolylines(e);if(!r)return null;for(var s=0,o=r.length;s<o;s++){var f=t.intersect(r[s]);f&&(n||(n=[]),Array.isArray(f)?Array.prototype.push.apply(n,f):n.push(f))}return n},isDifferentiable:function(){for(var t=this.segments,e=t.length,n=0;n<e;n++)if(t[n].isDifferentiable())return!0;return!1},isValid:function(){var t=this.segments;return 0===t.length||"M"===t[0].type},length:function(t){var e=this.segments,n=e.length;if(0===n)return 0;for(var s=void 0===(t=t||{}).segmentSubdivisions?this.getSegmentSubdivisions({precision:void 0===t.precision?this.PRECISION:t.precision}):t.segmentSubdivisions,o=0,l=0;l<n;l++)o+=e[l].length({subdivisions:s[l]});return o},lengthAtT:function(t,e){var n=this.segments,r=n.length;if(0===r)return 0;var s=t.segmentIndex;if(s<0)return 0;var o=t.value;s>=r?(s=r-1,o=1):o<0?o=0:o>1&&(o=1);for(var l=void 0===(e=e||{}).precision?this.PRECISION:e.precision,f=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:l}):e.segmentSubdivisions,m=0,A=0;A<s;A++){var p=n[A];m+=p.length({precisison:l,subdivisions:f[A]})}return m+(p=n[s]).lengthAtT(o,{precisison:l,subdivisions:f[s]})},pointAt:function(t,e){if(0===this.segments.length)return null;if(t<=0)return this.start.clone();if(t>=1)return this.end.clone();var s=void 0===(e=e||{}).precision?this.PRECISION:e.precision,l={precision:s,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:s}):e.segmentSubdivisions},f=this.length(l);return this.pointAtLength(f*t,l)},pointAtLength:function(t,e){var n=this.segments,r=n.length;if(0===r)return null;if(0===t)return this.start.clone();var s=!0;t<0&&(s=!1,t=-t);for(var f,o=void 0===(e=e||{}).precision?this.PRECISION:e.precision,l=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):e.segmentSubdivisions,d=0,m=0;m<r;m++){var A=s?m:r-1-m,p=n[A],D=l[A],B=p.length({precision:o,subdivisions:D});if(p.isVisible){if(t<=d+B)return p.pointAtLength((s?1:-1)*(t-d),{precision:o,subdivisions:D});f=p}d+=B}return f?s?f.end:f.start:n[r-1].end.clone()},pointAtT:function(t){var e=this.segments,n=e.length;if(0===n)return null;var r=t.segmentIndex;if(r<0)return e[0].pointAtT(0);if(r>=n)return e[n-1].pointAtT(1);var s=t.value;return s<0?s=0:s>1&&(s=1),e[r].pointAtT(s)},PRECISION:3,prepareSegment:function(t,e,n){t.previousSegment=e,t.nextSegment=n,e&&(e.nextSegment=t),n&&(n.previousSegment=t);var r=t;return t.isSubpathStart&&(t.subpathStartSegment=t,r=n),r&&this.updateSubpathStartSegment(r),t},removeSegment:function(t){var e=this.segments,n=e.length;if(0===n)throw new Error("Path has no segments.");if(t<0&&(t=n+t),t>=n||t<0)throw new Error("Index out of range.");var r=e.splice(t,1)[0],s=r.previousSegment,o=r.nextSegment;s&&(s.nextSegment=o),o&&(o.previousSegment=s),r.isSubpathStart&&o&&this.updateSubpathStartSegment(o)},replaceSegment:function(t,e){var n=this.segments,r=n.length;if(0===r)throw new Error("Path has no segments.");if(t<0&&(t=r+t),t>=r||t<0)throw new Error("Index out of range.");var s,o=n[t],l=o.previousSegment,f=o.nextSegment,d=o.isSubpathStart;if(Array.isArray(e)){if(!(e=e.reduce(function(D,B){return D.concat(B)},[]))[0].isSegment)throw new Error("Segments required.");n.splice(t,1);for(var m=e.length,A=0;A<m;A++)s=this.prepareSegment(e[A],l,f),n.splice(t+A,0,s),l=s,d&&s.isSubpathStart&&(d=!1)}else{if(!e||!e.isSegment)throw new Error("Segment required.");s=this.prepareSegment(e,l,f),n.splice(t,1,s),d&&s.isSubpathStart&&(d=!1)}d&&f&&this.updateSubpathStartSegment(f)},round:function(t){for(var e=this.segments,n=e.length,r=0;r<n;r++)e[r].round(t);return this},scale:function(t,e,n){for(var r=this.segments,s=r.length,o=0;o<s;o++)r[o].scale(t,e,n);return this},segmentAt:function(t,e){var n=this.segmentIndexAt(t,e);return n?this.getSegment(n):null},segmentAtLength:function(t,e){var n=this.segmentIndexAtLength(t,e);return n?this.getSegment(n):null},segmentIndexAt:function(t,e){if(0===this.segments.length)return null;t<0&&(t=0),t>1&&(t=1);var s=void 0===(e=e||{}).precision?this.PRECISION:e.precision,l={precision:s,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:s}):e.segmentSubdivisions},f=this.length(l);return this.segmentIndexAtLength(f*t,l)},segmentIndexAtLength:function(t,e){var n=this.segments,r=n.length;if(0===r)return null;var s=!0;t<0&&(s=!1,t=-t);for(var o=void 0===(e=e||{}).precision?this.PRECISION:e.precision,l=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):e.segmentSubdivisions,f=null,d=0,m=0;m<r;m++){var A=s?m:r-1-m,p=n[A],B=p.length({precision:o,subdivisions:l[A]});if(p.isVisible){if(t<=d+B)return A;f=A}d+=B}return f},serialize:function(){if(!this.isValid())throw new Error("Invalid path segments.");return this.toString()},tangentAt:function(t,e){if(0===this.segments.length)return null;t<0&&(t=0),t>1&&(t=1);var s=void 0===(e=e||{}).precision?this.PRECISION:e.precision,l={precision:s,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:s}):e.segmentSubdivisions},f=this.length(l);return this.tangentAtLength(f*t,l)},tangentAtLength:function(t,e){var n=this.segments,r=n.length;if(0===r)return null;var s=!0;t<0&&(s=!1,t=-t);for(var f,o=void 0===(e=e||{}).precision?this.PRECISION:e.precision,l=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):e.segmentSubdivisions,d=0,m=0;m<r;m++){var A=s?m:r-1-m,p=n[A],D=l[A],B=p.length({precision:o,subdivisions:D});if(p.isDifferentiable()){if(t<=d+B)return p.tangentAtLength((s?1:-1)*(t-d),{precision:o,subdivisions:D});f=p}d+=B}return f?f.tangentAtT(s?1:0):null},tangentAtT:function(t){var e=this.segments,n=e.length;if(0===n)return null;var r=t.segmentIndex;if(r<0)return e[0].tangentAtT(0);if(r>=n)return e[n-1].tangentAtT(1);var s=t.value;return s<0?s=0:s>1&&(s=1),e[r].tangentAtT(s)},toPoints:function(t){var e=this.segments,n=e.length;if(0===n)return null;for(var s=void 0===(t=t||{}).segmentSubdivisions?this.getSegmentSubdivisions({precision:void 0===t.precision?this.PRECISION:t.precision}):t.segmentSubdivisions,o=[],l=[],f=0;f<n;f++){var d=e[f];if(d.isVisible){var m=s[f];if(m.length>0){var A=m.map(function(p){return p.start});Array.prototype.push.apply(l,A)}else l.push(d.start)}else l.length>0&&(l.push(e[f-1].end),o.push(l),l=[])}return l.length>0&&(l.push(this.end),o.push(l)),o},toPolylines:function(t){var e=[],n=this.toPoints(t);if(!n)return null;for(var r=0,s=n.length;r<s;r++)e.push(new Ue(n[r]));return e},toString:function(){for(var t=this.segments,e=t.length,n="",r=0;r<e;r++)n+=t[r].serialize()+" ";return n.trim()},translate:function(t,e){for(var n=this.segments,r=n.length,s=0;s<r;s++)n[s].translate(t,e);return this},updateSubpathStartSegment:function(t){for(var e=t.previousSegment;t&&!t.isSubpathStart;)t.subpathStartSegment=e?e.subpathStartSegment:null,e=t,t=t.nextSegment},validate:function(){return this.isValid()||this.insertSegment(0,_t.createSegment("M",0,0)),this}},Object.defineProperty(_t.prototype,"start",{configurable:!0,enumerable:!0,get:function(){var t=this.segments,e=t.length;if(0===e)return null;for(var n=0;n<e;n++){var r=t[n];if(r.isVisible)return r.start}return t[e-1].end}}),Object.defineProperty(_t.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var t=this.segments,e=t.length;if(0===e)return null;for(var n=e-1;n>=0;n--){var r=t[n];if(r.isVisible)return r.end}return t[e-1].end}});var Jr={bbox:function(){throw new Error("Declaration missing for virtual function.")},clone:function(){throw new Error("Declaration missing for virtual function.")},closestPoint:function(){throw new Error("Declaration missing for virtual function.")},closestPointLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointNormalizedLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointT:function(t){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(t);throw new Error("Neither closestPointT() nor closestPointNormalizedLength() function is implemented.")},closestPointTangent:function(){throw new Error("Declaration missing for virtual function.")},divideAt:function(){throw new Error("Declaration missing for virtual function.")},divideAtLength:function(){throw new Error("Declaration missing for virtual function.")},divideAtT:function(t){if(this.divideAt)return this.divideAt(t);throw new Error("Neither divideAtT() nor divideAt() function is implemented.")},equals:function(){throw new Error("Declaration missing for virtual function.")},getSubdivisions:function(){throw new Error("Declaration missing for virtual function.")},isDifferentiable:function(){throw new Error("Declaration missing for virtual function.")},isSegment:!0,isSubpathStart:!1,isVisible:!0,length:function(){throw new Error("Declaration missing for virtual function.")},lengthAtT:function(t){if(t<=0)return 0;var e=this.length();return t>=1?e:e*t},nextSegment:null,pointAt:function(){throw new Error("Declaration missing for virtual function.")},pointAtLength:function(){throw new Error("Declaration missing for virtual function.")},pointAtT:function(t){if(this.pointAt)return this.pointAt(t);throw new Error("Neither pointAtT() nor pointAt() function is implemented.")},previousSegment:null,round:function(){throw new Error("Declaration missing for virtual function.")},subpathStartSegment:null,scale:function(){throw new Error("Declaration missing for virtual function.")},serialize:function(){throw new Error("Declaration missing for virtual function.")},tangentAt:function(){throw new Error("Declaration missing for virtual function.")},tangentAtLength:function(){throw new Error("Declaration missing for virtual function.")},tangentAtT:function(t){if(this.tangentAt)return this.tangentAt(t);throw new Error("Neither tangentAtT() nor tangentAt() function is implemented.")},toString:function(){throw new Error("Declaration missing for virtual function.")},translate:function(){throw new Error("Declaration missing for virtual function.")}};Object.defineProperty(Jr,"end",{configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(Jr,"start",{configurable:!0,enumerable:!0,get:function(){if(!this.previousSegment)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path; OR segment has not yet been added to a path.)");return this.previousSegment.end}}),Object.defineProperty(Jr,"type",{configurable:!0,enumerable:!0,get:function(){throw new Error("Bad segment declaration. No type specified.")}});var En=function(){for(var t=[],e=arguments.length,n=0;n<e;n++)t.push(arguments[n]);if(!(this instanceof En))return ur(En,t);if(0===e)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates (none provided).");var r;if(t[0]instanceof tt){if(1===e)return this.end=t[0].end.clone(),this;throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+e+" lines provided).")}if("string"==typeof t[0]||"number"==typeof t[0]){if(2===e)return this.end=new I(+t[0],+t[1]),this;if(e<2)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+e+" coordinates provided).");var s;for(r=[],n=0;n<e;n+=2)s=t.slice(n,n+2),r.push(ur(En,s));return r}if(1===e)return this.end=new I(t[0]),this;for(r=[],n=0;n<e;n+=1)r.push(new En(t[n]));return r},bi={clone:function(){return new En(this.end)},divideAt:function(t){var n=new tt(this.start,this.end).divideAt(t);return[new En(n[0]),new En(n[1])]},divideAtLength:function(t){var n=new tt(this.start,this.end).divideAtLength(t);return[new En(n[0]),new En(n[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!!this.previousSegment&&!this.start.equals(this.end)},round:function(t){return this.end.round(t),this},scale:function(t,e,n){return this.end.scale(t,e,n),this},serialize:function(){var t=this.end;return this.type+" "+t.x+" "+t.y},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(t,e){return this.end.translate(t,e),this}};Object.defineProperty(bi,"type",{configurable:!0,enumerable:!0,value:"L"}),En.prototype=Zi(Jr,tt.prototype,bi);var lr=function(){for(var t=[],e=arguments.length,n=0;n<e;n++)t.push(arguments[n]);if(!(this instanceof lr))return ur(lr,t);if(0===e)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates (none provided).");var r,o;if(t[0]instanceof Se){if(1===e)return this.controlPoint1=t[0].controlPoint1.clone(),this.controlPoint2=t[0].controlPoint2.clone(),this.end=t[0].end.clone(),this;throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+e+" curves provided).")}if("string"==typeof t[0]||"number"==typeof t[0]){if(6===e)return this.controlPoint1=new I(+t[0],+t[1]),this.controlPoint2=new I(+t[2],+t[3]),this.end=new I(+t[4],+t[5]),this;if(e<6)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+e+" coordinates provided).");var s;for(r=[],n=0;n<e;n+=6)s=t.slice(n,n+6),r.push(ur(lr,s));return r}if(3===e)return this.controlPoint1=new I(t[0]),this.controlPoint2=new I(t[1]),this.end=new I(t[2]),this;if(e<3)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+e+" points provided).");for(r=[],n=0;n<e;n+=3)o=t.slice(n,n+3),r.push(ur(lr,o));return r},rs={clone:function(){return new lr(this.controlPoint1,this.controlPoint2,this.end)},divideAt:function(t,e){var r=new Se(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAt(t,e);return[new lr(r[0]),new lr(r[1])]},divideAtLength:function(t,e){var r=new Se(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAtLength(t,e);return[new lr(r[0]),new lr(r[1])]},divideAtT:function(t){var n=new Se(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAtT(t);return[new lr(n[0]),new lr(n[1])]},isDifferentiable:function(){if(!this.previousSegment)return!1;var e=this.controlPoint1,n=this.controlPoint2,r=this.end;return!(this.start.equals(e)&&e.equals(n)&&n.equals(r))},round:function(t){return this.controlPoint1.round(t),this.controlPoint2.round(t),this.end.round(t),this},scale:function(t,e,n){return this.controlPoint1.scale(t,e,n),this.controlPoint2.scale(t,e,n),this.end.scale(t,e,n),this},serialize:function(){var t=this.controlPoint1,e=this.controlPoint2,n=this.end;return this.type+" "+t.x+" "+t.y+" "+e.x+" "+e.y+" "+n.x+" "+n.y},toString:function(){return this.type+" "+this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(t,e){return this.controlPoint1.translate(t,e),this.controlPoint2.translate(t,e),this.end.translate(t,e),this}};Object.defineProperty(rs,"type",{configurable:!0,enumerable:!0,value:"C"}),lr.prototype=Zi(Jr,Se.prototype,rs);var xn=function(){for(var t=[],e=arguments.length,n=0;n<e;n++)t.push(arguments[n]);if(!(this instanceof xn))return ur(xn,t);if(0===e)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates (none provided).");var r,o;if(t[0]instanceof tt){if(1===e)return this.end=t[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+e+" lines provided).")}if(t[0]instanceof Se){if(1===e)return this.end=t[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+e+" curves provided).")}if("string"==typeof t[0]||"number"==typeof t[0]){if(2===e)return this.end=new I(+t[0],+t[1]),this;if(e<2)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+e+" coordinates provided).");var s;for(r=[],n=0;n<e;n+=2)s=t.slice(n,n+2),r.push(ur(0===n?xn:En,s));return r}if(1===e)return this.end=new I(t[0]),this;for(r=[],n=0;n<e;n+=1)o=t[n],r.push(0===n?new xn(o):new En(o));return r},Ns={bbox:function(){return null},clone:function(){return new xn(this.end)},closestPoint:function(){return this.end.clone()},closestPointNormalizedLength:function(){return 0},closestPointLength:function(){return 0},closestPointT:function(){return 1},closestPointTangent:function(){return null},divideAt:function(){return[this.clone(),this.clone()]},divideAtLength:function(){return[this.clone(),this.clone()]},equals:function(t){return this.end.equals(t.end)},getSubdivisions:function(){return[]},isDifferentiable:function(){return!1},isSubpathStart:!0,isVisible:!1,length:function(){return 0},lengthAtT:function(){return 0},pointAt:function(){return this.end.clone()},pointAtLength:function(){return this.end.clone()},pointAtT:function(){return this.end.clone()},round:function(t){return this.end.round(t),this},scale:function(t,e,n){return this.end.scale(t,e,n),this},serialize:function(){var t=this.end;return this.type+" "+t.x+" "+t.y},tangentAt:function(){return null},tangentAtLength:function(){return null},tangentAtT:function(){return null},toString:function(){return this.type+" "+this.end},translate:function(t,e){return this.end.translate(t,e),this}};Object.defineProperty(Ns,"start",{configurable:!0,enumerable:!0,get:function(){throw new Error("Illegal access. Moveto segments should not need a start property.")}}),Object.defineProperty(Ns,"type",{configurable:!0,enumerable:!0,value:"M"}),xn.prototype=Zi(Jr,Ns);var xi=function(){for(var t=[],e=arguments.length,n=0;n<e;n++)t.push(arguments[n]);if(!(this instanceof xi))return ur(xi,t);if(e>0)throw new Error("Closepath constructor expects no arguments.");return this},Wr={clone:function(){return new xi},divideAt:function(t){var n=new tt(this.start,this.end).divideAt(t);return[n[1].isDifferentiable()?new En(n[0]):this.clone(),new En(n[1])]},divideAtLength:function(t){var n=new tt(this.start,this.end).divideAtLength(t);return[n[1].isDifferentiable()?new En(n[0]):this.clone(),new En(n[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!(!this.previousSegment||!this.subpathStartSegment||this.start.equals(this.end))},round:function(){return this},scale:function(){return this},serialize:function(){return this.type},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(){return this}};Object.defineProperty(Wr,"end",{configurable:!0,enumerable:!0,get:function(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. Moveto); OR segment has not yet been added to a path.)");return this.subpathStartSegment.end}}),Object.defineProperty(Wr,"type",{configurable:!0,enumerable:!0,value:"Z"}),xi.prototype=Zi(Jr,tt.prototype,Wr);var ua=_t.segmentTypes={L:En,C:lr,M:xn,Z:xi,z:xi};_t.regexSupportedData=new RegExp("^[\\s\\d"+Object.keys(ua).join("")+",.]*$"),_t.isDataSupported=function(t){return"string"==typeof t&&this.regexSupportedData.test(t)};const Rs={curveThroughPoints:function(t){return console.warn("deprecated"),new _t(Se.throughPoints(t)).serialize()},getCurveControlPoints:function(t){console.warn("deprecated");var s,e=[],n=[],r=t.length-1;if(1==r)return e[0]=new I((2*t[0].x+t[1].x)/3,(2*t[0].y+t[1].y)/3),n[0]=new I(2*e[0].x-t[0].x,2*e[0].y-t[0].y),[e,n];var o=[];for(s=1;s<r-1;s++)o[s]=4*t[s].x+2*t[s+1].x;o[0]=t[0].x+2*t[1].x,o[r-1]=(8*t[r-1].x+t[r].x)/2;var l=this.getFirstControlPoints(o);for(s=1;s<r-1;++s)o[s]=4*t[s].y+2*t[s+1].y;o[0]=t[0].y+2*t[1].y,o[r-1]=(8*t[r-1].y+t[r].y)/2;var f=this.getFirstControlPoints(o);for(s=0;s<r;s++)e.push(new I(l[s],f[s])),n.push(s<r-1?new I(2*t[s+1].x-l[s+1],2*t[s+1].y-f[s+1]):new I((t[r].x+l[r-1])/2,(t[r].y+f[r-1])/2));return[e,n]},getCurveDivider:function(t,e,n,r){console.warn("deprecated");var s=new Se(t,e,n,r);return function(l){var f=s.divide(l);return[{p0:f[0].start,p1:f[0].controlPoint1,p2:f[0].controlPoint2,p3:f[0].end},{p0:f[1].start,p1:f[1].controlPoint1,p2:f[1].controlPoint2,p3:f[1].end}]}},getFirstControlPoints:function(t){console.warn("deprecated");var e=t.length,n=[],r=[],s=2;n[0]=t[0]/s;for(var o=1;o<e;o++)r[o]=1/s,n[o]=(t[o]-n[o-1])/(s=(o<e-1?4:3.5)-r[o]);for(o=1;o<e;o++)n[e-o-1]-=r[e-o]*n[e-o];return n},getInversionSolver:function(t,e,n,r){console.warn("deprecated");var s=new Se(t,e,n,r);return function(l){return s.closestPointT(l)}}},Vn=function(t){return this instanceof Vn?"string"==typeof t?new Vn.parse(t):void(this.points=Array.isArray(t)?t.map(I):[]):new Vn(t)};function la(t,e,n,r){switch(t.type){case Ht.Line:if(e.type===Ht.Line)return Ni(t,e);break;case Ht.Ellipse:switch(e.type){case Ht.Line:return hi(t,e);case Ht.Ellipse:return ca(t,e)}break;case Ht.Rect:switch(e.type){case Ht.Line:return fa(t,e);case Ht.Ellipse:return ha(t,e);case Ht.Rect:return Gs(t,e)}break;case Ht.Polyline:switch(e.type){case Ht.Line:return js(t,e);case Ht.Ellipse:return di(t,e);case Ht.Rect:return Wi(t,e);case Ht.Polyline:return _i(t,e)}break;case Ht.Polygon:switch(e.type){case Ht.Line:return cr(t,e);case Ht.Ellipse:return Kr(t,e);case Ht.Rect:return da(t,e);case Ht.Polyline:return is(t,e);case Ht.Polygon:return Zs(t,e)}break;case Ht.Path:switch(e.type){case Ht.Line:return Rn(t,e,n);case Ht.Ellipse:return Mi(t,e,n);case Ht.Rect:return Ms(t,e,n);case Ht.Polyline:return Ws(t,e,n);case Ht.Polygon:return Ss(t,e,n);case Ht.Path:return Yi(t,e,n,r)}}switch(e.type){case Ht.Ellipse:case Ht.Rect:case Ht.Polyline:case Ht.Polygon:case Ht.Path:return la(e,t,r,n);default:throw Error(`The intersection for ${t} and ${e} could not be found.`)}}function Ni(t,e){const n=t.start.x,r=t.start.y,l=e.start.x,f=e.start.y,A=t.end.x-n,p=t.end.y-r,D=e.end.x-l,B=e.end.y-f,j=n-l,q=r-f,et=A*B-D*p,ht=(A*q-p*j)/et,ft=(D*q-B*j)/et;return ht>=0&&ht<=1&&ft>=0&&ft<=1}function hi(t,e){const n=t.a,r=t.b,s=t.x,o=t.y,l=e.start.x-s,d=e.start.y-o,A=n*n,p=r*r,D=e.end.x-s-l,B=e.end.y-o-d,j=D*D/A+B*B/p,q=2*l*D/A+2*d*B/p,ht=q*q-4*j*(l*l/A+d*d/p-1);if(0===ht){const ft=-q/2/j;return ft>=0&&ft<=1}if(ht>0){const ft=Math.sqrt(ht),w=(-q+ft)/2/j,S=(-q-ft)/2/j;return w>=0&&w<=1||S>=0&&S<=1}return!1}function ca(t,e){return function Qr(t,e,n,r){const{cos:s,sin:o}=Math,l=o(e),f=s(e),d=o(r),m=s(r),A=l*l,p=f*f,B=d*d,j=m*m,et=t.a*t.a,ht=t.b*t.b,ft=n.a*n.a,w=n.b*n.b,S=et*A+ht*p,P=ft*B+w*j,Z=et*p+ht*A,X=ft*j+w*B;let st=2*(ht-et)*(l*f),ot=2*(w-ft)*(d*m),vt=-2*S*t.x-st*t.y,Tt=-2*P*n.x-ot*n.y,xt=-st*t.x-2*Z*t.y,Pt=-ot*n.x-2*X*n.y;const Ot=S*t.x*t.x+Z*t.y*t.y+st*t.x*t.y-et*ht,Bt=P*n.x*n.x+X*n.y*n.y+ot*n.x*n.y-ft*w;st/=2,ot/=2,vt/=2,Tt/=2,xt/=2,Pt/=2;const Vt=ai([[S,st,vt],[st,Z,xt],[vt,xt,Ot]]),sn=ai([[P,ot,Tt],[ot,X,Pt],[Tt,Pt,Bt]]),Re=.33333333*(ai([[P,st,vt],[ot,Z,xt],[Tt,xt,Ot]])+ai([[S,ot,vt],[st,X,xt],[vt,Pt,Ot]])+ai([[S,st,Tt],[st,Z,Pt],[vt,xt,Bt]])),dn=.33333333*(ai([[S,ot,Tt],[st,X,Pt],[vt,Pt,Bt]])+ai([[P,st,Tt],[ot,Z,Pt],[Tt,xt,Bt]])+ai([[P,ot,vt],[ot,X,xt],[Tt,Pt,Ot]])),Kt=Ar([[Vt,Re],[Re,dn]]),he=Ar([[Vt,dn],[Re,sn]]),ne=Ar([[Re,dn],[dn,sn]]);return!(Ar([[2*Kt,he],[he,2*ne]])>0&&(dn>0||Re>0))}(t,0,e,0)}function fa(t,e){const{start:n,end:r}=e,{x:s,y:o,width:l,height:f}=t;return!(n.x>s+l&&r.x>s+l||n.x<s&&r.x<s||n.y>o+f&&r.y>o+f||n.y<o&&r.y<o)&&(!(!t.containsPoint(e.start)&&!t.containsPoint(e.end))||Ni(t.topLine(),e)||Ni(t.rightLine(),e)||Ni(t.bottomLine(),e)||Ni(t.leftLine(),e))}function ha(t,e){return!!Gs(t,Lt.fromEllipse(e))&&Kr(Vn.fromRect(t),e)}function Gs(t,e){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y}function js(t,e){return Ts(t,e,{interior:!1})}function di(t,e){return Ui(t,e,{interior:!1})}function Wi(t,e){return ss(t,e,{interior:!1})}function _i(t,e){return Ds(t,e,{interior:!1})}function cr(t,e){return Ts(t,e,{interior:!0})}function Kr(t,e){return Ui(t,e,{interior:!0})}function da(t,e){return ss(t,e,{interior:!0})}function is(t,e){return Ds(t,e,{interior:!0})}function Zs(t,e){return Gn(t,e,{interior:!0})}function Rn(t,e,n){return t.getSubpaths().some(r=>{const[s]=r.toPolylines(n),{type:o}=r.getSegment(-1);return"Z"===o?cr(s,e):js(s,e)})}function Mi(t,e,n){return t.getSubpaths().some(r=>{const[s]=r.toPolylines(n),{type:o}=r.getSegment(-1);return"Z"===o?Kr(s,e):di(s,e)})}function Ms(t,e,n){return Ss(t,Vn.fromRect(e),n)}function Ws(t,e,n){return ga(t,e,n,{interior:!1})}function Ss(t,e,n){return ga(t,e,n,{interior:!0})}function Yi(t,e,n,r){return t.getSubpaths().some(s=>{const[o]=s.toPolylines(n),{type:l}=s.getSegment(-1);return"Z"===l?Ss(e,o,r):Ws(e,o,r)})}function Ts(t,e,n={}){const{interior:r=!1}=n;let s;if(r){if(t.containsPoint(e.start))return!0;const{start:f,end:d,points:m}=t;s=d.equals(f)?m:[...m,f]}else s=t.points;const{length:o}=s,l=new tt;for(let f=0;f<o-1;f++)if(l.start=s[f],l.end=s[f+1],Ni(e,l))return!0;return!1}function Ui(t,e,n={}){const{start:r,end:s,points:o}=t;if(e.containsPoint(r))return!0;let l;const{interior:f=!1}=n;if(f){if(t.containsPoint(e.center()))return!0;l=s.equals(r)?o:[...o,r]}else l=o;const{length:d}=l,m=new tt;for(let A=0;A<d-1;A++)if(m.start=l[A],m.end=l[A+1],hi(e,m))return!0;return!1}function ss(t,e,n){return Gn(t,Vn.fromRect(e),n)}function ga(t,e,n,r){return t.getSubpaths().some(s=>{const[o]=s.toPolylines(n),{type:l}=s.getSegment(-1);return"Z"===l?Gn(e,o,r):Ds(e,o,r)})}function Ds(t,e,n={}){const{interior:r=!1}=n;let s;if(r){const{start:d}=e;if(t.containsPoint(d))return!0;s=t.clone().close()}else s=t;const o=e.points,{length:l}=o,f=new tt;for(let d=0;d<l-1;d++)if(f.start=o[d],f.end=o[d+1],js(s,f))return!0;return!1}function Gn(t,e,n){return e.containsPoint(t.start)||Ds(t,e.clone().close(),n)}function Ar(t){return t[0][0]*t[1][1]-t[0][1]*t[1][0]}function ai(t){return t[0][0]*t[1][1]*t[2][2]-t[0][0]*t[1][2]*t[2][1]-t[0][1]*t[1][0]*t[2][2]+t[0][1]*t[1][2]*t[2][0]+t[0][2]*t[1][0]*t[2][1]-t[0][2]*t[1][1]*t[2][0]}Vn.parse=function(t){return new Vn(Zr(t))},Vn.fromRect=function(t){return new Vn([t.topLeft(),t.topRight(),t.bottomRight(),t.bottomLeft()])},Vn.prototype=Zi(Ue.prototype,{type:Ht.Polygon,clone:function(){return new Vn(Bn(this.points))},convexHull:function(){return new Vn(kn(this.points))},lengthPoints:function(){const{start:t,end:e,points:n}=this;return n.length<=1||t.equals(e)?n:[...n,t.clone()]}});const _s=xr,gt=function(){if("object"!=typeof window||!window.SVGAngle&&!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"))return function(){throw new Error("SVG is required to use Vectorizer.")};var e={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},r=Math,s=r.PI,o=r.atan2,l=r.sqrt,f=r.min,d=r.max,m=r.cos,A=r.sin,p=function(w,S,P){if(!(this instanceof p))return p.apply(Object.create(p.prototype),arguments);if(w){if(p.isV(w)&&(w=w.node),S=S||{},p.isString(w)){if("svg"===(w=w.trim()).toLowerCase())w=p.createSvgDocument();else if("<"===w[0]){var Z=p.createSvgDocument(w);if(Z.childNodes.length>1){var st,ot,X=[];for(st=0,ot=Z.childNodes.length;st<ot;st++){var vt=Z.childNodes[st];X.push(new p(document.importNode(vt,!0)))}return X}w=document.importNode(Z.firstChild,!0)}else w=document.createElementNS(e.svg,w);p.ensureId(w)}return this.node=w,this.setAttributes(S),P&&this.append(P),this}},D=p.prototype;function j(w,S,P){P||(P={});for(var Z=P.includeAnnotationIndices,X=P.eol,st=P.lineHeight,ot=P.baseSize,vt=0,Tt={},xt=S.length-1,Pt=0;Pt<=xt;Pt++){var Ot=S[Pt],Bt=null;if(p.isObject(Ot)){var Vt=Ot.attrs,sn=p("tspan",Vt),Re=sn.node,dn=Ot.t;X&&Pt===xt&&(dn+=X),Re.textContent=dn;var Kt=Vt.class;Kt&&sn.addClass(Kt),Z&&sn.attr("annotations",Ot.annotations),Bt=parseFloat(Vt["font-size"]),isFinite(Bt)||(Bt=ot),Bt&&Bt>vt&&(vt=Bt)}else X&&Pt===xt&&(Ot+=X),Re=document.createTextNode(Ot||" "),ot&&ot>vt&&(vt=ot);w.appendChild(Re)}return vt&&(Tt.maxFontSize=vt),st?Tt.lineHeight=st:vt&&(Tt.lineHeight=1.2*vt),Tt}Object.defineProperty(D,"id",{enumerable:!0,get:function(){return this.node.id},set:function(w){this.node.id=w}}),D.getTransformToElement=function(w){var S=this.node;if(p.isSVGGraphicsElement(w)&&p.isSVGGraphicsElement(S)){var P=p.toNode(w).getScreenCTM(),Z=S.getScreenCTM();if(P&&Z)return P.inverse().multiply(Z)}return p.createSVGMatrix()},D.transform=function(w,S){var P=this.node;if(p.isUndefined(w))return p.transformStringToMatrix(this.attr("transform"));if(S&&S.absolute)return this.attr("transform",p.matrixToTransformString(w));var Z=p.createSVGTransform(w);return P.transform.baseVal.appendItem(Z),this},D.translate=function(w,S,P){P=P||{},S=S||0;var Z=this.attr("transform")||"",X=p.parseTransformString(Z);return Z=X.value,p.isUndefined(w)?X.translate:(Z=Z.replace(/translate\([^)]*\)/g,"").trim(),this.attr("transform",("translate("+(P.absolute?w:X.translate.tx+w)+","+(P.absolute?S:X.translate.ty+S)+") "+Z).trim()),this)},D.rotate=function(w,S,P,Z){Z=Z||{};var X=this.attr("transform")||"",st=p.parseTransformString(X);return X=st.value,p.isUndefined(w)?st.rotate:(X=X.replace(/rotate\([^)]*\)/g,"").trim(),w%=360,this.attr("transform",(X+" rotate("+(Z.absolute?w:st.rotate.angle+w)+(void 0!==S&&void 0!==P?","+S+","+P:"")+")").trim()),this)},D.scale=function(w,S){S=p.isUndefined(S)?w:S;var P=this.attr("transform")||"",Z=p.parseTransformString(P);return P=Z.value,p.isUndefined(w)?Z.scale:(P=P.replace(/scale\([^)]*\)/g,"").trim(),this.attr("transform",(P+" scale("+w+","+S+")").trim()),this)},D.bbox=function(w,S){var P,Z=this.node,X=Z.ownerSVGElement;if(!X)return new Lt(0,0,0,0);try{P=Z.getBBox()}catch{P={x:Z.clientLeft,y:Z.clientTop,width:Z.clientWidth,height:Z.clientHeight}}if(w)return new Lt(P);var st=this.getTransformToElement(S||X);return p.transformRect(P,st)},D.getBBox=function(w){var P,S={},Z=this.node;if(!Z.ownerSVGElement||!p.isSVGGraphicsElement(Z))return new Lt(0,0,0,0);if(w&&(w.target&&(S.target=p.toNode(w.target)),w.recursive&&(S.recursive=w.recursive)),S.recursive){var ot=this.children(),vt=ot.length;if(0===vt)return this.getBBox({target:S.target,recursive:!1});S.target||(S.target=this);for(var Tt=0;Tt<vt;Tt++){var Pt,xt=ot[Tt];Pt=0===xt.children().length?xt.getBBox({target:S.target,recursive:!1}):xt.getBBox({target:S.target,recursive:!0}),P=P?P.union(Pt):Pt}return P}try{P=Z.getBBox()}catch{P={x:Z.clientLeft,y:Z.clientTop,width:Z.clientWidth,height:Z.clientHeight}}if(S.target){var st=this.getTransformToElement(S.target);return p.transformRect(P,st)}return new Lt(P)};var q=/em$/;function et(w,S){var P=parseFloat(w);return q.test(w)?P*S:P}D.text=function(w,S){if(w&&"string"!=typeof w)throw new Error("Vectorizer: text() expects the first argument to be a string.");w=p.sanitizeText(w),S||(S={});var P=S.displayEmpty,Z=S.eol,X=S.textPath,st=S.textVerticalAnchor,ot="middle"===st||"bottom"===st||"top"===st,vt=S.x;void 0===vt&&(vt=this.attr("x")||0);var Tt=S.includeAnnotationIndices,xt=S.annotations;xt&&!p.isArray(xt)&&(xt=[xt]);var Pt=S.lineHeight,Ot="auto"===Pt,Bt=Ot?"1.5em":Pt||"1em";this.empty(),this.attr({"xml:space":"preserve",display:w||P?null:"none"});var Vt=parseFloat(this.attr("font-size"));Vt||(Vt=16,(ot||xt)&&this.attr("font-size",Vt));var Re,sn=document;X?("string"==typeof X&&(X={d:X}),Re=function B(w,S){w||(w={});var P=p("textPath"),Z=w.d;if(Z&&void 0===w["xlink:href"]){var X=p("path").attr("d",Z).appendTo(S.defs());P.attr("xlink:href","#"+X.id)}return p.isObject(w)&&P.attr(w),P.node}(X,this)):Re=sn.createDocumentFragment();for(var ne,dn=0,Kt=w.split("\n"),he=[],re=0,Oe=Kt.length-1;re<=Oe;re++){var Ze,an=Bt,ln="v-line",Le=sn.createElementNS(e.svg,"tspan"),Tn=Kt[re];if(Tn)if(xt){var Ge=(Ze=j(Le,p.annotateString(Tn,xt,{offset:-dn,includeAnnotationIndices:Tt}),{includeAnnotationIndices:Tt,eol:re!==Oe&&Z,lineHeight:Ot?null:Bt,baseSize:Vt})).lineHeight;Ge&&Ot&&0!==re&&(an=Ge),0===re&&(ne=.8*Ze.maxFontSize)}else Z&&re!==Oe&&(Tn+=Z),Le.textContent=Tn;else{Le.textContent="-",ln+=" v-empty-line";var Qt=Le.style;Qt.fillOpacity=0,Qt.strokeOpacity=0,xt&&(Ze={})}Ze&&he.push(Ze),re>0&&Le.setAttribute("dy",an),(re>0||X)&&Le.setAttribute("x",vt),Le.className.baseVal=ln,Re.appendChild(Le),dn+=Tn.length+1}if(ot)if(xt)an=function ht(w,S,P,Z){if(!Array.isArray(S))return 0;var X=S.length;if(!X)return 0;for(var st=S[0],ot=et(st.maxFontSize,P)||P,vt=0,Tt=et(Z,P),xt=1;xt<X;xt++)vt+=et((st=S[xt]).lineHeight,P)||Tt;var Bt,Ot=et(st.maxFontSize,P)||P;switch(w){case"middle":Bt=ot/2-.15*Ot-vt/2;break;case"bottom":Bt=-.25*Ot-vt;break;default:Bt=.8*ot}return Bt}(st,he,Vt,Bt);else if("top"===st)an="0.8em";else{var Rt;switch(Oe>0?(Rt=parseFloat(Bt)||1,Rt*=Oe,q.test(Bt)||(Rt/=Vt)):Rt=0,st){case"middle":an=.3-Rt/2+"em";break;case"bottom":an=-Rt-.3+"em"}}else 0===st?an="0em":st?an=st:(an=0,null===this.attr("y")&&this.attr("y",ne||"0.8em"));return Re.firstChild.setAttribute("dy",an),this.append(Re),this},D.removeAttr=function(w){var S=p.qualifyAttr(w),P=this.node;return S.ns?P.hasAttributeNS(S.ns,S.local)&&P.removeAttributeNS(S.ns,S.local):P.hasAttribute(w)&&P.removeAttribute(w),this},D.attr=function(w,S){if(p.isUndefined(w)){for(var P=this.node.attributes,Z={},X=0;X<P.length;X++)Z[P[X].name]=P[X].value;return Z}if(p.isString(w)&&p.isUndefined(S))return this.node.getAttribute(w);if("object"==typeof w)for(var st in w)w.hasOwnProperty(st)&&this.setAttribute(st,w[st]);else this.setAttribute(w,S);return this},D.normalizePath=function(){return"PATH"===this.tagName()&&this.attr("d",p.normalizePathData(this.attr("d"))),this},D.remove=function(){return this.node.parentNode&&this.node.parentNode.removeChild(this.node),this},D.empty=function(){for(;this.node.firstChild;)this.node.removeChild(this.node.firstChild);return this},D.setAttributes=function(w){for(var S in w)w.hasOwnProperty(S)&&this.setAttribute(S,w[S]);return this},D.append=function(w){p.isArray(w)||(w=[w]);for(var S=0,P=w.length;S<P;S++)this.node.appendChild(p.toNode(w[S]));return this},D.prepend=function(w){var S=this.node.firstChild;return S?p(S).before(w):this.append(w)},D.before=function(w){var S=this.node,P=S.parentNode;if(P){p.isArray(w)||(w=[w]);for(var Z=0,X=w.length;Z<X;Z++)P.insertBefore(p.toNode(w[Z]),S)}return this},D.appendTo=function(w){return p.toNode(w).appendChild(this.node),this},D.svg=function(){return this.node instanceof window.SVGSVGElement?this:p(this.node.ownerSVGElement)},D.tagName=function(){return this.node.tagName.toUpperCase()},D.defs=function(){var w=this.svg()||this,S=w.node.getElementsByTagName("defs")[0];return S?p(S):p("defs").appendTo(w)},D.clone=function(){var w=p(this.node.cloneNode(!0));return w.node.id=p.uniqueId(),w},D.findOne=function(w){var S=this.node.querySelector(w);return S?p(S):void 0},D.find=function(w){var S=[],P=this.node.querySelectorAll(w);if(P)for(var Z=0;Z<P.length;Z++)S.push(p(P[Z]));return S},D.children=function(){for(var w=this.node.childNodes,S=[],P=0;P<w.length;P++)1===w[P].nodeType&&S.push(p(w[P]));return S},D.parent=function(){return p(this.node.parentNode)||null},D.index=function(){for(var w=0,S=this.node.previousSibling;S;)1===S.nodeType&&w++,S=S.previousSibling;return w},D.findParentByClass=function(w,S){for(var P=this.node.ownerSVGElement,Z=this.node.parentNode;Z&&Z!==S&&Z!==P;){var X=p(Z);if(X.hasClass(w))return X;Z=Z.parentNode}return null},D.contains=function(w){var S=this.node,P=p.toNode(w),Z=P&&P.parentNode;return S===Z||!!(Z&&1===Z.nodeType&&16&S.compareDocumentPosition(Z))},D.toLocalPoint=function(w,S){var P=this.svg().node,Z=P.createSVGPoint();Z.x=w,Z.y=S;try{var X=Z.matrixTransform(P.getScreenCTM().inverse()),st=this.getTransformToElement(P).inverse()}catch{return Z}return X.matrixTransform(st)},D.translateCenterToPoint=function(w){var P=this.getBBox({target:this.svg()}).center();return this.translate(w.x-P.x,w.y-P.y),this},D.translateAndAutoOrient=function(w,S,P){w=new I(w),S=new I(S),P||(P=this.svg());var Z=this.scale();this.attr("transform","");var X=this.getBBox({target:P}).scale(Z.sx,Z.sy),st=p.createSVGTransform();st.setTranslate(-X.x-X.width/2,-X.y-X.height/2);var ot=p.createSVGTransform(),vt=w.angleBetween(S,w.clone().offset(1,0));vt&&ot.setRotate(vt,0,0);var Tt=p.createSVGTransform(),xt=w.clone().move(S,X.width/2);Tt.setTranslate(2*w.x-xt.x,2*w.y-xt.y);var Pt=this.getTransformToElement(P),Ot=p.createSVGTransform();return Ot.setMatrix(Tt.matrix.multiply(ot.matrix.multiply(st.matrix.multiply(Pt.scale(Z.sx,Z.sy))))),this.attr("transform",p.matrixToTransformString(Ot.matrix)),this},D.animateAlongPath=function(w,S){S=p.toNode(S);var P=p.ensureId(S),Z=p("animateMotion",w),X=p("mpath",{"xlink:href":"#"+P});Z.append(X),this.append(Z);try{Z.node.beginElement()}catch{if("fake"===document.documentElement.getAttribute("smiling")){var st=Z.node;st.animators=[];var ot=st.getAttribute("id");ot&&(id2anim[ot]=st);for(var vt=getTargets(st),Tt=0,xt=vt.length;Tt<xt;Tt++){var Ot=new Animator(st,vt[Tt],Tt);animators.push(Ot),st.animators[Tt]=Ot,Ot.register()}}}return this},D.hasClass=function(w){return new RegExp("(\\s|^)"+w+"(\\s|$)").test(this.node.getAttribute("class"))},D.addClass=function(w){if(w&&!this.hasClass(w)){var S=this.node.getAttribute("class")||"";this.node.setAttribute("class",(S+" "+w).trim())}return this},D.removeClass=function(w){if(w&&this.hasClass(w)){var S=this.node.getAttribute("class").replace(new RegExp("(\\s|^)"+w+"(\\s|$)","g"),"$2");this.node.setAttribute("class",S)}return this},D.toggleClass=function(w,S){return(p.isUndefined(S)?this.hasClass(w):!S)?this.removeClass(w):this.addClass(w),this},D.sample=function(w){w=w||1;for(var st,S=this.node,P=S.getTotalLength(),Z=[],X=0;X<P;)st=S.getPointAtLength(X),Z.push({x:st.x,y:st.y,distance:X}),X+=w;return Z},D.convertToPath=function(){var w=p("path");w.attr(this.attr());var S=this.convertToPathData();return S&&w.attr("d",S),w},D.convertToPathData=function(){var w=this.tagName();switch(w){case"PATH":return this.attr("d");case"LINE":return p.convertLineToPathData(this.node);case"POLYGON":return p.convertPolygonToPathData(this.node);case"POLYLINE":return p.convertPolylineToPathData(this.node);case"ELLIPSE":return p.convertEllipseToPathData(this.node);case"CIRCLE":return p.convertCircleToPathData(this.node);case"RECT":return p.convertRectToPathData(this.node)}throw new Error(w+" cannot be converted to PATH.")},p.prototype.toGeometryShape=function(){var w,S,P,Z,X,st,ot,vt,Tt,xt,Pt,Ot,Bt,Vt,sn;switch(this.tagName()){case"RECT":return w=parseFloat(this.attr("x"))||0,S=parseFloat(this.attr("y"))||0,P=parseFloat(this.attr("width"))||0,Z=parseFloat(this.attr("height"))||0,new Lt(w,S,P,Z);case"CIRCLE":return X=parseFloat(this.attr("cx"))||0,st=parseFloat(this.attr("cy"))||0,ot=parseFloat(this.attr("r"))||0,new ce({x:X,y:st},ot,ot);case"ELLIPSE":return X=parseFloat(this.attr("cx"))||0,st=parseFloat(this.attr("cy"))||0,vt=parseFloat(this.attr("rx"))||0,Tt=parseFloat(this.attr("ry"))||0,new ce({x:X,y:st},vt,Tt);case"POLYLINE":return xt=p.getPointsFromSvgNode(this),new Ue(xt);case"POLYGON":return(xt=p.getPointsFromSvgNode(this)).length>1&&xt.push(xt[0]),new Ue(xt);case"PATH":return Pt=this.attr("d"),_t.isDataSupported(Pt)||(Pt=p.normalizePathData(Pt)),new _t(Pt);case"LINE":return Ot=parseFloat(this.attr("x1"))||0,Vt=parseFloat(this.attr("y1"))||0,Bt=parseFloat(this.attr("x2"))||0,sn=parseFloat(this.attr("y2"))||0,new tt({x:Ot,y:Vt},{x:Bt,y:sn})}return this.getBBox()},D.findIntersection=function(w,S){var P=this.svg().node,Z=this.getBBox({target:S=S||P}),X=Z.center();if(Z.intersectionWithLineFromCenterToPoint(w)){var st,ot=this.tagName();if("RECT"===ot){var vt=new Lt(parseFloat(this.attr("x")||0),parseFloat(this.attr("y")||0),parseFloat(this.attr("width")),parseFloat(this.attr("height"))),Tt=this.getTransformToElement(S),xt=p.decomposeMatrix(Tt),Pt=P.createSVGTransform();Pt.setRotate(-xt.rotation,X.x,X.y);var Ot=p.transformRect(vt,Pt.matrix.multiply(Tt));st=new Lt(Ot).intersectionWithLineFromCenterToPoint(w,xt.rotation)}else if("PATH"===ot||"POLYGON"===ot||"POLYLINE"===ot||"CIRCLE"===ot||"ELLIPSE"===ot){var dn,Kt,he,re,Oe,Vt=("PATH"===ot?this:this.convertToPath()).sample(),sn=1/0,Re=[];for(dn=0;dn<Vt.length;dn++)he=(he=p.createSVGPoint((Kt=Vt[dn]).x,Kt.y)).matrixTransform(this.getTransformToElement(S)),(Oe=(Kt=new I(he)).distance(X)+(re=1.1*Kt.distance(w)))<sn?(sn=Oe,Re=[{sample:Kt,refDistance:re}]):Oe<sn+1&&Re.push({sample:Kt,refDistance:re});Re.sort(function(an,ln){return an.refDistance-ln.refDistance}),Re[0]&&(st=Re[0].sample)}return st}},D.setAttribute=function(w,S){var P=this.node;if(null===S)return this.removeAttr(w),this;var Z=p.qualifyAttr(w);return Z.ns?P.setAttributeNS(Z.ns,w,S):"id"===w?P.id=S:P.setAttribute(w,S),this},p.createSvgDocument=function(w){if(w){const P=`<svg xmlns="${e.svg}" xmlns:xlink="${e.xlink}" version="1.1">${w}</svg>`,{documentElement:Z}=p.parseXML(P,{async:!1});return Z}const S=document.createElementNS(e.svg,"svg");return S.setAttributeNS(e.xmlns,"xmlns:xlink",e.xlink),S.setAttribute("version","1.1"),S},p.createSVGStyle=function(w){const{node:S}=p("style",{type:"text/css"},[p.createCDATASection(w)]);return S},p.createCDATASection=function(w=""){return document.implementation.createDocument(null,"xml",null).createCDATASection(w)},p.idCounter=0,p.uniqueId=function(){return"v-"+ ++p.idCounter},p.toNode=function(w){return p.isV(w)?w.node:w.nodeName&&w||w[0]},p.ensureId=function(w){return(w=p.toNode(w)).id||(w.id=p.uniqueId())},p.sanitizeText=function(w){return(w||"").replace(/ /g,"\xa0")},p.isUndefined=function(w){return typeof w>"u"},p.isString=function(w){return"string"==typeof w},p.isObject=function(w){return w&&"object"==typeof w},p.isArray=Array.isArray,p.parseXML=function(w,S){var P;S=S||{};try{var Z=new DOMParser;p.isUndefined(S.async)||(Z.async=S.async),P=Z.parseFromString(w,"text/xml")}catch{P=void 0}if(!P||P.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+w);return P},p.qualifyAttr=function(w){if(-1!==w.indexOf(":")){var S=w.split(":");return{ns:e[S[0]],local:S[1]}}return{ns:null,local:w}},p.transformRegex=/(\w+)\(([^,)]+),?([^)]+)?\)/gi,p.transformSeparatorRegex=/[ ,]+/,p.transformationListRegex=/^(\w+)\((.*)\)/,p.transformStringToMatrix=function(w){var S=p.createSVGMatrix(),P=w&&w.match(p.transformRegex);if(!P)return S;for(var Z=0,X=P.length;Z<X;Z++){var ot=P[Z].match(p.transformationListRegex);if(ot){var vt,Tt,xt,Pt,Ot,Bt=p.createSVGMatrix(),Vt=ot[2].split(p.transformSeparatorRegex);switch(ot[1].toLowerCase()){case"scale":vt=parseFloat(Vt[0]),Tt=void 0===Vt[1]?vt:parseFloat(Vt[1]),Bt=Bt.scaleNonUniform(vt,Tt);break;case"translate":xt=parseFloat(Vt[0]),Pt=parseFloat(Vt[1]),Bt=Bt.translate(xt,Pt);break;case"rotate":Ot=parseFloat(Vt[0]),xt=parseFloat(Vt[1])||0,Pt=parseFloat(Vt[2])||0,Bt=0!==xt||0!==Pt?Bt.translate(xt,Pt).rotate(Ot).translate(-xt,-Pt):Bt.rotate(Ot);break;case"skewx":Ot=parseFloat(Vt[0]),Bt=Bt.skewX(Ot);break;case"skewy":Ot=parseFloat(Vt[0]),Bt=Bt.skewY(Ot);break;case"matrix":Bt.a=parseFloat(Vt[0]),Bt.b=parseFloat(Vt[1]),Bt.c=parseFloat(Vt[2]),Bt.d=parseFloat(Vt[3]),Bt.e=parseFloat(Vt[4]),Bt.f=parseFloat(Vt[5]);break;default:continue}S=S.multiply(Bt)}}return S},p.matrixToTransformString=function(w){return w||(w=!0),"matrix("+(void 0!==w.a?w.a:1)+","+(void 0!==w.b?w.b:0)+","+(void 0!==w.c?w.c:0)+","+(void 0!==w.d?w.d:1)+","+(void 0!==w.e?w.e:0)+","+(void 0!==w.f?w.f:0)+")"},p.parseTransformString=function(w){var S,P,Z;if(w){var X=p.transformSeparatorRegex;if(w.trim().indexOf("matrix")>=0){var st=p.transformStringToMatrix(w),ot=p.decomposeMatrix(st);Z=[ot.scaleX,ot.scaleY],P=[ot.rotation];var vt=[];(0!==(S=[ot.translateX,ot.translateY])[0]||0!==S[1])&&vt.push("translate("+S+")"),(1!==Z[0]||1!==Z[1])&&vt.push("scale("+Z+")"),0!==P[0]&&vt.push("rotate("+P+")"),w=vt.join(" ")}else{var Tt=w.match(/translate\((.*?)\)/);Tt&&(S=Tt[1].split(X));var xt=w.match(/rotate\((.*?)\)/);xt&&(P=xt[1].split(X));var Pt=w.match(/scale\((.*?)\)/);Pt&&(Z=Pt[1].split(X))}}var Ot=Z&&Z[0]?parseFloat(Z[0]):1;return{value:w,translate:{tx:S&&S[0]?parseInt(S[0],10):0,ty:S&&S[1]?parseInt(S[1],10):0},rotate:{angle:P&&P[0]?parseInt(P[0],10):0,cx:P&&P[1]?parseInt(P[1],10):void 0,cy:P&&P[2]?parseInt(P[2],10):void 0},scale:{sx:Ot,sy:Z&&Z[1]?parseFloat(Z[1]):Ot}}},p.deltaTransformPoint=function(w,S){return{x:S.x*w.a+S.y*w.c+0,y:S.x*w.b+S.y*w.d+0}},p.decomposeMatrix=function(w){var S=p.deltaTransformPoint(w,{x:0,y:1}),P=p.deltaTransformPoint(w,{x:1,y:0}),Z=180/s*o(S.y,S.x)-90,X=180/s*o(P.y,P.x);return{translateX:w.e,translateY:w.f,scaleX:l(w.a*w.a+w.b*w.b),scaleY:l(w.c*w.c+w.d*w.d),skewX:Z,skewY:X,rotation:Z}},p.matrixToScale=function(w){var S,P,Z,X;return w?(S=p.isUndefined(w.a)?1:w.a,X=p.isUndefined(w.d)?1:w.d,P=w.b,Z=w.c):S=X=1,{sx:P?l(S*S+P*P):S,sy:Z?l(Z*Z+X*X):X}},p.matrixToRotate=function(w){var S={x:0,y:1};return w&&(S=p.deltaTransformPoint(w,S)),{angle:$n(Gi(o(S.y,S.x))-90)}},p.matrixToTranslate=function(w){return{tx:w&&w.e||0,ty:w&&w.f||0}},p.isV=function(w){return w instanceof p},p.isVElement=p.isV,p.isSVGGraphicsElement=function(w){return!!w&&(w=p.toNode(w))instanceof SVGElement&&"function"==typeof w.getScreenCTM};var ft=p("svg").node;return p.createSVGMatrix=function(w){var S=ft.createSVGMatrix();for(var P in w)S[P]=w[P];return S},p.createSVGTransform=function(w){return p.isUndefined(w)?ft.createSVGTransform():(w instanceof SVGMatrix||(w=p.createSVGMatrix(w)),ft.createSVGTransformFromMatrix(w))},p.createSVGPoint=function(w,S){var P=ft.createSVGPoint();return P.x=w,P.y=S,P},p.transformRect=function(w,S){var P=ft.createSVGPoint();P.x=w.x,P.y=w.y;var Z=P.matrixTransform(S);P.x=w.x+w.width,P.y=w.y;var X=P.matrixTransform(S);P.x=w.x+w.width,P.y=w.y+w.height;var st=P.matrixTransform(S);P.x=w.x,P.y=w.y+w.height;var ot=P.matrixTransform(S),vt=f(Z.x,X.x,st.x,ot.x),Tt=d(Z.x,X.x,st.x,ot.x),xt=f(Z.y,X.y,st.y,ot.y),Pt=d(Z.y,X.y,st.y,ot.y);return new Lt(vt,xt,Tt-vt,Pt-xt)},p.transformPoint=function(w,S){return new I(p.createSVGPoint(w.x,w.y).matrixTransform(S))},p.transformLine=function(w,S){return new tt(p.transformPoint(w.start,S),p.transformPoint(w.end,S))},p.transformPolyline=function(w,S){var P=w instanceof Ue?w.points:w;p.isArray(P)||(P=[]);for(var Z=[],X=0,st=P.length;X<st;X++)Z[X]=p.transformPoint(P[X],S);return new Ue(Z)},p.styleToObject=function(w){for(var S={},P=w.split(";"),Z=0;Z<P.length;Z++){var st=P[Z].split("=");S[st[0].trim()]=st[1].trim()}return S},p.createSlicePathData=function(w,S,P,Z){var X=2*s-1e-6,st=w,ot=S,vt=P,Tt=Z,xt=(Tt<vt&&(xt=vt,vt=Tt,Tt=xt),Tt-vt),Pt=xt<s?"0":"1",Ot=m(vt),Bt=A(vt),Vt=m(Tt),sn=A(Tt);return xt>=X?st?"M0,"+ot+"A"+ot+","+ot+" 0 1,1 0,"+-ot+"A"+ot+","+ot+" 0 1,1 0,"+ot+"M0,"+st+"A"+st+","+st+" 0 1,0 0,"+-st+"A"+st+","+st+" 0 1,0 0,"+st+"Z":"M0,"+ot+"A"+ot+","+ot+" 0 1,1 0,"+-ot+"A"+ot+","+ot+" 0 1,1 0,"+ot+"Z":st?"M"+ot*Ot+","+ot*Bt+"A"+ot+","+ot+" 0 "+Pt+",1 "+ot*Vt+","+ot*sn+"L"+st*Vt+","+st*sn+"A"+st+","+st+" 0 "+Pt+",0 "+st*Ot+","+st*Bt+"Z":"M"+ot*Ot+","+ot*Bt+"A"+ot+","+ot+" 0 "+Pt+",1 "+ot*Vt+","+ot*sn+"L0,0Z"},p.mergeAttrs=function(w,S){for(var P in S)w[P]="class"===P?w[P]?w[P]+" "+S[P]:S[P]:"style"===P?p.isObject(w[P])&&p.isObject(S[P])?p.mergeAttrs(w[P],S[P]):p.isObject(w[P])?p.mergeAttrs(w[P],p.styleToObject(S[P])):p.isObject(S[P])?p.mergeAttrs(p.styleToObject(w[P]),S[P]):p.mergeAttrs(p.styleToObject(w[P]),p.styleToObject(S[P])):S[P];return w},p.annotateString=function(w,S,P){S=S||[];for(var st,vt,Tt,Z=(P=P||{}).offset||0,X=[],ot=[],xt=0;xt<w.length;xt++){vt=ot[xt]=w[xt];for(var Pt=0;Pt<S.length;Pt++){var Ot=S[Pt];xt>=Ot.start+Z&&xt<Ot.end+Z&&(p.isObject(vt)?vt.attrs=p.mergeAttrs(p.mergeAttrs({},vt.attrs),Ot.attrs):vt=ot[xt]={t:w[xt],attrs:Ot.attrs},P.includeAnnotationIndices&&(vt.annotations||(vt.annotations=[])).push(Pt))}(Tt=ot[xt-1])?p.isObject(vt)&&p.isObject(Tt)?JSON.stringify(vt.attrs)===JSON.stringify(Tt.attrs)?st.t+=vt.t:(X.push(st),st=vt):p.isObject(vt)||p.isObject(Tt)?(X.push(st),st=vt):st=(st||"")+vt:st=vt}return st&&X.push(st),X},p.findAnnotationsAtIndex=function(w,S){var P=[];return w&&w.forEach(function(Z){Z.start<S&&S<=Z.end&&P.push(Z)}),P},p.findAnnotationsBetweenIndexes=function(w,S,P){var Z=[];return w&&w.forEach(function(X){(S>=X.start&&S<X.end||P>X.start&&P<=X.end||X.start>=S&&X.end<P)&&Z.push(X)}),Z},p.shiftAnnotations=function(w,S,P){return w&&w.forEach(function(Z){Z.start<S&&Z.end>=S?Z.end+=P:Z.start>=S&&(Z.start+=P,Z.end+=P)}),w},p.convertLineToPathData=function(w){return["M",(w=p(w)).attr("x1"),w.attr("y1"),"L",w.attr("x2"),w.attr("y2")].join(" ")},p.convertPolygonToPathData=function(w){var S=p.getPointsFromSvgNode(w);return 0===S.length?null:p.svgPointsToPath(S)+" Z"},p.convertPolylineToPathData=function(w){var S=p.getPointsFromSvgNode(w);return 0===S.length?null:p.svgPointsToPath(S)},p.svgPointsToPath=function(w){for(var S=0,P=w.length;S<P;S++)w[S]=w[S].x+" "+w[S].y;return"M "+w.join(" L")},p.getPointsFromSvgNode=function(w){var S=[],P=(w=p.toNode(w)).points;if(P)for(var Z=0,X=P.numberOfItems;Z<X;Z++)S.push(P.getItem(Z));return S},p.KAPPA=.551784,p.convertCircleToPathData=function(w){w=p(w);var S=parseFloat(w.attr("cx"))||0,P=parseFloat(w.attr("cy"))||0,Z=parseFloat(w.attr("r")),X=Z*p.KAPPA;return["M",S,P-Z,"C",S+X,P-Z,S+Z,P-X,S+Z,P,"C",S+Z,P+X,S+X,P+Z,S,P+Z,"C",S-X,P+Z,S-Z,P+X,S-Z,P,"C",S-Z,P-X,S-X,P-Z,S,P-Z,"Z"].join(" ")},p.convertEllipseToPathData=function(w){w=p(w);var S=parseFloat(w.attr("cx"))||0,P=parseFloat(w.attr("cy"))||0,Z=parseFloat(w.attr("rx")),X=parseFloat(w.attr("ry"))||Z,st=Z*p.KAPPA,ot=X*p.KAPPA;return["M",S,P-X,"C",S+st,P-X,S+Z,P-ot,S+Z,P,"C",S+Z,P+ot,S+st,P+X,S,P+X,"C",S-st,P+X,S-Z,P+ot,S-Z,P,"C",S-Z,P-ot,S-st,P-X,S,P-X,"Z"].join(" ")},p.convertRectToPathData=function(w){return w=p(w),p.rectToPath({x:parseFloat(w.attr("x"))||0,y:parseFloat(w.attr("y"))||0,width:parseFloat(w.attr("width"))||0,height:parseFloat(w.attr("height"))||0,rx:parseFloat(w.attr("rx"))||0,ry:parseFloat(w.attr("ry"))||0})},p.rectToPath=function(w){var P=w.x,Z=w.y,X=w.width,st=w.height,ot=f(w.rx||w["top-rx"]||0,X/2),vt=f(w.rx||w["bottom-rx"]||0,X/2),Tt=f(w.ry||w["top-ry"]||0,st/2),xt=f(w.ry||w["bottom-ry"]||0,st/2);return(ot||vt||Tt||xt?["M",P,Z+Tt,"v",st-Tt-xt,"a",vt,xt,0,0,0,vt,xt,"h",X-2*vt,"a",vt,xt,0,0,0,vt,-xt,"v",-(st-xt-Tt),"a",ot,Tt,0,0,0,-ot,-Tt,"h",-(X-2*ot),"a",ot,Tt,0,0,0,-ot,Tt,"Z"]:["M",P,Z,"H",P+X,"V",Z+st,"H",P,"V",Z,"Z"]).join(" ")},p.normalizePathData=function(){var w="\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029",S=new RegExp("([a-z])["+w+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+w+"]*,?["+w+"]*)+)","ig"),P=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+w+"]*,?["+w+"]*","ig"),Z=Math,X=Z.PI,st=Z.sin,ot=Z.cos,vt=Z.tan,Tt=Z.asin,xt=Z.sqrt,Pt=Z.abs;function Ot(Kt,he,ne,re,Oe,an){var ln=.3333333333333333,Le=2/3;return[ln*Kt+Le*ne,ln*he+Le*re,ln*Oe+Le*ne,ln*an+Le*re,Oe,an]}function Bt(Kt,he,ne){return{x:Kt*ot(ne)-he*st(ne),y:Kt*st(ne)+he*ot(ne)}}function Vt(Kt,he,ne,re,Oe,an,ln,Le,Tn,Ze){var Rt,de=120*X/180,Ge=X/180*(+Oe||0),Qt=[];if(Ze)rr=Ze[0],Dn=Ze[1],yo=Ze[2],wo=Ze[3];else{he=(Rt=Bt(Kt,he,-Ge)).y;var pr=((Kt=Rt.x)-(Le=(Rt=Bt(Le,Tn,-Ge)).x))/2,Er=(he-(Tn=Rt.y))/2,As=pr*pr/(ne*ne)+Er*Er/(re*re);As>1&&(ne*=As=xt(As),re*=As);var iu=ne*ne,su=re*re,oc=(an==ln?-1:1)*xt(Pt((iu*su-iu*Er*Er-su*pr*pr)/(iu*Er*Er+su*pr*pr))),yo=oc*ne*Er/re+(Kt+Le)/2,wo=oc*-re*pr/ne+(he+Tn)/2,rr=Tt(((he-wo)/re).toFixed(9)),Dn=Tt(((Tn-wo)/re).toFixed(9));(rr=Kt<yo?X-rr:rr)<0&&(rr=2*X+rr),(Dn=Le<yo?X-Dn:Dn)<0&&(Dn=2*X+Dn),ln&&rr>Dn&&(rr-=2*X),!ln&&Dn>rr&&(Dn-=2*X)}var qu=Dn-rr;if(Pt(qu)>de){var lh=Dn,$u=Le,uc=Tn;Qt=Vt(Le=yo+ne*ot(Dn=rr+de*(ln&&Dn>rr?1:-1)),Tn=wo+re*st(Dn),ne,re,Oe,0,ln,$u,uc,[Dn,lh,yo,wo])}qu=Dn-rr;var ch=ot(rr),fh=st(rr),hh=ot(Dn),dh=st(Dn),lc=vt(qu/4),cc=4/3*(ne*lc),fc=4/3*(re*lc),hc=[Kt,he],Va=[Kt+cc*fh,he-fc*ch],dc=[Le+cc*dh,Tn-fc*hh],gc=[Le,Tn];if(Va[0]=2*hc[0]-Va[0],Va[1]=2*hc[1]-Va[1],Ze)return[Va,dc,gc].concat(Qt);for(var pc=[],Ji=(Qt=[Va,dc,gc].concat(Qt).join().split(",")).length,oa=0;oa<Ji;oa++)pc[oa]=oa%2?Bt(Qt[oa-1],Qt[oa],Ge).y:Bt(Qt[oa],Qt[oa+1],Ge).x;return pc}function dn(Kt){var he=function Re(Kt){if((!Array.isArray(Kt)||!Array.isArray(Kt&&Kt[0]))&&(Kt=function sn(Kt){if(!Kt)return null;var he={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},ne=[];return String(Kt).replace(S,function(re,Oe,an){var ln=[],Le=Oe.toLowerCase();for(an.replace(P,function(Tn,Ze){Ze&&ln.push(+Ze)}),"m"===Le&&ln.length>2&&(ne.push([Oe].concat(ln.splice(0,2))),Le="l",Oe="m"===Oe?"l":"L");ln.length>=he[Le]&&(ne.push([Oe].concat(ln.splice(0,he[Le]))),he[Le]););}),ne}(Kt)),!Kt||!Kt.length)return[["M",0,0]];for(var Le,he=[],ne=0,re=0,Oe=0,an=0,Tn=Kt.length,Ze=0;Ze<Tn;Ze++){var de=[];he.push(de);var Qt,Rt,Ge=Kt[Ze];if((Le=Ge[0])!=Le.toUpperCase())switch(de[0]=Le.toUpperCase(),de[0]){case"A":de[1]=Ge[1],de[2]=Ge[2],de[3]=Ge[3],de[4]=Ge[4],de[5]=Ge[5],de[6]=+Ge[6]+ne,de[7]=+Ge[7]+re;break;case"V":de[1]=+Ge[1]+re;break;case"H":de[1]=+Ge[1]+ne;break;case"M":for(Oe=+Ge[1]+ne,an=+Ge[2]+re,Qt=Ge.length,Rt=1;Rt<Qt;Rt++)de[Rt]=+Ge[Rt]+(Rt%2?ne:re);break;default:for(Qt=Ge.length,Rt=1;Rt<Qt;Rt++)de[Rt]=+Ge[Rt]+(Rt%2?ne:re)}else for(var pr=Ge.length,Er=0;Er<pr;Er++)de[Er]=Ge[Er];switch(de[0]){case"Z":ne=+Oe,re=+an;break;case"H":ne=de[1];break;case"V":re=de[1];break;case"M":Oe=de[de.length-2],an=de[de.length-1],ne=de[de.length-2],re=de[de.length-1];break;default:ne=de[de.length-2],re=de[de.length-1]}}return he}(Kt),ne={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function re(Qt,Rt,pr){var Er,As;if(!Qt)return["C",Rt.x,Rt.y,Rt.x,Rt.y,Rt.x,Rt.y];switch(Qt[0]in{T:1,Q:1}||(Rt.qx=null,Rt.qy=null),Qt[0]){case"M":Rt.X=Qt[1],Rt.Y=Qt[2];break;case"A":Qt=0===parseFloat(Qt[1])||0===parseFloat(Qt[2])?["L",Qt[6],Qt[7]]:["C"].concat(Vt.apply(0,[Rt.x,Rt.y].concat(Qt.slice(1))));break;case"S":"C"===pr||"S"===pr?(Er=2*Rt.x-Rt.bx,As=2*Rt.y-Rt.by):(Er=Rt.x,As=Rt.y),Qt=["C",Er,As].concat(Qt.slice(1));break;case"T":"Q"===pr||"T"===pr?(Rt.qx=2*Rt.x-Rt.qx,Rt.qy=2*Rt.y-Rt.qy):(Rt.qx=Rt.x,Rt.qy=Rt.y),Qt=["C"].concat(Ot(Rt.x,Rt.y,Rt.qx,Rt.qy,Qt[1],Qt[2]));break;case"Q":Rt.qx=Qt[1],Rt.qy=Qt[2],Qt=["C"].concat(Ot(Rt.x,Rt.y,Qt[1],Qt[2],Qt[3],Qt[4]));break;case"H":Qt=["L"].concat(Qt[1],Rt.y);break;case"V":Qt=["L"].concat(Rt.x,Qt[1])}return Qt}function Oe(Qt,Rt){if(Qt[Rt].length>7){Qt[Rt].shift();for(var pr=Qt[Rt];pr.length;)an[Rt]="A",Qt.splice(Rt++,0,["C"].concat(pr.splice(0,6)));Qt.splice(Rt,1),Tn=he.length}}for(var an=[],ln="",Le="",Tn=he.length,Ze=0;Ze<Tn;Ze++){he[Ze]&&(ln=he[Ze][0]),"C"!==ln&&(an[Ze]=ln,Ze>0&&(Le=an[Ze-1])),he[Ze]=re(he[Ze],ne,Le),"A"!==an[Ze]&&"C"===ln&&(an[Ze]="C"),Oe(he,Ze);var de=he[Ze],Ge=de.length;ne.x=de[Ge-2],ne.y=de[Ge-1],ne.bx=parseFloat(de[Ge-4])||ne.x,ne.by=parseFloat(de[Ge-3])||ne.y}return(!he[0][0]||"M"!==he[0][0])&&he.unshift(["M",0,0]),he}return function(Kt){return dn(Kt).join(",").split(",").join(" ")}}(),p.namespace=e,p.g=G,p}();var Nn=Wt(66),Ae=Wt(489),ve=Wt(259);const jn={useCSSSelectors:!0,classNamePrefix:"joint-",defaultTheme:"default",doubleTapInterval:300},Zn=function(t){return t&&t.toString().split(" ").map(function(e){return e.substr(0,jn.classNamePrefix.length)!==jn.classNamePrefix&&(e=jn.classNamePrefix+e),e}).join(" ")},Ys=function(t){return t&&t.toString().split(" ").map(function(e){return e.substr(0,jn.classNamePrefix.length)===jn.classNamePrefix&&(e=e.substr(jn.classNamePrefix.length)),e}).join(" ")},as=function(t,e){for(var n={},r={},s=gt.namespace.svg,o=e||s,l=document.createDocumentFragment(),f=[t,l,o];f.length>0;){o=f.pop();for(var d=f.pop(),m=f.pop(),A=0,p=m.length;A<p;A++){var D=m[A];if(!D.hasOwnProperty("tagName"))throw new Error("json-dom-parser: missing tagName");var B=D.tagName;D.hasOwnProperty("namespaceURI")&&(o=D.namespaceURI);var j=document.createElementNS(o,B),q=o===s,et=q?gt:ve,ht=D.attributes;ht&&et(j).attr(ht);var ft=D.style;if(ft&&ve(j).css(ft),D.hasOwnProperty("className")){var w=D.className;q?j.className.baseVal=w:j.className=w}if(D.hasOwnProperty("textContent")&&(j.textContent=D.textContent),D.hasOwnProperty("selector")){var S=D.selector;if(n[S])throw new Error("json-dom-parser: selector must be unique");n[S]=j,et(j).attr("joint-selector",S)}if(D.hasOwnProperty("groupSelector")){var P=D.groupSelector;Array.isArray(P)||(P=[P]);for(var Z=0,X=P.length;Z<X;Z++){var st=P[Z],ot=r[st];ot||(ot=r[st]=[]),ot.push(j)}}d.appendChild(j);var vt=D.children;Array.isArray(vt)&&f.push(vt,j,o)}}return{fragment:l,selectors:n,groupSelectors:r}},os=function(t){let e=0;if(0===t.length)return e;for(let n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e&=e;return e},Si=function(t,e,n){for(var s,r=Array.isArray(e)?e:e.split(n||"/"),o=0,l=r.length;o<l;){if(s=r[o++],Object(t)!==t||!(s in t))return;t=t[s]}return t},us=function(t,e){return"string"!=typeof e&&"number"!=typeof e&&(e=String(e)),!("constructor"===e&&"function"==typeof t[e]||"__proto__"===e)},Us=function(t,e,n,r){const s=Array.isArray(e)?e:e.split(r||"/"),o=s.length-1;let l=t,f=0;for(;f<o;f++){const d=s[f];if(!us(l,d))return t;l=l[d]||(l[d]={})}return l[s[o]]=n,t},Fs=function(t,e,n){const r=Array.isArray(e)?e:e.split(n||"/"),s=r.length-1;let o=t,l=0;for(;l<s;l++){const f=r[l];if(!us(o,f))return t;const d=o[f];if(!d)return t;o=d}return delete o[r[s]],t},ls=function(t){return ls.id=ls.id||1,t.id=void 0===t.id?"j_"+ls.id++:t.id,t.id},Ta=function(t){return t.replace(/[A-Z]/g,"-$&").toLowerCase()},fn=function(t){var e=t,n=t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0];if(n){for(var r in t)void 0===n[r]&&(n[r]=t[r]);e=n}var s=e.target;if(s){var o=s.correspondingUseElement;o&&(e.target=o)}return e},Vs=function(){var t;if(typeof window<"u"&&(t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame),!t){var e=0;t=function(n){var r=(new Date).getTime(),s=Math.max(0,16-(r-e)),o=setTimeout(function(){n(r+s)},s);return e=r+s,o}}return function(n,r,...s){return t(void 0!==r?n.bind(r,...s):n)}}(),Ls=((e=typeof window<"u")&&(t=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame),t=t||clearTimeout,e?t.bind(window):t),Wn=function(t){return Xn(t)&&"%"===t.slice(-1)},Da=function(t,e){var r=parseFloat(t);if(Number.isNaN(r))return null;var o,s={};if(s.value=r,null==e)o="[A-Za-z]*";else if(Array.isArray(e)){if(0===e.length)return null;o=e.join("|")}else Xn(e)&&(o=e);var l=function n(f){var d=new RegExp("(?:\\d+(?:\\.\\d+)*)("+f+")$").exec(t);return d?d[1]:null}(o);return null===l?null:(s.unit=l,s)},fs=function(t,e,n={},r={}){var s=e.width,o=e.height,l=r.svgDocument||gt("svg").node,f=gt("tspan").node,d=gt("text").attr(n).append(f).node,m=document.createTextNode("");d.style.opacity=0,d.style.display="block",f.style.display="block",f.appendChild(m),l.appendChild(d),r.svgDocument||document.body.appendChild(l);var A=r.separator||" ",p=r.eol||"\n",D=r.hyphen?new RegExp(r.hyphen):/[^\w\d]/,B=r.maxLineCount;hr(B)||(B=1/0);for(var ht,ft,w,j=t.split(A),q=[],et=[],S=0,P=0,Z=j.length;S<Z;S++){var X=j[S];if(X){var st=!1;if(p&&X.indexOf(p)>=0){if(X.length>1){for(var ot=X.split(p),vt=0,Tt=ot.length-1;vt<Tt;vt++)ot.splice(2*vt+1,0,p);j.splice(S,1,...ot.filter(ne=>""!==ne)),S--,Z=j.length;continue}et[++P]="",st=!0}if(!st)if(m.data=et[P]?et[P]+" "+X:X,f.getComputedTextLength()<=s)et[P]=m.data,(ht||ft)&&(q[P++]=!0,ht=0,ft=0);else{if(!et[P]||ht){var xt=!!ht;if(ht=X.length-1,xt||!ht){if(!ht){if(!et[P]){et=[];break}j.splice(S,2,X+j[S+1]),Z--,q[P++]=!0,S--;continue}j[S]=X.substring(0,ht),j[S+1]=X.substring(ht)+(void 0===j[S+1]?"":j[S+1])}else{if(ft)j.splice(S,2,j[S]+j[S+1]),ft=0;else{var Pt=X.search(D);Pt>-1&&Pt!==X.length-1&&0!==Pt&&(ft=Pt+1,ht=0),j.splice(S,1,X.substring(0,ft||ht),X.substring(ft||ht)),Z++}P&&!q[P-1]&&P--}S--;continue}P++,S--}var Ot=null;if(et.length>B)Ot=B-1;else if(void 0!==o){var Bt;void 0===w&&(w=(Bt="auto"===n.lineHeight?{value:1.5,unit:"em"}:Da(n.lineHeight,["em"])||{value:1,unit:"em"}).value,"em"===Bt.unit&&(w*=d.getBBox().height)),w*et.length>o&&(Ot=Math.floor(o/w)-1)}if(null!==Ot){et.splice(Ot+1);var Vt=r.ellipsis;if(!Vt||Ot<0)break;"string"!=typeof Vt&&(Vt="\u2026");var sn=et[Ot];if(!sn&&!st)break;var dn,Kt,Re=sn.length;do{if(Kt=sn[Re],dn=sn.substring(0,Re),Kt?Kt.match(A)&&(dn+=Kt):dn+="string"==typeof A?A:" ",m.data=dn+=Vt,f.getComputedTextLength()<=s){et[Ot]=dn;break}Re--}while(Re>=0);break}}}return r.svgDocument?l.removeChild(d):document.body.removeChild(l),et.join(p)},La=function(t){var e=ve(ve.parseHTML("<div>"+t+"</div>",null,!1));return e.find("*").each(function(){var n=this;ve.each(n.attributes,function(){var s=this.name,o=this.value;(s.startsWith("on")||o.startsWith("javascript:")||o.startsWith("data:")||o.startsWith("vbscript:"))&&ve(n).removeAttr(s)})}),e.html()},_=function(t){if(Object(t)!==t){var e=0;return isFinite(t)&&(e=+t),{top:e,right:e,bottom:e,left:e}}var n,r,s,o;return n=r=s=o=0,isFinite(t.vertical)&&(n=s=+t.vertical),isFinite(t.horizontal)&&(r=o=+t.horizontal),isFinite(t.top)&&(n=+t.top),isFinite(t.right)&&(r=+t.right),isFinite(t.bottom)&&(s=+t.bottom),isFinite(t.left)&&(o=+t.left),{top:n,right:r,bottom:s,left:o}},H={linear:function(t){return t},quad:function(t){return t*t},cubic:function(t){return t*t*t},inout:function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)},exponential:function(t){return Math.pow(2,10*(t-1))},bounce:function(t){for(var e=0,n=1;;e+=n,n/=2)if(t>=(7-4*e)/11){var r=(11-6*e-11*t)/4;return-r*r+n*n}},reverse:function(t){return function(e){return 1-t(1-e)}},reflect:function(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}},clamp:function(t,e,n){return e=e||0,n=n||1,function(r){var s=t(r);return s<e?e:s>n?n:s}},back:function(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}},elastic:function(t){return t||(t=1.5),function(e){return Math.pow(2,10*(e-1))*Math.cos(20*Math.PI*t/3*e)}}},lt={number:function(t,e){var n=e-t;return function(r){return t+n*r}},object:function(t,e){var n=Object.keys(t);return function(r){var s,o,l={};for(s=n.length-1;-1!=s;s--)l[o=n[s]]=t[o]+(e[o]-t[o])*r;return l}},hexColor:function(t,e){var n=parseInt(t.slice(1),16),r=parseInt(e.slice(1),16),s=255&n,o=(255&r)-s,l=65280&n,f=(65280&r)-l,d=16711680&n,m=(16711680&r)-d;return function(A){return"#"+(1<<24|s+o*A&255|l+f*A&65280|d+m*A&16711680).toString(16).slice(1)}},unit:function(t,e){var n=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,r=n.exec(t),s=n.exec(e),o=s[1].indexOf("."),l=o>0?s[1].length-o-1:0,f=+s[1]-(t=+r[1]),d=r[2];return function(m){return(t+f*m).toFixed(l)+d}}},rt={outline:function(t){var n=Number.isFinite(t.margin)?t.margin:2,r=Number.isFinite(t.width)?t.width:1;return c('<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${outerRadius}" /><feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${innerRadius}" /><feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/><feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/><feMerge><feMergeNode in="outline"/><feMergeNode in="SourceGraphic"/></feMerge></filter>')({color:t.color||"blue",opacity:Number.isFinite(t.opacity)?t.opacity:1,outerRadius:n+r,innerRadius:n})},highlight:function(t){return c('<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${width}"/><feComposite result="composed" in="colored" in2="morphed" operator="in"/><feGaussianBlur result="blured" in="composed" stdDeviation="${blur}"/><feBlend in="SourceGraphic" in2="blured" mode="normal"/></filter>')({color:t.color||"red",width:Number.isFinite(t.width)?t.width:1,blur:Number.isFinite(t.blur)?t.blur:0,opacity:Number.isFinite(t.opacity)?t.opacity:1})},blur:function(t){var e=Number.isFinite(t.x)?t.x:2;return c('<filter><feGaussianBlur stdDeviation="${stdDeviation}"/></filter>')({stdDeviation:Number.isFinite(t.y)?[e,t.y]:e})},dropShadow:function(t){var e="SVGFEDropShadowElement"in window?'<filter><feDropShadow stdDeviation="${blur}" dx="${dx}" dy="${dy}" flood-color="${color}" flood-opacity="${opacity}"/></filter>':'<filter><feGaussianBlur in="SourceAlpha" stdDeviation="${blur}"/><feOffset dx="${dx}" dy="${dy}" result="offsetblur"/><feFlood flood-color="${color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="${opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>';return c(e)({dx:t.dx||0,dy:t.dy||0,opacity:Number.isFinite(t.opacity)?t.opacity:1,color:t.color||"black",blur:Number.isFinite(t.blur)?t.blur:4})},grayscale:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return c('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0"/></filter>')({a:.2126+.7874*(1-e),b:.7152-.7152*(1-e),c:.0722-.0722*(1-e),d:.2126-.2126*(1-e),e:.7152+.2848*(1-e),f:.0722-.0722*(1-e),g:.2126-.2126*(1-e),h:.0722+.9278*(1-e)})},sepia:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return c('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0"/></filter>')({a:.393+.607*(1-e),b:.769-.769*(1-e),c:.189-.189*(1-e),d:.349-.349*(1-e),e:.686+.314*(1-e),f:.168-.168*(1-e),g:.272-.272*(1-e),h:.534-.534*(1-e),i:.131+.869*(1-e)})},saturate:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return c('<filter><feColorMatrix type="saturate" values="${amount}"/></filter>')({amount:1-e})},hueRotate:function(t){return c('<filter><feColorMatrix type="hueRotate" values="${angle}"/></filter>')({angle:t.angle||0})},invert:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return c('<filter><feComponentTransfer><feFuncR type="table" tableValues="${amount} ${amount2}"/><feFuncG type="table" tableValues="${amount} ${amount2}"/><feFuncB type="table" tableValues="${amount} ${amount2}"/></feComponentTransfer></filter>')({amount:e,amount2:1-e})},brightness:function(t){return c('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}"/><feFuncG type="linear" slope="${amount}"/><feFuncB type="linear" slope="${amount}"/></feComponentTransfer></filter>')({amount:Number.isFinite(t.amount)?t.amount:1})},contrast:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return c('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}" intercept="${amount2}"/><feFuncG type="linear" slope="${amount}" intercept="${amount2}"/><feFuncB type="linear" slope="${amount}" intercept="${amount2}"/></feComponentTransfer></filter>')({amount:e,amount2:.5-e/2})}},c=function(t){var e=/<%= ([^ ]+) %>|\$\{ ?([^{} ]+) ?\}|\{\{([^{} ]+)\}\}/g;return function(n){return n=n||{},t.replace(e,function(r){for(var s=Array.from(arguments),o=s.slice(1,4).find(function(d){return!!d}),l=o.split("."),f=n[l.shift()];void 0!==f&&l.length;)f=f[l.shift()];return void 0!==f?f:""})}},R=Ae.assign,Y=Ae.defaults,it=Ae.defaultsDeep,dt=Ae.invokeMap||Ae.invoke,Mt=Ae.sortedIndexBy||Ae.sortedIndex,ct=Ae.uniqBy||Ae.uniq,mt=Ae.clone,kt=Ae.cloneDeep,ie=Ae.isEmpty,Yt=Ae.isEqual,qt=Ae.isFunction,ye=Ae.isPlainObject,te=Ae.toArray,ee=Ae.groupBy,We=Ae.flattenDeep,hn=Ae.without,Hs=Ae.difference,Pr=Ae.union,fr=Ae.has,un=Ae.result,mn=Ae.omit,hs=Ae.pick,_n=Ae.forIn,ka=Ae.camelCase,Fi=Ae.uniqueId,zn=function(){if(Ae.mergeWith){var t=Array.from(arguments),e=t[t.length-1],n=qt(e)?e:qa;return t.push(function(r,s){var o=n(r,s);return void 0!==o?o:Array.isArray(r)&&!Array.isArray(s)?s:void 0}),Ae.mergeWith.apply(this,t)}return Ae.merge.apply(this,arguments)},Fe=function(t){return!!t&&("object"==typeof t||"function"==typeof t)},hr=function(t){return"number"==typeof t||!!t&&"object"==typeof t&&"[object Number]"===Object.prototype.toString.call(t)},Xn=function(t){return"string"==typeof t||!!t&&"object"==typeof t&&"[object String]"===Object.prototype.toString.call(t)},qa=function(){};var t,e;function dr(t){t=ct(t);const e=te(t).reduce(function(n,r){return n[r.id]=r.clone(),n},{});return te(t).forEach(function(n){const r=e[n.id];if(r.isLink()){const l=r.source(),f=r.target();l.id&&e[l.id]&&r.prop("source/id",e[l.id].id),f.id&&e[f.id]&&r.prop("target/id",e[f.id].id)}const s=n.get("parent");s&&e[s]&&r.set("parent",e[s].id);const o=te(n.get("embeds")).reduce(function(l,f){return e[f]&&l.push(e[f].id),l},[]);ie(o)||r.set("embeds",o)}),e}const pi={x:"x",y:"y",width:"w",height:"h",minimum:"s",maximum:"l",diagonal:"d"},Js=Object.keys(pi).map(t=>pi[t]).join(""),$a="[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?",xo=/\s/g,No=new RegExp(`^(${$a}\\*)?([${Js}])([-+]{1,2}${$a})?$`,"g");function pa(t){throw new Error(`Invalid calc() expression: ${t}`)}function uu(t,e){const n=No.exec(t.replace(xo,""));n||pa(t),No.lastIndex=0;const[,r=1,s,o=0]=n,{x:l,y:f,width:d,height:m}=e;let A=0;switch(s){case pi.width:A=d;break;case pi.height:A=m;break;case pi.x:A=l;break;case pi.y:A=f;break;case pi.minimum:A=Math.min(m,d);break;case pi.maximum:A=Math.max(m,d);break;case pi.diagonal:A=Math.sqrt(m*m+d*d)}return parseFloat(r)*A+function lu(t){if(!t)return 0;const[e]=t;switch(e){case"+":return parseFloat(t.substr(1));case"-":return-parseFloat(t.substr(1))}return parseFloat(t)}(o)}function to(t){return"string"==typeof t&&t.includes("calc")}const Mo="calc(".length;function va(t,e){let n=t,r=0;for(;;){let s=n.indexOf("calc(",r);if(-1===s)return n;let o=s+Mo,l=1;t:for(;;){switch(n[o]){case"(":l++;break;case")":if(l--,0===l)break t;break;case void 0:pa(n)}o++}let f=n.slice(s+Mo,o);to(f)&&(f=va(f,e));const d=String(uu(f,e));n=n.slice(0,s)+d+n.slice(o+1),r=s+d.length}}function er(t,e){return function(n,r){var s=Wn(n);n=parseFloat(n),s&&(n/=100);var o={};if(isFinite(n)){var l=s||n>=0&&n<=1?n*r[e]:Math.max(n+r[e],0);o[t]=l}return o}}function qr(t,e,n){return function(r,s){var l,o=Wn(r);if(r=parseFloat(r),o&&(r/=100),isFinite(r)){var f=s[n]();l=o||r>0&&r<1?f[t]+s[e]*r:f[t]+r}var d=I();return d[t]=l||0,d}}function Ti(t,e,n){return function(r,s){var o;o="middle"===r?s[e]/2:r===n?s[e]:isFinite(r)?r>-1&&r<1?-s[e]*r:-r:Wn(r)?s[e]*parseFloat(r)/100:0;var l=I();return l[t]=-(s[t]+o),l}}function Ks(t,e){var n="joint-shape",r=e&&e.resetOffset;return function(s,o,l){var f=ve(l),d=f.data(n);if(!d||d.value!==s){var m=t(s);d={value:s,shape:m,shapeBBox:m.bbox()},f.data(n,d)}var A=d.shape.clone(),p=d.shapeBBox.clone(),D=p.origin(),B=o.origin();p.x=B.x,p.y=B.y;var j=o.maxRectScaleToFit(p,B);return A.scale(0===p.width||0===o.width?1:j.sx,0===p.height||0===o.height?1:j.sy,D),r&&A.translate(-D.x,-D.y),A}}function eo(t){var n=Ks(function e(r){return new _t(gt.normalizePathData(r))},t);return function(r,s,o){return{d:n(r,s,o).serialize()}}}function So(t){var e=Ks(Ue,t);return function(n,r,s){return{points:e(n,r,s).serialize()}}}function tn(t,e){var n=new I(1,0);return function(r){var s,o,l=this[t](r);return l?(o=e.rotate?l.vector().vectorAngle(n):0,s=l.start):(s=this.path.start,o=0),0===o?{transform:"translate("+s.x+","+s.y+")"}:{transform:"translate("+s.x+","+s.y+") rotate("+o+")"}}}function Di(t){return function(n,r,s){const o=gt(s);o.attr(t)!==n&&o.attr(t,n)}}function In(t,e,n){return void 0!==n.text}function Cr(){return this.model.isLink()}function ma(t){var e={},n=t.stroke;"string"==typeof n&&(e.stroke=n,e.fill=n);var r=t.strokeOpacity;return void 0===r&&(r=t["stroke-opacity"]),void 0===r&&(r=t.opacity),void 0!==r&&(e["stroke-opacity"]=r,e["fill-opacity"]=r),e}function no(t){const{paper:e}=this;return`url(#${"pattern"===t.type?e.definePattern(t):e.defineGradient(t)})`}const we={xlinkShow:{set:"xlink:show"},xlinkRole:{set:"xlink:role"},xlinkType:{set:"xlink:type"},xlinkArcrole:{set:"xlink:arcrole"},xlinkTitle:{set:"xlink:title"},xlinkActuate:{set:"xlink:actuate"},xmlSpace:{set:"xml:space"},xmlBase:{set:"xml:base"},xmlLang:{set:"xml:lang"},preserveAspectRatio:{set:"preserveAspectRatio"},requiredExtension:{set:"requiredExtension"},requiredFeatures:{set:"requiredFeatures"},systemLanguage:{set:"systemLanguage"},externalResourcesRequired:{set:"externalResourceRequired"},href:{set:Di("href")},xlinkHref:{set:Di("xlink:href")},filter:{qualify:ye,set:function(t){return"url(#"+this.paper.defineFilter(t)+")"}},fill:{qualify:ye,set:no},stroke:{qualify:ye,set:no},sourceMarker:{qualify:ye,set:function(t,e,n,r){return t=R(ma(r),t),{"marker-start":"url(#"+this.paper.defineMarker(t)+")"}}},targetMarker:{qualify:ye,set:function(t,e,n,r){return t=R(ma(r),{transform:"rotate(180)"},t),{"marker-end":"url(#"+this.paper.defineMarker(t)+")"}}},vertexMarker:{qualify:ye,set:function(t,e,n,r){return t=R(ma(r),t),{"marker-mid":"url(#"+this.paper.defineMarker(t)+")"}}},text:{qualify:function(t,e,n){return!n.textWrap||!ye(n.textWrap)},set:function(t,e,n,r){var s=ve(n),o="joint-text",l=s.data(o),f=hs(r,"lineHeight","annotations","textPath","x","textVerticalAnchor","eol","displayEmpty");const{x:d}=f;to(d)&&(f.x=va(d,e));var m=f.fontSize=r["font-size"]||r.fontSize,A=JSON.stringify([t,f]);if(void 0===l||l!==A){m&&n.setAttribute("font-size",m);var p=f.textPath;if(Fe(p)){var D=p.selector;if("string"==typeof D){var B=this.findBySelector(D)[0];B instanceof SVGPathElement&&(f.textPath=R({"xlink:href":"#"+B.id},p))}}gt(n).text(""+t,f),s.data(o,A)}}},textWrap:{qualify:ye,set:function(t,e,n,r){var s=t.width||0,o={};o.width=Wn(s)?e.width*parseFloat(s)/100:s<=0?e.width+s:s;var l=t.height||0;o.height=Wn(l)?e.height*parseFloat(l)/100:l<=0?e.height+l:l;var f,d=t.text;void 0===d&&(d=r.text),f=void 0!==d?fs(""+d,o,{"font-weight":r["font-weight"]||r.fontWeight,"font-size":r["font-size"]||r.fontSize,"font-family":r["font-family"]||r.fontFamily,lineHeight:r.lineHeight,"letter-spacing":"letter-spacing"in r?r["letter-spacing"]:r.letterSpacing},{svgDocument:this.paper.svg,ellipsis:t.ellipsis,hyphen:t.hyphen,maxLineCount:t.maxLineCount}):"",we.text.set.call(this,f,e,n,r)}},title:{qualify:function(t,e){return e instanceof SVGElement},set:function(t,e,n){var r=ve(n),s="joint-title",o=r.data(s);if(void 0===o||o!==t){r.data(s,t);var l=n.firstChild;if(l&&"TITLE"===l.tagName.toUpperCase())l.textContent=t;else{var f=document.createElementNS(n.namespaceURI,"title");f.textContent=t,n.insertBefore(f,l)}}}},lineHeight:{qualify:In},textVerticalAnchor:{qualify:In},textPath:{qualify:In},annotations:{qualify:In},eol:{qualify:In},displayEmpty:{qualify:In},port:{set:function(t){return null===t||void 0===t.id?t:t.id}},style:{qualify:ye,set:function(t,e,n){ve(n).css(t)}},html:{set:function(t,e,n){ve(n).html(t+"")}},ref:{},refX:{position:qr("x","width","origin")},refY:{position:qr("y","height","origin")},refDx:{position:qr("x","width","corner")},refDy:{position:qr("y","height","corner")},refWidth:{set:er("width","width")},refHeight:{set:er("height","height")},refRx:{set:er("rx","width")},refRy:{set:er("ry","height")},refRInscribed:{set:function(t){var e=er("r","width"),n=er("r","height");return function(r,s){return(s.height>s.width?e:n)(r,s)}}()},refRCircumscribed:{set:function(t,e){var n=Wn(t);t=parseFloat(t),n&&(t/=100);var s,r=Math.sqrt(e.height*e.height+e.width*e.width);return isFinite(t)&&(s=n||t>=0&&t<=1?t*r:Math.max(t+r,0)),{r:s}}},refCx:{set:er("cx","width")},refCy:{set:er("cy","height")},xAlignment:{offset:Ti("x","width","right")},yAlignment:{offset:Ti("y","height","bottom")},resetOffset:{offset:function(t,e){return t?{x:-e.x,y:-e.y}:{x:0,y:0}}},refDResetOffset:{set:eo({resetOffset:!0})},refDKeepOffset:{set:eo({resetOffset:!1})},refPointsResetOffset:{set:So({resetOffset:!0})},refPointsKeepOffset:{set:So({resetOffset:!1})},connection:{qualify:Cr,set:function({stubs:t=0}){let e;if(isFinite(t)&&0!==t){let n;n=t<0?(this.getConnectionLength()+t)/2:t;const r=this.getConnection(),s=r.divideAtLength(n),o=r.divideAtLength(-n);s&&o&&(e=`${s[0].serialize()} ${o[1].serialize()}`)}return{d:e||this.getSerializedConnection()}}},atConnectionLengthKeepGradient:{qualify:Cr,set:tn("getTangentAtLength",{rotate:!0})},atConnectionLengthIgnoreGradient:{qualify:Cr,set:tn("getTangentAtLength",{rotate:!1})},atConnectionRatioKeepGradient:{qualify:Cr,set:tn("getTangentAtRatio",{rotate:!0})},atConnectionRatioIgnoreGradient:{qualify:Cr,set:tn("getTangentAtRatio",{rotate:!1})}};we["xlink:href"]=we.xlinkHref,["transform","d","points","width","height","cx","cy","r","rx","ry","x1","x2","y1","y2","x","y","dx","dy"].forEach(t=>{we[t]={qualify:to,set:function(n,r){return{[t]:va(n,r)}}}}),we.refR=we.refRInscribed,we.refD=we.refDResetOffset,we.refPoints=we.refPointsResetOffset,we.atConnectionLength=we.atConnectionLengthKeepGradient,we.atConnectionRatio=we.atConnectionRatioKeepGradient,we.refX2=we.refX,we.refY2=we.refY,we.refWidth2=we.refWidth,we.refHeight2=we.refHeight,we["ref-x"]=we.refX,we["ref-y"]=we.refY,we["ref-dy"]=we.refDy,we["ref-dx"]=we.refDx,we["ref-width"]=we.refWidth,we["ref-height"]=we.refHeight,we["x-alignment"]=we.xAlignment,we["y-alignment"]=we.yAlignment;const To=we,mi=Nn.Model.extend({constructor:function(t,e){var n,r=t||{};"function"==typeof this.preinitialize&&this.preinitialize.apply(this,arguments),this.cid=Fi("c"),this.attributes={},e&&e.collection&&(this.collection=e.collection),e&&e.parse&&(r=this.parse(r,e)||{}),(n=un(this,"defaults"))&&(r=zn({},n,r)),this.set(r,e),this.changed={},this.initialize.apply(this,arguments)},translate:function(t,e,n){throw new Error("Must define a translate() method.")},toJSON:function(){const e=un(this.constructor.prototype,"defaults").attrs||{},r={};_n(this.attributes.attrs,function(o,l){const f=e[l];_n(o,function(d,m){Fe(d)&&!Array.isArray(d)?_n(d,function(A,p){(!f||!f[m]||!Yt(f[m][p],A))&&(r[l]=r[l]||{},(r[l][m]||(r[l][m]={}))[p]=A)}):(!f||!Yt(f[m],d))&&(r[l]=r[l]||{},r[l][m]=d)})});const s=kt(mn(this.attributes,"attrs"));return s.attrs=r,s},initialize:function(t){const e=this.getIdAttribute();(!t||!(e in t))&&this.set(e,this.generateId(),{silent:!0}),this._transitionIds={},this._scheduledTransitionIds={},this.processPorts(),this.on("change:attrs",this.processPorts,this)},getIdAttribute:function(){return this.idAttribute||"id"},generateId:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})},processPorts:function(){var t=this.ports,e={};_n(this.get("attrs"),function(o,l){o&&o.port&&(void 0!==o.port.id?e[o.port.id]=o.port:e[o.port]={id:o.port})});var n={};_n(t,function(o,l){e[l]||(n[l]=!0)}),this.graph&&!ie(n)&&(this.graph.getConnectedLinks(this,{inbound:!0}).forEach(function(o){n[o.get("target").port]&&o.remove()}),this.graph.getConnectedLinks(this,{outbound:!0}).forEach(function(o){n[o.get("source").port]&&o.remove()})),this.ports=e},remove:function(t={}){const{graph:e,collection:n}=this;if(!e)return n&&n.remove(this,t),this;e.startBatch("remove");const r=this.getParentCell();r&&r.unembed(this,t);const s=this.getEmbeddedCells();for(let o=0,l=s.length;o<l;o++){const f=s[o];f&&f.remove(t)}return this.trigger("remove",this,e.attributes.cells,t),e.stopBatch("remove"),this},toFront:function(t){var e=this.graph;if(e){t=t||{};var r,n=e.maxZIndex();t.deep?(r=this.getEmbeddedCells({deep:!0,breadthFirst:!1!==t.breadthFirst})).unshift(this):r=[this],n=n-r.length+1;var s=e.get("cells"),o=s.indexOf(this)!==s.length-r.length;o||(o=r.some(function(l,f){return l.get("z")!==n+f})),o&&(this.startBatch("to-front"),n+=r.length,r.forEach(function(l,f){l.set("z",n+f,t)}),this.stopBatch("to-front"))}return this},toBack:function(t){var e=this.graph;if(e){t=t||{};var r,n=e.minZIndex();t.deep?(r=this.getEmbeddedCells({deep:!0,breadthFirst:!1!==t.breadthFirst})).unshift(this):r=[this];var o=0!==e.get("cells").indexOf(this);o||(o=r.some(function(l,f){return l.get("z")!==n+f})),o&&(this.startBatch("to-back"),n-=r.length,r.forEach(function(l,f){l.set("z",n+f,t)}),this.stopBatch("to-back"))}return this},parent:function(t,e){return void 0===t?this.get("parent"):this.set("parent",t,e)},embed:function(t,e){const n=Array.isArray(t)?t:[t];if(!this.canEmbed(n))throw new Error("Recursive embedding not allowed.");return this._embedCells(n,e),this},unembed:function(t,e){const n=Array.isArray(t)?t:[t];return this._unembedCells(n,e),this},canEmbed:function(t){return(Array.isArray(t)?t:[t]).every(n=>this!==n&&!this.isEmbeddedIn(n))},_embedCells:function(t,e){const n="embed";this.startBatch(n);const r=R([],this.get("embeds"));t.forEach(s=>{r[s.isLink()?"unshift":"push"](s.id),s.parent(this.id,e)}),this.set("embeds",ct(r),e),this.stopBatch(n)},_unembedCells:function(t,e){const n="unembed";this.startBatch(n),t.forEach(r=>r.unset("parent",e)),this.set("embeds",hn(this.get("embeds"),...t.map(r=>r.id)),e),this.stopBatch(n)},getParentCell:function(){var t=this.parent(),e=this.graph;return t&&e&&e.getCell(t)||null},getAncestors:function(){var t=[];if(!this.graph)return t;for(var e=this.getParentCell();e;)t.push(e),e=e.getParentCell();return t},getEmbeddedCells:function(t){if(t=t||{},this.graph){var e;if(t.deep)if(t.breadthFirst){e=[];for(var n=this.getEmbeddedCells();n.length>0;){var r=n.shift();e.push(r),n.push.apply(n,r.getEmbeddedCells())}}else(e=this.getEmbeddedCells()).forEach(function(s){e.push.apply(e,s.getEmbeddedCells(t))});else e=te(this.get("embeds")).map(this.graph.getCell,this.graph);return e}return[]},isEmbeddedIn:function(t,e){var n=Xn(t)?t:t.id,r=this.parent();if(e=Y({deep:!0},e),this.graph&&e.deep){for(;r;){if(r===n)return!0;r=this.graph.getCell(r).parent()}return!1}return r===n},isEmbedded:function(){return!!this.parent()},clone:function(t){if((t=t||{}).deep)return te(dr([this].concat(this.getEmbeddedCells({deep:!0}))));var e=Nn.Model.prototype.clone.apply(this,arguments);return e.set(this.getIdAttribute(),this.generateId()),e.unset("embeds"),e.unset("parent"),e},prop:function(t,e,n){var r="/",s=Xn(t);if(s||Array.isArray(t)){if(arguments.length>1){var o,l;s?l=(o=t).split("/"):(o=t.join(r),l=t.slice());var f=l[0],d=l.length;if((n=n||{}).propertyPath=o,n.propertyValue=e,n.propertyPathArray=l,1===d)return this.set(f,e,n);for(var m={},A=m,p=f,D=1;D<d;D++){var B=l[D],j=Number.isFinite(s?Number(B):B);A=A[p]=j?[]:{},p=B}m=Us(m,l,e,"/");var q=zn({},this.attributes);n.rewrite&&Fs(q,o,"/");var et=zn(q,m);return this.set(f,et[f],n)}return Si(this.attributes,t,r)}return this.set(zn({},this.attributes,t),e)},removeProp:function(t,e){e=e||{};var n=Array.isArray(t)?t:t.split("/"),r=n[0];if("attrs"===r&&(e.dirty=!0),1===n.length)return this.unset(t,e);var s=n.slice(1),o=kt(this.get(r));return Fs(o,s,"/"),this.set(r,o,e)},attr:function(t,e,n){var r=Array.from(arguments);return 0===r.length?this.get("attrs"):(r[0]=Array.isArray(t)?["attrs"].concat(t):Xn(t)?"attrs/"+t:{attrs:t},this.prop.apply(this,r))},removeAttr:function(t,e){return Array.isArray(t)?this.removeProp(["attrs"].concat(t)):this.removeProp("attrs/"+t,e)},transition:function(t,e,n,r){r=r||"/",n=R({duration:100,delay:10,timingFunction:H.linear,valueFunction:lt.number},n);var l,o=0,f=function(p){var D,B,j;(B=(p-=o=o||p)/n.duration)<1?this._transitionIds[t]=D=Vs(f):(B=1,delete this._transitionIds[t]),j=l(n.timingFunction(B)),n.transitionId=D,this.prop(t,j,n),D||this.trigger("transition:end",this,t)}.bind(this);const{_scheduledTransitionIds:d}=this;let m;return m=setTimeout(p=>{d[t]&&(d[t]=hn(d[t],m),0===d[t].length&&delete d[t]),this.stopPendingTransitions(t,r),l=n.valueFunction(Si(this.attributes,t,r),e),this._transitionIds[t]=Vs(p),this.trigger("transition:start",this,t)},n.delay,f),d[t]||(d[t]=[]),d[t].push(m),m},getTransitions:function(){return Pr(Object.keys(this._transitionIds),Object.keys(this._scheduledTransitionIds))},stopScheduledTransitions:function(t,e="/"){const{_scheduledTransitionIds:n={}}=this;let r=Object.keys(n);if(t){const s=t.split(e);r=r.filter(o=>Yt(s,o.split(e).slice(0,s.length)))}return r.forEach(s=>{n[s].forEach(l=>clearTimeout(l)),delete n[s]}),this},stopPendingTransitions(t,e="/"){const{_transitionIds:n={}}=this;let r=Object.keys(n);if(t){const s=t.split(e);r=r.filter(o=>Yt(s,o.split(e).slice(0,s.length)))}r.forEach(s=>{Ls(n[s]),delete n[s],this.trigger("transition:end",this,s)})},stopTransitions:function(t,e="/"){return this.stopScheduledTransitions(t,e),this.stopPendingTransitions(t,e),this},addTo:function(t,e){return t.addCell(this,e),this},findView:function(t){return t.findViewByModel(this)},isElement:function(){return!1},isLink:function(){return!1},startBatch:function(t,e){return this.graph&&this.graph.startBatch(t,R({},e,{cell:this})),this},stopBatch:function(t,e){return this.graph&&this.graph.stopBatch(t,R({},e,{cell:this})),this},getChangeFlag:function(t){var e=0;if(!t)return e;for(var n in t)!t.hasOwnProperty(n)||!this.hasChanged(n)||(e|=t[n]);return e},angle:function(){return 0},position:function(){return new I(0,0)},getPointFromConnectedLink:function(){return new I},getBBox:function(){return new Lt(0,0,0,0)},getPointRotatedAroundCenter(t,e,n){const r=new I(e,n);return t&&r.rotate(this.getBBox().center(),t),r},getAbsolutePointFromRelative(t,e){return this.getPointRotatedAroundCenter(-this.angle(),this.position().offset(t,e))},getRelativePointFromAbsolute(t,e){return this.getPointRotatedAroundCenter(this.angle(),t,e).difference(this.position())}},{getAttributeDefinition:function(t){var e=this.attributes;return e&&e[t]||To[t]},define:function(t,e,n,r){n=R({defaults:it({type:t},e,this.prototype.defaults)},n);var s=this.extend(n,r);return typeof joint<"u"&&fr(joint,"shapes")&&Us(joint.shapes,t,s,"."),s}});function Ii(t,e,n){var r=t.toJSON();return r.angle=e||0,Y({},n,r)}function nt(t,e,n){return t.map(function(r,s,o){var l=this.pointAt((s+.5)/o.length);return(r.dx||r.dy)&&l.offset(r.dx||0,r.dy||0),Ii(l.round(),0,r)},Ct(e,n))}function yt(t,e,n,r){var s=e.center(),o=e.width/e.height,l=e.topMiddle(),f=ce.fromRect(e);return t.map(function(d,m,A){var p=n+r(m,A.length),D=l.clone().rotate(s,-p).scale(o,1,s),B=d.compensateRotation?-f.tangentTheta(D):0;return(d.dx||d.dy)&&D.offset(d.dx||0,d.dy||0),d.dr&&D.move(s,d.dr),Ii(D.round(),B,d)})}function pt(t,e){var n=e.x;Xn(n)&&(n=parseFloat(n)/100*t.width);var r=e.y;return Xn(r)&&(r=parseFloat(r)/100*t.height),T(n||0,r||0)}const Zt=function(t,e,n){return t.map(pt.bind(null,e))},fe=function(t,e,n){return n.fn(t,e,n)},Ve=function(t,e,n){return nt(t,pt(e,n.start||e.origin()),pt(e,n.end||e.corner()))},Mn=function(t,e,n){return nt(t,e.origin(),e.bottomLeft())},rn=function(t,e,n){return nt(t,e.topRight(),e.corner())},Ia=function(t,e,n){return nt(t,e.origin(),e.topRight())},cu=function(t,e,n){return nt(t,e.bottomLeft(),e.corner())},z=function(t,e,n){var s=n.step||360/t.length;return yt(t,e,n.startAngle||0,function(o){return o*s})},U=function(t,e,n){var s=n.step||20;return yt(t,e,n.startAngle||0,function(o,l){return(o+.5-l/2)*s})};function Q(t,e){return it({},t,e,{x:0,y:0,angle:0,attrs:{".":{y:"0","text-anchor":"start"}}})}function At(t,e,n,r){r=Y({},r,{offset:15});var l,f,d,m,s=e.center().theta(t),o=at(e),A=r.offset,p=0;s<o[1]||s>o[2]?(d=".3em",l=A,f=0,m="start"):s<o[0]?(d="0",l=0,f=-A,n?(p=-90,m="start"):m="middle"):s<o[3]?(d=".3em",l=-A,f=0,m="end"):(d=".6em",l=0,f=A,n?(p=90,m="start"):m="middle");var D=Math.round;return Q({x:D(l),y:D(f),angle:p,attrs:{".":{y:d,"text-anchor":m}}})}function at(t){var e=t.center(),n=e.theta(t.origin()),r=e.theta(t.bottomLeft()),s=e.theta(t.corner());return[n,e.theta(t.topRight()),s,r]}function wt(t,e,n,r){var o,l,f,d,s=e.center().theta(t),m=(r=Y({},r,{offset:15})).offset,A=0,p=at(e);s<p[1]||s>p[2]?(f=".3em",o=-m,l=0,d="end"):s<p[0]?(f=".6em",o=0,l=m,n?(A=90,d="start"):d="middle"):s<p[3]?(f=".3em",o=m,l=0,d="start"):(f="0em",o=0,l=-m,n?(A=-90,d="start"):d="middle");var D=Math.round;return Q({x:D(o),y:D(l),angle:A,attrs:{".":{y:f,"text-anchor":d}}})}function It(t,e,n){n=Y({},n,{offset:20});var d,r=T(0,0),s=-t.theta(r),o=s,l=t.clone().move(r,n.offset).difference(t).round(),f=".3em";(s+90)%180==0?(d=e?"end":"middle",!e&&-270===s&&(f="0em")):s>-270&&s<-90?(d="start",o=s-180):d="end";var m=Math.round;return Q({x:m(l.x),y:m(l.y),angle:e?o:0,attrs:{".":{y:f,"text-anchor":d}}})}const Et=function(t,e,n){return Q(n,e)},zt=function(t,e,n){return Q(n,{x:-15,attrs:{".":{y:".3em","text-anchor":"end"}}})},Jt=function(t,e,n){return Q(n,{x:15,attrs:{".":{y:".3em","text-anchor":"start"}}})},$t=function(t,e,n){return Q(n,{y:-15,attrs:{".":{"text-anchor":"middle"}}})},oe=function(t,e,n){return Q(n,{y:15,attrs:{".":{y:".6em","text-anchor":"middle"}}})},Te=function(t,e,n){return At(t,e,!0,n)},en=function(t,e,n){return At(t,e,!1,n)},Ft=function(t,e,n){return wt(t,e,!0,n)},Sn=function(t,e,n){return wt(t,e,!1,n)},gr=function(t,e,n){return It(t.difference(e.center()),!1,n)},yr=function(t,e,n){return It(t.difference(e.center()),!0,n)};var An=function(t){var e=kt(t)||{};this.ports=[],this.groups={},this.portLayoutNamespace=Nr,this.portLabelLayoutNamespace=se,this._init(e)};An.prototype={getPorts:function(){return this.ports},getGroup:function(t){return this.groups[t]||{}},getPortsByGroup:function(t){return this.ports.filter(function(e){return e.group===t})},getGroupPortsMetrics:function(t,e){var n=this.getGroup(t),r=this.getPortsByGroup(t),s=n.position||{},o=s.name,l=this.portLayoutNamespace;l[o]||(o="left");var f=s.args||{},d=r.map(function(p){return p&&p.position&&p.position.args}),m=l[o](d,e,f),A={ports:r,result:[]};return te(m).reduce(function(p,D,B){var j=p.ports[B];return p.result.push({portId:j.id,portTransformation:D,labelTransformation:this._getPortLabelLayout(j,I(D),e),portAttrs:j.attrs,portSize:j.size,labelSize:j.label.size}),p}.bind(this),A),A.result},_getPortLabelLayout:function(t,e,n){var r=this.portLabelLayoutNamespace,s=t.label.position.name||"left";return r[s]?r[s](e,n,t.label.position.args):null},_init:function(t){if(Fe(t.groups))for(var e=Object.keys(t.groups),n=0,r=e.length;n<r;n++){var s=e[n];this.groups[s]=this._evaluateGroup(t.groups[s])}for(var o=te(t.items),l=0,f=o.length;l<f;l++)this.ports.push(this._evaluatePort(o[l]))},_evaluateGroup:function(t){return zn(t,{position:this._getPosition(t.position,!0),label:this._getLabel(t,!0)})},_evaluatePort:function(t){var e=R({},t),n=this.getGroup(t.group);return e.markup=e.markup||n.markup,e.attrs=zn({},n.attrs,e.attrs),e.position=this._createPositionNode(n,e),e.label=zn({},n.label,this._getLabel(e)),e.z=this._getZIndex(n,e),e.size=R({},n.size,e.size),e},_getZIndex:function(t,e){return hr(e.z)?e.z:hr(t.z)||"auto"===t.z?t.z:"auto"},_createPositionNode:function(t,e){return zn({name:"left",args:{}},t.position,{args:e.args})},_getPosition:function(t,e){var r,n={};qt(t)?(r="fn",n.fn=t):Xn(t)?r=t:void 0===t?r=e?"left":null:Array.isArray(t)?(r="absolute",n.x=t[0],n.y=t[1]):Fe(t)&&(r=t.name,R(n,t.args));var s={args:n};return r&&(s.name=r),s},_getLabel:function(t,e){var n=t.label||{},r=n;return r.position=this._getPosition(n.position,e),r}};const Qs={_initializePorts:function(){this._createPortData(),this.on("change:ports",function(){this._processRemovedPort(),this._createPortData()},this)},_processRemovedPort:function(){var t=this.get("ports")||{},e={};te(t.items).forEach(function(f){e[f.id]=!0});var n=this.previous("ports")||{},r={};te(n.items).forEach(function(f){e[f.id]||(r[f.id]=!0)});var s=this.graph;s&&!ie(r)&&(s.getConnectedLinks(this,{inbound:!0}).forEach(function(f){r[f.get("target").port]&&f.remove()}),s.getConnectedLinks(this,{outbound:!0}).forEach(function(f){r[f.get("source").port]&&f.remove()}))},hasPorts:function(){var t=this.prop("ports/items");return Array.isArray(t)&&t.length>0},hasPort:function(t){return-1!==this.getPortIndex(t)},getPorts:function(){return kt(this.prop("ports/items"))||[]},getGroupPorts:function(t){const e=te(this.prop(["ports","items"])).filter(n=>n.group===t);return kt(e)},getPort:function(t){return kt(te(this.prop("ports/items")).find(function(e){return e.id&&e.id===t}))},getPortsPositions:function(t){return this._portSettingsData.getGroupPortsMetrics(t,Lt(this.size())).reduce(function(n,r){var s=r.portTransformation;return n[r.portId]={x:s.x,y:s.y,angle:s.angle},n},{})},getPortIndex:function(t){var e=Fe(t)?t.id:t;return this._isValidPortId(e)?te(this.prop("ports/items")).findIndex(function(n){return n.id===e}):-1},addPort:function(t,e){if(!Fe(t)||Array.isArray(t))throw new Error("Element: addPort requires an object.");var n=R([],this.prop("ports/items"));return n.push(t),this.prop("ports/items",n,e),this},insertPort:function(t,e,n){const r="number"==typeof t?t:this.getPortIndex(t);if(!Fe(e)||Array.isArray(e))throw new Error("dia.Element: insertPort requires an object.");const s=R([],this.prop("ports/items"));return s.splice(r,0,e),this.prop("ports/items",s,n),this},portProp:function(t,e,n,r){var s=this.getPortIndex(t);if(-1===s)throw new Error("Element: unable to find port with id "+t);var o=Array.prototype.slice.call(arguments,1);return Array.isArray(e)?o[0]=["ports","items",s].concat(e):Xn(e)?o[0]=["ports/items/",s,"/",e].join(""):(o=["ports/items/"+s],ye(e)&&(o.push(e),o.push(n))),this.prop.apply(this,o)},_validatePorts:function(){var t=this.get("ports")||{},e=[],n=te((t=t||{}).items);return n.forEach(function(r){"object"!=typeof r&&e.push("Element: invalid port ",r),this._isValidPortId(r.id)||(r.id=this.generatePortId())},this),ct(n,"id").length!==n.length&&e.push("Element: found id duplicities in ports."),e},generatePortId:function(){return this.generateId()},_isValidPortId:function(t){return null!=t&&!Fe(t)},addPorts:function(t,e){return t.length&&this.prop("ports/items",R([],this.prop("ports/items")).concat(t),e),this},removePort:function(t,e){const n=e||{},r=this.getPortIndex(t);if(-1!==r){const s=R([],this.prop(["ports","items"]));s.splice(r,1),n.rewrite=!0,this.startBatch("port-remove"),this.prop(["ports","items"],s,n),this.stopBatch("port-remove")}return this},removePorts:function(t,e){let n,r;if(Array.isArray(t)){if(n=e||{},0===t.length)return this.this;r=R([],this.prop(["ports","items"])).filter(function(o){return!t.some(function(l){const f=Fe(l)?l.id:l;return o.id===f})})}else n=t||{},r=[];return this.startBatch("port-remove"),n.rewrite=!0,this.prop(["ports","items"],r,n),this.stopBatch("port-remove"),this},_createPortData:function(){var e,t=this._validatePorts();if(t.length>0)throw this.set("ports",this.previous("ports")),new Error(t.join(" "));this._portSettingsData&&(e=this._portSettingsData.getPorts()),this._portSettingsData=new An(this.get("ports"));var n=this._portSettingsData.getPorts();if(e){var r=n.filter(function(o){if(!e.find(function(l){return l.id===o.id}))return o}),s=e.filter(function(o){if(!n.find(function(l){return l.id===o.id}))return o});s.length>0&&this.trigger("ports:remove",this,s),r.length>0&&this.trigger("ports:add",this,r)}}},ds={portContainerMarkup:"g",portMarkup:[{tagName:"circle",selector:"circle",attributes:{r:10,fill:"#FFFFFF",stroke:"#000000"}}],portLabelMarkup:[{tagName:"text",selector:"text",attributes:{fill:"#000000"}}],_portElementsCache:null,_initializePorts:function(){this._cleanPortsCache()},_refreshPorts:function(){this._removePorts(),this._cleanPortsCache(),this._renderPorts()},_cleanPortsCache:function(){this._portElementsCache={}},_renderPorts:function(){for(var t=[],e=this._getContainerElement(),n=0,r=e.node.childNodes.length;n<r;n++)t.push(e.node.childNodes[n]);var s=ee(this.model._portSettingsData.getPorts(),"z"),o="auto";te(s[o]).forEach(function(A){var p=this._getPortElement(A);e.append(p),t.push(p)},this);for(var l=Object.keys(s),f=0;f<l.length;f++){var d=l[f];if(d!==o){var m=parseInt(d,10);this._appendPorts(s[d],m,t)}}this._updatePorts()},_getContainerElement:function(){return this.rotatableNode||this.vel},_appendPorts:function(t,e,n){var r=this._getContainerElement(),s=te(t).map(this._getPortElement,this);n[e]||e<0?gt(n[Math.max(e,0)]).before(s):r.append(s)},_getPortElement:function(t){return this._portElementsCache[t.id]?this._portElementsCache[t.id].portElement:this._createPortElement(t)},findPortNode:function(t,e){const n=this._portElementsCache[t];if(!n)return null;const r=n.portContentElement.node,s=n.portContentSelectors,[o=null]=this.findBySelector(e,r,s);return o},_updatePorts:function(){this._updatePortGroup(void 0),Object.keys(this.model._portSettingsData.groups).forEach(this._updatePortGroup,this)},_removePorts:function(){dt(this._portElementsCache,"portElement.remove")},_createPortElement:function(t){let e,n,r,s;var o=gt(this.portContainerMarkup).addClass("joint-port"),l=this._getPortMarkup(t);if(Array.isArray(l)){var f=this.parseDOMJSON(l,o.node),d=f.fragment;e=d.childNodes.length>1?gt("g").append(d):gt(d.firstChild),s=f.selectors}else e=gt(l),Array.isArray(e)&&(e=gt("g").append(e));if(!e)throw new Error("ElementView: Invalid port markup.");e.attr({port:t.id,"port-group":t.group});const m=this._getPortLabelMarkup(t.label);if(Array.isArray(m)){const{fragment:D,selectors:B}=this.parseDOMJSON(m,o.node),j=D.childNodes.length;j>0&&(r=B,n=1===j?gt(D.firstChild):gt("g").append(D))}else n=gt(m),Array.isArray(n)&&(n=gt("g").append(n));var A;if(s&&r){for(var p in r)if(s[p]&&p!==this.selector)throw new Error("ElementView: selectors within port must be unique.");A=R({},s,r)}else A=s||r;return o.append(e.addClass("joint-port-body")),n&&o.append(n.addClass("joint-port-label")),this._portElementsCache[t.id]={portElement:o,portLabelElement:n,portSelectors:A,portLabelSelectors:r,portContentElement:e,portContentSelectors:s},o},_updatePortGroup:function(t){for(var e=Lt(this.model.size()),n=this.model._portSettingsData.getGroupPortsMetrics(t,e),r=0,s=n.length;r<s;r++){var o=n[r],f=this._portElementsCache[o.portId]||{},d=o.portTransformation;this.applyPortTransform(f.portElement,d),this.updateDOMSubtreeAttributes(f.portElement.node,o.portAttrs,{rootBBox:new Lt(o.portSize),selectors:f.portSelectors});var m=o.labelTransformation;m&&f.portLabelElement&&(this.applyPortTransform(f.portLabelElement,m,-d.angle||0),this.updateDOMSubtreeAttributes(f.portLabelElement.node,m.attrs,{rootBBox:new Lt(o.labelSize),selectors:f.portLabelSelectors}))}},applyPortTransform:function(t,e,n){var r=gt.createSVGMatrix().rotate(n||0).translate(e.x||0,e.y||0).rotate(e.angle||0);t.transform(r,{absolute:!0})},_getPortMarkup:function(t){return t.markup||this.model.get("portMarkup")||this.model.portMarkup||this.portMarkup},_getPortLabelMarkup:function(t){return t.markup||this.model.get("portLabelMarkup")||this.model.portLabelMarkup||this.portLabelMarkup}},De=mi.extend({defaults:{position:{x:0,y:0},size:{width:1,height:1},angle:0},initialize:function(){this._initializePorts(),mi.prototype.initialize.apply(this,arguments)},_initializePorts:function(){},_refreshPorts:function(){},isElement:function(){return!0},position:function(t,e,n){const r=hr(e);n=(r?n:t)||{};const{parentRelative:s,deep:o,restrictedArea:l}=n;let f;if(s){if(!this.graph)throw new Error("Element must be part of a graph.");const d=this.getParentCell();d&&!d.isLink()&&(f=d.get("position"))}if(r){if(f&&(t+=f.x,e+=f.y),o||l){const{x:d,y:m}=this.get("position");this.translate(t-d,e-m,n)}else this.set("position",{x:t,y:e},n);return this}{const d=I(this.get("position"));return s?d.difference(f):d}},translate:function(t,e,n){if(e=e||0,0===(t=t||0)&&0===e)return this;(n=n||{}).translateBy=n.translateBy||this.id;var r=this.get("position")||{x:0,y:0},s=n.restrictedArea;if(s&&n.translateBy===this.id)if("function"==typeof s){var o=s.call(this,r.x+t,r.y+e,n);t=o.x-r.x,e=o.y-r.y}else{var l=this.getBBox({deep:!0}),f=r.x-l.x,d=r.y-l.y,m=Math.max(s.x+f,Math.min(s.x+s.width+f-l.width,r.x+t)),A=Math.max(s.y+d,Math.min(s.y+s.height+d-l.height,r.y+e));t=m-r.x,e=A-r.y}var p={x:r.x+t,y:r.y+e};return n.tx=t,n.ty=e,n.transition?(Fe(n.transition)||(n.transition={}),this.transition("position",p,R({},n.transition,{valueFunction:lt.object})),dt(this.getEmbeddedCells(),"translate",t,e,n)):(this.startBatch("translate",n),this.set("position",p,n),dt(this.getEmbeddedCells(),"translate",t,e,n),this.stopBatch("translate",n)),this},size:function(t,e,n){var r=this.get("size");return void 0===t?{width:r.width,height:r.height}:(Fe(t)&&(n=e,e=hr(t.height)?t.height:r.height,t=hr(t.width)?t.width:r.width),this.resize(t,e,n))},resize:function(t,e,n){if(this.startBatch("resize",n=n||{}),n.direction){var r=this.get("size");switch(n.direction){case"left":case"right":e=r.height;break;case"top":case"bottom":t=r.width}var l,s=$n(this.get("angle")||0),o=this.getBBox();if(s){var f={"top-right":0,right:0,"top-left":1,top:1,"bottom-left":2,left:2,"bottom-right":3,bottom:3}[n.direction];n.absolute&&(f+=Math.floor((s+45)/90),f%=4);var d=o[["bottomLeft","corner","topRight","origin"][f]](),m=I(d).rotate(o.center(),-s),A=Math.sqrt(t*t+e*e)/2,p=f*Math.PI/2;p+=Math.atan(f%2==0?e/t:t/e),p-=Ne(s);var D=I.fromPolar(A,p,m);l=I(D).offset(t/-2,e/-2)}else switch(l=o.topLeft(),n.direction){case"top":case"top-right":l.offset(0,o.height-e);break;case"left":case"bottom-left":l.offset(o.width-t,0);break;case"top-left":l.offset(o.width-t,o.height-e)}this.set("size",{width:t,height:e},n),this.position(l.x,l.y,n)}else this.set("size",{width:t,height:e},n);return this.stopBatch("resize",n),this},scale:function(t,e,n,r){var s=this.getBBox().scale(t,e,n);return this.startBatch("scale",r),this.position(s.x,s.y,r),this.resize(s.width,s.height,r),this.stopBatch("scale"),this},fitEmbeds:function(t={}){const{graph:e}=this;if(!e)throw new Error("Element must be part of a graph.");const n=this.getEmbeddedCells().filter(p=>p.isElement());if(0===n.length)return this;this.startBatch("fit-embeds",t),t.deep&&dt(n,"fitEmbeds",t);const{left:r,right:s,top:o,bottom:l}=_(t.padding);let{x:f,y:d,width:m,height:A}=e.getCellsBBox(n);return f-=r,d-=o,m+=r+s,A+=l+o,this.set({position:{x:f,y:d},size:{width:m,height:A}},t),this.stopBatch("fit-embeds"),this},rotate:function(t,e,n,r){if(n){var s=this.getBBox().center(),o=this.get("size"),l=this.get("position");s.rotate(n,this.get("angle")-t);var f=s.x-o.width/2-l.x,d=s.y-o.height/2-l.y;this.startBatch("rotate",{angle:t,absolute:e,origin:n}),this.position(l.x+f,l.y+d,r),this.rotate(t,e,null,r),this.stopBatch("rotate")}else this.set("angle",e?t:(this.get("angle")+t)%360,r);return this},angle:function(){return $n(this.get("angle")||0)},getBBox:function(t={}){const{graph:e,attributes:n}=this,{deep:r,rotate:s}=t;if(r&&e){const p=this.getEmbeddedCells({deep:!0,breadthFirst:!0});return p.push(this),e.getCellsBBox(p,t)}const{angle:o=0,position:{x:l,y:f},size:{width:d,height:m}}=n,A=new Lt(l,f,d,m);return s&&A.rotateAroundCenter(o),A},getPointFromConnectedLink:function(t,e){var n=this.getBBox(),r=n.center(),s=t.get(e);if(!s)return r;var o=s.port;if(!o||!this.hasPort(o))return r;var l=this.portProp(o,["group"]),f=this.getPortsPositions(l),d=new I(f[o]).offset(n.origin()),m=this.angle();return m&&d.rotate(r,-m),d}});R(De.prototype,Qs);const Yn=mi.extend({markup:['<path class="connection" stroke="black" d="M 0 0 0 0"/>','<path class="marker-source" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="marker-target" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="connection-wrap" d="M 0 0 0 0"/>','<g class="labels"/>','<g class="marker-vertices"/>','<g class="marker-arrowheads"/>','<g class="link-tools"/>'].join(""),toolMarkup:['<g class="link-tool">','<g class="tool-remove" event="remove">','<circle r="11" />','<path transform="scale(.8) translate(-16, -16)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z" />',"<title>Remove link.</title>","</g>",'<g class="tool-options" event="link:options">','<circle r="11" transform="translate(25)"/>','<path fill="white" transform="scale(.55) translate(29, -16)" d="M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z"/>',"<title>Link options.</title>","</g>","</g>"].join(""),doubleToolMarkup:void 0,vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>"].join(""),arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<path class="marker-arrowhead" end="<%= end %>" d="M 26 0 L 0 13 L 26 26 z" />',"</g>"].join(""),defaultLabel:void 0,labelMarkup:void 0,_builtins:{defaultLabel:{markup:[{tagName:"rect",selector:"rect"},{tagName:"text",selector:"text"}],attrs:{text:{fill:"#000000",fontSize:14,textAnchor:"middle",yAlignment:"middle",pointerEvents:"none"},rect:{ref:"text",fill:"#ffffff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}}},defaults:{type:"link",source:{},target:{}},isLink:function(){return!0},disconnect:function(t){return this.set({source:{x:0,y:0},target:{x:0,y:0}},t)},source:function(t,e,n){return void 0===t?mt(this.get("source")):t instanceof mi?((r=mt(e)||{}).id=t.id,this.set("source",r,n)):ye(t)?this.set("source",r=t,e):((r=mt(e)||{}).x=t.x,r.y=t.y,this.set("source",r,n));var r},target:function(t,e,n){return void 0===t?mt(this.get("target")):t instanceof mi?((r=mt(e)||{}).id=t.id,this.set("target",r,n)):ye(t)?this.set("target",r=t,e):((r=mt(e)||{}).x=t.x,r.y=t.y,this.set("target",r,n));var r},router:function(t,e,n){if(void 0===t){var r=this.get("router");return r?"object"==typeof r?mt(r):r:this.get("manhattan")?{name:"orthogonal"}:null}var s="object"==typeof t||"function"==typeof t;return this.set("router",s?t:{name:t,args:e},s?e:n)},connector:function(t,e,n){if(void 0===t){var r=this.get("connector");return r?"object"==typeof r?mt(r):r:this.get("smooth")?{name:"smooth"}:null}var s="object"==typeof t||"function"==typeof t;return this.set("connector",s?t:{name:t,args:e},s?e:n)},label:function(t,e,n){var r=this.labels();return(t=isFinite(t)&&null!==t?0|t:0)<0&&(t=r.length+t),arguments.length<=1?this.prop(["labels",t]):this.prop(["labels",t],e,n)},labels:function(t,e){return 0===arguments.length?(t=this.get("labels"),Array.isArray(t)?t.slice():[]):(Array.isArray(t)||(t=[]),this.set("labels",t,e))},hasLabels:function(){const{labels:t}=this.attributes;return Array.isArray(t)&&t.length>0},insertLabel:function(t,e,n){if(!e)throw new Error("dia.Link: no label provided");var r=this.labels(),s=r.length;return(t=isFinite(t)&&null!==t?0|t:s)<0&&(t=s+t+1),r.splice(t,0,e),this.labels(r,n)},appendLabel:function(t,e){return this.insertLabel(-1,t,e)},removeLabel:function(t,e){var n=this.labels();return t=isFinite(t)&&null!==t?0|t:-1,n.splice(t,1),this.labels(n,e)},vertex:function(t,e,n){var r=this.vertices();if((t=isFinite(t)&&null!==t?0|t:0)<0&&(t=r.length+t),arguments.length<=1)return this.prop(["vertices",t]);var s=this._normalizeVertex(e);return this.prop(["vertices",t],s,n)},vertices:function(t,e){if(0===arguments.length)return t=this.get("vertices"),Array.isArray(t)?t.slice():[];Array.isArray(t)||(t=[]);for(var n=[],r=0;r<t.length;r++){var s=t[r],o=this._normalizeVertex(s);n.push(o)}return this.set("vertices",n,e)},insertVertex:function(t,e,n){if(!e)throw new Error("dia.Link: no vertex provided");var r=this.vertices(),s=r.length;(t=isFinite(t)&&null!==t?0|t:s)<0&&(t=s+t+1);var o=this._normalizeVertex(e);return r.splice(t,0,o),this.vertices(r,n)},removeVertex:function(t,e){var n=this.vertices();return t=isFinite(t)&&null!==t?0|t:-1,n.splice(t,1),this.vertices(n,e)},_normalizeVertex:function(t){return ye(t)?t:{x:t.x,y:t.y}},translate:function(t,e,n){return(n=n||{}).translateBy=n.translateBy||this.id,n.tx=t,n.ty=e,this.applyToPoints(function(r){return{x:(r.x||0)+t,y:(r.y||0)+e}},n)},scale:function(t,e,n,r){return this.applyToPoints(function(s){return I(s).scale(t,e,n).toJSON()},r)},applyToPoints:function(t,e){if(!qt(t))throw new TypeError("dia.Link: applyToPoints expects its first parameter to be a function.");var n={},{source:r,target:s}=this.attributes;r.id||(n.source=t(r)),s.id||(n.target=t(s));var o=this.vertices();return o.length>0&&(n.vertices=o.map(t)),this.set(n,e)},getSourcePoint:function(){var t=this.getSourceCell();return t?t.getPointFromConnectedLink(this,"source"):new I(this.source())},getTargetPoint:function(){var t=this.getTargetCell();return t?t.getPointFromConnectedLink(this,"target"):new I(this.target())},getPointFromConnectedLink:function(){return this.getPolyline().pointAt(.5)},getPolyline:function(){const t=[this.getSourcePoint(),...this.vertices().map(I),this.getTargetPoint()];return new Ue(t)},getBBox:function(){return this.getPolyline().bbox()},reparent:function(t){var e;if(this.graph){var n=this.getSourceElement(),r=this.getTargetElement(),s=this.getParentCell();n&&r&&(e=n===r||n.isEmbeddedIn(r)?r:r.isEmbeddedIn(n)?n:this.graph.getCommonAncestor(n,r)),s&&(!e||e.id!==s.id)&&s.unembed(this,t),e&&e.embed(this,t)}return e},hasLoop:function(t){t=t||{};var{source:e,target:n}=this.attributes,r=e.id,s=n.id;if(!r||!s)return!1;var o=r===s;if(!o&&t.deep&&this.graph){var l=this.getSourceCell(),f=this.getTargetCell();o=l.isEmbeddedIn(f)||f.isEmbeddedIn(l)}return o},getSourceCell:function(){const{graph:t,attributes:e}=this;var n=e.source;return n&&n.id&&t&&t.getCell(n.id)||null},getSourceElement:function(){var t=this,e={};do{if(e[t.id])return null;e[t.id]=!0,t=t.getSourceCell()}while(t&&t.isLink());return t},getTargetCell:function(){const{graph:t,attributes:e}=this;var n=e.target;return n&&n.id&&t&&t.getCell(n.id)||null},getTargetElement:function(){var t=this,e={};do{if(e[t.id])return null;e[t.id]=!0,t=t.getTargetCell()}while(t&&t.isLink());return t},getRelationshipAncestor:function(){var t;if(this.graph){var e=[this,this.getSourceElement(),this.getTargetElement()].filter(function(n){return!!n});t=this.graph.getCommonAncestor.apply(this.graph,e)}return t||null},isRelationshipEmbeddedIn:function(t){var e=Xn(t)||hr(t)?t:t.id,n=this.getRelationshipAncestor();return!!n&&(n.id===e||n.isEmbeddedIn(e))},_getDefaultLabel:function(){var t=this.get("defaultLabel")||this.defaultLabel||{},e={};return e.markup=t.markup||this.get("labelMarkup")||this.labelMarkup,e.position=t.position,e.attrs=t.attrs,e.size=t.size,e}},{endsEqual:function(t,e){return t.id===e.id&&(t.port===e.port||!t.port&&!e.port)}}),qs={_results:{},_tests:{svgforeignobject:function(){return!!document.createElementNS&&/SVGForeignObject/.test({}.toString.call(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")))}},addTest:function(t,e){return this._tests[t]=e},test:function(t){var e=this._tests[t];if(!e)throw new Error('Test not defined ("'+t+'"). Use `joint.env.addTest(name, fn) to add a new test.`');var n=this._results[t];if(typeof n<"u")return n;try{n=e()}catch{n=!1}return this._results[t]=n,n}},Aa=De.define("standard.Rectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}]}),Ac=De.define("standard.Circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}]}),Cc=De.define("standard.Ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"body"},{tagName:"text",selector:"label"}]}),yc=De.define("standard.Path",{attrs:{body:{refD:"M 0 0 L 10 0 10 10 0 10 Z",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}]}),Do=De.define("standard.Polygon",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polygon",selector:"body"},{tagName:"text",selector:"label"}]}),Lo=De.define("standard.Polyline",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10 0 0",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polyline",selector:"body"},{tagName:"text",selector:"label"}]}),fu=De.define("standard.Image",{attrs:{image:{refWidth:"100%",refHeight:"100%"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),wc=De.define("standard.BorderedImage",{attrs:{border:{refWidth:"100%",refHeight:"100%",stroke:"#333333",strokeWidth:2},background:{refWidth:-1,refHeight:-1,x:.5,y:.5,fill:"#FFFFFF"},image:{refWidth:-1,refHeight:-1,x:.5,y:.5},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"background",attributes:{stroke:"none"}},{tagName:"image",selector:"image"},{tagName:"rect",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),el=De.define("standard.EmbeddedImage",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#FFFFFF",strokeWidth:2},image:{refWidth:"30%",refHeight:-20,x:10,y:10,preserveAspectRatio:"xMidYMin"},label:{textVerticalAnchor:"top",textAnchor:"left",refX:"30%",refX2:20,refY:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),bc=De.define("standard.InscribedImage",{attrs:{border:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",stroke:"#333333",strokeWidth:2},background:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",fill:"#FFFFFF"},image:{refWidth:"68%",refHeight:"68%",refX:"16%",refY:"16%",preserveAspectRatio:"xMidYMid"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"background"},{tagName:"image",selector:"image"},{tagName:"ellipse",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),xc=De.define("standard.HeaderedRectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},header:{refWidth:"100%",height:30,strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},headerText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:15,fontSize:16,fill:"#333333"},bodyText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"header"},{tagName:"text",selector:"headerText"},{tagName:"text",selector:"bodyText"}]}),_r=De.define("standard.Cylinder",{attrs:{body:{lateralArea:10,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},top:{refCx:"50%",cy:10,refRx:"50%",ry:10,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"100%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"ellipse",selector:"top"},{tagName:"text",selector:"label"}],topRy:function(t,e){if(void 0===t)return this.attr("body/lateralArea");var n=Wn(t);return this.attr({body:{lateralArea:t},top:n?{refCy:t,refRy:t,cy:null,ry:null}:{refCy:null,refRy:null,cy:t,ry:t}},e)}},{attributes:{lateralArea:{set:function(t,e){var n=Wn(t);n&&(t=parseFloat(t)/100);var r=e.x,s=e.y,o=e.width,l=e.height,d=n?l*t:t,m=gt.KAPPA,A=m*(o/2),p=m*(n?l*t:t),B=r+o/2,j=r+o,q=s+d,et=q-d,ht=s+l-d,ft=s+l;return{d:["M",r,q,"L",r,ht,"C",r,ht+p,B-A,ft,B,ft,"C",B+A,ft,j,ht+p,j,ht,"L",j,q,"C",j,q-p,B+A,et,B,et,"C",B-A,et,r,q-p,r,q,"Z"].join(" ")}}}}});var nl=qs.test("svgforeignobject")?{tagName:"foreignObject",selector:"foreignObject",attributes:{overflow:"hidden"},children:[{tagName:"div",namespaceURI:"http://www.w3.org/1999/xhtml",selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]}:{tagName:"text",selector:"label",attributes:{"text-anchor":"middle"}};const Sc=De.define("standard.TextBlock",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#ffffff",strokeWidth:2},foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}}},{markup:[{tagName:"rect",selector:"body"},nl]},{attributes:{text:{set:function(t,e,n,r){if(!(n instanceof HTMLElement)){var s=r.style||{},o={text:t,width:-5,height:"100%"},l=R({textVerticalAnchor:"middle"},s);return To.textWrap.set.call(this,o,e,n,l),{fill:s.color||null}}n.textContent=t},position:function(t,e,n){if(n instanceof SVGElement)return e.center()}}}}),Po=Yn.define("standard.Link",{attrs:{line:{connection:!0,stroke:"#333333",strokeWidth:2,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 10 -5 0 0 10 5 z"}},wrapper:{connection:!0,strokeWidth:10,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"wrapper",attributes:{fill:"none",cursor:"pointer",stroke:"transparent","stroke-linecap":"round"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]}),ro=Yn.define("standard.DoubleLink",{attrs:{line:{connection:!0,stroke:"#DDDDDD",strokeWidth:4,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"#000000",d:"M 10 -3 10 -10 -2 0 10 10 10 3"}},outline:{connection:!0,stroke:"#000000",strokeWidth:6,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"outline",attributes:{fill:"none"}},{tagName:"path",selector:"line",attributes:{fill:"none"}}]}),hu=Yn.define("standard.ShadowLink",{attrs:{line:{connection:!0,stroke:"#FF0000",strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"none",d:"M 0 -10 -10 0 0 10 z"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}},shadow:{connection:!0,refX:3,refY:6,stroke:"#000000",strokeOpacity:.2,strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 0 -10 -10 0 0 10 z",stroke:"none"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}}}},{markup:[{tagName:"path",selector:"shadow",attributes:{fill:"none"}},{tagName:"path",selector:"line",attributes:{fill:"none"}}]}),Ca={cells:function(t){return function(){var e=Array.from(arguments),n=e.length,r=n>0&&e[0]||[],s=n>1&&e[n-1]||{};return Array.isArray(r)||(s instanceof mi?r=e:r instanceof mi&&(e.length>1&&e.pop(),r=e)),s instanceof mi&&(s={}),t.call(this,r,s)}}},io=Nn.Collection.extend({initialize:function(t,e){this.cellNamespace=e.cellNamespace?e.cellNamespace:typeof joint<"u"&&fr(joint,"shapes")?joint.shapes:null,this.graph=e.graph},model:function(t,e){var n=e.collection,o=new("link"===t.type?Yn:Si(n.cellNamespace,t.type,".")||De)(t,e);return e.dry||(o.graph=n.graph),o},comparator:function(t){return t.get("z")||0}}),$s=Nn.Model.extend({initialize:function(t,e){var n=new io([],{model:(e=e||{}).cellModel,cellNamespace:e.cellNamespace,graph:this});Nn.Model.prototype.set.call(this,"cells",n),n.on("all",this.trigger,this),this.on("change:z",this._sortOnChangeZ,this),this._out={},this._in={},this._nodes={},this._edges={},this._batches={},n.on("add",this._restructureOnAdd,this),n.on("remove",this._restructureOnRemove,this),n.on("reset",this._restructureOnReset,this),n.on("change:source",this._restructureOnChangeSource,this),n.on("change:target",this._restructureOnChangeTarget,this),n.on("remove",this._removeCell,this)},_sortOnChangeZ:function(){this.get("cells").sort()},_restructureOnAdd:function(t){if(t.isLink()){this._edges[t.id]=!0;var{source:e,target:n}=t.attributes;e.id&&((this._out[e.id]||(this._out[e.id]={}))[t.id]=!0),n.id&&((this._in[n.id]||(this._in[n.id]={}))[t.id]=!0)}else this._nodes[t.id]=!0},_restructureOnRemove:function(t){if(t.isLink()){delete this._edges[t.id];var{source:e,target:n}=t.attributes;e.id&&this._out[e.id]&&this._out[e.id][t.id]&&delete this._out[e.id][t.id],n.id&&this._in[n.id]&&this._in[n.id][t.id]&&delete this._in[n.id][t.id]}else delete this._nodes[t.id]},_restructureOnReset:function(t){t=t.models,this._out={},this._in={},this._nodes={},this._edges={},t.forEach(this._restructureOnAdd,this)},_restructureOnChangeSource:function(t){var e=t.previous("source");e.id&&this._out[e.id]&&delete this._out[e.id][t.id];var n=t.attributes.source;n.id&&((this._out[n.id]||(this._out[n.id]={}))[t.id]=!0)},_restructureOnChangeTarget:function(t){var e=t.previous("target");e.id&&this._in[e.id]&&delete this._in[e.id][t.id];var n=t.get("target");n.id&&((this._in[n.id]||(this._in[n.id]={}))[t.id]=!0)},getOutboundEdges:function(t){return this._out&&this._out[t]||{}},getInboundEdges:function(t){return this._in&&this._in[t]||{}},toJSON:function(){var t=Nn.Model.prototype.toJSON.apply(this,arguments);return t.cells=this.get("cells").toJSON(),t},fromJSON:function(t,e){if(!t.cells)throw new Error("Graph JSON must contain cells array.");return this.set(t,e)},set:function(t,e,n){var r;return"object"==typeof t?(r=t,n=e):(r={})[t]=e,r.hasOwnProperty("cells")&&(this.resetCells(r.cells,n),r=mn(r,"cells")),Nn.Model.prototype.set.call(this,r,n)},clear:function(t){t=R({},t,{clear:!0});var e=this.get("cells");if(0===e.length)return this;this.startBatch("clear",t);var n=e.sortBy(function(r){return r.isLink()?1:2});do{n.shift().remove(t)}while(n.length>0);return this.stopBatch("clear"),this},_prepareCell:function(t,e){var n;if(t instanceof Nn.Model?(n=t.attributes,!t.graph&&(!e||!e.dry)&&(t.graph=this)):n=t,!Xn(n.type))throw new TypeError("dia.Graph: cell type must be a string.");return t},minZIndex:function(){var t=this.get("cells").first();return t&&t.get("z")||0},maxZIndex:function(){var t=this.get("cells").last();return t&&t.get("z")||0},addCell:function(t,e){return Array.isArray(t)?this.addCells(t,e):(t instanceof Nn.Model?t.has("z")||t.set("z",this.maxZIndex()+1):void 0===t.z&&(t.z=this.maxZIndex()+1),this.get("cells").add(this._prepareCell(t,e),e||{}),this)},addCells:function(t,e){return 0===t.length||(t=We(t),e.maxPosition=e.position=t.length-1,this.startBatch("add",e),t.forEach(function(n){this.addCell(n,e),e.position--},this),this.stopBatch("add",e)),this},resetCells:function(t,e){var n=te(t).map(function(r){return this._prepareCell(r,e)},this);return this.get("cells").reset(n,e),this},removeCells:function(t,e){return t.length&&(this.startBatch("remove"),dt(t,"remove",e),this.stopBatch("remove")),this},_removeCell:function(t,e,n){(n=n||{}).clear||(n.disconnectLinks?this.disconnectLinks(t,n):this.removeLinks(t,n)),this.get("cells").remove(t,{silent:!0}),t.graph===this&&(t.graph=null)},getCell:function(t){return this.get("cells").get(t)},getCells:function(){return this.get("cells").toArray()},getElements:function(){return this.get("cells").filter(t=>t.isElement())},getLinks:function(){return this.get("cells").filter(t=>t.isLink())},getFirstCell:function(){return this.get("cells").first()},getLastCell:function(){return this.get("cells").last()},getConnectedLinks:function(t,e){var n=(e=e||{}).indirect,r=e.inbound,s=e.outbound;void 0===r&&void 0===s&&(r=s=!0);var o=[],l={};function f(p,D){if(_n(p.getOutboundEdges(D.id),function(j,q){if(!l[q]){var et=p.getCell(q);o.push(et),l[q]=!0,n&&(r&&d(p,et),s&&f(p,et))}}.bind(p)),n&&D.isLink()){var B=D.getTargetCell();B&&B.isLink()&&(l[B.id]||(o.push(B),f(p,B)))}}function d(p,D){if(_n(p.getInboundEdges(D.id),function(j,q){if(!l[q]){var et=p.getCell(q);o.push(et),l[q]=!0,n&&(r&&d(p,et),s&&f(p,et))}}.bind(p)),n&&D.isLink()){var B=D.getSourceCell();B&&B.isLink()&&(l[B.id]||(o.push(B),d(p,B)))}}if(s&&f(this,t),r&&d(this,t),e.deep){var m=t.getEmbeddedCells({deep:!0}),A={};m.forEach(function(p){p.isElement()&&(A[p.id]=!0)}),m.forEach(function(p){p.isLink()||(s&&_n(this.getOutboundEdges(p.id),function(D,B){if(!l[B]){var j=this.getCell(B),{source:q,target:et}=j.attributes,ht=q.id,ft=et.id;if(!e.includeEnclosed&&ht&&A[ht]&&ft&&A[ft])return;o.push(this.getCell(B)),l[B]=!0}}.bind(this)),r&&_n(this.getInboundEdges(p.id),function(D,B){if(!l[B]){var j=this.getCell(B),{source:q,target:et}=j.attributes,ht=q.id,ft=et.id;if(!e.includeEnclosed&&ht&&A[ht]&&ft&&A[ft])return;o.push(this.getCell(B)),l[B]=!0}}.bind(this)))},this)}return o},getNeighbors:function(t,e){e||(e={});var n=e.inbound,r=e.outbound;void 0===n&&void 0===r&&(n=r=!0);var s=this.getConnectedLinks(t,e).reduce(function(f,d){var{source:m,target:A}=d.attributes,p=d.hasLoop(e);if(n&&fr(m,"id")&&!f[m.id]){var D=this.getCell(m.id);D.isElement()&&(p||D&&D!==t&&(!e.deep||!D.isEmbeddedIn(t)))&&(f[m.id]=D)}if(r&&fr(A,"id")&&!f[A.id]){var B=this.getCell(A.id);B.isElement()&&(p||B&&B!==t&&(!e.deep||!B.isEmbeddedIn(t)))&&(f[A.id]=B)}return f}.bind(this),{});if(t.isLink()){if(n){var o=t.getSourceCell();o&&o.isElement()&&!s[o.id]&&(s[o.id]=o)}if(r){var l=t.getTargetCell();l&&l.isElement()&&!s[l.id]&&(s[l.id]=l)}}return te(s)},getCommonAncestor:function(){var t=Array.from(arguments).map(function(n){for(var r=[],s=n.get("parent");s;)r.push(s),s=this.getCell(s).get("parent");return r},this);t=t.sort(function(n,r){return n.length-r.length});var e=te(t.shift()).find(function(n){return t.every(function(r){return r.includes(n)})});return this.getCell(e)},getSuccessors:function(t,e){var n=[];return this.search(t,function(r){r!==t&&n.push(r)},R({},e=e||{},{outbound:!0})),n},cloneCells:dr,cloneSubgraph:function(t,e){var n=this.getSubgraph(t,e);return this.cloneCells(n)},getSubgraph:function(t,e){e=e||{};var n=[],r={},s=[],o=[];return te(t).forEach(function(l){r[l.id]||(n.push(l),r[l.id]=l,l.isLink()?o.push(l):s.push(l)),e.deep&&l.getEmbeddedCells({deep:!0}).forEach(function(d){r[d.id]||(n.push(d),r[d.id]=d,d.isLink()?o.push(d):s.push(d))})}),o.forEach(function(l){var{source:f,target:d}=l.attributes;if(f.id&&!r[f.id]){var m=this.getCell(f.id);n.push(m),r[m.id]=m,s.push(m)}if(d.id&&!r[d.id]){var A=this.getCell(d.id);n.push(this.getCell(d.id)),r[A.id]=A,s.push(A)}},this),s.forEach(function(l){this.getConnectedLinks(l,e).forEach(function(d){var{source:m,target:A}=d.attributes;!r[d.id]&&m.id&&r[m.id]&&A.id&&r[A.id]&&(n.push(d),r[d.id]=d)})},this),n},getPredecessors:function(t,e){var n=[];return this.search(t,function(r){r!==t&&n.push(r)},R({},e=e||{},{inbound:!0})),n},search:function(t,e,n){(n=n||{}).breadthFirst?this.bfs(t,e,n):this.dfs(t,e,n)},bfs:function(t,e,n={}){const r={},s={},o=[];for(o.push(t),s[t.id]=0;o.length>0;){var l=o.shift();if(r[l.id]||(r[l.id]=!0,!1===e.call(this,l,s[l.id])))continue;const f=this.getNeighbors(l,n);for(let d=0,m=f.length;d<m;d++){const A=f[d];s[A.id]=s[l.id]+1,o.push(A)}}},dfs:function(t,e,n={}){const r={},s={},o=[];for(o.push(t),s[t.id]=0;o.length>0;){const l=o.pop();if(r[l.id]||(r[l.id]=!0,!1===e.call(this,l,s[l.id])))continue;const f=this.getNeighbors(l,n),d=o.length;for(let m=0,A=f.length;m<A;m++){const p=f[m];s[p.id]=s[l.id]+1,o.splice(d,0,p)}}},getSources:function(){var t=[];return _n(this._nodes,function(e,n){(!this._in[n]||ie(this._in[n]))&&t.push(this.getCell(n))}.bind(this)),t},getSinks:function(){var t=[];return _n(this._nodes,function(e,n){(!this._out[n]||ie(this._out[n]))&&t.push(this.getCell(n))}.bind(this)),t},isSource:function(t){return!this._in[t.id]||ie(this._in[t.id])},isSink:function(t){return!this._out[t.id]||ie(this._out[t.id])},isSuccessor:function(t,e){var n=!1;return this.search(t,function(r){if(r===e&&r!==t)return n=!0,!1},{outbound:!0}),n},isPredecessor:function(t,e){var n=!1;return this.search(t,function(r){if(r===e&&r!==t)return n=!0,!1},{inbound:!0}),n},isNeighbor:function(t,e,n){var r=(n=n||{}).inbound,s=n.outbound;void 0===r&&void 0===s&&(r=s=!0);var o=!1;return this.getConnectedLinks(t,n).forEach(function(l){var{source:f,target:d}=l.attributes;if(r&&fr(f,"id")&&f.id===e.id||s&&fr(d,"id")&&d.id===e.id)return o=!0,!1}),o},disconnectLinks:function(t,e){this.getConnectedLinks(t).forEach(function(n){n.set(n.attributes.source.id===t.id?"source":"target",{x:0,y:0},e)})},removeLinks:function(t,e){dt(this.getConnectedLinks(t),"remove",e)},findModelsFromPoint:function(t){return this.getElements().filter(e=>e.getBBox({rotate:!0}).containsPoint(t))},findModelsInArea:function(t,e={}){const n=new Lt(t),{strict:r=!1}=e,s=r?"containsRect":"intersect";return this.getElements().filter(o=>n[s](o.getBBox({rotate:!0})))},findModelsUnderElement:function(t,e={}){const{searchBy:n="bbox"}=e,r=t.getBBox().rotateAroundCenter(t.angle());return("bbox"===n?this.findModelsInArea(r):this.findModelsFromPoint(r[n]())).filter(o=>t.id!==o.id&&!o.isEmbeddedIn(t))},getBBox:function(){return this.getCellsBBox(this.getCells())},getCellsBBox:function(t,e={}){const{rotate:n=!0}=e;return te(t).reduce(function(r,s){const o=s.getBBox({rotate:n});return o?r?r.union(o):o:r},null)},translate:function(t,e,n){var r=this.getCells().filter(function(s){return!s.isEmbedded()});return dt(r,"translate",t,e,n),this},resize:function(t,e,n){return this.resizeCells(t,e,this.getCells(),n)},resizeCells:function(t,e,n,r){var s=this.getCellsBBox(n);if(s){var o=Math.max(t/s.width,0),l=Math.max(e/s.height,0);dt(n,"scale",o,l,s.origin(),r)}return this},startBatch:function(t,e){return e=e||{},this._batches[t]=(this._batches[t]||0)+1,this.trigger("batch:start",R({},e,{batchName:t}))},stopBatch:function(t,e){return e=e||{},this._batches[t]=(this._batches[t]||0)-1,this.trigger("batch:stop",R({},e,{batchName:t}))},hasActiveBatch:function(t){const e=this._batches;let n;return n=0===arguments.length?Object.keys(e):Array.isArray(t)?t:[t],n.some(r=>e[r]>0)}},{validations:{multiLinks:function(t,e){var{source:n,target:r}=e.attributes;if(n.id&&r.id){var s=e.getSourceCell();if(s&&t.getConnectedLinks(s,{outbound:!0}).filter(function(f){var{source:d,target:m}=f.attributes;return d&&d.id===n.id&&(!d.port||d.port===n.port)&&m&&m.id===r.id&&(!m.port||m.port===r.port)}).length>1)return!1}return!0},linkPinning:function(t,e){var{source:n,target:r}=e.attributes;return n.id&&r.id}}});!function(t,e,n){if(Xn(n)){if(!Ca[n])throw new Error('Unknown wrapper: "'+n+'"');n=Ca[n]}if(!qt(n))throw new Error("Wrapper must be a function.");te(["resetCells","addCells","removeCells"]).forEach(function(r){t[r]=n(t[r])})}($s.prototype,0,Ca.cells);const Li={},gs=Nn.View.extend({options:{},theme:null,themeClassNamePrefix:Zn("theme-"),requireSetThemeOverride:!1,defaultTheme:jn.defaultTheme,children:null,childNodes:null,DETACHABLE:!0,UPDATE_PRIORITY:2,FLAG_INSERT:1<<30,FLAG_REMOVE:1<<29,constructor:function(t){this.requireSetThemeOverride=t&&!!t.theme,this.options=R({},this.options,t),Nn.View.call(this,t)},initialize:function(){Li[this.cid]=this,this.setTheme(this.options.theme||this.defaultTheme),this.init()},unmount:function(){this.svgElement?this.vel.remove():this.$el.remove()},renderChildren:function(t){if(t||(t=un(this,"children")),t){var e=this.svgElement,r=as(t,gt.namespace[e?"svg":"xhtml"]);(e?this.vel:this.$el).empty().append(r.fragment),this.childNodes=r.selectors}return this},findAttribute:function(t,e){for(var n=e;n&&1===n.nodeType;){var r=n.getAttribute(t);if(r)return r;if(n===this.el)return null;n=n.parentNode}return null},_ensureElement:function(){if(this.el)this.setElement(un(this,"el"));else{var t=un(this,"tagName"),e=R({},un(this,"attributes")),n=R({},un(this,"style"));this.id&&(e.id=un(this,"id")),this.setElement(this._createElement(t)),this._setAttributes(e),this._setStyle(n)}this._ensureElClassName()},_setAttributes:function(t){this.svgElement?this.vel.attr(t):this.$el.attr(t)},_setStyle:function(t){this.$el.css(t)},_createElement:function(t){return this.svgElement?document.createElementNS(gt.namespace.svg,t):document.createElement(t)},_setElement:function(t){this.$el=t instanceof Nn.$?t:Nn.$(t),this.el=this.$el[0],this.svgElement&&(this.vel=gt(this.el))},_ensureElClassName:function(){var t=un(this,"className");if(t){var e=Zn(t);this.svgElement?this.vel.removeClass(t).addClass(e):this.$el.removeClass(t).addClass(e)}},init:function(){},onRender:function(){},confirmUpdate:function(){return 0},setTheme:function(t,e){return e=e||{},this.theme&&this.requireSetThemeOverride&&!e.override||(this.removeThemeClassName(),this.addThemeClassName(t),this.onSetTheme(this.theme,t),this.theme=t),this},addThemeClassName:function(t){if(!(t=t||this.theme))return this;var e=this.themeClassNamePrefix+t;return this.svgElement?this.vel.addClass(e):this.$el.addClass(e),this},removeThemeClassName:function(t){var e=this.themeClassNamePrefix+(t=t||this.theme);return this.svgElement?this.vel.removeClass(e):this.$el.removeClass(e),this},onSetTheme:function(t,e){},remove:function(){return this.onRemove(),this.undelegateDocumentEvents(),Li[this.cid]=null,Nn.View.prototype.remove.apply(this,arguments),this},onRemove:function(){},getEventNamespace:function(){return".joint-event-ns-"+this.cid},delegateElementEvents:function(t,e,n){if(!e)return this;n||(n={});var r=this.getEventNamespace();for(var s in e){var o=e[s];"function"!=typeof o&&(o=this[o]),o&&ve(t).on(s+r,n,o.bind(this))}return this},undelegateElementEvents:function(t){return ve(t).off(this.getEventNamespace()),this},delegateDocumentEvents:function(t,e){return t||(t=un(this,"documentEvents")),this.delegateElementEvents(document,t,e)},undelegateDocumentEvents:function(){return this.undelegateElementEvents(document)},eventData:function(t,e){if(!t)throw new Error("eventData(): event object required.");var n=t.data,r="__"+this.cid+"__";return void 0===e?n&&n[r]||{}:(n||(n=t.data={}),n[r]||(n[r]={}),R(n[r],e),this)},stopPropagation:function(t){return this.eventData(t,{propagationStopped:!0}),this},isPropagationStopped:function(t){return!!this.eventData(t).propagationStopped}},{extend:function(){var t=Array.from(arguments),e=t[0]&&R({},t[0])||{},n=t[1]&&R({},t[1])||{},r=e.render||this.prototype&&this.prototype.render||null;return e.render=function(){return"function"==typeof r&&r.apply(this,arguments),this.render.__render__===r&&this.onRender(),this},e.render.__render__=r,Nn.View.extend.call(this,e,n)}});if(ve.event&&!("dbltap"in ve.event.special)){const t=jn.doubleTapInterval,e=30;ve.event.special.dbltap={bindType:"touchend",delegateType:"touchend",handle:function(n,...r){const{handleObj:s,target:o}=n,l=ve.data(o),f=(new Date).getTime(),d="lastTouch"in l?f-l.lastTouch:0;d<t&&d>e?(l.lastTouch=null,n.type=s.origType,s.handler.call(this,n,...r)):l.lastTouch=f}}}function du(t){return t?Array.isArray(t)?t:[t]:[]}const ta=gs.extend({tagName:"g",svgElement:!0,className:"highlight",HIGHLIGHT_FLAG:1,UPDATE_PRIORITY:3,DETACHABLE:!1,UPDATABLE:!0,MOUNTABLE:!0,cellView:null,nodeSelector:null,node:null,updateRequested:!1,transformGroup:null,requestUpdate(t,e){const{paper:n}=t;this.cellView=t,this.nodeSelector=e,n&&(this.updateRequested=!0,n.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY))},confirmUpdate(){this.updateRequested=!1;const{cellView:t,nodeSelector:e}=this;return this.update(t,e),this.mount(),this.transform(),0},findNode(t,e=null){let n;if("string"==typeof e)[n]=t.findBySelector(e);else if(ye(e)){const r=t.model.isLink(),{label:s=null,port:o,selector:l}=e;r&&null!==s?n=t.findLabelNode(s,l):!r&&o?n=t.findPortNode(o,l):[n]=t.findBySelector(l)}else e&&(n=gt.toNode(e),n instanceof SVGElement||(n=null));return n||null},mount(){const{MOUNTABLE:t,cellView:e,el:n,options:r,transformGroup:s}=this;if(!t||s)return;const{vel:o,paper:l}=e,{layer:f}=r;if(f){const d=this.transformGroup=gt("g").addClass("highlight-transform").append(n);l.getLayerView(f).insertSortedNode(d.node,r.z)}else(!n.parentNode||n.nextSibling)&&o.append(n)},unmount(){const{MOUNTABLE:t,transformGroup:e,vel:n}=this;!t||(e?(this.transformGroup=null,e.remove()):n.remove())},transform(){const{transformGroup:t,cellView:e,updateRequested:n}=this;if(!t||e.model.isLink()||n)return;const r=e.getRootTranslateMatrix(),s=e.getRootRotateMatrix(),o=r.multiply(s);t.attr("transform",gt.matrixToTransformString(o))},update(){const{node:t,cellView:e,nodeSelector:n,updateRequested:r,id:s}=this;if(r)return;const o=this.node=this.findNode(e,n);t&&this.unhighlight(e,t),o?(this.highlight(e,o),this.mount()):(this.unmount(),e.notify("cell:highlight:invalid",s,this))},onRemove(){const{node:t,cellView:e,id:n,constructor:r}=this;t&&this.unhighlight(e,t),this.unmount(),r._removeRef(e,n)},highlight(t,e){},unhighlight(t,e){}},{_views:{},highlight:function(t,e,n){const r=this.uniqueId(e,n);this.add(t,e,r,n)},unhighlight:function(t,e,n){const r=this.uniqueId(e,n);this.remove(t,r)},get(t,e=null){const{cid:n}=t,{_views:r}=this,s=r[n];if(null===e){const o=[];if(!s)return o;for(let l in s){const f=s[l];f instanceof this&&o.push(f)}return o}if(!s)return null;if(e in s){const o=s[e];if(o instanceof this)return o}return null},add(t,e,n,r={}){if(!n)throw new Error("dia.HighlighterView: An ID required.");const s=ta.get(t,n);s&&s.remove();const o=new this(r);return o.id=n,this._addRef(t,n,o),o.requestUpdate(t,e),o},_addRef(t,e,n){const{cid:r}=t,{_views:s}=this;let o=s[r];o||(o=s[r]={}),o[e]=n},_removeRef(t,e){const{cid:n}=t,{_views:r}=this,s=r[n];if(s){e&&delete s[e];for(let o in s)return;delete r[n]}},remove(t,e=null){du(this.get(t,e)).forEach(n=>{n.remove()})},update(t,e=null,n=!1){du(this.get(t,e)).forEach(r=>{(n||r.UPDATABLE)&&r.update()})},transform(t,e=null){du(this.get(t,e)).forEach(n=>{n.UPDATABLE&&n.transform()})},uniqueId:(t,e="")=>gt.ensureId(t)+JSON.stringify(e)}),za={DEFAULT:"default",EMBEDDING:"embedding",CONNECTING:"connecting",MAGNET_AVAILABILITY:"magnetAvailability",ELEMENT_AVAILABILITY:"elementAvailability"},Pe=gs.extend({tagName:"g",svgElement:!0,selector:"root",metrics:null,className:function(){var t=["cell"],e=this.model.get("type");return e&&e.toLowerCase().split(".").forEach(function(n,r,s){t.push("type-"+s.slice(0,r+1).join("-"))}),t.join(" ")},_presentationAttributes:null,_flags:null,setFlags:function(){var r,s,o,t={},e={},n=0,l=un(this,"presentationAttributes");for(var f in l)if(l.hasOwnProperty(f)){var d=l[f];for(Array.isArray(d)||(d=[d]),r=0,s=d.length;r<s;r++){var m=t[o=d[r]];m||(m=t[o]=1<<n++),e[f]|=m}}var A=un(this,"initFlag");for(Array.isArray(A)||(A=[A]),r=0,s=A.length;r<s;r++)t[o=A[r]]||(t[o]=1<<n++);if(n>25)throw new Error("dia.CellView: Maximum number of flags exceeded.");this._flags=t,this._presentationAttributes=e},hasFlag:function(t,e){return t&this.getFlag(e)},removeFlag:function(t,e){return t^t&this.getFlag(e)},getFlag:function(t){var e=this._flags;if(!e)return 0;var n=0;if(Array.isArray(t))for(var r=0,s=t.length;r<s;r++)n|=e[t[r]];else n|=e[t];return n},attributes:function(){var t=this.model;return{"model-id":t.id,"data-type":t.attributes.type}},constructor:function(t){t.id=t.id||ls(this),gs.call(this,t)},initialize:function(){this.setFlags(),gs.prototype.initialize.apply(this,arguments),this.cleanNodesCache(),this.$el.data("view",this),this.startListening()},onMount(){},startListening:function(){this.listenTo(this.model,"change",this.onAttributesChange)},onAttributesChange:function(t,e){var n=t.getChangeFlag(this._presentationAttributes);e.updateHandled||!n||(e.dirty&&this.hasFlag(n,"UPDATE")&&(n|=this.getFlag("RENDER")),e.tool&&(e.async=!1),this.requestUpdate(n,e))},requestUpdate:function(t,e){const{paper:n}=this;n&&t>0&&n.requestViewUpdate(this,t,this.UPDATE_PRIORITY,e)},parseDOMJSON:function(t,e){var n=as(t),r=n.selectors,s=n.groupSelectors;for(var o in s){if(r[o])throw new Error("dia.CellView: ambiguous group selector");r[o]=s[o]}if(e){var l=this.selector;if(r[l])throw new Error("dia.CellView: ambiguous root selector.");r[l]=e}return{fragment:n.fragment,selectors:r}},can:function(t){var e=qt(this.options.interactive)?this.options.interactive(this):this.options.interactive;return Fe(e)&&!1!==e[t]||function(t){return!0===t||!1===t||!!t&&"object"==typeof t&&"[object Boolean]"===Object.prototype.toString.call(t)}(e)&&!1!==e},findBySelector:function(t,e,n){if(e||(e=this.el),n||(n=this.selectors),!t||"."===t)return[e];if(n){var r=n[t];if(r)return Array.isArray(r)?r:[r]}return jn.useCSSSelectors?ve(e).find(t).toArray():[]},notify:function(t){if(this.paper){var e=Array.prototype.slice.call(arguments,1);this.trigger.apply(this,[t].concat(e)),this.paper.trigger.apply(this.paper,[t,this].concat(e))}},getBBox:function(t){var e;if(t&&t.useModelGeometry){var n=this.model;e=n.getBBox().bbox(n.angle())}else e=this.getNodeBBox(this.el);return this.paper.localToPaperRect(e)},getNodeBBox:function(t){var e=this.getNodeBoundingRect(t),n=this.getNodeMatrix(t),r=this.getRootTranslateMatrix(),s=this.getRootRotateMatrix();return gt.transformRect(e,r.multiply(s).multiply(n))},getNodeUnrotatedBBox:function(t){var e=this.getNodeBoundingRect(t),n=this.getNodeMatrix(t),r=this.getRootTranslateMatrix();return gt.transformRect(e,r.multiply(n))},getRootTranslateMatrix:function(){var e=this.model.position();return gt.createSVGMatrix().translate(e.x,e.y)},getRootRotateMatrix:function(){var t=gt.createSVGMatrix(),e=this.model,n=e.angle();if(n){var r=e.getBBox(),s=r.width/2,o=r.height/2;t=t.translate(s,o).rotate(n).translate(-s,-o)}return t},_notifyHighlight:function(t,e,n={}){const{el:r}=this;let s;if([s=r]="string"==typeof e?this.findBySelector(e):this.$(e),n.partial=s!==r,void 0===n.type){let o;switch(!0){case n.embedding:o=za.EMBEDDING;break;case n.connecting:o=za.CONNECTING;break;case n.magnetAvailability:o=za.MAGNET_AVAILABILITY;break;case n.elementAvailability:o=za.ELEMENT_AVAILABILITY;break;default:o=za.DEFAULT}n.type=o}return this.notify(t,s,n),this},highlight:function(t,e){return this._notifyHighlight("cell:highlight",t,e)},unhighlight:function(t,e={}){return this._notifyHighlight("cell:unhighlight",t,e)},findMagnet:function(t){const e=this.el;let n=this.$(t)[0];n||(n=e);do{const r=n.getAttribute("magnet"),s=n===e;if((r||s)&&"false"!==r)return n;if(s)return;n=n.parentNode}while(n)},findProxyNode:function(t,e){t||(t=this.el);const n=t.getAttribute(`${e}-selector`);if(n){const[r]=this.findBySelector(n);if(r)return r}return t},getSelector:function(t,e){var n;if(t===this.el)return"string"==typeof e&&(n="> "+e),n;if(t){var r=gt(t).index()+1;n=t.tagName+":nth-child("+r+")",e&&(n+=" > "+e),n=this.getSelector(t.parentNode,n)}return n},addLinkFromMagnet:function(t,e,n){var r=this.paper,s=r.model,o=r.getDefaultLink(this,t);return o.set({source:this.getLinkEnd(t,e,n,o,"source"),target:{x:e,y:n}}).addTo(s,{async:!1,ui:!0}),o.findView(r)},getLinkEnd:function(t,...e){var n=this.model,r=n.id,s=this.findAttribute("port",t),o=t.getAttribute("joint-selector"),l={id:r};return null!=o&&(l.magnet=o),null!=s?(l.port=s,!n.hasPort(s)&&!o&&(l.selector=this.getSelector(t))):null==o&&this.el!==t&&(l.selector=this.getSelector(t)),this.customizeLinkEnd(l,t,...e)},customizeLinkEnd:function(t,e,n,r,s,o){const{paper:l}=this,{connectionStrategy:f}=l.options;if("function"==typeof f){var d=f.call(l,t,this,e,new I(n,r),s,o,l);if(d)return d}return t},getMagnetFromLinkEnd:function(t){var o,e=this.el,n=t.port,r=t.magnet,s=this.model;return null!=n&&s.isElement()&&s.hasPort(n)?o=this.findPortNode(n,r)||e:(r||(r=t.selector),!r&&null!=n&&(r='[port="'+n+'"]'),o=this.findBySelector(r,e,this.selectors)[0]),this.findProxyNode(o,"magnet")},dragLinkStart:function(t,e,n,r){this.model.startBatch("add-link");const s=this.addLinkFromMagnet(e,n,r);s.notifyPointerdown(t,n,r),s.eventData(t,s.startArrowheadMove("target",{whenNotAllowed:"remove"})),this.eventData(t,{linkView:s})},dragLink:function(t,e,n){var r=this.eventData(t),s=r.linkView;if(s)s.pointermove(t,e,n);else{var o=this.paper,l=o.options.magnetThreshold,f=this.getEventTarget(t),d=r.targetMagnet;if("onleave"===l){if(d===f||gt(d).contains(f))return}else if(o.eventData(t).mousemoved<=l)return;this.dragLinkStart(t,d,e,n)}},dragLinkEnd:function(t,e,n){var s=this.eventData(t).linkView;!s||(s.pointerup(t,e,n),this.model.stopBatch("add-link"))},getAttributeDefinition:function(t){return this.model.constructor.getAttributeDefinition(t)},setNodeAttributes:function(t,e){ie(e)||(t instanceof SVGElement?gt(t).attr(e):ve(t).attr(e))},processNodeAttributes:function(t,e){var n,r,s,o,l,f,d,m,A,p=[];for(n in e)!e.hasOwnProperty(n)||(r=e[n],!(s=this.getAttributeDefinition(n))||qt(s.qualify)&&!s.qualify.call(this,r,t,e)?(f||(f={}),f[Ta(n)]=r):(Xn(s.set)&&(f||(f={}),f[s.set]=r),null!==r&&p.push(n,s)));for(o=0,l=p.length;o<l;o+=2)r=e[n=p[o]],qt((s=p[o+1]).set)&&(d||(d={}),d[n]=r),qt(s.position)&&(m||(m={}),m[n]=r),qt(s.offset)&&(A||(A={}),A[n]=r);return{raw:e,normal:f,set:d,position:m,offset:A}},updateRelativeAttributes:function(t,e,n,r){r||(r={});var s,o,f=e.raw||{},d=e.normal||{},m=e.set,A=e.position,p=e.offset;for(s in m){o=m[s];var D=this.getAttributeDefinition(s).set.call(this,o,n.clone(),t,f);Fe(D)?R(d,D):void 0!==D&&(d[s]=D)}if(t instanceof HTMLElement)this.setNodeAttributes(t,d);else{var et,ht,ft,B=d.transform,j=gt.transformStringToMatrix(B),q=I(j.e,j.f);if(B&&(d=mn(d,"transform"),j.e=j.f=0),A||p){var w=this.getNodeScale(t,r.scalableNode);et=w.sx,ht=w.sy}var S=!1;for(s in A)o=A[s],(ft=this.getAttributeDefinition(s).position.call(this,o,n.clone(),t,f))&&(q.offset(I(ft).scale(et,ht)),S||(S=!0));this.setNodeAttributes(t,d);var P=!1;if(p){var Z=this.getNodeBoundingRect(t);if(Z.width>0&&Z.height>0){var X=gt.transformRect(Z,j).scale(1/et,1/ht);for(s in p)o=p[s],(ft=this.getAttributeDefinition(s).offset.call(this,o,X,t,f))&&(q.offset(I(ft).scale(et,ht)),P||(P=!0))}}(void 0!==B||S||P)&&(q.round(1),j.e=q.x,j.f=q.y,t.setAttribute("transform",gt.matrixToTransformString(j)))}},getNodeScale:function(t,e){var n,r;if(e&&e.contains(t)){var s=e.scale();n=1/s.sx,r=1/s.sy}else n=1,r=1;return{sx:n,sy:r}},cleanNodesCache:function(){this.metrics={}},nodeCache:function(t){var e=this.metrics;if(!e)return{};var n=gt.ensureId(t),r=e[n];return r||(r=e[n]={}),r},getNodeData:function(t){var e=this.nodeCache(t);return e.data||(e.data={}),e.data},getNodeBoundingRect:function(t){var e=this.nodeCache(t);return void 0===e.boundingRect&&(e.boundingRect=gt(t).getBBox()),new Lt(e.boundingRect)},getNodeMatrix:function(t){var e=this.nodeCache(t);if(void 0===e.magnetMatrix){var n=this.rotatableNode||this.el;e.magnetMatrix=gt(t).getTransformToElement(n)}return gt.createSVGMatrix(e.magnetMatrix)},getNodeShape:function(t){var e=this.nodeCache(t);return void 0===e.geometryShape&&(e.geometryShape=gt(t).toGeometryShape()),e.geometryShape.clone()},isNodeConnection:function(t){return this.model.isLink()&&(!t||t===this.el)},findNodesAttributes:function(t,e,n,r){var s,o,l,f,d={},m=[];for(var A in t)if(t.hasOwnProperty(A)&&ye(l=t[A])){var p=n[A]=this.findBySelector(A,e,r);for(s=0,o=p.length;s<o;s++){var D=p[s];f=gt.ensureId(D);var B=r&&r[A]===D,j=d[f];if(j){j.array||(m.push(f),j.array=!0,j.attributes=[j.attributes],j.selectedLength=[j.selectedLength]);var q=j.attributes,et=j.selectedLength;if(B)q.unshift(l),et.unshift(-1);else{var ht=Mt(et,o);q.splice(ht,0,l),et.splice(ht,0,o)}}else d[f]={attributes:l,selectedLength:B?-1:o,node:D,array:!1}}}for(s=0,o=m.length;s<o;s++)(l=d[f=m[s]]).attributes=zn({},...l.attributes.reverse());return d},getEventTarget:function(t,e={}){const{target:n,type:r,clientX:s=0,clientY:o=0}=t;return e.fromPoint||"touchmove"===r||"touchend"===r?document.elementFromPoint(s,o):n},updateDOMSubtreeAttributes:function(t,e,n){n||(n={}),n.rootBBox||(n.rootBBox=Lt()),n.selectors||(n.selectors=this.selectors);var f,d,m,A,p,r={},s={},o=[],l=[],D=n.roAttributes,B=this.findNodesAttributes(D||e,t,r,n.selectors),j=D?this.findNodesAttributes(e,t,r,n.selectors):B;for(var q in B)if((p=this.processNodeAttributes(d=(A=B[q]).node,m=A.attributes)).set||p.position||p.offset){var ft,et=j[q]&&j[q].attributes,ht=et&&void 0===m.ref?et.ref:m.ref;if(ht){if(!(ft=(r[ht]||this.findBySelector(ht,t,n.selectors))[0]))throw new Error('dia.CellView: "'+ht+'" reference does not exist.')}else ft=null;if(f={node:d,refNode:ft,processedAttributes:p,allAttributes:et},ft){var w=l.findIndex(function(Pt){return Pt.refNode===d});w>-1?l.splice(w,0,f):l.push(f)}else o.push(f)}else this.setNodeAttributes(d,p.normal);o.push(...l);for(var S,P=0,Z=o.length;P<Z;P++){d=(f=o[P]).node,ft=f.refNode;var X=gt(n.rotatableNode),st=ft?gt.ensureId(ft):"",ot=!!X&&!!ft&&X.contains(ft),vt=s[st];if(!vt){var Tt=ot?X:t;vt=s[st]=ft?gt(ft).getBBox({target:Tt}):n.rootBBox}D?(p=this.processNodeAttributes(d,f.allAttributes),this.mergeProcessedAttributes(p,f.processedAttributes)):p=f.processedAttributes;var xt=vt;ot&&!X.contains(d)&&(S||(S=gt.transformStringToMatrix(X.attr("transform"))),xt=gt.transformRect(vt,S)),this.updateRelativeAttributes(d,p,xt,n)}},mergeProcessedAttributes:function(t,e){t.set||(t.set={}),t.position||(t.position={}),t.offset||(t.offset={}),R(t.set,e.set),R(t.position,e.position),R(t.offset,e.offset);var n=t.normal&&t.normal.transform;void 0!==n&&e.normal&&(e.normal.transform=n),t.normal=e.normal},onRemove:function(){this.removeTools(),this.removeHighlighters()},_toolsView:null,hasTools:function(t){var e=this._toolsView;return!(!e||t&&e.getName()!==t)},addTools:function(t){return this.removeTools(),t&&(this._toolsView=t,t.configure({relatedView:this}),t.listenTo(this.paper,"tools:event",this.onToolEvent.bind(this))),this},updateTools:function(t){var e=this._toolsView;return e&&e.update(t),this},removeTools:function(){var t=this._toolsView;return t&&(t.remove(),this._toolsView=null),this},hideTools:function(){var t=this._toolsView;return t&&t.hide(),this},showTools:function(){var t=this._toolsView;return t&&t.show(),this},onToolEvent:function(t){switch(t){case"remove":this.removeTools();break;case"hide":this.hideTools();break;case"show":this.showTools()}},removeHighlighters:function(){ta.remove(this)},updateHighlighters:function(t=!1){ta.update(this,null,t)},transformHighlighters:function(){ta.transform(this)},pointerdblclick:function(t,e,n){this.notify("cell:pointerdblclick",t,e,n)},pointerclick:function(t,e,n){this.notify("cell:pointerclick",t,e,n)},contextmenu:function(t,e,n){this.notify("cell:contextmenu",t,e,n)},pointerdown:function(t,e,n){const{model:r}=this,{graph:s}=r;s&&(r.startBatch("pointer"),this.eventData(t,{graph:s})),this.notify("cell:pointerdown",t,e,n)},pointermove:function(t,e,n){this.notify("cell:pointermove",t,e,n)},pointerup:function(t,e,n){const{graph:r}=this.eventData(t);this.notify("cell:pointerup",t,e,n),r&&r.stopBatch("pointer",{cell:this.model})},mouseover:function(t){this.notify("cell:mouseover",t)},mouseout:function(t){this.notify("cell:mouseout",t)},mouseenter:function(t){this.notify("cell:mouseenter",t)},mouseleave:function(t){this.notify("cell:mouseleave",t)},mousewheel:function(t,e,n,r){this.notify("cell:mousewheel",t,e,n,r)},onevent:function(t,e,n,r){this.notify(e,t,n,r)},onmagnet:function(){},magnetpointerdblclick:function(){},magnetcontextmenu:function(){},checkMouseleave(t){const{paper:e}=this;e.isAsync()&&e.dumpView(this);const n=this.getEventTarget(t,{fromPoint:!0}),r=e.findView(n);r!==this&&(this.mouseleave(t),r&&r.mouseenter(t))},setInteractivity:function(t){this.options.interactive=t}},{Highlighting:za,addPresentationAttributes:function(t){return zn({},un(this.prototype,"presentationAttributes"),t,function(e,n){if(e&&n&&("string"==typeof e&&(e=[e]),"string"==typeof n&&(n=[n]),Array.isArray(e)&&Array.isArray(n)))return ct(e.concat(n))})}}),ke={UPDATE:"UPDATE",TRANSLATE:"TRANSLATE",TOOLS:"TOOLS",RESIZE:"RESIZE",PORTS:"PORTS",ROTATE:"ROTATE",RENDER:"RENDER"},Jn=Pe.extend({_removePorts:function(){},_renderPorts:function(){},className:function(){var t=Pe.prototype.className.apply(this).split(" ");return t.push("element"),t.join(" ")},initialize:function(){Pe.prototype.initialize.apply(this,arguments),this._initializePorts()},presentationAttributes:{attrs:[ke.UPDATE],position:[ke.TRANSLATE,ke.TOOLS],size:[ke.RESIZE,ke.PORTS,ke.TOOLS],angle:[ke.ROTATE,ke.TOOLS],markup:[ke.RENDER],ports:[ke.PORTS]},initFlag:[ke.RENDER],UPDATE_PRIORITY:0,confirmUpdate:function(t,e){const{useCSSSelectors:n}=jn;this.hasFlag(t,ke.PORTS)&&(this._removePorts(),this._cleanPortsCache());let r=!1;if(this.hasFlag(t,ke.RENDER))this.render(),this.updateTools(e),this.updateHighlighters(!0),r=!0,t=this.removeFlag(t,[ke.RENDER,ke.UPDATE,ke.RESIZE,ke.TRANSLATE,ke.ROTATE,ke.PORTS,ke.TOOLS]);else{let s=!1;this.hasFlag(t,ke.RESIZE)&&(this.resize(e),s=!0,t=this.removeFlag(t,[ke.RESIZE,ke.UPDATE])),this.hasFlag(t,ke.UPDATE)&&(this.update(this.model,null,e),t=this.removeFlag(t,ke.UPDATE),s=!0,n&&(t=this.removeFlag(t,ke.PORTS))),this.hasFlag(t,ke.TRANSLATE)&&(this.translate(),t=this.removeFlag(t,ke.TRANSLATE),r=!0),this.hasFlag(t,ke.ROTATE)&&(this.rotate(),t=this.removeFlag(t,ke.ROTATE),r=!0),this.hasFlag(t,ke.PORTS)&&(this._renderPorts(),s=!0,t=this.removeFlag(t,ke.PORTS)),s&&this.updateHighlighters(!1)}return r&&this.transformHighlighters(),this.hasFlag(t,ke.TOOLS)&&(this.updateTools(e),t=this.removeFlag(t,ke.TOOLS)),t},_initializePorts:function(){},update:function(t,e){this.cleanNodesCache();const{useCSSSelectors:n}=jn;n&&this._removePorts();var r=this.model,s=r.attr();this.updateDOMSubtreeAttributes(this.el,s,{rootBBox:new Lt(r.size()),selectors:this.selectors,scalableNode:this.scalableNode,rotatableNode:this.rotatableNode,roAttributes:e===s?null:e}),n&&this._renderPorts()},rotatableSelector:"rotatable",scalableSelector:"scalable",scalableNode:null,rotatableNode:null,renderMarkup:function(){var t=this.model,e=t.get("markup")||t.markup;if(!e)throw new Error("dia.ElementView: markup required");if(Array.isArray(e))return this.renderJSONMarkup(e);if("string"==typeof e)return this.renderStringMarkup(e);throw new Error("dia.ElementView: invalid markup")},renderJSONMarkup:function(t){var e=this.parseDOMJSON(t,this.el),n=this.selectors=e.selectors;this.rotatableNode=gt(n[this.rotatableSelector])||null,this.scalableNode=gt(n[this.scalableSelector])||null,this.vel.append(e.fragment)},renderStringMarkup:function(t){var e=this.vel;e.append(gt(t)),this.rotatableNode=e.findOne(".rotatable"),this.scalableNode=e.findOne(".scalable"),(this.selectors={})[this.selector]=this.el},render:function(){return this.vel.empty(),this.renderMarkup(),this.scalableNode&&this.update(),this.resize(),this.rotatableNode?(this.rotate(),this.translate()):this.updateTransformation(),jn.useCSSSelectors||this._renderPorts(),this},resize:function(t){if(this.scalableNode)return this.sgResize(t);this.model.attributes.angle&&this.rotate(),this.update()},translate:function(){if(this.rotatableNode)return this.rgTranslate();this.updateTransformation()},rotate:function(){if(this.rotatableNode)return this.rgRotate(),void this.update();this.updateTransformation()},updateTransformation:function(){var t=this.getTranslateString(),e=this.getRotateString();e&&(t+=" "+e),this.vel.attr("transform",t)},getTranslateString:function(){var t=this.model.attributes.position;return"translate("+t.x+","+t.y+")"},getRotateString:function(){var t=this.model.attributes,e=t.angle;if(!e)return null;var n=t.size;return"rotate("+e+","+n.width/2+","+n.height/2+")"},rgRotate:function(){this.rotatableNode.attr("transform",this.getRotateString())},rgTranslate:function(){this.vel.attr("transform",this.getTranslateString())},sgResize:function(t){var e=this.model,n=e.angle(),r=e.size(),s=this.scalableNode,o=!1;s.node.getElementsByTagName("path").length>0&&(o=!0);var l=s.getBBox({recursive:o});s.attr("transform","scale("+r.width/(l.width||1)+","+r.height/(l.height||1)+")");var m=this.rotatableNode,A=m&&m.attr("transform");if(A){m.attr("transform",A+" rotate("+-n+","+r.width/2+","+r.height/2+")");var p=s.getBBox({target:this.paper.cells});e.set("position",{x:p.x,y:p.y},R({updateHandled:!0},t)),this.translate(),this.rotate()}this.update()},prepareEmbedding:function(t={}){const e=t.model||this.model,r=(t.paper||this.paper).model,s=t.initialZIndices={},o=e.getEmbeddedCells({deep:!0}),l=r.getConnectedLinks(e,{deep:!0,includeEnclosed:!0});[e,...o,...l].forEach(m=>s[m.id]=m.attributes.z),e.startBatch("to-front"),e.toFront({deep:!0,ui:!0});const f=r.getElements().reduce((m,A)=>Math.max(m,A.attributes.z||0),0);l.forEach(m=>{m.attributes.z<=f&&m.set("z",f+1,{ui:!0})}),e.stopBatch("to-front");const d=e.parent();d?(r.getCell(d).unembed(e,{ui:!0}),t.initialParentId=d):t.initialParentId=null},processEmbedding:function(t={},e,n,r){const s=t.model||this.model,o=t.paper||this.paper,l=o.model,{findParentBy:f,frontParentOnly:d,validateEmbedding:m}=o.options;let A;A=qt(f)?te(f.call(l,this,e,n,r)):"pointer"===f?te(l.findModelsFromPoint({x:n,y:r})):l.findModelsUnderElement(s,{searchBy:f}),A=A.filter(B=>B instanceof mi&&s.id!==B.id&&!B.isEmbeddedIn(s)),d&&(A=A.slice(-1));let p=null;const D=t.candidateEmbedView;for(let B=A.length-1;B>=0;B--){const j=A[B];if(D&&D.model.id==j.id){p=D;break}{const q=j.findView(o);if(!qt(m)||m.call(o,this,q)){p=q;break}}}p&&p!=D&&(this.clearEmbedding(t),t.candidateEmbedView=p.highlight(p.findProxyNode(null,"container"),{embedding:!0})),!p&&D&&this.clearEmbedding(t)},clearEmbedding:function(t){t||(t={});var e=t.candidateEmbedView;e&&(e.unhighlight(e.findProxyNode(null,"container"),{embedding:!0}),t.candidateEmbedView=null)},finalizeEmbedding:function(t={}){const e=t.candidateEmbedView,n=t.model||this.model,r=t.paper||this.paper;if(e)e.model.embed(n,{ui:!0}),e.unhighlight(e.findProxyNode(null,"container"),{embedding:!0}),t.candidateEmbedView=null;else{const{validateUnembedding:s}=r.options,{initialParentId:o}=t;if(o&&"function"==typeof s&&!s.call(r,this))return void this._disallowUnembed(t)}r.model.getConnectedLinks(n,{deep:!0}).forEach(s=>{s.reparent({ui:!0})})},_disallowUnembed:function(t){const{model:e,whenNotAllowed:n="revert"}=t,r=e||this.model,o=(t.paper||this.paper).model;switch(n){case"remove":r.remove({ui:!0});break;case"revert":{const{initialParentId:l,initialPosition:f,initialZIndices:d}=t;if(f){const{x:A,y:p}=f;r.position(A,p,{deep:!0,ui:!0})}d&&Object.keys(d).forEach(A=>{const p=o.getCell(A);p&&p.set("z",d[A],{ui:!0})});const m=o.getCell(l);m&&m.embed(r,{ui:!0});break}}},getDelegatedView:function(){for(var t=this,e=t.model,n=t.paper;t&&!e.isLink();){if(!e.isEmbedded()||t.can("stopDelegation"))return t;e=e.getParentCell(),t=n.findViewByModel(e)}return null},findProxyNode:function(t,e){t||(t=this.el);const n=t.getAttribute(`${e}-selector`);if(n){const r=this.findAttribute("port",t);if(r){const s=this.findPortNode(r,n);if(s)return s}else{const[s]=this.findBySelector(n);if(s)return s}}return t},notifyPointerdown(t,e,n){Pe.prototype.pointerdown.call(this,t,e,n),this.notify("element:pointerdown",t,e,n)},notifyPointermove(t,e,n){Pe.prototype.pointermove.call(this,t,e,n),this.notify("element:pointermove",t,e,n)},notifyPointerup(t,e,n){this.notify("element:pointerup",t,e,n),Pe.prototype.pointerup.call(this,t,e,n)},pointerdblclick:function(t,e,n){Pe.prototype.pointerdblclick.apply(this,arguments),this.notify("element:pointerdblclick",t,e,n)},pointerclick:function(t,e,n){Pe.prototype.pointerclick.apply(this,arguments),this.notify("element:pointerclick",t,e,n)},contextmenu:function(t,e,n){Pe.prototype.contextmenu.apply(this,arguments),this.notify("element:contextmenu",t,e,n)},pointerdown:function(t,e,n){this.isPropagationStopped(t)||(this.notifyPointerdown(t,e,n),this.dragStart(t,e,n))},pointermove:function(t,e,n){var r=this.eventData(t);switch(r.action){case"magnet":this.dragMagnet(t,e,n);break;case"move":(r.delegatedView||this).drag(t,e,n);default:this.notifyPointermove(t,e,n)}this.eventData(t,r)},pointerup:function(t,e,n){var r=this.eventData(t);switch(r.action){case"magnet":this.dragMagnetEnd(t,e,n);break;case"move":(r.delegatedView||this).dragEnd(t,e,n);default:this.notifyPointerup(t,e,n)}var s=r.targetMagnet;s&&this.magnetpointerclick(t,s,e,n),this.checkMouseleave(t)},mouseover:function(t){Pe.prototype.mouseover.apply(this,arguments),this.notify("element:mouseover",t)},mouseout:function(t){Pe.prototype.mouseout.apply(this,arguments),this.notify("element:mouseout",t)},mouseenter:function(t){Pe.prototype.mouseenter.apply(this,arguments),this.notify("element:mouseenter",t)},mouseleave:function(t){Pe.prototype.mouseleave.apply(this,arguments),this.notify("element:mouseleave",t)},mousewheel:function(t,e,n,r){Pe.prototype.mousewheel.apply(this,arguments),this.notify("element:mousewheel",t,e,n,r)},onmagnet:function(t,e,n){this.dragMagnetStart(t,e,n)},magnetpointerdblclick:function(t,e,n,r){this.notify("element:magnet:pointerdblclick",t,e,n,r)},magnetcontextmenu:function(t,e,n,r){this.notify("element:magnet:contextmenu",t,e,n,r)},dragStart:function(t,e,n){var r=this.getDelegatedView();if(!r||!r.can("elementMove"))return;this.eventData(t,{action:"move",delegatedView:r});const s=r.model.position();r.eventData(t,{initialPosition:s,pointerOffset:s.difference(e,n),restrictedArea:this.paper.getRestrictedArea(r,e,n)})},dragMagnetStart:function(t,e,n){if(this.can("addLinkFromMagnet")){var r=t.currentTarget,s=this.paper;this.eventData(t,{targetMagnet:r}),t.stopPropagation(),s.options.validateMagnet(this,r,t)?(s.options.magnetThreshold<=0&&this.dragLinkStart(t,r,e,n),this.eventData(t,{action:"magnet"}),this.stopPropagation(t)):this.pointerdown(t,e,n),s.delegateDragEvents(this,t.data)}},drag:function(t,e,n){var r=this.paper,s=r.options.gridSize,o=this.model,l=this.eventData(t),{pointerOffset:f,restrictedArea:d,embedding:m}=l,A=Rr(e+f.x,s),p=Rr(n+f.y,s);o.position(A,p,{restrictedArea:d,deep:!0,ui:!0}),r.options.embeddingMode&&(m||(this.prepareEmbedding(l),m=!0),this.processEmbedding(l,t,e,n)),this.eventData(t,{embedding:m})},dragMagnet:function(t,e,n){this.dragLink(t,e,n)},dragEnd:function(t,e,n){var r=this.eventData(t);r.embedding&&this.finalizeEmbedding(r)},dragMagnetEnd:function(t,e,n){this.dragLinkEnd(t,e,n)},magnetpointerclick:function(t,e,n,r){var s=this.paper;s.eventData(t).mousemoved>s.options.clickThreshold||this.notify("element:magnet:pointerclick",t,e,n,r)}},{Flags:ke});R(Jn.prototype,ds);const E=function(t,e,n){return t},Oa=function(t,e,n){var m,A,p,r=e.side||"bottom",s=_(e.padding||40),o=n.sourceBBox,l=n.targetBBox,f=o.center(),d=l.center();switch(r){case"bottom":p=1,m="y",A="height";break;case"top":p=-1,m="y",A="height";break;case"left":p=-1,m="x",A="width";break;case"right":p=1,m="x",A="width";break;default:throw new Error("Router: invalid side")}return f[m]+=p*(o[A]/2+s[r]),d[m]+=p*(l[A]/2+s[r]),p*(f[m]-d[m])>0?d[m]=f[m]:f[m]=d[m],[f].concat(t,d)};var ko={N:"S",S:"N",E:"W",W:"E"},Pi={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function Ee(t,e,n){var r=new I(t.x,e.y);return n.containsPoint(r)&&(r=new I(e.x,t.y)),r}function gu(t,e){return t["W"===e||"E"===e?"width":"height"]}function $r(t,e){return t.x===e.x?t.y>e.y?"N":"S":t.y===e.y?t.x>e.x?"W":"E":null}function Eo(t){return new Lt(t.x,t.y,0,0)}function ps(t){var e=_(t.padding||t.elementPadding||20);return{x:-e.left,y:-e.top,width:e.left+e.right,height:e.top+e.bottom}}function il(t,e){return t.sourceBBox.clone().moveAndExpand(ps(e))}function sl(t,e){return t.targetBBox.clone().moveAndExpand(ps(e))}function al(t,e,n){var r=new I(t.x,e.y),s=new I(e.x,t.y),o=$r(t,r),l=$r(t,s),f=ko[n],d=o===n||o!==f&&(l===f||l!==n)?r:s;return{points:[d],direction:$r(d,e)}}function ki(t,e,n){var r=Ee(t,e,n);return{points:[r],direction:$r(r,e)}}function Lc(t,e,n,r){var d,s={},o=[new I(t.x,e.y),new I(e.x,t.y)],l=o.filter(function(p){return!n.containsPoint(p)}),f=l.filter(function(p){return $r(p,t)!==r});if(f.length>0)d=f.filter(function(p){return $r(t,p)===r}).pop(),s.points=[d=d||f[0]],s.direction=$r(d,e);else{d=Hs(o,l)[0];var m=new I(e).move(d,-gu(n,r)/2),A=Ee(m,t,n);s.points=[A,m],s.direction=$r(m,e)}return s}function Pc(t,e,n,r){var s=ki(e,t,r),o=s.points[0];if(n.containsPoint(o)){var l=(s=ki(t,e,n)).points[0];if(r.containsPoint(l)){var f=new I(t).move(l,-gu(n,$r(t,l))/2),d=new I(e).move(o,-gu(r,$r(e,o))/2),m=new tt(f,d).midpoint(),A=ki(t,m,n),p=al(m,e,A.direction);s.points=[A.points[0],p.points[0]],s.direction=p.direction}}return s}function pu(t,e,n,r,s){var A,p,D,o={},l=n.union(r).inflate(1),f=l.center().distance(e)>l.center().distance(t),d=f?e:t,m=f?t:e;return s?(A=I.fromPolar(l.width+l.height,Pi[s],d),A=l.pointNearestToPoint(A).move(A,-1)):A=l.pointNearestToPoint(d).move(d,1),p=Ee(A,m,l),A.round().equals(p.round())?(p=I.fromPolar(l.width+l.height,Ne(A.theta(d))+Math.PI/2,m),D=Ee(A,p=l.pointNearestToPoint(p).move(m,1).round(),l),o.points=f?[p,D,A]:[A,D,p]):o.points=f?[p,A]:[A,p],o.direction=$r(f?A:p,e),o}function vu(t,e,n){var r=il(n,e),s=sl(n,e),o=function Tc(t,e){return t.sourceAnchor?t.sourceAnchor:il(t,e).center()}(n,e),l=function Dc(t,e){return t.targetAnchor?t.targetAnchor:sl(t,e).center()}(n,e);r=r.union(Eo(o)),s=s.union(Eo(l)),(t=te(t).map(I)).unshift(o),t.push(l);for(var f,d=[],m=0,A=t.length-1;m<A;m++){var p=null,D=t[m],B=t[m+1],j=!!$r(D,B);if(0===m)m+1===A?r.intersect(s.clone().inflate(1))?p=pu(D,B,r,s):j||(p=Pc(D,B,r,s)):r.containsPoint(B)?p=pu(D,B,r,Eo(B).moveAndExpand(ps(e))):j||(p=ki(D,B,r));else if(m+1===A){var q=j&&$r(B,D)===f;s.containsPoint(D)||q?p=pu(D,B,Eo(D).moveAndExpand(ps(e)),s,f):j||(p=Lc(D,B,s,f))}else j||(p=al(D,B,f));p?(Array.prototype.push.apply(d,p.points),f=p.direction):f=$r(D,B),m+1<A&&d.push(B)}return d}var ol={step:10,maximumLoops:2e3,precision:1,maxAllowedDirectionChange:90,perpendicular:!0,excludeEnds:[],excludeTypes:["basic.Text"],startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost:function(){return this.step},directions:function(){var t=this.step,e=this.cost();return[{offsetX:t,offsetY:0,cost:e},{offsetX:-t,offsetY:0,cost:e},{offsetX:0,offsetY:t,cost:e},{offsetX:0,offsetY:-t,cost:e}]},penalties:function(){return{0:0,45:this.step/2,90:this.step/2}},paddingBox:function(){var t=this.step;return{x:-t,y:-t,width:2*t,height:2*t}},isPointObstacle:null,fallbackRouter:function(t,e,n){if(!qt(vu))throw new Error("Manhattan requires the orthogonal router as default fallback.");return vu(t,R({},ol,e),n)},fallbackRoute:function(t,e,n){return null},draggingRoute:null};function Vi(t){this.map={},this.options=t,this.mapGridSize=100}function ya(){this.items=[],this.hash={},this.values={},this.OPEN=1,this.CLOSE=2}function ul(t,e){return e&&e.paddingBox?t.sourceBBox.clone().moveAndExpand(e.paddingBox):t.sourceBBox.clone()}function ll(t,e){return e&&e.paddingBox?t.targetBBox.clone().moveAndExpand(e.paddingBox):t.targetBBox.clone()}function cl(t,e){return t.sourceAnchor?t.sourceAnchor:ul(t,e).center()}function Ps(t,e,n,r,s){var o=360/n,l=t.theta(function Ec(t,e,n,r){var s=r.step;return new I(t.x+(e.x-t.x)/n.x*s,t.y+(e.y-t.y)/n.y*s)}(t,e,r,s)),f=$n(l+o/2);return o*Math.floor(f/o)}function fl(t,e){var n=Math.abs(t-e);return n>180?360-n:n}function hl(t,e){if(!t)return e;var n=Math.abs(t),r=Math.round(n/e);return r?e+(n-r*e)/r:n}function so(t,e){return t.round(e)}function zo(t,e,n){return so(function Oc(t,e){var n=e.source,r=Rr(t.x-n.x,e.x)+n.x,s=Rr(t.y-n.y,e.y)+n.y;return new I(r,s)}(t.clone(),e),n)}function Ba(t){return t.clone().toString()}function Oo(t){return new I(0===t.x?0:Math.abs(t.x)/t.x,0===t.y?0:Math.abs(t.y)/t.y)}function Bc(t,e,n,r,s,o,l){for(var p,f=[],d=Oo(s.difference(n)),m=Ba(n),A=t[m];A;){var D=Oo((p=e[m]).difference(A));D.equals(d)||(f.unshift(p),d=D),A=t[m=Ba(A)]}var B=e[m];return Oo(B.difference(r)).equals(d)||f.unshift(B),f}function dl(t,e){for(var n=1/0,r=0,s=e.length;r<s;r++){var o=t.manhattanDistance(e[r]);o<n&&(n=o)}return n}function Bo(t,e,n,r,s){var o=s.precision,l=s.directionMap,f=t.difference(e.center()),d=Fe(l)?Object.keys(l):[],m=te(n),A=d.reduce(function(p,D){if(m.includes(D)){for(var ft,B=l[D],j=new I(t.x+B.x*(Math.abs(f.x)+e.width),t.y+B.y*(Math.abs(f.y)+e.height)),et=new tt(t,j).intersect(e)||[],ht=et.length,w=null,S=0;S<ht;S++){var P=et[S],Z=t.squaredDistance(P);(void 0===ft||Z>ft)&&(ft=Z,w=P)}if(w){var X=zo(w,r,o);e.containsPoint(X)&&(X=zo(X.offset(B.x*r.x,B.y*r.y),r,o)),p.push(X)}}return p},[]);return e.containsPoint(t)||A.push(zo(t,r,o)),A}function ao(t,e,n,r){var o,l,s=r.precision;o=so(t instanceof Lt?cl(this,r).clone():t.clone(),s),l=so(e instanceof Lt?function kc(t,e){return t.targetAnchor?t.targetAnchor:ll(t,e).center()}(this,r).clone():e.clone(),s);var d,m,A,p,f=function zc(t,e,n){return{source:e.clone(),x:hl(n.x-e.x,t),y:hl(n.y-e.y,t)}}(r.step,o,l);if(A=t instanceof Lt?Bo(d=o,t,r.startDirections,f,r):[d=o],e instanceof Lt?(m=l,p=Bo(l,e,r.endDirections,f,r)):p=[m=l],A=A.filter(Ge=>!n(Ge)),p=p.filter(Ge=>!n(Ge)),A.length>0&&p.length>0){for(var D=new ya,B={},j={},q={},et=0,ht=A.length;et<ht;et++){var ft=A[et],w=Ba(ft);D.add(w,dl(ft,p)),B[w]=ft,q[w]=0}var Z,X,S=r.previousDirectionAngle,P=void 0===S,st=r.directions;!function Xi(t,e,n){var r=n.step;te(n.directions).forEach(function(s){s.gridOffsetX=s.offsetX/r*e.x,s.gridOffsetY=s.offsetY/r*e.y})}(0,f,r);for(var ot=st.length,vt=te(p).reduce(function(Ge,Qt){var Rt=Ba(Qt);return Ge.push(Rt),Ge},[]),Tt=r.maximumLoops;!D.isEmpty()&&Tt>0;){var Re,xt=D.pop(),Pt=B[xt],Ot=j[xt],Bt=q[xt],Vt=void 0===Ot,sn=Pt.equals(d);Re=Vt?P?sn?null:Ps(d,Pt,ot,f,r):S:Ps(Ot,Pt,ot,f,r);var dn=A.length===p.length;if(dn)for(var Kt=0;Kt<A.length;Kt++)if(!A[Kt].equals(p[Kt])){dn=!1;break}if((!Vt||!dn)&&vt.indexOf(xt)>=0)return r.previousDirectionAngle=Re,Bc(j,B,Pt,d,m);for(et=0;et<ot;et++){var ne=(Z=st[et]).angle;if(X=fl(Re,ne),P&&sn||!(X>r.maxAllowedDirectionChange)){var re=zo(Pt.clone().offset(Z.gridOffsetX,Z.gridOffsetY),f,s),Oe=Ba(re);if(!D.isClose(Oe)&&!n(re)){if(vt.indexOf(Oe)>=0&&!re.equals(m)&&fl(ne,Ps(re,m,ot,f,r))>r.maxAllowedDirectionChange)continue;var de=Bt+Z.cost+(sn?0:r.penalties[X]);(!D.isOpen(Oe)||de<q[Oe])&&(B[Oe]=re,j[Oe]=Pt,q[Oe]=de,D.add(Oe,de+dl(re,p)))}}}Tt--}}return r.fallbackRoute.call(this,d,m,r)}Vi.prototype.build=function(t,e){var n=this.options,r=te(n.excludeEnds).reduce(function(d,m){var A=e.get(m);if(A){var p=t.getCell(A.id);p&&d.push(p)}return d},[]),s=[],o=t.getCell(e.get("source").id);o&&(s=Pr(s,o.getAncestors().map(function(d){return d.id})));var l=t.getCell(e.get("target").id);l&&(s=Pr(s,l.getAncestors().map(function(d){return d.id})));var f=this.mapGridSize;return t.getElements().reduce(function(d,m){var A=te(n.excludeTypes).includes(m.get("type")),p=r.find(function(S){return S.id===m.id}),D=s.includes(m.id);if(!(A||p||D))for(var j=m.getBBox().moveAndExpand(n.paddingBox),q=j.origin().snapToGrid(f),et=j.corner().snapToGrid(f),ht=q.x;ht<=et.x;ht+=f)for(var ft=q.y;ft<=et.y;ft+=f){var w=ht+"@"+ft;d[w]=d[w]||[],d[w].push(j)}return d},this.map),this},Vi.prototype.isPointAccessible=function(t){var e=t.clone().snapToGrid(this.mapGridSize).toString();return te(this.map[e]).every(function(n){return!n.containsPoint(t)})},ya.prototype.add=function(t,e){this.hash[t]?this.items.splice(this.items.indexOf(t),1):this.hash[t]=this.OPEN,this.values[t]=e;var n=Mt(this.items,t,function(r){return this.values[r]}.bind(this));this.items.splice(n,0,t)},ya.prototype.remove=function(t){this.hash[t]=this.CLOSE},ya.prototype.isOpen=function(t){return this.hash[t]===this.OPEN},ya.prototype.isClose=function(t){return this.hash[t]===this.CLOSE},ya.prototype.isEmpty=function(){return 0===this.items.length},ya.prototype.pop=function(){var t=this.items.shift();return this.remove(t),t};const Go=function(t,e,n){return function Rc(t,e,n){(function Ro(t){if(t.directions=un(t,"directions"),t.penalties=un(t,"penalties"),t.paddingBox=un(t,"paddingBox"),t.padding=un(t,"padding"),t.padding){var e=_(t.padding);t.paddingBox={x:-e.left,y:-e.top,width:e.left+e.right,height:e.top+e.bottom}}te(t.directions).forEach(function(n){var r=new I(0,0),s=new I(n.offsetX,n.offsetY);n.angle=$n(r.theta(s))})})(e),n.options.perpendicular=!!e.perpendicular;var r=ul(n,e),s=ll(n,e),o=cl(n,e);let l;if("function"==typeof e.isPointObstacle)l=e.isPointObstacle;else{const w=new Vi(e);w.build(n.paper.model,n.model),l=S=>!w.isPointAccessible(S)}for(var A,p,f=te(t).map(I),d=[],m=o,D=0,B=f.length;D<=B;D++){var j=null;if(p=A||r,!(A=f[D])&&(A=s,(!n.model.get("source").id||!n.model.get("target").id)&&qt(e.draggingRoute))){var et=p===r?o:p,ht=A.origin();j=e.draggingRoute.call(n,et,ht,e)}if(null===(j=j||ao.call(n,p,A,l,e)))return e.fallbackRouter(t,e,n);var ft=j[0];ft&&ft.equals(m)&&j.shift(),m=j[j.length-1]||m,Array.prototype.push.apply(d,j)}return d}(t,R({},ol,e),n)};var Gc={maxAllowedDirectionChange:45,diagonalCost:function(){var t=this.step;return Math.ceil(Math.sqrt(t*t<<1))},directions:function(){var t=this.step,e=this.cost(),n=this.diagonalCost();return[{offsetX:t,offsetY:0,cost:e},{offsetX:t,offsetY:t,cost:n},{offsetX:0,offsetY:t,cost:e},{offsetX:-t,offsetY:t,cost:n},{offsetX:-t,offsetY:0,cost:e},{offsetX:-t,offsetY:-t,cost:n},{offsetX:0,offsetY:-t,cost:e},{offsetX:t,offsetY:-t,cost:n}]},fallbackRoute:function(t,e,n){var r=t.theta(e),s=[],o={x:e.x,y:t.y},l={x:t.x,y:e.y};if(r%180>90){var f=o;o=l,l=f}var d=r%90<45?o:l,m=new tt(t,d),A=90*Math.ceil(r/90),p=I.fromPolar(m.squaredLength(),Ne(A+135),d),D=new tt(e,p),B=m.intersection(D),j=B||e,et=360/n.directions.length,ht=(B?j:t).theta(e),ft=$n(ht+et/2),w=et*Math.floor(ft/et);return n.previousDirectionAngle=w,j&&s.push(j.round()),s.push(e),s}};const ks=function(t,e,n){if(!qt(Go))throw new Error("Metro requires the manhattan router.");return Go(t,R({},Gc,e),n)};var ea=["arc","gap","cubic"],pl=["smooth"],oo=1/3,na=2/3;function vs(t,e,n){var r=[].concat(t,n,e);return r.reduce(function(s,o,l){var f=r[l+1];return null!=f&&(s[l]=Ct(o,f)),s},[])}function ml(t,e){return Ct(t,e).squaredLength()}function wr(t,e,n,r){var o,s=new _t;return o=_t.createSegment("M",t[0].start),s.appendSegment(o),te(t).forEach(function(l,f){if(l.isJump){var d,m,A,p;if("arc"===n){d=-90,m=l.start.difference(l.end);var D=Number(m.x<0||0===m.x&&m.y<0);D&&(d+=180);var q,B=l.midpoint(),j=new tt(B,l.end).rotate(B,d);A=(q=new tt(l.start,B)).pointAt(2/3).rotate(l.start,d),p=j.pointAt(1/3).rotate(j.end,-d),o=_t.createSegment("C",A,p,j.end),s.appendSegment(o),q=new tt(B,l.end),A=j.pointAt(1/3).rotate(j.end,d),p=q.pointAt(1/3).rotate(l.end,-d),o=_t.createSegment("C",A,p,l.end),s.appendSegment(o)}else if("gap"===n)o=_t.createSegment("M",l.end),s.appendSegment(o);else if("cubic"===n){d=l.start.theta(l.end);var et=.6*e,ht=1.35*e;m=l.start.difference(l.end),(D=Number(m.x<0||0===m.x&&m.y<0))&&(ht*=-1),A=I(l.start.x+et,l.start.y+ht).rotate(l.start,d),p=I(l.end.x-et,l.end.y+ht).rotate(l.end,d),o=_t.createSegment("C",A,p,l.end),s.appendSegment(o)}}else{var ft=t[f+1];0==r||!ft||ft.isJump?(o=_t.createSegment("L",l.end),s.appendSegment(o)):function Iu(t,e,n,r,s){var B,o=n.distance(r)/2,l=n.distance(s)/2,f=-Math.min(t,o),d=-Math.min(t,l),m=n.clone().move(r,f).round(),A=n.clone().move(s,d).round(),p=new I(oo*m.x+na*n.x,na*n.y+oo*m.y),D=new I(oo*A.x+na*n.x,na*n.y+oo*A.y);B=_t.createSegment("L",m),e.appendSegment(B),B=_t.createSegment("C",p,D,A),e.appendSegment(B)}(r,s,l.end,l.start,ft.end)}}),s}const Al=function(t,e,n,r){!function vl(t){var e=t.paper,n=e._jumpOverUpdateList;if(null==n){n=e._jumpOverUpdateList=[];var r=e.model;r.on("batch:stop",function(){this.hasActiveBatch()||function jc(t){for(var e=t._jumpOverUpdateList,n=0;n<e.length;n++){const r=e[n],s=r.getFlag(r.constructor.Flags.CONNECTOR);r.requestUpdate(s)}}(e)}),r.on("reset",function(){n=e._jumpOverUpdateList=[]})}n.indexOf(t)<0&&(n.push(t),t.listenToOnce(t.model,"change:connector remove",function(){n.splice(n.indexOf(t),1)}))}(this);var s=r.raw,o=r.size||5,l=r.jump&&(""+r.jump).toLowerCase(),f=r.radius||0,d=r.ignoreConnectors||pl;-1===ea.indexOf(l)&&(l=ea[0]);var m=this.paper,p=m.model.getLinks();if(1===p.length)return wr(vs(t,e,n),o,l,f);var D=this.model,B=p.indexOf(D),j=m.options.defaultConnector||{},q=p.filter(function(P,Z){var X=P.get("connector")||j;return!(te(d).includes(X.name)||Z>B&&"jumpover"===X.name)}),et=q.map(function(P){return m.findViewByModel(P)}),ht=vs(t,e,n),ft=et.map(function(P){return null==P?[]:P===this?ht:vs(P.sourcePoint,P.targetPoint,P.route)},this),w=ht.reduce(function(P,Z){var X=q.reduce(function(st,ot,vt){if(ot!==D){var Tt=function jo(t,e){return te(e).reduce(function(n,r){var s=t.intersection(r);return s&&n.push(s),n},[])}(Z,ft[vt]);st.push.apply(st,Tt)}return st},[]).sort(function(st,ot){return ml(Z.start,st)-ml(Z.start,ot)});return X.length>0?P.push.apply(P,function Il(t,e,n){return e.reduce(function(r,s,o){if(!0===s.skip)return r;var l=r.pop()||t,f=T(s).move(l.start,-n),d=T(s).move(l.start,+n),m=e[o+1];if(null!=m){var A=d.distance(m);A<=n&&(d=m.move(l.start,A),m.skip=!0)}else if(f.distance(l.end)<2*n+1)return r.push(l),r;if(d.distance(l.start)<2*n+1)return r.push(l),r;var B=Ct(f,d);return B.isJump=!0,r.push(Ct(l.start,f),B,Ct(d,l.end)),r},[])}(Z,X,o)):P.push(Z),P},[]),S=wr(w,o,l,f);return s?S:S.serialize()},ms=function(t,e,n,r){var s=r&&r.raw,o=[t].concat(n).concat([e]),l=new Ue(o),f=new _t(l);return s?f:f.serialize()},Au=function(t,e,n,r){r||(r={});var f,s=r.radius||10,o=r.raw,l=new _t;f=_t.createSegment("M",t),l.appendSegment(f);for(var A,p,D,B,j,q,et,ht,ft,w,S,d=1/3,m=2/3,P=0,Z=n.length;P<Z;P++)A=new I(n[P]),p=n[P-1]||t,D=n[P+1]||e,B=j||A.distance(p)/2,j=A.distance(D)/2,q=-Math.min(s,B),et=-Math.min(s,j),ht=A.clone().move(p,q).round(),ft=A.clone().move(D,et).round(),w=new I(d*ht.x+m*A.x,m*A.y+d*ht.y),S=new I(d*ft.x+m*A.x,m*A.y+d*ft.y),f=_t.createSegment("L",ht),l.appendSegment(f),f=_t.createSegment("C",w,S,ft),l.appendSegment(f);return f=_t.createSegment("L",e),l.appendSegment(f),o?l:l.serialize()},Zo=function(t,e,n,r){var o,s=r&&r.raw;if(n&&0!==n.length){var l=[t].concat(n).concat([e]),f=Se.throughPoints(l);o=new _t(f)}else{var d;if(o=new _t,d=_t.createSegment("M",t),o.appendSegment(d),Math.abs(t.x-e.x)>=Math.abs(t.y-e.y)){var m=(t.x+e.x)/2;d=_t.createSegment("C",m,t.y,m,e.y,e.x,e.y),o.appendSegment(d)}else{var A=(t.y+e.y)/2;d=_t.createSegment("C",t.x,A,e.x,A,e.x,e.y),o.appendSegment(d)}}return s?o:o.serialize()},br={AUTO:"auto",HORIZONTAL:"horizontal",VERTICAL:"vertical",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},Yr={UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",AUTO:"auto",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},kr=function(t,e,n=[],r={},s){const o=Boolean(r.raw),{direction:l=br.AUTO,precision:f=3}=r,d={coeff:r.distanceCoefficient||.6,angleTangentCoefficient:r.angleTangentCoefficient||80,tau:r.tension||.5,sourceTangent:r.sourceTangent?new I(r.sourceTangent):null,targetTangent:r.targetTangent?new I(r.targetTangent):null};d.sourceDirection="string"==typeof r.sourceDirection?r.sourceDirection:"number"==typeof r.sourceDirection?new I(1,0).rotate(null,r.sourceDirection):r.sourceDirection?new I(r.sourceDirection).normalize():null,d.targetDirection="string"==typeof r.targetDirection?r.targetDirection:"number"==typeof r.targetDirection?new I(1,0).rotate(null,r.targetDirection):r.targetDirection?new I(r.targetDirection).normalize():null;const m=[t,...n.map(q=>new I(q)),e];let A,p;if(d.sourceTangent)A=d.sourceTangent;else{const q=function uo(t,e,n,r){if(r.sourceDirection)switch(r.sourceDirection){case Yr.UP:return new I(0,-1);case Yr.DOWN:return new I(0,1);case Yr.LEFT:return new I(-1,0);case Yr.RIGHT:return new I(1,0);case Yr.AUTO:return Wo(t,e);case Yr.CLOSEST_POINT:return Ra(0,e);case Yr.OUTWARDS:return yl(t,e);default:return r.sourceDirection}switch(n){case br.HORIZONTAL:return function Cu(t,e,n){const{sourceBBox:r}=t;let s;return"left"===(s=r.width&&r.height?r.sideNearestToPoint(e[0]):r.x>e[1].x?"right":"left",s)?new I(-1,0):new I(1,0)}(t,e);case br.VERTICAL:return function Wc(t,e,n){const{sourceBBox:r}=t;let s;return"top"===(s=r.width&&r.height?r.sideNearestToPoint(e[0]):r.y>e[1].y?"bottom":"top",s)?new I(0,-1):new I(0,1)}(t,e);case br.CLOSEST_POINT:return Ra(0,e);case br.OUTWARDS:return yl(t,e);default:return Wo(t,e)}}(s,m,l,d),et=m[0].distance(m[1])*d.coeff,ft=lo(q,m[1].difference(m[0]).normalize());if(ft>Math.PI/4){const w=et+(ft-Math.PI/4)*d.angleTangentCoefficient;A=q.clone().scale(w,w)}else A=q.clone().scale(et,et)}if(d.targetTangent)p=d.targetTangent;else{const q=function Yc(t,e,n,r){if(r.targetDirection)switch(r.targetDirection){case Yr.UP:return new I(0,-1);case Yr.DOWN:return new I(0,1);case Yr.LEFT:return new I(-1,0);case Yr.RIGHT:return new I(0,1);case Yr.AUTO:return Cl(t,e);case Yr.CLOSEST_POINT:return yu(0,e);case Yr.OUTWARDS:return wl(t,e);default:return r.targetDirection}switch(n){case br.HORIZONTAL:return function Zc(t,e,n){const{targetBBox:r}=t;let s;return"left"===(s=r.width&&r.height?r.sideNearestToPoint(e[e.length-1]):r.x>e[e.length-2].x?"left":"right",s)?new I(-1,0):new I(1,0)}(t,e);case br.VERTICAL:return function _c(t,e,n){const{targetBBox:r}=t;let s;return"top"===(s=r.width&&r.height?r.sideNearestToPoint(e[e.length-1]):r.y>e[e.length-2].y?"top":"bottom",s)?new I(0,-1):new I(0,1)}(t,e);case br.CLOSEST_POINT:return yu(0,e);case br.OUTWARDS:return wl(t,e);default:return Cl(t,e)}}(s,m,l,d),et=m.length-1,ht=m[et-1].distance(m[et])*d.coeff,w=lo(q,m[et-1].difference(m[et]).normalize());if(w>Math.PI/4){const S=ht+(w-Math.PI/4)*d.angleTangentCoefficient;p=q.clone().scale(S,S)}else p=q.clone().scale(ht,ht)}const B=function Fc(t,e,n,r){const{tau:s,coeff:o}=r,l=[],f=[],d=[],m=t.length-1;for(let A=0;A<m;A++)l[A]=t[A].distance(t[A+1]);f[0]=e,f[m]=n;for(let A=1;A<m;A++){let p,D;p=1===A?t[A-1].clone().offset(f[A-1].x,f[A-1].y):t[A-1].clone(),D=A===m-1?t[A+1].clone().offset(f[A+1].x,f[A+1].y):t[A+1].clone();const B=p.difference(t[A]).normalize(),j=D.difference(t[A]).normalize(),q=lo(B,j);let ht,et=(Math.PI-q)/2;const ft=wu(B,j);let w;w=wu(t[A].difference(t[A+1]),t[A].difference(t[A-1])),ft<0&&(et=-et),q<Math.PI/2&&(et<0&&w<0||et>0&&w>0)&&(et-=Math.PI),ht=j.clone(),Uc(ht,et);const S=ht.clone(),P=ht.clone(),Z=l[A-1]*o,X=l[A]*o;S.scale(Z,Z),P.scale(X,X),f[A]=[S,P]}for(let A=0;A<m;A++){let p,D;p=0===A?t[A+1].difference(f[A].x/s,f[A].y/s):t[A+1].difference(f[A][1].x/s,f[A][1].y/s),D=A===m-1?t[A].clone().offset(f[A+1].x/s,f[A+1].y/s):t[A].difference(f[A+1][0].x/s,f[A+1][0].y/s),d[A]=[p,t[A],t[A+1],D]}return d}(m,A,p,d).map(q=>function Vc(t,e){const{tau:n}=e,r=new I;r.x=t[1].x+(t[2].x-t[0].x)/(6*n),r.y=t[1].y+(t[2].y-t[0].y)/(6*n);const s=new I;return s.x=t[2].x+(t[3].x-t[1].x)/(6*n),s.y=t[2].y+(t[3].y-t[1].y)/(6*n),new Se(t[1],r,s,t[2])}(q,d)),j=new _t(B).round(f);return o?j:j.serialize()};function Wo(t,e,n){const{sourceBBox:r}=t;let s;switch(s=r.sideNearestToPoint(r.width&&r.height?e[0]:e[1]),s){case"top":return new I(0,-1);case"bottom":return new I(0,1);case"right":return new I(1,0);case"left":return new I(-1,0)}}function Cl(t,e,n){const{targetBBox:r}=t;let s;switch(s=r.sideNearestToPoint(r.width&&r.height?e[e.length-1]:e[e.length-2]),s){case"top":return new I(0,-1);case"bottom":return new I(0,1);case"right":return new I(1,0);case"left":return new I(-1,0)}}function Ra(t,e,n){return e[1].difference(e[0]).normalize()}function yu(t,e,n){const r=e.length-1;return e[r-1].difference(e[r]).normalize()}function yl(t,e,n){const{sourceBBox:r}=t,s=r.center();return e[0].difference(s).normalize()}function wl(t,e,n){const{targetBBox:r}=t,s=r.center();return e[e.length-1].difference(s).normalize()}function Uc(t,e){const n=Math.cos(e),r=Math.sin(e),o=r*t.x+n*t.y;t.x=n*t.x-r*t.y,t.y=o}function lo(t,e){let n=t.dot(e)/(t.magnitude()*e.magnitude());return n<-1&&(n=-1),n>1&&(n=1),Math.acos(n)}function wu(t,e){return t.x*e.y-t.y*e.x}kr.Directions=br,kr.TangentDirections=Yr;const me={RENDER:"RENDER",UPDATE:"UPDATE",TOOLS:"TOOLS",LEGACY_TOOLS:"LEGACY_TOOLS",LABELS:"LABELS",VERTICES:"VERTICES",SOURCE:"SOURCE",TARGET:"TARGET",CONNECTOR:"CONNECTOR"},Ga=Pe.extend({className:function(){var t=Pe.prototype.className.apply(this).split(" ");return t.push("link"),t.join(" ")},options:{shortLinkLength:105,doubleLinkTools:!1,longLinkLength:155,linkToolsOffset:40,doubleLinkToolsOffset:65,sampleInterval:50},_labelCache:null,_labelSelectors:null,_markerCache:null,_V:null,_dragData:null,metrics:null,decimalsRounding:2,initialize:function(){Pe.prototype.initialize.apply(this,arguments),this._labelCache={},this._labelSelectors={},this._markerCache={},this._V={},this.cleanNodesCache()},presentationAttributes:{markup:[me.RENDER],attrs:[me.UPDATE],router:[me.UPDATE],connector:[me.CONNECTOR],smooth:[me.UPDATE],manhattan:[me.UPDATE],toolMarkup:[me.LEGACY_TOOLS],labels:[me.LABELS],labelMarkup:[me.LABELS],vertices:[me.VERTICES,me.UPDATE],vertexMarkup:[me.VERTICES],source:[me.SOURCE,me.UPDATE],target:[me.TARGET,me.UPDATE]},initFlag:[me.RENDER,me.SOURCE,me.TARGET,me.TOOLS],UPDATE_PRIORITY:1,confirmUpdate:function(t,e){if(e||(e={}),this.hasFlag(t,me.SOURCE)){if(!this.updateEndProperties("source"))return t;t=this.removeFlag(t,me.SOURCE)}if(this.hasFlag(t,me.TARGET)){if(!this.updateEndProperties("target"))return t;t=this.removeFlag(t,me.TARGET)}const{paper:n,sourceView:r,targetView:s}=this;if(n&&(r&&!n.isViewMounted(r)||s&&!n.isViewMounted(s)))return t;if(this.hasFlag(t,me.RENDER))return this.render(),this.updateHighlighters(!0),this.updateTools(e),this.removeFlag(t,[me.RENDER,me.UPDATE,me.VERTICES,me.LABELS,me.TOOLS,me.LEGACY_TOOLS,me.CONNECTOR]);let o=!1;this.hasFlag(t,me.VERTICES)&&(this.renderVertexMarkers(),t=this.removeFlag(t,me.VERTICES));const{model:l}=this,{attributes:f}=l;let d=this.hasFlag(t,me.LABELS),m=this.hasFlag(t,me.LEGACY_TOOLS);d&&(this.onLabelsChange(l,f.labels,e),t=this.removeFlag(t,me.LABELS),o=!0),m&&(this.renderTools(),t=this.removeFlag(t,me.LEGACY_TOOLS));const A=this.hasFlag(t,me.UPDATE),p=this.hasFlag(t,me.CONNECTOR);return(A||p)&&(A?e.translateBy&&l.isRelationshipEmbeddedIn(e.translateBy)?this.translate(e.tx,e.ty):this.update():(this.updatePath(),this.updateDOM()),this.updateTools(e),t=this.removeFlag(t,[me.UPDATE,me.TOOLS,me.CONNECTOR]),d=!1,m=!1,o=!0),d&&this.updateLabelPositions(),m&&this.updateToolsPosition(),o&&this.updateHighlighters(),this.hasFlag(t,me.TOOLS)&&(this.updateTools(e),t=this.removeFlag(t,me.TOOLS)),t},requestConnectionUpdate:function(t){this.requestUpdate(this.getFlag(me.UPDATE),t)},isLabelsRenderRequired:function(t={}){const e=this.model.previous("labels");if(!e)return!0;if("propertyPathArray"in t&&"propertyValue"in t){var n=t.propertyPathArray||[],r=n.length;if(r>1&&e[n[1]]){if(2===r)return"markup"in Object(t.propertyValue);if("markup"!==n[2])return!1}}return!0},onLabelsChange:function(t,e,n){this.isLabelsRenderRequired(n)?this.renderLabels():this.updateLabels()},render:function(){return this.vel.empty(),this.unmountLabels(),this._V={},this.renderMarkup(),this.renderLabels(),this.update(),this},renderMarkup:function(){var t=this.model,e=t.get("markup")||t.markup;if(!e)throw new Error("dia.LinkView: markup required");if(Array.isArray(e))return this.renderJSONMarkup(e);if("string"==typeof e)return this.renderStringMarkup(e);throw new Error("dia.LinkView: invalid markup")},renderJSONMarkup:function(t){var e=this.parseDOMJSON(t,this.el);this.selectors=e.selectors,this.vel.append(e.fragment)},renderStringMarkup:function(t){var e=gt(t);Array.isArray(e)||(e=[e]);for(var n=this._V,r=0,s=e.length;r<s;r++){var o=e[r],l=o.attr("class");l&&(l=Ys(l),n[ve.camelCase(l)]=o)}this.renderTools(),this.renderVertexMarkers(),this.renderArrowheadMarkers(),this.vel.append(e)},_getLabelMarkup:function(t){if(t){if(Array.isArray(t))return this.parseDOMJSON(t,null);if("string"==typeof t)return this._getLabelStringMarkup(t);throw new Error("dia.linkView: invalid label markup")}},_getLabelStringMarkup:function(t){var e=gt(t),n=document.createDocumentFragment();if(Array.isArray(e))for(var r=0,s=e.length;r<s;r++)n.appendChild(e[r].node);else n.appendChild(e.node);return{fragment:n,selectors:{}}},_normalizeLabelMarkup:function(t){if(t){var e=t.fragment;if(!(t.fragment instanceof DocumentFragment&&t.fragment.hasChildNodes()))throw new Error("dia.LinkView: invalid label markup.");var n,r=e.childNodes;return(n=r.length>1||"G"!==r[0].nodeName.toUpperCase()?gt("g").append(e):gt(r[0])).addClass("label"),{node:n.node,selectors:t.selectors}}},renderLabels:function(){var t=this._V,e=t.labels,n=this._labelCache={},r=this._labelSelectors={},s=this.model,o=s.attributes.labels||[],l=o.length;if(0===l)return e&&e.remove(),this;e?e.empty():(e=t.labels=gt("g").addClass("labels"),this.options.labelsLayer&&(e.addClass(Zn(un(this,"className"))),e.attr("model-id",s.id)));for(var f=0;f<l;f++){var A,p,m=this._normalizeLabelMarkup(this._getLabelMarkup(o[f].markup));if(m)A=m.node,p=m.selectors;else{var B=this._normalizeLabelMarkup(this._getLabelMarkup(s._builtins.defaultLabel.markup)),j=s._getDefaultLabel(),et=this._normalizeLabelMarkup(this._getLabelMarkup(j.markup))||B;A=et.node,p=et.selectors}A.setAttribute("label-idx",f),e.append(A),n[f]=A;var ht=this.selector;if(p[ht])throw new Error("dia.LinkView: ambiguous label root selector.");p[ht]=A,r[f]=p}return e.parent()||this.mountLabels(),this.updateLabels(),this},mountLabels:function(){const{el:t,paper:e,model:n,_V:r,options:s}=this,{labels:o}=r;if(!o||!n.hasLabels())return;const{node:l}=o;s.labelsLayer?e.getLayerView(s.labelsLayer).insertSortedNode(l,n.get("z")):l.parentNode!==t&&t.appendChild(l)},unmountLabels:function(){const{options:t,_V:e}=this;if(!e)return;const{labels:n}=e;n&&t.labelsLayer&&n.remove()},onMount:function(){this.mountLabels()},unmount:function(){Pe.prototype.unmount.apply(this,arguments),this.unmountLabels()},findLabelNode:function(t,e){const n=this._labelCache[t];if(!n)return null;const r=this._labelSelectors[t],[s=null]=this.findBySelector(e,n,r);return s},_mergeLabelAttrs:function(t,e,n,r){return null===e?null:void 0===e?null===n?null:void 0===n?t?void 0:r:t?n:zn({},r,n):t?zn({},n,e):zn({},r,n,e)},updateLabels:function(){if(!this._V.labels)return this;for(var t=this.model,e=t.get("labels")||[],n=this.can("labelMove"),s=t._builtins.defaultLabel.attrs,o=t._getDefaultLabel(),l=o.markup,f=o.attrs,d=0,m=e.length;d<m;d++){var A=this._labelCache[d];A.setAttribute("cursor",n?"move":"default");var p=this._labelSelectors[d],D=e[d],q=this._mergeLabelAttrs(D.markup||l,D.attrs,f,s);this.updateDOMSubtreeAttributes(A,q,{rootBBox:new Lt(D.size),selectors:p})}return this},renderTools:function(){if(!this._V.linkTools)return this;var r,t=ve(this._V.linkTools.node).empty(),e=c(this.model.get("toolMarkup")||this.model.toolMarkup),n=gt(e());return t.append(n.node),this._toolCache=n,this.options.doubleLinkTools&&(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup?(e=c(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup),r=gt(e())):r=n.clone(),t.append(r.node),this._tool2Cache=r),this},renderVertexMarkers:function(){if(!this._V.markerVertices)return this;var t=ve(this._V.markerVertices.node).empty(),e=c(this.model.get("vertexMarkup")||this.model.vertexMarkup);return this.model.vertices().forEach(function(n,r){t.append(gt(e(R({idx:r},n))).node)}),this},renderArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;var t=ve(this._V.markerArrowheads.node);t.empty();var e=c(this.model.get("arrowheadMarkup")||this.model.arrowheadMarkup);return this._V.sourceArrowhead=gt(e({end:"source"})),this._V.targetArrowhead=gt(e({end:"target"})),t.append(this._V.sourceArrowhead.node,this._V.targetArrowhead.node),this},removeRedundantLinearVertices:function(t){const n=this.model,r=n.vertices(),s=[this.sourceAnchor,...r,this.targetAnchor],o=s.length,l=new Ue(s);l.simplify({threshold:.001});const f=l.points.map(m=>m.toJSON()),d=f.length;return o===d?0:(n.vertices(f.slice(1,d-1),t),o-d)},updateDefaultConnectionPath:function(){var t=this._V;t.connection&&t.connection.attr("d",this.getSerializedConnection()),t.connectionWrap&&t.connectionWrap.attr("d",this.getSerializedConnection()),t.markerSource&&t.markerTarget&&this._translateAndAutoOrientArrows(t.markerSource,t.markerTarget)},getEndView:function(t){switch(t){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error("dia.LinkView: type parameter required.")}},getEndAnchor:function(t){switch(t){case"source":return new I(this.sourceAnchor);case"target":return new I(this.targetAnchor);default:throw new Error("dia.LinkView: type parameter required.")}},getEndConnectionPoint:function(t){switch(t){case"source":return new I(this.sourcePoint);case"target":return new I(this.targetPoint);default:throw new Error("dia.LinkView: type parameter required.")}},getEndMagnet:function(t){switch(t){case"source":var e=this.sourceView;if(!e)break;return this.sourceMagnet||e.el;case"target":var n=this.targetView;if(!n)break;return this.targetMagnet||n.el;default:throw new Error("dia.LinkView: type parameter required.")}return null},update:function(){return this.updateRoute(),this.updatePath(),this.updateDOM(),this},translate:function(t=0,e=0){const{route:n,path:r}=this;if(!n||!r)return;const s=new Ue(n);s.translate(t,e),this.route=s.points,this._translateConnectionPoints(t,e),r.translate(t,e),this.updateDOM()},updateDOM(){const{el:t,model:e,selectors:n}=this;this.cleanNodesCache(),this.updateDOMSubtreeAttributes(t,e.attr(),{selectors:n}),this.updateDefaultConnectionPath(),this.updateLabelPositions(),this.updateToolsPosition(),this.updateArrowheadMarkers(),this.options.perpendicular=null},updateRoute:function(){const{model:t}=this,e=t.vertices(),n=this.findAnchors(e),r=this.sourceAnchor=n.source,s=this.targetAnchor=n.target,o=this.findRoute(e);this.route=o;var l=this.findConnectionPoints(o,r,s);this.sourcePoint=l.source,this.targetPoint=l.target},updatePath:function(){const{route:t,sourcePoint:e,targetPoint:n}=this,r=this.findMarkerPoints(t,e,n),s=this.findPath(t,r.source||e,r.target||n);this.path=s},findMarkerPoints:function(t,e,n){var l,f,r=t[0],s=t[t.length-1],o=this._markerCache;return this._V.markerSource&&(o.sourceBBox=o.sourceBBox||this._V.markerSource.getBBox(),l=I(e).move(r||n,o.sourceBBox.width*this._V.markerSource.scale().sx*-1).round()),this._V.markerTarget&&(o.targetBBox=o.targetBBox||this._V.markerTarget.getBBox(),f=I(n).move(s||e,o.targetBBox.width*this._V.markerTarget.scale().sx*-1).round()),o.sourcePoint=l||e.clone(),o.targetPoint=f||n.clone(),{source:l,target:f}},findAnchorsOrdered:function(t,e,n,r){var s,o,l,f,d=this.model,m=d.get(t),A=d.get(n),p=this.getEndView(t),D=this.getEndView(n),B=this.getEndMagnet(t),j=this.getEndMagnet(n);p?(l=e?new I(e):D?j:new I(A),s=this.getAnchor(m.anchor,p,B,l,t)):s=new I(m),D?(f=new I(r||s),o=this.getAnchor(A.anchor,D,j,f,n)):o=new I(A);var q={};return q[t]=s,q[n]=o,q},findAnchors:function(t){var e=this.model,n=t[0],r=t[t.length-1];return e.target().priority&&!e.source().priority?this.findAnchorsOrdered("target",r,"source",n):this.findAnchorsOrdered("source",n,"target",r)},findConnectionPoints:function(t,e,n){var p,D,B,ht,r=t[0],s=t[t.length-1],o=this.model,l=o.get("source"),f=o.get("target"),d=this.sourceView,m=this.targetView,A=this.paper.options;if(d&&!d.isNodeConnection(this.sourceMagnet)){p=this.sourceMagnet||d.el;var j=l.connectionPoint||A.defaultConnectionPoint,et=new tt(r||n,e);B=this.getConnectionPoint(j,d,p,et,"source")}else B=e;if(m&&!m.isNodeConnection(this.targetMagnet)){D=this.targetMagnet||m.el;var ft=f.connectionPoint||A.defaultConnectionPoint,S=new tt(s||e,n);ht=this.getConnectionPoint(ft,m,D,S,"target")}else ht=n;return{source:B,target:ht}},getAnchor:function(t,e,n,r,s){var f,o=e.isNodeConnection(n),l=this.paper.options;if(t||(t=o?l.defaultLinkAnchor:l.perpendicularLinks||this.options.perpendicular?{name:"perpendicular"}:l.defaultAnchor),!t)throw new Error("Anchor required.");if("function"==typeof t)f=t;else{var d=t.name;if("function"!=typeof(f=l[o?"linkAnchorNamespace":"anchorNamespace"][d]))throw new Error("Unknown anchor: "+d)}var A=f.call(this,e,n,r,t.args||{},s,this);return A?A.round(this.decimalsRounding):new I},getConnectionPoint:function(t,e,n,r,s){var o,m,l=r.end,f=this.paper.options;if("function"==typeof f.linkConnectionPoint&&(o=f.linkConnectionPoint(this,e,n===e.el?void 0:n,r.start,s)))return o;if(!t)return l;if("function"==typeof t)m=t;else{var A=t.name;if("function"!=typeof(m=f.connectionPointNamespace[A]))throw new Error("Unknown connection point: "+A)}return(o=m.call(this,r,e,n,t.args||{},s,this))?o.round(this.decimalsRounding):l},_translateConnectionPoints:function(t,e){var n=this._markerCache;n.sourcePoint.offset(t,e),n.targetPoint.offset(t,e),this.sourcePoint.offset(t,e),this.targetPoint.offset(t,e),this.sourceAnchor.offset(t,e),this.targetAnchor.offset(t,e)},_normalizeLabelPosition:function(t){return"number"==typeof t?{distance:t,offset:null,angle:0,args:null}:t},updateLabelPositions:function(){if(!this._V.labels)return this;if(!this.path)return this;var e=this.model,n=e.get("labels")||[];if(!n.length)return this;for(var s=e._builtins.defaultLabel.position,o=e._getDefaultLabel(),l=this._normalizeLabelPosition(o.position),f=zn({},s,l),d=0,m=n.length;d<m;d++){var A=this._labelCache[d];if(A){var D=this._normalizeLabelPosition(n[d].position),B=zn({},f,D),j=this._getLabelTransformationMatrix(B);A.setAttribute("transform",gt.matrixToTransformString(j)),this._cleanLabelMatrices(d)}}return this},_cleanLabelMatrices:function(t){const{metrics:e,_labelSelectors:n}=this,r=n[t];if(r)for(let s in r){const{id:o}=r[s];o&&o in e&&delete e[o].magnetMatrix}},updateToolsPosition:function(){if(!this._V.linkTools)return this;var t="",e=this.options.linkToolsOffset,n=this.getConnectionLength();if(!Number.isNaN(n)){n<this.options.shortLinkLength&&(t="scale(.5)",e/=2);var r=this.getPointAtLength(e);this._toolCache.attr("transform","translate("+r.x+", "+r.y+") "+t),this.options.doubleLinkTools&&n>=this.options.longLinkLength?(r=this.getPointAtLength(n-(this.options.doubleLinkToolsOffset||e)),this._tool2Cache.attr("transform","translate("+r.x+", "+r.y+") "+t),this._tool2Cache.attr("visibility","visible")):this.options.doubleLinkTools&&this._tool2Cache.attr("visibility","hidden")}return this},updateArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;if("none"===ve.css(this._V.markerArrowheads.node,"display"))return this;var t=this.getConnectionLength()<this.options.shortLinkLength?.5:1;return this._V.sourceArrowhead.scale(t),this._V.targetArrowhead.scale(t),this._translateAndAutoOrientArrows(this._V.sourceArrowhead,this._V.targetArrowhead),this},updateEndProperties:function(t){const{model:e,paper:n}=this,r=`${t}View`,s=e.get(t),o=s&&s.id;if(!o)return this[r]=null,this.updateEndMagnet(t),!0;const l=n.getModelById(o);if(!l)throw new Error("LinkView: invalid "+t+" cell.");const f=l.findView(n);return!!f&&(this[r]=f,this.updateEndMagnet(t),!0)},updateEndMagnet:function(t){const e=`${t}Magnet`,n=this.getEndView(t);if(n){let r=n.getMagnetFromLinkEnd(this.model.get(t));r===n.el&&(r=null),this[e]=r}else this[e]=null},_translateAndAutoOrientArrows:function(t,e){var n=te(this.route);t&&t.translateAndAutoOrient(this.sourcePoint,n[0]||this.targetPoint,this.paper.cells),e&&e.translateAndAutoOrient(this.targetPoint,n[n.length-1]||this.sourcePoint,this.paper.cells)},_getLabelPositionAngle:function(t){return(this.model.label(t).position||{}).angle||0},_getLabelPositionArgs:function(t){return(this.model.label(t).position||{}).args},_getDefaultLabelPositionArgs:function(){return(this.model._getDefaultLabel().position||{}).args},_mergeLabelPositionArgs:function(t,e){return null===t?null:void 0===t?null===e?null:e:zn({},e,t)},addLabel:function(t,e,n,r){var s,o,f,l=0;"number"!=typeof t?(s=t.x,o=t.y,"number"==typeof e?(l=e,f=n):f=e):(s=t,o=e,"number"==typeof n?(l=n,f=r):f=n);var d=this._getDefaultLabelPositionArgs(),A=this._mergeLabelPositionArgs(f,d),p={position:this.getLabelPosition(s,o,l,A)};return this.model.insertLabel(-1,p,f),-1},addVertex:function(t,e,n){var r="number"!=typeof t,s=r?t.x:t,o=r?t.y:e,l=r?e:n,f={x:s,y:o},d=this.getVertexIndex(s,o);return this.model.insertVertex(d,f,l),d},sendToken:function(t,e,n){var s,o,l;Fe(e)?(s=e.duration,o="reverse"===e.direction,l=e.connection):(s=e,o=!1,l=null);var f={dur:(s=s||1e3)+"ms",repeatCount:1,calcMode:"linear",fill:"freeze"};o&&(f.keyPoints="1;0",f.keyTimes="0;1");var m,d=gt(t);if("string"==typeof l)m=this.findBySelector(l,this.el,this.selectors)[0];else{var A=this._V;m=A.connection?A.connection.node:this.el.querySelector("path")}if(!(m instanceof SVGPathElement))throw new Error("dia.LinkView: token animation requires a valid connection path.");d.appendTo(this.paper.cells).animateAlongPath(f,m),setTimeout(function r(p,D){return function(){p.remove(),"function"==typeof D&&D()}}(d,n),s)},findRoute:function(t){t||(t=[]);var e=this.paper.options.routerNamespace||Je,n=this.model.router(),r=this.paper.options.defaultRouter;if(!n){if(!r)return t.map(I);n=r}var s=qt(n)?n:e[n.name];if(!qt(s))throw new Error('dia.LinkView: unknown router: "'+n.name+'".');return s.call(this,t,n.args||{},this)||t.map(I)},findPath:function(t,e,n){var r=this.paper.options.connectorNamespace||Ci,s=this.model.connector();s||(s=this.paper.options.defaultConnector||{});var l=qt(s)?s:r[s.name];if(!qt(l))throw new Error('dia.LinkView: unknown connector: "'+s.name+'".');var f=mt(s.args||{});f.raw=!0;var d=l.call(this,e,n,t,f,this);return"string"==typeof d&&(d=new _t(gt.normalizePathData(d))),d},getConnection:function(){var t=this.path;return t?t.clone():null},getSerializedConnection:function(){var t=this.path;if(!t)return null;var e=this.metrics;if(e.hasOwnProperty("data"))return e.data;var n=t.serialize();return e.data=n,n},getConnectionSubdivisions:function(){var t=this.path;if(!t)return null;var e=this.metrics;if(e.hasOwnProperty("segmentSubdivisions"))return e.segmentSubdivisions;var n=t.getSegmentSubdivisions();return e.segmentSubdivisions=n,n},getConnectionLength:function(){var t=this.path;if(!t)return 0;var e=this.metrics;if(e.hasOwnProperty("length"))return e.length;var n=t.length({segmentSubdivisions:this.getConnectionSubdivisions()});return e.length=n,n},getPointAtLength:function(t){var e=this.path;return e?e.pointAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getPointAtRatio:function(t){var e=this.path;return e?(Wn(t)&&(t=parseFloat(t)/100),e.pointAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()})):null},getTangentAtLength:function(t){var e=this.path;return e?e.tangentAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getTangentAtRatio:function(t){var e=this.path;return e?e.tangentAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPoint:function(t){var e=this.path;return e?e.closestPoint(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointLength:function(t){var e=this.path;return e?e.closestPointLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointRatio:function(t){var e=this.path;return e?e.closestPointNormalizedLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getLabelPosition:function(t,e,n,r){var l,s={},o=0;"number"==typeof n?(o=n,l=r):l=n,l&&(s.args=l);var q,et,f=!(l&&l.absoluteDistance),d=l&&l.absoluteDistance&&l.reverseDistance,m=l&&l.absoluteOffset,A=this.path,p={segmentSubdivisions:this.getConnectionSubdivisions()},D=new I(t,e),B=A.closestPointT(D,p),j=A.lengthAtT(B,p);if(f&&(j=j/this.getConnectionLength()||0),d&&(j=-1*(this.getConnectionLength()-j)||1),s.distance=j,m||(q=A.tangentAtT(B)),q)et=q.pointOffset(D);else{var ht=A.pointAtT(B),ft=D.difference(ht);et={x:ft.x,y:ft.y}}return s.offset=et,s.angle=o,s},_getLabelTransformationMatrix:function(t){var e,n=0,r={};if("number"==typeof t)e=t;else{if("number"!=typeof t.distance)throw new Error("dia.LinkView: invalid label position distance.");r=t.args||{},e=t.distance,n=t.angle||0}var s=e>0&&e<=1,o=0,l={x:0,y:0};if(t.offset){var f=t.offset;"number"==typeof f&&(o=f),f.x&&(l.x=f.x),f.y&&(l.y=f.y)}var q,d=0!==l.x||0!==l.y||0===o,m=r.keepGradient,A=r.ensureLegibility,p=this.path,D={segmentSubdivisions:this.getConnectionSubdivisions()},B=s?e*this.getConnectionLength():e,j=p.tangentAtLength(B,D),et=n;if(j){if(d)(q=j.start).offset(l);else{var ht=j.clone();ht.rotate(j.start,-90),ht.setLength(o),q=ht.end}m&&(et=j.angle()+n,A&&(et=$n((et+90)%180-90)))}else q=p.start,d&&q.offset(l);return gt.createSVGMatrix().translate(q.x,q.y).rotate(et)},getLabelCoordinates:function(t){var e=this._getLabelTransformationMatrix(t);return new I(e.e,e.f)},getVertexIndex:function(t,e){for(var r=this.model.vertices(),s=this.getClosestPointLength(new I(t,e)),o=0,l=r.length;o<l&&!(s<this.getClosestPointLength(r[o]));o++);return o},notifyPointerdown(t,e,n){Pe.prototype.pointerdown.call(this,t,e,n),this.notify("link:pointerdown",t,e,n)},notifyPointermove(t,e,n){Pe.prototype.pointermove.call(this,t,e,n),this.notify("link:pointermove",t,e,n)},notifyPointerup(t,e,n){this.notify("link:pointerup",t,e,n),Pe.prototype.pointerup.call(this,t,e,n)},pointerdblclick:function(t,e,n){Pe.prototype.pointerdblclick.apply(this,arguments),this.notify("link:pointerdblclick",t,e,n)},pointerclick:function(t,e,n){Pe.prototype.pointerclick.apply(this,arguments),this.notify("link:pointerclick",t,e,n)},contextmenu:function(t,e,n){Pe.prototype.contextmenu.apply(this,arguments),this.notify("link:contextmenu",t,e,n)},pointerdown:function(t,e,n){switch(this.notifyPointerdown(t,e,n),t.target.getAttribute("class")){case"marker-vertex":return void this.dragVertexStart(t,e,n);case"marker-vertex-remove":case"marker-vertex-remove-area":return void this.dragVertexRemoveStart(t,e,n);case"marker-arrowhead":return void this.dragArrowheadStart(t,e,n);case"connection":case"connection-wrap":return void this.dragConnectionStart(t,e,n);case"marker-source":case"marker-target":return}this.dragStart(t,e,n)},pointermove:function(t,e,n){var r=this._dragData;switch(r&&this.eventData(t,r),this.eventData(t).action){case"vertex-move":this.dragVertex(t,e,n);break;case"label-move":this.dragLabel(t,e,n);break;case"arrowhead-move":this.dragArrowhead(t,e,n);break;case"move":this.drag(t,e,n)}r&&R(r,this.eventData(t)),this.notifyPointermove(t,e,n)},pointerup:function(t,e,n){var r=this._dragData;switch(r&&(this.eventData(t,r),this._dragData=null),this.eventData(t).action){case"vertex-move":this.dragVertexEnd(t,e,n);break;case"label-move":this.dragLabelEnd(t,e,n);break;case"arrowhead-move":this.dragArrowheadEnd(t,e,n);break;case"move":this.dragEnd(t,e,n)}this.notifyPointerup(t,e,n),this.checkMouseleave(t)},mouseover:function(t){Pe.prototype.mouseover.apply(this,arguments),this.notify("link:mouseover",t)},mouseout:function(t){Pe.prototype.mouseout.apply(this,arguments),this.notify("link:mouseout",t)},mouseenter:function(t){Pe.prototype.mouseenter.apply(this,arguments),this.notify("link:mouseenter",t)},mouseleave:function(t){Pe.prototype.mouseleave.apply(this,arguments),this.notify("link:mouseleave",t)},mousewheel:function(t,e,n,r){Pe.prototype.mousewheel.apply(this,arguments),this.notify("link:mousewheel",t,e,n,r)},onevent:function(t,e,n,r){var s=gt(t.target).findParentByClass("link-tool",this.el);if(s){if(t.stopPropagation(),this.can("useLinkTools")){if("remove"===e)return void this.model.remove({ui:!0});this.notify(e,t,n,r)}this.notifyPointerdown(t,n,r),this.paper.delegateDragEvents(this,t.data)}else Pe.prototype.onevent.apply(this,arguments)},onlabel:function(t,e,n){this.notifyPointerdown(t,e,n),this.dragLabelStart(t,e,n),this.eventData(t).stopPropagation&&t.stopPropagation()},dragConnectionStart:function(t,e,n){if(this.can("vertexAdd")){var r=this.addVertex({x:e,y:n},{ui:!0});this.eventData(t,{action:"vertex-move",vertexIdx:r})}},dragLabelStart:function(t,e,n){if(this.can("labelMove")){var s=parseInt(t.currentTarget.getAttribute("label-idx"),10),o=this._getLabelPositionAngle(s),l=this._getLabelPositionArgs(s),f=this._getDefaultLabelPositionArgs(),d=this._mergeLabelPositionArgs(l,f);this.eventData(t,{action:"label-move",labelIdx:s,positionAngle:o,positionArgs:d,stopPropagation:!0})}else this.eventData(t,{stopPropagation:!0});this.paper.delegateDragEvents(this,t.data)},dragVertexStart:function(t,e,n){if(this.can("vertexMove")){var s=parseInt(t.target.getAttribute("idx"),10);this.eventData(t,{action:"vertex-move",vertexIdx:s})}},dragVertexRemoveStart:function(t,e,n){if(this.can("vertexRemove")){var s=parseInt(t.target.getAttribute("idx"),10);this.model.removeVertex(s)}},dragArrowheadStart:function(t,e,n){if(this.can("arrowheadMove")){var s=t.target.getAttribute("end"),o=this.startArrowheadMove(s,{ignoreBackwardsCompatibility:!0});this.eventData(t,o)}},dragStart:function(t,e,n){!this.can("linkMove")||this.eventData(t,{action:"move",dx:e,dy:n})},dragLabel:function(t,e,n){var r=this.eventData(t),s={position:this.getLabelPosition(e,n,r.positionAngle,r.positionArgs)};this.paper.options.snapLabels&&delete s.position.offset,this.model.label(r.labelIdx,s)},dragVertex:function(t,e,n){var r=this.eventData(t);this.model.vertex(r.vertexIdx,{x:e,y:n},{ui:!0})},dragArrowhead:function(t,e,n){this.paper.options.snapLinks?this._snapArrowhead(t,e,n):this._connectArrowhead(this.getEventTarget(t),e,n,this.eventData(t))},drag:function(t,e,n){var r=this.eventData(t);this.model.translate(e-r.dx,n-r.dy,{ui:!0}),this.eventData(t,{dx:e,dy:n})},dragLabelEnd:function(){},dragVertexEnd:function(){},dragArrowheadEnd:function(t,e,n){var r=this.eventData(t),s=this.paper;s.options.snapLinks?this._snapArrowheadEnd(r):this._connectArrowheadEnd(r,e,n),s.linkAllowed(this)?(this._finishEmbedding(r),this._notifyConnectEvent(r,t)):this._disallow(r),this._afterArrowheadMove(r)},dragEnd:function(){},_disallow:function(t){"remove"===t.whenNotAllowed?this.model.remove({ui:!0}):this.model.set(t.arrowhead,t.initialEnd,{ui:!0})},_finishEmbedding:function(t){this.paper.options.embeddingMode&&this.model.reparent()&&(t.z=null)},_notifyConnectEvent:function(t,e){var n=t.arrowhead,r=t.initialEnd,s=this.model.prop(n);if(s&&!Yn.endsEqual(r,s)){var l=this.paper;r.id&&this.notify("link:disconnect",e,l.findViewByModel(r.id),t.initialMagnet,n),s.id&&this.notify("link:connect",e,l.findViewByModel(s.id),t.magnetUnderPointer,n)}},_snapArrowhead:function(t,e,n){const{paper:r}=this,{snapLinks:s,connectionStrategy:o}=r.options,l=this.eventData(t);var f=s.radius||50,d=r.findViewsInArea({x:e-f,y:n-f,width:2*f,height:2*f}),m=l.closestView||null,A=l.closestMagnet||null,p=l.magnetProxy||null;l.closestView=l.closestMagnet=l.magnetProxy=null;var D=Number.MAX_VALUE,B=new I(e,n);d.forEach(function(S){const P=[];"false"!==S.el.getAttribute("magnet")&&P.push({bbox:S.model.getBBox(),magnet:S.el}),S.$("[magnet]").toArray().forEach(Z=>{P.push({bbox:S.getNodeBBox(Z),magnet:Z})}),P.forEach(Z=>{const{magnet:X,bbox:st}=Z,ot=st.center().squaredDistance(B);ot<D&&(A===X||r.options.validateConnection.apply(r,l.validateConnectionArgs(S,S.el===X?null:X)))&&(D=ot,l.closestView=S,l.closestMagnet=X)})},this);var j,q=null,et=l.closestView,ht=l.closestMagnet;ht&&(q=l.magnetProxy=et.findProxyNode(ht,"highlighter"));var ft=l.arrowhead,w=A!==ht;if(m&&w&&m.unhighlight(p,{connecting:!0,snapping:!0}),et){const{prevEnd:S,prevX:P,prevY:Z}=l;if(l.prevX=e,l.prevY=n,!w&&("function"!=typeof o||P===e&&Z===n)||(j=et.getLinkEnd(ht,e,n,this.model,ft),!w&&Yt(S,j)))return;l.prevEnd=j,w&&et.highlight(q,{connecting:!0,snapping:!0})}else j={x:e,y:n};this.model.set(ft,j||{x:e,y:n},{ui:!0}),m&&this.notify("link:snap:disconnect",t,m,A,ft),et&&this.notify("link:snap:connect",t,et,ht,ft)},_snapArrowheadEnd:function(t){var e=t.closestView,n=t.closestMagnet;e&&n&&(e.unhighlight(t.magnetProxy,{connecting:!0,snapping:!0}),t.magnetUnderPointer=e.findMagnet(n)),t.closestView=t.closestMagnet=null},_connectArrowhead:function(t,e,n,r){const{paper:s,model:o}=this;if(r.eventTarget!==t){r.magnetProxy&&r.viewUnderPointer.unhighlight(r.magnetProxy,{connecting:!0});const l=r.viewUnderPointer=s.findView(t);if(l){const f=r.magnetUnderPointer=l.findMagnet(t),d=r.magnetProxy=l.findProxyNode(f,"highlighter");f&&this.paper.options.validateConnection.apply(s,r.validateConnectionArgs(l,f))?d&&l.highlight(d,{connecting:!0}):(r.magnetUnderPointer=null,r.magnetProxy=null)}else r.magnetUnderPointer=null,r.magnetProxy=null}r.eventTarget=t,o.set(r.arrowhead,{x:e,y:n},{ui:!0})},_connectArrowheadEnd:function(t={},e,n){const{model:r}=this,{viewUnderPointer:s,magnetUnderPointer:o,magnetProxy:l,arrowhead:f}=t;if(!o||!l||!s)return;s.unhighlight(l,{connecting:!0});const d=s.getLinkEnd(o,e,n,r,f);r.set(f,d,{ui:!0})},_beforeArrowheadMove:function(t){t.z=this.model.get("z"),this.model.toFront();var e=this.el.style;t.pointerEvents=e.pointerEvents,e.pointerEvents="none",this.paper.options.markAvailable&&this._markAvailableMagnets(t)},_afterArrowheadMove:function(t){null!==t.z&&(this.model.set("z",t.z,{ui:!0}),t.z=null),this.el.style.pointerEvents=t.pointerEvents,this.paper.options.markAvailable&&this._unmarkAvailableMagnets(t)},_createValidateConnectionArgs:function(t){var e=[];e[4]=t,e[5]=this;var n,r=0,s=0;"source"===t?(r=2,n="target"):(s=2,n="source");var o=this.model.get(n);if(o.id){var l=e[r]=this.paper.findViewByModel(o.id),f=l.getMagnetFromLinkEnd(o);f===l.el&&(f=void 0),e[r+1]=f}return function d(m,A){return e[s]=m,e[s+1]=m.el===A?void 0:A,e}},_markAvailableMagnets:function(t){function e(p,D){var B=p.paper;return B.options.validateConnection.apply(B,this.validateConnectionArgs(p,D))}var n=this.paper,r=n.model.getCells();t.marked={};for(var s=0,o=r.length;s<o;s++){var l=r[s].findView(n);if(l){var f=Array.prototype.slice.call(l.el.querySelectorAll("[magnet]"));"false"!==l.el.getAttribute("magnet")&&f.push(l.el);var d=f.filter(e.bind(t,l));if(d.length>0){for(var m=0,A=d.length;m<A;m++)l.highlight(d[m],{magnetAvailability:!0});l.highlight(null,{elementAvailability:!0}),t.marked[l.model.id]=d}}}},_unmarkAvailableMagnets:function(t){for(var n,r,e=Object.keys(t.marked),s=0,o=e.length;s<o;s++){r=t.marked[n=e[s]];var l=this.paper.findViewByModel(n);if(l){for(var f=0,d=r.length;f<d;f++)l.unhighlight(r[f],{magnetAvailability:!0});l.unhighlight(null,{elementAvailability:!0})}}t.marked=null},startArrowheadMove:function(t,e){e||(e={});var n={action:"arrowhead-move",arrowhead:t,whenNotAllowed:e.whenNotAllowed||"revert",initialMagnet:this[t+"Magnet"]||(this[t+"View"]?this[t+"View"].el:null),initialEnd:mt(this.model.get(t)),validateConnectionArgs:this._createValidateConnectionArgs(t)};return this._beforeArrowheadMove(n),!0!==e.ignoreBackwardsCompatibility&&(this._dragData=n),n},onRemove:function(){Pe.prototype.onRemove.apply(this,arguments),this.unmountLabels()}},{Flags:me});Object.defineProperty(Ga.prototype,"sourceBBox",{enumerable:!0,get:function(){var t=this.sourceView;if(!t){var e=this.model.source();return new Lt(e.x,e.y)}var n=this.sourceMagnet;return t.isNodeConnection(n)?new Lt(this.sourceAnchor):t.getNodeBBox(n||t.el)}}),Object.defineProperty(Ga.prototype,"targetBBox",{enumerable:!0,get:function(){var t=this.targetView;if(!t){var e=this.model.target();return new Lt(e.x,e.y)}var n=this.targetMagnet;return t.isNodeConnection(n)?new Lt(this.targetAnchor):t.getNodeBBox(n||t.el)}});const ui={CELLS:"cells",BACK:"back",FRONT:"front",TOOLS:"tools",LABELS:"labels"},Xc=gs.extend({tagName:"g",svgElement:!0,pivotNodes:null,defaultTheme:null,options:{name:""},className:function(){return Zn(`${this.options.name}-layer`)},init:function(){this.pivotNodes={}},insertSortedNode:function(t,e){this.el.insertBefore(t,this.insertPivot(e))},insertNode:function(t){const{el:e}=this;t.parentNode!==e&&e.appendChild(t)},insertPivot:function(t){const{el:e,pivotNodes:n}=this;(t=+t)||(t=0);let r=n[t];if(r)return r;r=n[t]=document.createComment("z-index:"+(t+1));let s=-1/0;for(let o in n)o=+o,o<t&&o>s&&(s=o);return e.insertBefore(r,s!==-1/0?n[s].nextSibling:e.firstChild),r},removePivots:function(){const{el:t,pivotNodes:e}=this;for(let n in e)t.removeChild(e[n]);this.pivotNodes={}}}),bu=ta.extend({tagName:"path",className:"highlight-stroke",attributes:{"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},options:{padding:3,rx:0,ry:0,useFirstSubpath:!1,attrs:{"stroke-width":3,stroke:"#FEB663"}},getPathData(t,e){const{options:n}=this,{useFirstSubpath:r}=n;let s;try{const o=gt(e);if(s=o.convertToPathData().trim(),"PATH"===o.tagName()&&r){const l=s.search(/.M/i)+1;l>0&&(s=s.substr(0,l))}}catch{const l=t.getNodeBoundingRect(e);s=gt.rectToPath(R({},n,l.toJSON()))}return s},highlightConnection(t){this.vel.attr("d",t.getSerializedConnection())},highlightNode(t,e){const{vel:n,options:r}=this,{padding:s,layer:o}=r;let l=t.getNodeMatrix(e);if(s){!o&&e===t.el&&n.remove();let f=t.getNodeBoundingRect(e);const d=f.x+f.width/2,m=f.y+f.height/2;f=gt.transformRect(f,l);const A=Math.max(f.width,1),p=Math.max(f.height,1),D=(A+s)/A,B=(p+s)/p,j=gt.createSVGMatrix({a:D,b:0,c:0,d:B,e:d-D*d,f:m-B*m});l=l.multiply(j)}n.attr({d:this.getPathData(t,e),transform:gt.matrixToTransformString(l)})},highlight(t,e){const{vel:n,options:r}=this;n.attr(r.attrs),t.isNodeConnection(e)?this.highlightConnection(t):this.highlightNode(t,e)}}),xu=20,xl=ta.extend({tagName:"rect",className:"highlight-mask",attributes:{"pointer-events":"none"},options:{padding:3,maskClip:xu,deep:!1,attrs:{stroke:"#FEB663","stroke-width":3,"stroke-linecap":"butt","stroke-linejoin":"miter"}},VISIBLE:"white",INVISIBLE:"black",MASK_ROOT_ATTRIBUTE_BLACKLIST:["marker-start","marker-end","marker-mid","transform","stroke-dasharray"],MASK_CHILD_ATTRIBUTE_BLACKLIST:["stroke","fill","stroke-width","stroke-opacity","stroke-dasharray","fill-opacity","marker-start","marker-end","marker-mid"],MASK_REPLACE_TAGS:["FOREIGNOBJECT","IMAGE","USE","TEXT","TSPAN","TEXTPATH"],MASK_REMOVE_TAGS:["TEXT","TSPAN","TEXTPATH"],transformMaskChild(t,e){const{MASK_CHILD_ATTRIBUTE_BLACKLIST:n,MASK_REPLACE_TAGS:r,MASK_REMOVE_TAGS:s}=this,o=e.tagName();if(!gt.isSVGGraphicsElement(e)||s.includes(o))return e.remove(),!1;if(r.includes(o)){const l=t.vel.findOne(`#${e.id}`);if(l){const{node:f}=l;let d=t.getNodeBoundingRect(f);t.model.isElement()&&(d=gt.transformRect(d,t.getNodeMatrix(f)));const m=gt("rect",d.toJSON()),{x:A,y:p}=d.center(),{angle:D,cx:B=A,cy:j=p}=l.rotate();D&&m.rotate(D,B,j),e.parent().append(m)}return e.remove(),!1}return n.forEach(l=>{"fill"===l&&"none"===e.attr("fill")||e.removeAttr(l)}),!0},transformMaskRoot(t,e){const{MASK_ROOT_ATTRIBUTE_BLACKLIST:n}=this;n.forEach(r=>{e.removeAttr(r)})},getMaskShape(t,e){const{options:n,MASK_REPLACE_TAGS:r}=this,{deep:s}=n,o=e.tagName();let l;if("G"===o){if(!s)return null;l=e.clone(),function bl(t,e){const n=t.children();for(;n.length>0;){const r=n.shift();e(r)&&n.push(...r.children())}}(l,f=>this.transformMaskChild(t,f))}else{if(r.includes(o))return null;l=e.clone()}return this.transformMaskRoot(t,l),l},getMaskId(){return`highlight-mask-${this.cid}`},getMask(t,e){const{VISIBLE:n,INVISIBLE:r,options:s}=this,{padding:o,attrs:l}=s,f="stroke-width"in l?l["stroke-width"]:1,d="none"!==e.attr("fill");let m=parseFloat(e.attr("stroke-width"));isNaN(m)&&(m=1);const A=m+2*o,p=A+2*f;let D=this.getMaskShape(t,e);if(!D){const B=t.getNodeBoundingRect(e.node);B.inflate(B.width?0:.5,B.height?0:.5),D=gt("rect",B.toJSON())}return D.attr(l),gt("mask",{id:this.getMaskId()}).append([D.clone().attr({fill:d?n:"none",stroke:n,"stroke-width":p}),D.clone().attr({fill:d?r:"none",stroke:r,"stroke-width":A})])},removeMask(t){const e=t.svg.getElementById(this.getMaskId());e&&t.defs.removeChild(e)},addMask(t,e){t.defs.appendChild(e.node)},highlight(t,e){const{options:n,vel:r}=this,{padding:s,attrs:o,maskClip:l=xu,layer:f}=n,d="stroke"in o?o.stroke:"#000000";!f&&e===t.el&&r.remove();const m=t.getNodeBoundingRect(e).inflate(s+l),A=this.getMask(t,gt(e));this.addMask(t.paper,A),r.attr(m.toJSON()),r.attr({transform:gt.matrixToTransformString(t.getNodeMatrix(e)),mask:`url(#${A.id})`,fill:d})},unhighlight(t){this.removeMask(t.paper)}}),_o=ta.extend({UPDATABLE:!1,MOUNTABLE:!1,opacityClassName:Zn("highlight-opacity"),highlight:function(t,e){gt(e).addClass(this.opacityClassName)},unhighlight:function(t,e){gt(e).removeClass(this.opacityClassName)}}),Nl=Zn("highlighted"),Ml=ta.extend({UPDATABLE:!1,MOUNTABLE:!1,options:{className:Nl},highlight:function(t,e){gt(e).addClass(this.options.className)},unhighlight:function(t,e){gt(e).removeClass(this.options.className)}},{className:Nl});function Sl(t,e,n,r){return t.getPointAtRatio("ratio"in r?r.ratio:.5)}function Hc(t,e,n,r){return t.getPointAtLength("length"in r?r.length:20)}function wa(t){return function(e,n,r,s){if(r instanceof Element){var l,o=this.paper.findView(r);if(o)if(o.isNodeConnection(r)){var f="fixedAt"in s?s.fixedAt:"50%";l=Nu(o,f)}else l=o.getNodeBBox(r).center();else l=new I;return t.call(this,e,n,l,s)}return t.apply(this,arguments)}}function Nu(t,e){var n=parseFloat(e);return Wn(e)?t.getPointAtRatio(n/100):t.getPointAtLength(n)}const Mu=wa(function Tl(t,e,n,r){var s=1e6,o=t.getConnection(),l=t.getConnectionSubdivisions(),f=new tt(n.clone().offset(0,s),n.clone().offset(0,-s)),d=new tt(n.clone().offset(s,0),n.clone().offset(-s,0)),m=f.intersect(o,{segmentSubdivisions:l}),A=d.intersect(o,{segmentSubdivisions:l}),p=[];return m&&Array.prototype.push.apply(p,m),A&&Array.prototype.push.apply(p,A),p.length>0?n.chooseClosest(p):"fallbackAt"in r?Nu(t,r.fallbackAt):Dl(t,e,n,r)}),Dl=wa(function Jc(t,e,n,r){return t.getClosestPoint(n)||new I});function ja(t,e,n){if(ye(n)){const{x:s,y:o}=n;if(isFinite(o)){const l=new tt(e,t),{start:f,end:d}=l.parallel(o);e=f,t=d}n=s}if(!isFinite(n))return t;var r=t.distance(e);return 0===n&&r>0?t:t.move(e,-Math.min(n,r-1))}function be(t){var e=t.getAttribute("stroke-width");return null===e?0:parseFloat(e)||0}function Za(t,e,n,r){var s=e.getNodeBBox(n);r.stroke&&s.inflate(be(n)/2);var o=t.intersect(s);return ja(o?t.start.chooseClosest(o):t.end,t.start,r.offset)}var Su="segmentSubdivisons",li="shapeBBox";const Yo=function Qc(t,e,n,r){let{offset:s,alignOffset:o,align:l}=r;return l&&function Kc(t,e,n=0){let r,s,o,l;const{start:f,end:d}=t;switch(e){case"left":r="x",s=d,o=f,l=-1;break;case"right":r="x",s=f,o=d,l=1;break;case"top":r="y",s=d,o=f,l=-1;break;case"bottom":r="y",s=f,o=d,l=1;break;default:return}f[r]<d[r]?s[r]=o[r]:o[r]=s[r],isFinite(n)&&(s[r]+=l*n,o[r]+=l*n)}(t,l,o),ja(t.end,t.start,s)},Tu=Za,Pl=function Ll(t,e,n,r){var s=e.model.angle();if(0===s)return Za(t,e,n,r);var o=e.getNodeUnrotatedBBox(n);r.stroke&&o.inflate(be(n)/2);var l=o.center(),f=t.clone().rotate(l,s),d=f.setLength(1e6).intersect(o);return ja(d?f.start.chooseClosest(d).rotate(l,-s):t.end,t.start,r.offset)},kl=function $c(t,e,n,r){var s,o,l=r.selector,f=t.end;if(s="string"==typeof l?e.findBySelector(l)[0]:Array.isArray(l)?Si(n,l):function qc(t){if(!t)return null;var e=t;do{var n=e.tagName;if("string"!=typeof n)return null;if("G"===(n=n.toUpperCase()))e=e.firstElementChild;else{if("TITLE"!==n)break;e=e.nextElementSibling}}while(e);return e}(n),!gt.isSVGGraphicsElement(s)){if(s===n||!gt.isSVGGraphicsElement(n))return f;s=n}var ft,d=e.getNodeShape(s),m=e.getNodeMatrix(s),A=e.getRootTranslateMatrix(),p=e.getRootRotateMatrix(),D=A.multiply(p).multiply(m),B=D.inverse(),j=gt.transformLine(t,B),q=j.start.clone(),et=e.getNodeData(s);if(!1===r.insideout&&(et[li]||(et[li]=d.bbox()),et[li].containsPoint(q)))return f;if(d instanceof _t){var w=r.precision||2;et[Su]||(et[Su]=d.getSegmentSubdivisions({precision:w})),ft={precision:w,segmentSubdivisions:et[Su]}}!0===r.extrapolate&&j.setLength(1e6),(o=j.intersect(d,ft))?gt.isArray(o)&&(o=q.chooseClosest(o)):!0===r.sticky&&(o=d instanceof Lt?d.pointNearestToPoint(q):d instanceof ce?d.intersectionWithLineFromCenterToPoint(q):d.closestPoint(q,ft));var S=o?gt.transformPoint(o,D):f,P=r.offset||0;return r.stroke&&(P+=be(s)/2),ja(S,t.start,P)};function Kn(t){return function(e,n,r,s){var o=!!s.rotate,l=o?e.getNodeUnrotatedBBox(n):e.getNodeBBox(n),f=l[t](),d=s.dx;if(d){var m=Wn(d);d=parseFloat(d),isFinite(d)&&(m&&(d/=100,d*=l.width),f.x+=d)}var A=s.dy;if(A){var p=Wn(A);A=parseFloat(A),isFinite(A)&&(p&&(A/=100,A*=l.height),f.y+=A)}return o?f.rotate(e.model.getBBox().center(),-e.model.angle()):f}}const Uo=Kn("center"),zl=Kn("topMiddle"),Lu=Kn("bottomMiddle"),Ol=Kn("leftMiddle"),Pu=Kn("rightMiddle"),ku=Kn("origin"),ia=Kn("topRight"),tf=Kn("bottomLeft"),sa=Kn("corner"),Bl=wa(function ra(t,e,n,r){var s=t.model.angle(),o=t.getNodeBBox(e),l=o.center(),f=o.origin(),d=o.corner(),m=r.padding;if(isFinite(m)||(m=0),f.y+m<=n.y&&n.y<=d.y-m){var A=n.y-l.y;l.x+=0===s||180===s?0:1*A/Math.tan(Ne(s)),l.y+=A}else if(f.x+m<=n.x&&n.x<=d.x-m){var p=n.x-l.x;l.y+=90===s||270===s?0:p*Math.tan(Ne(s)),l.x+=p}return l}),Rl=wa(function Du(t,e,n,r){var o,l,f,s=!!r.rotate;s?(o=t.getNodeUnrotatedBBox(e),f=t.model.getBBox().center(),l=t.model.angle()):o=t.getNodeBBox(e);var A,d=r.padding;switch(isFinite(d)&&o.inflate(d),s&&n.rotate(f,l),o.sideNearestToPoint(n)){case"left":A=o.leftMiddle();break;case"right":A=o.rightMiddle();break;case"top":A=o.topMiddle();break;case"bottom":A=o.bottomMiddle()}return s?A.rotate(f,-l):A}),Eu=function El(t,e,n,r,s){return t.model.getPointFromConnectedLink(this.model,s).offset(r.dx,r.dy)},Wa={NONE:"sorting-none",APPROX:"sorting-approximate",EXACT:"sorting-exact"},co=9007199254740991,Fo=Pe.Highlighting,jl={[Fo.DEFAULT]:{name:"stroke",options:{padding:3}},[Fo.MAGNET_AVAILABILITY]:{name:"addClass",options:{className:"available-magnet"}},[Fo.ELEMENT_AVAILABILITY]:{name:"addClass",options:{className:"available-cell"}}},Zl=[{name:ui.BACK},{name:ui.CELLS},{name:ui.LABELS},{name:ui.FRONT},{name:ui.TOOLS}],Vo=gs.extend({className:"paper",options:{width:800,height:600,origin:{x:0,y:0},gridSize:1,drawGrid:!1,background:!1,perpendicularLinks:!1,elementView:Jn,linkView:Ga,snapLabels:!1,snapLinks:!1,labelsLayer:!1,multiLinks:!0,guard:function(t,e){return!1},highlighting:jl,preventContextMenu:!0,preventDefaultBlankAction:!0,restrictTranslate:!1,markAvailable:!1,defaultLink:new Yn,defaultConnector:{name:"normal"},defaultRouter:{name:"normal"},defaultAnchor:{name:"center"},defaultLinkAnchor:{name:"connectionRatio"},defaultConnectionPoint:{name:"bbox"},connectionStrategy:null,validateMagnet:function(t,e,n){return"passive"!==e.getAttribute("magnet")},validateConnection:function(t,e,n,r,s,o){return("target"===s?n:t)instanceof Jn},embeddingMode:!1,validateEmbedding:function(t,e){return!0},validateUnembedding:function(t){return!0},findParentBy:"bbox",frontParentOnly:!0,interactive:{labelMove:!1},linkPinning:!0,allowLink:null,clickThreshold:0,moveThreshold:0,magnetThreshold:0,sorting:Wa.EXACT,frozen:!1,onViewUpdate:function(t,e,n,r,s){e&(t.FLAG_INSERT|t.FLAG_REMOVE)||r.mounting||r.isolate||s.requestConnectedLinksUpdate(t,n,r)},onViewPostponed:function(t,e,n){return n.forcePostponedViewUpdate(t,e)},beforeRender:null,afterRender:null,viewport:null,cellViewNamespace:null,routerNamespace:null,connectorNamespace:null,highlighterNamespace:Mr,anchorNamespace:bn,linkAnchorNamespace:nn,connectionPointNamespace:zr},events:{dblclick:"pointerdblclick",contextmenu:"contextmenu",mousedown:"pointerdown",touchstart:"pointerdown",mouseover:"mouseover",mouseout:"mouseout",mouseenter:"mouseenter",mouseleave:"mouseleave",wheel:"mousewheel","mouseenter .joint-cell":"mouseenter","mouseleave .joint-cell":"mouseleave","mouseenter .joint-tools":"mouseenter","mouseleave .joint-tools":"mouseleave","mousedown .joint-cell [event]":"onevent","touchstart .joint-cell [event]":"onevent","mousedown .joint-cell [magnet]":"onmagnet","touchstart .joint-cell [magnet]":"onmagnet","dblclick .joint-cell [magnet]":"magnetpointerdblclick","contextmenu .joint-cell [magnet]":"magnetcontextmenu","mousedown .joint-link .label":"onlabel","touchstart .joint-link .label":"onlabel","dragstart .joint-cell image":"onImageDragStart"},documentEvents:{mousemove:"pointermove",touchmove:"pointermove",mouseup:"pointerup",touchend:"pointerup",touchcancel:"pointerup"},svg:null,viewport:null,defs:null,tools:null,$background:null,layers:null,$grid:null,$document:null,_viewportMatrix:null,_viewportTransformString:null,_updates:null,_layers:null,SORT_DELAYING_BATCHES:["add","to-front","to-back"],UPDATE_DELAYING_BATCHES:["translate"],MIN_SCALE:1e-6,init:function(){const{options:t,el:e}=this;t.cellViewNamespace||(t.cellViewNamespace=typeof joint<"u"&&fr(joint,"shapes")?joint.shapes:null);const n=this.model=t.model||new $s;this._layers={},this.setGrid(t.drawGrid),this.cloneOptions(),this.render(),this._setDimensions(),this.startListening(),this._views={},this.$document=ve(e.ownerDocument),this.resetViews(n.attributes.cells.models),!this.isFrozen()&&this.isAsync()&&this.updateViewsAsync()},_resetUpdates:function(){return this._updates={id:null,priorities:[{},{},{}],unmountedCids:[],mountedCids:[],unmounted:{},mounted:{},count:0,keyFrozen:!1,freezeKey:null,sort:!1}},startListening:function(){var t=this.model;this.listenTo(t,"add",this.onCellAdded).listenTo(t,"remove",this.onCellRemoved).listenTo(t,"change",this.onCellChange).listenTo(t,"reset",this.onGraphReset).listenTo(t,"sort",this.onGraphSort).listenTo(t,"batch:stop",this.onGraphBatchStop),this.on("cell:highlight",this.onCellHighlight).on("cell:unhighlight",this.onCellUnhighlight).on("scale translate",this.update)},onCellAdded:function(t,e,n){var r=n.position;this.isAsync()||!hr(r)?this.renderView(t,n):(n.maxPosition===r&&this.freeze({key:"addCells"}),this.renderView(t,n),0===r&&this.unfreeze({key:"addCells"}))},onCellRemoved:function(t,e,n){const r=this.findViewByModel(t);r&&this.requestViewUpdate(r,r.FLAG_REMOVE,r.UPDATE_PRIORITY,n)},onCellChange:function(t,e){if(t!==this.model.attributes.cells&&t.hasChanged("z")&&this.options.sorting===Wa.APPROX){const n=this.findViewByModel(t);n&&this.requestViewUpdate(n,n.FLAG_INSERT,n.UPDATE_PRIORITY,e)}},onGraphReset:function(t,e){this.resetLayers(),this.resetViews(t.models,e)},onGraphSort:function(){this.model.hasActiveBatch(this.SORT_DELAYING_BATCHES)||this.sortViews()},onGraphBatchStop:function(t){if(!this.isFrozen()){var e=t&&t.batchName,n=this.model;if(!this.isAsync()){var r=this.UPDATE_DELAYING_BATCHES;r.includes(e)&&!n.hasActiveBatch(r)&&this.updateViews(t)}var s=this.SORT_DELAYING_BATCHES;s.includes(e)&&!n.hasActiveBatch(s)&&this.sortViews()}},cloneOptions:function(){const{options:t}=this,{defaultConnector:e,defaultRouter:n,defaultConnectionPoint:r,defaultAnchor:s,defaultLinkAnchor:o,origin:l,highlighting:f,cellViewNamespace:d,interactive:m}=t;!d&&typeof joint<"u"&&fr(joint,"shapes")&&(t.cellViewNamespace=joint.shapes),qt(e)||(t.defaultConnector=kt(e)),qt(n)||(t.defaultRouter=kt(n)),qt(r)||(t.defaultConnectionPoint=kt(r)),qt(s)||(t.defaultAnchor=kt(s)),qt(o)||(t.defaultLinkAnchor=kt(o)),ye(m)&&(t.interactive=R({},m)),ye(f)&&(t.highlighting=it({},f,jl)),t.origin=R({},l)},children:function(){var t=gt.namespace;return[{namespaceURI:t.xhtml,tagName:"div",className:Zn("paper-background"),selector:"background"},{namespaceURI:t.xhtml,tagName:"div",className:Zn("paper-grid"),selector:"grid"},{namespaceURI:t.svg,tagName:"svg",attributes:{width:"100%",height:"100%","xmlns:xlink":t.xlink},selector:"svg",children:[{tagName:"defs",selector:"defs"},{tagName:"g",className:Zn("layers"),selector:"layers"}]}]},hasLayerView(t){return t in this._layers},getLayerView(t){const{_layers:e}=this;if(t in e)return e[t];throw new Error(`dia.Paper: Unknown layer "${t}"`)},getLayerNode(t){return this.getLayerView(t).el},render:function(){this.renderChildren();const{childNodes:t,options:e}=this,{svg:n,defs:r,layers:s,background:o,grid:l}=t;return this.svg=n,this.defs=r,this.layers=s,this.$background=ve(o),this.$grid=ve(l),this.renderLayers(),gt.ensureId(n),e.background&&this.drawBackground(e.background),e.drawGrid&&this.drawGrid(),this},renderLayers:function(t=Zl){this.removeLayers(),t.forEach(({name:s})=>{const l=new Xc({name:s});this.layers.appendChild(l.el),this._layers[s]=l});const e=this.getLayerView(ui.CELLS),n=this.getLayerView(ui.TOOLS),r=this.getLayerView(ui.LABELS);this.tools=n.el,this.cells=this.viewport=e.el,e.vel.addClass(Zn("viewport")),r.vel.addClass(Zn("viewport"))},removeLayers:function(){const{_layers:t}=this;Object.keys(t,e=>{t[e].remove(),delete t[e]})},resetLayers:function(){const{_layers:t}=this;Object.keys(t,e=>{t[e].removePivots()})},update:function(){return this.options.drawGrid&&this.drawGrid(),this._background&&this.updateBackgroundImage(this._background),this},matrix:function(t){var e=this.layers;if(void 0===t){var n=e.getAttribute("transform");return(this._viewportTransformString||null)===n?t=this._viewportMatrix:(t=e.getCTM(),this._viewportMatrix=t,this._viewportTransformString=n),gt.createSVGMatrix(t)}t=gt.createSVGMatrix(t);var r=gt.matrixToTransformString(t);return e.setAttribute("transform",r),this._viewportMatrix=t,this._viewportTransformString=e.getAttribute("transform"),this},clientMatrix:function(){return gt.createSVGMatrix(this.cells.getScreenCTM())},requestConnectedLinksUpdate:function(t,e,n){if(t instanceof Pe)for(var r=t.model,s=this.model.getConnectedLinks(r),o=0,l=s.length;o<l;o++){var f=s[o],d=this.findViewByModel(f);if(d){var m=["UPDATE"];f.getTargetCell()===r&&m.push("TARGET"),f.getSourceCell()===r&&m.push("SOURCE");var A=Math.max(e+1,d.UPDATE_PRIORITY);this.scheduleViewUpdate(d,d.getFlag(m),A,n)}}},forcePostponedViewUpdate:function(t,e){if(!(t&&t instanceof Pe))return!1;var n=t.model;if(n.isElement())return!1;if(0==(e&t.getFlag(["SOURCE","TARGET"]))){var r=0,s=this.findViewByModel(n.getSourceCell());s&&!this.isViewMounted(s)&&(r=this.dumpView(s),t.updateEndMagnet("source"));var o=0,l=this.findViewByModel(n.getTargetCell());if(l&&!this.isViewMounted(l)&&(o=this.dumpView(l),t.updateEndMagnet("target")),0===r&&0===o)return!this.dumpView(t)}return!1},requestViewUpdate:function(t,e,n,r){r||(r={}),this.scheduleViewUpdate(t,e,n,r);var s=this.isAsync();if(!(this.isFrozen()||s&&!1!==r.async||this.model.hasActiveBatch(this.UPDATE_DELAYING_BATCHES))){var o=this.updateViews(r);s&&this.notifyAfterRender(o,r)}},scheduleViewUpdate:function(t,e,n,r){const{_updates:s,options:o}=this,{FLAG_REMOVE:l,FLAG_INSERT:f,UPDATE_PRIORITY:d,cid:m}=t;let A=s.priorities[n];if(A||(A=s.priorities[n]={}),n>d)for(let B=n-1;B>=d;B--){const j=s.priorities[B];!j||!(m in j)||(A[m]|=j[m],delete j[m])}let p=A[m]||0;if((p&e)===e)return;p||s.count++,e&l&&p&f?A[m]^=f:e&f&&p&l&&(A[m]^=l),A[m]|=e;const D=o.onViewUpdate;"function"==typeof D&&D.call(this,t,e,n,r||{},this)},dumpViewUpdate:function(t){if(!t)return 0;var n=t.cid,r=this._updates.priorities[t.UPDATE_PRIORITY],s=this.registerMountedView(t)|r[n];return delete r[n],s},dumpView:function(t,e){var n=this.dumpViewUpdate(t);return n?this.updateView(t,n,e):0},updateView:function(t,e,n){if(!t)return 0;const{FLAG_REMOVE:r,FLAG_INSERT:s,model:o}=t;if(t instanceof Pe){if(e&r)return this.removeView(o),0;e&s&&(this.insertView(t),e^=s)}return e?t.confirmUpdate(e,n||{}):0},requireView:function(t,e){var n=this.findViewByModel(t);return n?(this.dumpView(n,e),n):null},registerUnmountedView:function(t){var e=t.cid,n=this._updates;if(e in n.unmounted)return 0;var r=n.unmounted[e]|=t.FLAG_INSERT;return n.unmountedCids.push(e),delete n.mounted[e],r},registerMountedView:function(t){var e=t.cid,n=this._updates;if(e in n.mounted)return 0;n.mounted[e]=!0,n.mountedCids.push(e);var r=n.unmounted[e]||0;return delete n.unmounted[e],r},isViewMounted:function(t){return!!t&&t.cid in this._updates.mounted},dumpViews:function(t){var e=Y({},t,{viewport:null});this.checkViewport(e),this.updateViews(e)},updateViews:function(t){this.notifyBeforeRender(t);let e,n=0,r=0,s=co;do{r++,e=this.updateViewsBatch(t),n+=e.updated,s=Math.min(e.priority,s)}while(!e.empty);const o={updated:n,batches:r,priority:s};return this.notifyAfterRender(o,t),o},hasScheduledUpdates:function(){const t=this._updates.priorities,e=Object.keys(t);let n=e.length;for(;n>0&&n--;)for(let r in t[e[n]])return!0;return!1},updateViewsAsync:function(t,e){t||(t={}),e||(e={processed:0,priority:co});var n=this._updates,r=n.id;if(r){Ls(r),0===e.processed&&this.hasScheduledUpdates()&&this.notifyBeforeRender(t);var s=this.updateViewsBatch(t),o=Y({},t,{mountBatchSize:1e3-s.mounted,unmountBatchSize:1e3-s.unmounted}),l=this.checkViewport(o),f=l.unmounted,d=l.mounted,m=e.processed,A=n.count;s.updated>0&&(s.processed=m+=s.updated+s.unmounted,e.priority=Math.min(s.priority,e.priority),s.empty&&0===d?(s.unmounted+=f,s.mounted+=d,s.priority=e.priority,this.notifyAfterRender(s,t),e.processed=0,e.priority=co,n.count=0):e.processed=m);var p=t.progress;if(A&&"function"==typeof p&&p.call(this,s.empty,m,A,s,this),n.id!==r)return}n.id=Vs(this.updateViewsAsync,this,t,e)},notifyBeforeRender:function(t={}){let e=t.beforeRender;"function"!=typeof e&&(e=this.options.beforeRender,"function"!=typeof e)||e.call(this,t,this)},notifyAfterRender:function(t,e={}){let n=e.afterRender;"function"!=typeof n&&(n=this.options.afterRender),"function"==typeof n&&n.call(this,t,e,this),this.trigger("render:done",t,e)},updateViewsBatch:function(t){t||(t={});var e=t.batchSize||1/0,n=this._updates,r=0,s=0,o=0,l=0,f=co,d=!0,m=this.options,A=n.priorities,p="viewport"in t?t.viewport:m.viewport;"function"!=typeof p&&(p=null);var D=m.onViewPostponed;"function"!=typeof D&&(D=null);var B=Object.keys(A);t:for(var j=0,q=B.length;j<q;j++){var et=+B[j],ht=A[et];for(var ft in ht){if(r>=e){d=!1;break t}var w=Li[ft];if(w){var S=ht[ft];if(0==(S&w.FLAG_REMOVE)){var P=ft in n.unmounted;if(w.DETACHABLE&&p&&!p.call(this,w,!P,this)){P||(this.registerUnmountedView(w),w.unmount()),n.unmounted[ft]|=S,delete ht[ft],o++;continue}P&&(S|=w.FLAG_INSERT,l++),S|=this.registerMountedView(w)}var Z=this.updateView(w,S,t);Z>0&&(ht[ft]=Z,!D||!D.call(this,w,Z,this)||ht[ft])?(s++,d=!1):(f>et&&(f=et),r++,delete ht[ft])}else delete ht[ft]}}return{priority:f,updated:r,postponed:s,unmounted:o,mounted:l,empty:d}},getUnmountedViews:function(){const e=Object.keys(this._updates.unmounted),n=e.length,r=new Array(n);for(var s=0;s<n;s++)r[s]=Li[e[s]];return r},getMountedViews:function(){const e=Object.keys(this._updates.mounted),n=e.length,r=new Array(n);for(var s=0;s<n;s++)r[s]=Li[e[s]];return r},checkUnmountedViews:function(t,e){e||(e={});var n=0;"function"!=typeof t&&(t=null);for(var s=this._updates,o=s.unmountedCids,l=s.unmounted,f=0,d=(Math.min(o.length,"mountBatchSize"in e?e.mountBatchSize:1/0));f<d;f++){var m=o[f];if(m in l){var A=Li[m];if(A){if(A.DETACHABLE&&t&&!t.call(this,A,!1,this)){o.push(m);continue}n++;var p=this.registerMountedView(A);p&&this.scheduleViewUpdate(A,p,A.UPDATE_PRIORITY,{mounting:!0})}}}return o.splice(0,f),n},checkMountedViews:function(t,e){e||(e={});var n=0;if("function"!=typeof t)return n;for(var s=this._updates,o=s.mountedCids,l=s.mounted,f=0,d=(Math.min(o.length,"unmountBatchSize"in e?e.unmountBatchSize:1/0));f<d;f++){var m=o[f];if(m in l){var A=Li[m];if(A){if(!A.DETACHABLE||t.call(this,A,!0,this)){o.push(m);continue}n++,this.registerUnmountedView(A)&&A.unmount()}}}return o.splice(0,f),n},checkViewport:function(t){var e=Y({},t,{mountBatchSize:1/0,unmountBatchSize:1/0}),n="viewport"in e?e.viewport:this.options.viewport,r=this.checkMountedViews(n,e);return r>0&&(e.mountBatchSize=Math.min(this._updates.unmountedCids.length-r,e.mountBatchSize)),{mounted:this.checkUnmountedViews(n,e),unmounted:r}},freeze:function(t){t||(t={});var e=this._updates,n=t.key,r=this.options.frozen,s=e.freezeKey;if(n&&n!==s){if(r&&s)return;e.freezeKey=n,e.keyFrozen=r}this.options.frozen=!0;var o=e.id;e.id=null,this.isAsync()&&o&&Ls(o)},unfreeze:function(t){t||(t={});var e=this._updates,n=t.key,r=e.freezeKey;n&&r&&n!==r||(e.freezeKey=null,(!n||n!==r||!e.keyFrozen)&&(this.isAsync()?(this.freeze(),this.updateViewsAsync(t)):this.updateViews(t),this.options.frozen=e.keyFrozen=!1,e.sort&&(this.sortViews(),e.sort=!1)))},isAsync:function(){return!!this.options.async},isFrozen:function(){return!!this.options.frozen},isExactSorting:function(){return this.options.sorting===Wa.EXACT},onRemove:function(){this.freeze(),this.removeLayers(),this.removeViews()},getComputedSize:function(){var t=this.options,e=t.width,n=t.height;return hr(e)||(e=this.el.clientWidth),hr(n)||(n=this.el.clientHeight),{width:e,height:n}},setDimensions:function(t,e){const{options:n}=this,{width:r,height:s}=n;let o=void 0===t?r:t,l=void 0===e?s:e;if(r===o&&s===l)return;n.width=o,n.height=l,this._setDimensions();const f=this.getComputedSize();this.trigger("resize",f.width,f.height)},_setDimensions:function(){const{options:t}=this;let e=t.width,n=t.height;hr(e)&&(e=Math.round(e)),hr(n)&&(n=Math.round(n)),this.$el.css({width:null===e?"":e,height:null===n?"":n})},setOrigin:function(t,e){return this.translate(t||0,e||0)},fitToContent:function(t,e,n,r){r=Fe(t)?t:R({gridWidth:t,gridHeight:e,padding:n},r);const{x:s,y:o,width:l,height:f}=this.getFitToContentArea(r),{sx:d,sy:m}=this.scale();return this.setOrigin(-s*d,-o*m),this.setDimensions(l*d,f*m),new Lt(s,o,l,f)},getFitToContentArea:function(t={}){const e=t.gridWidth||1,n=t.gridHeight||1,r=_(t.padding||0),s=Math.max(t.minWidth||0,e),o=Math.max(t.minHeight||0,n),l=t.maxWidth||Number.MAX_VALUE,f=t.maxHeight||Number.MAX_VALUE,d=t.allowNewOrigin,m="contentArea"in t?new Lt(t.contentArea):this.getContentArea(t),{sx:A,sy:p}=this.scale();m.x*=A,m.y*=p,m.width*=A,m.height*=p;let D=Math.ceil((m.width+m.x)/e),B=Math.ceil((m.height+m.y)/n);t.allowNegativeBottomRight||(D=Math.max(D,1),B=Math.max(B,1)),D*=e,B*=n;let j=0;("negative"===d&&m.x<0||"positive"===d&&m.x>=0||"any"===d)&&(j=Math.ceil(-m.x/e)*e,j+=r.left,D+=j);let q=0;return("negative"===d&&m.y<0||"positive"===d&&m.y>=0||"any"===d)&&(q=Math.ceil(-m.y/n)*n,q+=r.top,B+=q),D+=r.right,B+=r.bottom,D=Math.max(D,s),B=Math.max(B,o),D=Math.min(D,l),B=Math.min(B,f),new Lt(-j/A,-q/p,D/A,B/p)},scaleContentToFit:function(t){var e,n;if(t||(t={}),"contentArea"in t){var r=t.contentArea;e=this.localToPaperRect(r),n=new I(r)}else e=this.getContentBBox(t),n=this.paperToLocalPoint(e);if(e.width&&e.height){Y(t,{padding:0,preserveAspectRatio:!0,scaleGrid:null,minScale:0,maxScale:Number.MAX_VALUE});var m,s=_(t.padding),o=t.minScaleX||t.minScale,l=t.maxScaleX||t.maxScale,f=t.minScaleY||t.minScale,d=t.maxScaleY||t.maxScale;if(t.fittingBBox)m=t.fittingBBox;else{var A=this.translate(),p=this.getComputedSize();m={x:A.tx,y:A.ty,width:p.width,height:p.height}}m=new Lt(m).moveAndExpand({x:s.left,y:s.top,width:-s.left-s.right,height:-s.top-s.bottom});var D=this.scale(),B=m.width/e.width*D.sx,j=m.height/e.height*D.sy;if(t.preserveAspectRatio&&(B=j=Math.min(B,j)),t.scaleGrid){var q=t.scaleGrid;B=q*Math.floor(B/q),j=q*Math.floor(j/q)}B=Math.min(l,Math.max(o,B)),j=Math.min(d,Math.max(f,j));var et=this.options.origin,ht=m.x-n.x*B-et.x,ft=m.y-n.y*j-et.y;this.scale(B,j),this.translate(ht,ft)}},getContentArea:function(t){return t&&t.useModelGeometry?this.model.getBBox()||new Lt:gt(this.cells).getBBox()},getContentBBox:function(t){return this.localToPaperRect(this.getContentArea(t))},getArea:function(){return this.paperToLocalRect(this.getComputedSize())},getRestrictedArea:function(...t){const{restrictTranslate:e}=this.options;let n;return n=qt(e)?e.apply(this,t):!0===e?this.getArea():e?new Lt(e):null,n},createViewForModel:function(t){const{options:e}=this;var n,r,s=e.cellViewNamespace,o=t.get("type")+"View",l=Si(s,o,".");return t.isLink()?(n=e.linkView,r=Ga):(n=e.elementView,r=Jn),new(n.prototype instanceof Nn.View?l||n:n.call(this,t)||l||r)({model:t,interactive:e.interactive,labelsLayer:!0===e.labelsLayer?ui.LABELS:e.labelsLayer})},removeView:function(t){const{id:e}=t,{_views:n,_updates:r}=this,s=n[e];if(s){var{cid:o}=s;const{mounted:l,unmounted:f}=r;s.remove(),delete n[e],delete l[o],delete f[o]}return s},renderView:function(t,e){const{id:n}=t,r=this._views;let s,o,l=!0;return n in r&&(s=r[n],s.model===t?(o=s.FLAG_INSERT,l=!1):this.removeView(t)),l&&(s=r[n]=this.createViewForModel(t),s.paper=this,o=this.registerUnmountedView(s)|s.getFlag(un(s,"initFlag"))),this.requestViewUpdate(s,o,s.UPDATE_PRIORITY,e),s},onImageDragStart:function(){return!1},resetViews:function(t,e){e||(e={}),t||(t=[]),this._resetUpdates(),this.removeViews(),this.freeze({key:"reset"});for(var n=0,r=t.length;n<r;n++)this.renderView(t[n],e);this.unfreeze({key:"reset"}),this.sortViews()},removeViews:function(){dt(this._views,"remove"),this._views={}},sortViews:function(){if(this.isExactSorting()){if(this.isFrozen())return void(this._updates.sort=!0);this.sortViewsExact()}},sortViewsExact:function(){var t=ve(this.cells).children("[model-id]"),e=this.model.get("cells");!function(t,e){var n=ve(t),r=n.map(function(){var o=this.parentNode,l=o.insertBefore(document.createTextNode(""),this.nextSibling);return function(){if(o===this)throw new Error("You can't sort elements if any one is a descendant of another.");o.insertBefore(this,l),o.removeChild(l)}});Array.prototype.sort.call(n,e).each(function(s){r[s].call(this)})}(t,function(n,r){var s=e.get(n.getAttribute("model-id")),o=e.get(r.getAttribute("model-id")),l=s.attributes.z||0,f=o.attributes.z||0;return l===f?0:l<f?-1:1})},insertView:function(t){const e=this.getLayerView(ui.CELLS),{el:n,model:r}=t;this.options.sorting===Wa.APPROX?e.insertSortedNode(n,r.get("z")):e.insertNode(n),t.onMount()},scale:function(t,e,n,r){if(void 0===t)return gt.matrixToScale(this.matrix());void 0===e&&(e=t),void 0===n&&(n=0,r=0);var s=this.translate();(n||r||s.tx||s.ty)&&this.translate(s.tx-n*(t-1),s.ty-r*(e-1)),t=Math.max(t||0,this.MIN_SCALE),e=Math.max(e||0,this.MIN_SCALE);var f=this.matrix();return f.a=t,f.d=e,this.matrix(f),this.trigger("scale",t,e,n,r),this},rotate:function(t,e,n){if(void 0===t)return gt.matrixToRotate(this.matrix());if(void 0===e){var r=this.cells.getBBox();e=r.width/2,n=r.height/2}var s=this.matrix().translate(e,n).rotate(t).translate(-e,-n);return this.matrix(s),this},translate:function(t,e){if(void 0===t)return gt.matrixToTranslate(this.matrix());const{options:n}=this,{origin:r,drawGrid:s}=n;t||(t=0),e||(e=0);const o=this.matrix();if(o.e===t&&o.f===e)return this;o.e=t,o.f=e,this.matrix(o);const{tx:l,ty:f}=this.translate();return r.x=l,r.y=f,this.trigger("translate",l,f),s&&this.drawGrid(),this},findView:function(t){var e=Xn(t)?this.cells.querySelector(t):t instanceof ve?t[0]:t,n=this.findAttribute("model-id",e);if(n)return this._views[n]},findViewByModel:function(t){var e=Xn(t)||hr(t)?t:t&&t.id;return this._views[e]},findViewsFromPoint:function(t){return t=new I(t),this.model.getElements().map(this.findViewByModel,this).filter(function(n){return n&&n.vel.getBBox({target:this.cells}).containsPoint(t)},this)},findViewsInArea:function(t,e){e=Y(e||{},{strict:!1}),t=new Lt(t);var n=this.model.getElements().map(this.findViewByModel,this),r=e.strict?"containsRect":"intersect";return n.filter(function(s){return s&&t[r](s.vel.getBBox({target:this.cells}))},this)},removeTools:function(){return this.dispatchToolsEvent("remove"),this},hideTools:function(){return this.dispatchToolsEvent("hide"),this},showTools:function(){return this.dispatchToolsEvent("show"),this},dispatchToolsEvent:function(t,...e){"string"==typeof t&&this.trigger("tools:event",t,...e)},getModelById:function(t){return this.model.getCell(t)},snapToGrid:function(t,e){return this.clientToLocalPoint(t,e).snapToGrid(this.options.gridSize)},localToPaperPoint:function(t,e){var n=new I(t,e);return gt.transformPoint(n,this.matrix())},localToPaperRect:function(t,e,n,r){var s=new Lt(t,e,n,r);return gt.transformRect(s,this.matrix())},paperToLocalPoint:function(t,e){var n=new I(t,e);return gt.transformPoint(n,this.matrix().inverse())},paperToLocalRect:function(t,e,n,r){var s=new Lt(t,e,n,r);return gt.transformRect(s,this.matrix().inverse())},localToClientPoint:function(t,e){var n=new I(t,e);return gt.transformPoint(n,this.clientMatrix())},localToClientRect:function(t,e,n,r){var s=new Lt(t,e,n,r);return gt.transformRect(s,this.clientMatrix())},clientToLocalPoint:function(t,e){var n=new I(t,e);return gt.transformPoint(n,this.clientMatrix().inverse())},clientToLocalRect:function(t,e,n,r){var s=new Lt(t,e,n,r);return gt.transformRect(s,this.clientMatrix().inverse())},localToPagePoint:function(t,e){return this.localToPaperPoint(t,e).offset(this.pageOffset())},localToPageRect:function(t,e,n,r){return this.localToPaperRect(t,e,n,r).offset(this.pageOffset())},pageToLocalPoint:function(t,e){var r=new I(t,e).difference(this.pageOffset());return this.paperToLocalPoint(r)},pageToLocalRect:function(t,e,n,r){var s=this.pageOffset(),o=new Lt(t,e,n,r);return o.x-=s.x,o.y-=s.y,this.paperToLocalRect(o)},clientOffset:function(){var t=this.svg.getBoundingClientRect();return new I(t.left,t.top)},pageOffset:function(){return this.clientOffset().offset(window.scrollX,window.scrollY)},linkAllowed:function(t){if(!(t instanceof Ga))throw new Error("Must provide a linkView.");var e=t.model,n=this.options,r=this.model,s=r.constructor.validations;return!(!n.multiLinks&&!s.multiLinks.call(this,r,e)||!n.linkPinning&&!s.linkPinning.call(this,r,e)||"function"==typeof n.allowLink&&!n.allowLink.call(this,t,this))},getDefaultLink:function(t,e){return qt(this.options.defaultLink)?this.options.defaultLink.call(this,t,e):this.options.defaultLink.clone()},resolveHighlighter:function(t={}){let{highlighter:e,type:n}=t;const{highlighting:r,highlighterNamespace:s}=this.options;if(void 0===e){if(!r||n&&(e=r[n],!1===e))return!1;e||(e=r.default)}if(!e)return!1;Xn(e)&&(e={name:e});const o=e.name,l=s[o];if(!l)throw new Error('Unknown highlighter ("'+o+'")');if("function"!=typeof l.highlight)throw new Error('Highlighter ("'+o+'") is missing required highlight() method');if("function"!=typeof l.unhighlight)throw new Error('Highlighter ("'+o+'") is missing required unhighlight() method');return{highlighter:l,options:e.options||{},name:o}},onCellHighlight:function(t,e,n){const r=this.resolveHighlighter(n);if(!r)return;const{highlighter:s,options:o}=r;s.highlight(t,e,o)},onCellUnhighlight:function(t,e,n){const r=this.resolveHighlighter(n);if(!r)return;const{highlighter:s,options:o}=r;s.unhighlight(t,e,o)},pointerdblclick:function(t){t.preventDefault(),t=fn(t);var e=this.findView(t.target);if(!this.guard(t,e)){var n=this.snapToGrid(t.clientX,t.clientY);e?e.pointerdblclick(t,n.x,n.y):this.trigger("blank:pointerdblclick",t,n.x,n.y)}},pointerclick:function(t){if(this.eventData(t).mousemoved<=this.options.clickThreshold){t=fn(t);var n=this.findView(t.target);if(this.guard(t,n))return;var r=this.snapToGrid(t.clientX,t.clientY);n?n.pointerclick(t,r.x,r.y):this.trigger("blank:pointerclick",t,r.x,r.y)}},contextmenu:function(t){this.options.preventContextMenu&&t.preventDefault(),t=fn(t);var e=this.findView(t.target);if(!this.guard(t,e)){var n=this.snapToGrid(t.clientX,t.clientY);e?e.contextmenu(t,n.x,n.y):this.trigger("blank:contextmenu",t,n.x,n.y)}},pointerdown:function(t){t=fn(t);var e=this.findView(t.target);if(!this.guard(t,e)){var n=this.snapToGrid(t.clientX,t.clientY);e?(t.preventDefault(),e.pointerdown(t,n.x,n.y)):(this.options.preventDefaultBlankAction&&t.preventDefault(),this.trigger("blank:pointerdown",t,n.x,n.y)),this.delegateDragEvents(e,t.data)}},pointermove:function(t){var e=this.eventData(t);if(e.mousemoved||(e.mousemoved=0),!(++e.mousemoved<=this.options.moveThreshold)){t=fn(t);var r=this.snapToGrid(t.clientX,t.clientY),s=e.sourceView;s?s.pointermove(t,r.x,r.y):this.trigger("blank:pointermove",t,r.x,r.y),this.eventData(t,e)}},pointerup:function(t){this.undelegateDocumentEvents();var e=fn(t),n=this.snapToGrid(e.clientX,e.clientY),r=this.eventData(t).sourceView;r?r.pointerup(e,n.x,n.y):this.trigger("blank:pointerup",e,n.x,n.y),e.isPropagationStopped()||this.pointerclick(ve.Event(t,{type:"click",data:t.data})),t.stopImmediatePropagation(),this.delegateEvents()},mouseover:function(t){t=fn(t);var e=this.findView(t.target);if(!this.guard(t,e))if(e)e.mouseover(t);else{if(this.el===t.target)return;this.trigger("blank:mouseover",t)}},mouseout:function(t){t=fn(t);var e=this.findView(t.target);if(!this.guard(t,e))if(e)e.mouseout(t);else{if(this.el===t.target)return;this.trigger("blank:mouseout",t)}},mouseenter:function(t){t=fn(t);const{target:e,relatedTarget:n,currentTarget:r}=t,s=this.findView(e);if(this.guard(t,s))return;const o=this.findView(n);s&&(o===s||(s.mouseenter(t),this.el.contains(n)))||o||r===this.el&&this.trigger("paper:mouseenter",t)},mouseleave:function(t){t=fn(t);const{target:e,relatedTarget:n,currentTarget:r}=t,s=this.findView(e);if(this.guard(t,s))return;const o=this.findView(n);s&&(o===s||(s.mouseleave(t),this.el.contains(n)))||o||r===this.el&&this.trigger("paper:mouseleave",t)},mousewheel:function(t){t=fn(t);var e=this.findView(t.target);if(!this.guard(t,e)){var n=t.originalEvent,r=this.snapToGrid(n.clientX,n.clientY),s=Math.max(-1,Math.min(1,n.wheelDelta));e?e.mousewheel(t,r.x,r.y,s):this.trigger("blank:mousewheel",t,r.x,r.y,s)}},onevent:function(t){var e=t.currentTarget,n=e.getAttribute("event");if(n){var r=this.findView(e);if(r){if(t=fn(t),this.guard(t,r))return;var s=this.snapToGrid(t.clientX,t.clientY);r.onevent(t,n,s.x,s.y)}}},magnetEvent:function(t,e){var n=t.currentTarget;if(n.getAttribute("magnet")){var s=this.findView(n);if(s){if(t=fn(t),this.guard(t,s))return;var o=this.snapToGrid(t.clientX,t.clientY);e.call(this,s,t,n,o.x,o.y)}}},onmagnet:function(t){this.magnetEvent(t,function(e,n,r,s,o){e.onmagnet(n,s,o)})},magnetpointerdblclick:function(t){this.magnetEvent(t,function(e,n,r,s,o){e.magnetpointerdblclick(n,r,s,o)})},magnetcontextmenu:function(t){this.options.preventContextMenu&&t.preventDefault(),this.magnetEvent(t,function(e,n,r,s,o){e.magnetcontextmenu(n,r,s,o)})},onlabel:function(t){var n=this.findView(t.currentTarget);if(n){if(t=fn(t),this.guard(t,n))return;var r=this.snapToGrid(t.clientX,t.clientY);n.onlabel(t,r.x,r.y)}},getPointerArgs(t){const e=fn(t),{x:n,y:r}=this.snapToGrid(e.clientX,e.clientY);return[e,n,r]},delegateDragEvents:function(t,e){e||(e={}),this.eventData({data:e},{sourceView:t||null,mousemoved:0}),this.delegateDocumentEvents(null,e),this.undelegateEvents()},guard:function(t,e){return!!("mousedown"===t.type&&2===t.button||this.options.guard&&this.options.guard(t,e))||(t.data&&void 0!==t.data.guarded?t.data.guarded:!(e&&e.model&&e.model instanceof mi||this.svg===t.target||this.el===t.target||ve.contains(this.svg,t.target)))},setGridSize:function(t){return this.options.gridSize=t,this.options.drawGrid&&this.drawGrid(),this},clearGrid:function(){return this.$grid&&this.$grid.css("backgroundImage","none"),this},_getGridRefs:function(){return this._gridCache||(this._gridCache={root:gt("svg",{width:"100%",height:"100%"},gt("defs")),patterns:{},add:function(t,e){gt(this.root.node.childNodes[0]).append(e),this.patterns[t]=e,this.root.append(gt("rect",{width:"100%",height:"100%",fill:"url(#"+t+")"}))},get:function(t){return this.patterns[t]},exist:function(t){return void 0!==this.patterns[t]}}),this._gridCache},setGrid:function(t){return this.clearGrid(),this._gridCache=null,this._gridSettings=[],(Array.isArray(t)?t:[t||{}]).forEach(function(n){this._gridSettings.push.apply(this._gridSettings,this._resolveDrawGridOption(n))},this),this},_resolveDrawGridOption:function(t){var e=this.constructor.gridPatterns;if(Xn(t)&&Array.isArray(e[t]))return e[t].map(function(d){return R({},d)});var n=t||{args:[{}]},r=Array.isArray(n),s=n.name;if(!r&&!s&&!n.markup&&(s="dot"),s&&Array.isArray(e[s])){var o=e[s].map(function(d){return R({},d)}),l=Array.isArray(n.args)?n.args:[n.args||{}];Y(l[0],mn(t,"args"));for(var f=0;f<l.length;f++)o[f]&&R(o[f],l[f]);return o}return r?n:[n]},drawGrid:function(t){var e=this.options.gridSize;if(e<=1)return this.clearGrid();var n=Array.isArray(t)?t:[t],r=this.matrix(),s=this._getGridRefs();this._gridSettings.forEach(function(l,f){var d="pattern_"+f,m=zn(l,n[f],{sx:r.a||1,sy:r.d||1,ox:r.e||0,oy:r.f||0});m.width=e*(r.a||1)*(m.scaleFactor||1),m.height=e*(r.d||1)*(m.scaleFactor||1),s.exist(d)||s.add(d,gt("pattern",{id:d,patternUnits:"userSpaceOnUse"},gt(m.markup)));var A=s.get(d);qt(m.update)&&m.update(A.node.childNodes[0],m);var p=m.ox%m.width;p<0&&(p+=m.width);var D=m.oy%m.height;D<0&&(D+=m.height),A.attr({x:p,y:D,width:m.width,height:m.height})});var o=(new XMLSerializer).serializeToString(s.root.node);return o="url(data:image/svg+xml;base64,"+btoa(o)+")",this.$grid.css("backgroundImage",o),this},updateBackgroundImage:function(t){var e=(t=t||{}).position||"center",n=t.size||"auto auto",r=this.scale(),s=this.translate();Fe(e)&&(e=s.tx+r.sx*(e.x||0)+"px "+(s.ty+r.sy*(e.y||0))+"px"),Fe(n)&&(n=(n=new Lt(n).scale(r.sx,r.sy)).width+"px "+n.height+"px"),this.$background.css({backgroundSize:n,backgroundPosition:e})},drawBackgroundImage:function(t,e){if(t instanceof HTMLImageElement){if(this._background&&this._background.id===e.id){var n,r=(e=e||{}).size,s=e.repeat||"no-repeat",o=e.opacity||1,l=Math.abs(e.quality)||1,f=this.constructor.backgroundPatterns[ka(s)];if(qt(f)){t.width*=l,t.height*=l;var d=f(t,e);if(!(d instanceof HTMLCanvasElement))throw new Error("dia.Paper: background pattern must return an HTML Canvas instance");n=d.toDataURL("image/png"),s="repeat",Fe(r)?(r.width*=d.width/t.width,r.height*=d.height/t.height):void 0===r&&(e.size={width:d.width/l,height:d.height/l})}else n=t.src,void 0===r&&(e.size={width:t.width,height:t.height});this.$background.css({opacity:o,backgroundRepeat:s,backgroundImage:"url("+n+")"}),this.updateBackgroundImage(e)}}else this.$background.css("backgroundImage","")},updateBackgroundColor:function(t){this.$el.css("backgroundColor",t||"")},drawBackground:function(t){if(this.updateBackgroundColor((t=t||{}).color),t.image){t=this._background=kt(t),ls(t);var e=document.createElement("img");e.onload=this.drawBackgroundImage.bind(this,e,t),e.src=t.image}else this.drawBackgroundImage(null),this._background=null;return this},setInteractivity:function(t){this.options.interactive=t,dt(this._views,"setInteractivity",t)},isDefined:function(t){return!!this.svg.getElementById(t)},defineFilter:function(t){if(!Fe(t))throw new TypeError("dia.Paper: defineFilter() requires 1. argument to be an object.");var e=t.id,n=t.name;if(e||(e=n+this.svg.id+os(JSON.stringify(t))),!this.isDefined(e)){var s=rt[n]&&rt[n](t.args||{});if(!s)throw new Error("Non-existing filter "+n);var o=R({filterUnits:"objectBoundingBox",x:-1,y:-1,width:3,height:3},t.attrs,{id:e});gt(s,o).appendTo(this.defs)}return e},defineGradient:function(t){if(!Fe(t))throw new TypeError("dia.Paper: defineGradient() requires 1. argument to be an object.");const{svg:e,defs:n}=this,{type:r,id:s=r+e.id+os(JSON.stringify(t)),stops:o,attrs:l={}}=t;if(this.isDefined(s))return s;const f=te(o).map(({offset:m,color:A,opacity:p})=>gt("stop").attr({offset:m,"stop-color":A,"stop-opacity":Number.isFinite(p)?p:1})),d=gt(r,l,f);return d.id=s,d.appendTo(n),s},definePattern:function(t){if(!Fe(t))throw new TypeError("dia.Paper: definePattern() requires 1. argument to be an object.");const{svg:e,defs:n}=this,{id:r=e.id+os(JSON.stringify(t)),markup:s,attrs:o={}}=t;if(!s)throw new TypeError("dia.Paper: definePattern() requires markup.");if(this.isDefined(r))return r;const l=gt("pattern",{patternUnits:"userSpaceOnUse"});if(l.id=r,l.attr(o),"string"==typeof s)l.append(gt(s));else{const{fragment:f}=as(s);l.append(f)}return l.appendTo(n),r},defineMarker:function(t){if(!Fe(t))throw new TypeError("dia.Paper: defineMarker() requires 1. argument to be an object.");const{svg:e,defs:n}=this,{id:r=e.id+os(JSON.stringify(t)),markup:s,attrs:o={},markerUnits:l="userSpaceOnUse"}=t;if(this.isDefined(r))return r;const f=gt("marker",{orient:"auto",overflow:"visible",markerUnits:l});if(f.id=r,f.attr(o),s)if("string"==typeof s)f.append(gt(s));else{const{fragment:d}=as(s);f.append(d)}else{const{type:d="path"}=t,m=gt(d,mn(t,"type","id","markup","attrs","markerUnits"));f.append(m)}return f.appendTo(n),r}},{sorting:Wa,Layers:ui,backgroundPatterns:{flipXy:function(t){var e=document.createElement("canvas"),n=t.width,r=t.height;e.width=2*n,e.height=2*r;var s=e.getContext("2d");return s.drawImage(t,0,0,n,r),s.setTransform(-1,0,0,-1,e.width,e.height),s.drawImage(t,0,0,n,r),s.setTransform(-1,0,0,1,e.width,0),s.drawImage(t,0,0,n,r),s.setTransform(1,0,0,-1,0,e.height),s.drawImage(t,0,0,n,r),e},flipX:function(t){var e=document.createElement("canvas"),n=t.width,r=t.height;e.width=2*n,e.height=r;var s=e.getContext("2d");return s.drawImage(t,0,0,n,r),s.translate(2*n,0),s.scale(-1,1),s.drawImage(t,0,0,n,r),e},flipY:function(t){var e=document.createElement("canvas"),n=t.width,r=t.height;e.width=n,e.height=2*r;var s=e.getContext("2d");return s.drawImage(t,0,0,n,r),s.translate(0,2*r),s.scale(1,-1),s.drawImage(t,0,0,n,r),e},watermark:function(t,e){e=e||{};var n=t.width,r=t.height,s=document.createElement("canvas");s.width=3*n,s.height=3*r;for(var o=s.getContext("2d"),l=hr(e.watermarkAngle)?-e.watermarkAngle:-20,f=Ne(l),d=s.width/4,m=s.height/4,A=0;A<4;A++)for(var p=0;p<4;p++)(A+p)%2>0&&(o.setTransform(1,0,0,1,(2*A-1)*d,(2*p-1)*m),o.rotate(f),o.drawImage(t,-n/2,-r/2,n,r));return s}},gridPatterns:{dot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(t,e){gt(t).attr({width:e.thickness*e.sx,height:e.thickness*e.sy,fill:e.color})}}],fixedDot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(t,e){var n=e.sx<=1?e.thickness*e.sx:e.thickness;gt(t).attr({width:n,height:n,fill:e.color})}}],mesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(t,e){var n,r=e.width,s=e.height,o=e.thickness;n=r-o>=0&&s-o>=0?["M",r,0,"H0 M0 0 V0",s].join(" "):"M 0 0 0 0",gt(t).attr({d:n,stroke:e.color,"stroke-width":e.thickness})}}],doubleMesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(t,e){var n,r=e.width,s=e.height,o=e.thickness;n=r-o>=0&&s-o>=0?["M",r,0,"H0 M0 0 V0",s].join(" "):"M 0 0 0 0",gt(t).attr({d:n,stroke:e.color,"stroke-width":e.thickness})}},{color:"#000000",thickness:3,scaleFactor:4,markup:"path",update:function(t,e){var n,r=e.width,s=e.height,o=e.thickness;n=r-o>=0&&s-o>=0?["M",r,0,"H0 M0 0 V0",s].join(" "):"M 0 0 0 0",gt(t).attr({d:n,stroke:e.color,"stroke-width":e.thickness})}}]}}),nr=gs.extend({name:null,tagName:"g",className:"tool",svgElement:!0,_visible:!0,init:function(){var t=this.name;t&&this.vel.attr("data-tool-name",t)},configure:function(t,e){return this.relatedView=t,this.paper=t.paper,this.parentView=e,this.simulateRelatedView(this.el),this.delegateEvents(),this},simulateRelatedView:function(t){t&&t.setAttribute("model-id",this.relatedView.model.id)},getName:function(){return this.name},show:function(){this.el.style.display="",this._visible=!0},hide:function(){this.el.style.display="none",this._visible=!1},isVisible:function(){return!!this._visible},focus:function(){var t=this.options.focusOpacity;isFinite(t)&&(this.el.style.opacity=t),this.parentView.focusTool(this)},blur:function(){this.el.style.opacity="",this.parentView.blurTool(this)},update:function(){},guard:function(t){const{paper:e,relatedView:n}=this;return!e||!n||e.guard(t,n)}}),ci=gs.extend({tagName:"g",className:"tools",svgElement:!0,tools:null,isRendered:!1,options:{tools:null,relatedView:null,name:null},configure:function(t){var e=(t=R(this.options,t)).tools;if(!Array.isArray(e))return this;var n=t.relatedView;if(!(n instanceof Pe))return this;for(var r=this.tools=[],s=0,o=e.length;s<o;s++){var l=e[s];l instanceof nr&&(l.configure(n,this),this.vel.append(l.el),r.push(l))}return this.isRendered=!1,n.requestUpdate(n.getFlag("TOOLS")),this},getName:function(){return this.options.name},update:function(t){t||(t={});var e=this.tools;if(!e)return this;for(var n=this.isRendered,r=0,s=e.length;r<s;r++){var o=e[r];n?t.tool!==o.cid&&o.isVisible()&&o.update():o.render()}return n||(this.mount(),this.blurTool(),this.isRendered=!0),this},focusTool:function(t){var e=this.tools;if(!e)return this;for(var n=0,r=e.length;n<r;n++){var s=e[n];t===s?s.show():s.hide()}return this},blurTool:function(t){var e=this.tools;if(!e)return this;for(var n=0,r=e.length;n<r;n++){var s=e[n];s!==t&&!s.isVisible()&&(s.show(),s.update())}return this},hide:function(){return this.focusTool(null)},show:function(){return this.blurTool(null)},onRemove:function(){var t=this.tools;if(!t)return this;for(var e=0,n=t.length;e<n;e++)t[e].remove();this.tools=null},mount:function(){const{options:t,el:e}=this,{relatedView:n,layer:r=ui.TOOLS,z:s}=t;return n&&(r?n.paper.getLayerView(r).insertSortedNode(e,s):n.el.appendChild(e)),this}});function Wl(t,e){return 0===e?"0%":Math.round(t/e*100*1e3)/1e3+"%"}function _l(t){return function(e,n,r,s){return(n.isNodeConnection(r)?_a:Xo)(t,e,n,r,s)}}function Xo(t,e,n,r,s){var o=n.model.angle(),l=n.getNodeUnrotatedBBox(r),f=n.model.getBBox().center();s.rotate(f,o);var d=s.x-l.x,m=s.y-l.y;return t&&(d=Wl(d,l.width),m=Wl(m,l.height)),e.anchor={name:"topLeft",args:{dx:d,dy:m,rotate:!0}},e}function _a(t,e,n,r,s){var o=n.getConnection();if(!o)return e;var l=o.closestPointLength(s);if(t){var f=o.length();e.anchor={name:"connectionRatio",args:{ratio:l/f}}}else e.anchor={name:"connectionLength",args:{length:l}};return e}_l(!1);const sf=_l(!0);function zu(t,e,n){return sf.call(this.paper,{},e,n,t,this.model).anchor}function Ua(t,e){const{model:n}=t;return e?n.getBBox():n.isLink()?t.getConnection().bbox():t.getNodeUnrotatedBBox(t.el)}var Yl=gs.extend({tagName:"circle",svgElement:!0,className:"marker-vertex",events:{mousedown:"onPointerDown",touchstart:"onPointerDown",dblclick:"onDoubleClick",dbltap:"onDoubleClick"},documentEvents:{mousemove:"onPointerMove",touchmove:"onPointerMove",mouseup:"onPointerUp",touchend:"onPointerUp",touchcancel:"onPointerUp"},attributes:{r:6,fill:"#33334F",stroke:"#FFFFFF","stroke-width":2,cursor:"move"},position:function(t,e){this.vel.attr({cx:t,cy:e})},onPointerDown:function(t){this.options.guard(t)||(t.stopPropagation(),t.preventDefault(),this.options.paper.undelegateEvents(),this.delegateDocumentEvents(null,t.data),this.trigger("will-change",this,t))},onPointerMove:function(t){this.trigger("changing",this,t)},onDoubleClick:function(t){this.trigger("remove",this,t)},onPointerUp:function(t){this.trigger("changed",this,t),this.undelegateDocumentEvents(),this.options.paper.delegateEvents()}}),Ou=(nr.extend({name:"vertices",options:{handleClass:Yl,snapRadius:20,redundancyRemoval:!0,vertexAdding:!0,stopPropagation:!0},children:[{tagName:"path",selector:"connection",className:"joint-vertices-path",attributes:{fill:"none",stroke:"transparent","stroke-width":10,cursor:"cell"}}],handles:null,events:{"mousedown .joint-vertices-path":"onPathPointerDown","touchstart .joint-vertices-path":"onPathPointerDown"},onRender:function(){return this.options.vertexAdding&&(this.renderChildren(),this.updatePath()),this.resetHandles(),this.renderHandles(),this},update:function(){return this.relatedView.model.vertices().length===this.handles.length?this.updateHandles():(this.resetHandles(),this.renderHandles()),this.options.vertexAdding&&this.updatePath(),this},resetHandles:function(){var t=this.handles;if(this.handles=[],this.stopListening(),Array.isArray(t))for(var e=0,n=t.length;e<n;e++)t[e].remove()},renderHandles:function(){for(var e=this.relatedView.model.vertices(),n=0,r=e.length;n<r;n++){var s=e[n],o=new this.options.handleClass({index:n,paper:this.paper,guard:l=>this.guard(l)});o.render(),o.position(s.x,s.y),this.simulateRelatedView(o.el),o.vel.appendTo(this.el),this.handles.push(o),this.startHandleListening(o)}},updateHandles:function(){for(var e=this.relatedView.model.vertices(),n=0,r=e.length;n<r;n++){var s=e[n],o=this.handles[n];if(!o)return;o.position(s.x,s.y)}},updatePath:function(){var t=this.childNodes.connection;t&&t.setAttribute("d",this.relatedView.getSerializedConnection())},startHandleListening:function(t){var e=this.relatedView;e.can("vertexMove")&&(this.listenTo(t,"will-change",this.onHandleWillChange),this.listenTo(t,"changing",this.onHandleChanging),this.listenTo(t,"changed",this.onHandleChanged)),e.can("vertexRemove")&&this.listenTo(t,"remove",this.onHandleRemove)},getNeighborPoints:function(t){var e=this.relatedView,n=e.model.vertices(),s=t<n.length-1?n[t+1]:e.targetAnchor;return{prev:new I(t>0?n[t-1]:e.sourceAnchor),next:new I(s)}},onHandleWillChange:function(t,e){this.focus();const{relatedView:n,options:r}=this;n.model.startBatch("vertex-move",{ui:!0,tool:this.cid}),r.stopPropagation||n.notifyPointerdown(...n.paper.getPointerArgs(e))},onHandleChanging:function(t,e){const{options:n,relatedView:r}=this;var s=t.options.index,[o,l,f]=r.paper.getPointerArgs(e),d={x:l,y:f};this.snapVertex(d,s),r.model.vertex(s,d,{ui:!0,tool:this.cid}),t.position(d.x,d.y),n.stopPropagation||r.notifyPointermove(o,l,f)},onHandleChanged:function(t,e){const{options:n,relatedView:r}=this;if(n.vertexAdding&&this.updatePath(),n.redundancyRemoval){r.removeRedundantLinearVertices({ui:!0,tool:this.cid})&&this.render(),this.blur(),r.model.stopBatch("vertex-move",{ui:!0,tool:this.cid}),this.eventData(e).vertexAdded&&r.model.stopBatch("vertex-add",{ui:!0,tool:this.cid});var[o,l,f]=r.paper.getPointerArgs(e);n.stopPropagation||r.notifyPointerup(o,l,f),r.checkMouseleave(o)}},snapVertex:function(t,e){var n=this.options.snapRadius;if(n>0){var r=this.getNeighborPoints(e),s=r.prev,o=r.next;Math.abs(t.x-s.x)<n?t.x=s.x:Math.abs(t.x-o.x)<n&&(t.x=o.x),Math.abs(t.y-s.y)<n?t.y=r.prev.y:Math.abs(t.y-o.y)<n&&(t.y=o.y)}},onHandleRemove:function(t,e){var r=this.relatedView;r.model.removeVertex(t.options.index,{ui:!0}),this.options.vertexAdding&&this.updatePath(),r.checkMouseleave(fn(e))},onPathPointerDown:function(t){if(!this.guard(t)){t.stopPropagation(),t.preventDefault();var e=fn(t),n=this.paper.snapToGrid(e.clientX,e.clientY).toJSON(),r=this.relatedView;r.model.startBatch("vertex-add",{ui:!0,tool:this.cid});var s=r.getVertexIndex(n.x,n.y);this.snapVertex(n,s),r.model.insertVertex(s,n,{ui:!0,tool:this.cid}),this.update();var o=this.handles[s];this.eventData(e,{vertexAdded:!0}),o.onPointerDown(e)}},onRemove:function(){this.resetHandles()}},{VertexHandle:Yl}),gs.extend({tagName:"g",svgElement:!0,className:"marker-segment",events:{mousedown:"onPointerDown",touchstart:"onPointerDown"},documentEvents:{mousemove:"onPointerMove",touchmove:"onPointerMove",mouseup:"onPointerUp",touchend:"onPointerUp",touchcancel:"onPointerUp"},children:[{tagName:"line",selector:"line",attributes:{stroke:"#33334F","stroke-width":2,fill:"none","pointer-events":"none"}},{tagName:"rect",selector:"handle",attributes:{width:20,height:8,x:-10,y:-4,rx:4,ry:4,fill:"#33334F",stroke:"#FFFFFF","stroke-width":2}}],onRender:function(){this.renderChildren()},position:function(t,e,n,r){var s=gt.createSVGMatrix().translate(t,e).rotate(n),o=this.childNodes.handle;o.setAttribute("transform",gt.matrixToTransformString(s)),o.setAttribute("cursor",n%180==0?"row-resize":"col-resize");var l=r.getClosestPoint(new I(t,e)),f=this.childNodes.line;f.setAttribute("x1",t),f.setAttribute("y1",e),f.setAttribute("x2",l.x),f.setAttribute("y2",l.y)},onPointerDown:function(t){this.options.guard(t)||(this.trigger("change:start",this,t),t.stopPropagation(),t.preventDefault(),this.options.paper.undelegateEvents(),this.delegateDocumentEvents(null,t.data))},onPointerMove:function(t){this.trigger("changing",this,t)},onPointerUp:function(t){this.undelegateDocumentEvents(),this.options.paper.delegateEvents(),this.trigger("change:end",this,t)},show:function(){this.el.style.display=""},hide:function(){this.el.style.display="none"}})),Ru=(nr.extend({name:"segments",precision:.5,options:{handleClass:Ou,segmentLengthThreshold:40,redundancyRemoval:!0,anchor:zu,snapRadius:10,snapHandle:!0,stopPropagation:!0},handles:null,onRender:function(){this.resetHandles();var t=this.relatedView,e=t.model.vertices();e.unshift(t.sourcePoint),e.push(t.targetPoint);for(var n=0,r=e.length;n<r-1;n++){var l=this.renderHandle(e[n],e[n+1]);this.simulateRelatedView(l.el),this.handles.push(l),l.options.index=n}return this},renderHandle:function(t,e){var n=new this.options.handleClass({paper:this.paper,guard:r=>this.guard(r)});return n.render(),this.updateHandle(n,t,e),n.vel.appendTo(this.el),this.startHandleListening(n),n},update:function(){return this.render(),this},startHandleListening:function(t){this.listenTo(t,"change:start",this.onHandleChangeStart),this.listenTo(t,"changing",this.onHandleChanging),this.listenTo(t,"change:end",this.onHandleChangeEnd)},resetHandles:function(){var t=this.handles;if(this.handles=[],this.stopListening(),Array.isArray(t))for(var e=0,n=t.length;e<n;e++)t[e].remove()},shiftHandleIndexes:function(t){for(var e=this.handles,n=0,r=e.length;n<r;n++)e[n].options.index+=t},resetAnchor:function(t,e){var n=this.relatedView.model;e?n.prop([t,"anchor"],e,{rewrite:!0,ui:!0,tool:this.cid}):n.removeProp([t,"anchor"],{ui:!0,tool:this.cid})},snapHandle:function(t,e,n){var r=t.options.index,l=this.relatedView.model.vertices(),f=t.options.axis,d=l[r-2]||n.sourceAnchor,m=l[r+1]||n.targetAnchor,A=this.options.snapRadius;return Math.abs(e[f]-d[f])<A?e[f]=d[f]:Math.abs(e[f]-m[f])<A&&(e[f]=m[f]),e},onHandleChanging:function(t,e){const{options:n}=this;var r=this.eventData(e),s=this.relatedView,o=s.paper,l=t.options.index-1,f=fn(e),d=o.snapToGrid(f.clientX,f.clientY),m=this.snapHandle(t,d.clone(),r),A=t.options.axis,p=this.options.snapHandle?0:d[A]-m[A],D=s.model,B=kt(D.vertices()),j=B[l],q=B[l+1],et=this.options.anchor;"function"!=typeof et&&(et=null);var ht=s.sourceView,ft=s.sourceBBox,w=!1,S=!1;if(j?0===l?ft.containsPoint(j)?(B.shift(),this.shiftHandleIndexes(-1),w=!0):(j[A]=m[A],S=!0):j[A]=m[A]:((j=s.sourceAnchor.toJSON())[A]=m[A],ft.containsPoint(j)?(j[A]=m[A],w=!0):(B.unshift(j),this.shiftHandleIndexes(1),S=!0)),et&&ht){if(w){var P=r.sourceAnchor.clone();P[A]=m[A];var Z=et.call(s,P,ht,s.sourceMagnet||ht.el,"source",s);this.resetAnchor("source",Z)}S&&this.resetAnchor("source",r.sourceAnchorDef)}var X=s.targetView,st=s.targetBBox,ot=!1,vt=!1;if(q?l===B.length-2?st.containsPoint(q)?(B.pop(),ot=!0):(q[A]=m[A],vt=!0):q[A]=m[A]:((q=s.targetAnchor.toJSON())[A]=m[A],st.containsPoint(q)?ot=!0:(B.push(q),vt=!0)),et&&X){if(ot){var Tt=r.targetAnchor.clone();Tt[A]=m[A];var xt=et.call(s,Tt,X,s.targetMagnet||X.el,"target",s);this.resetAnchor("target",xt)}vt&&this.resetAnchor("target",r.targetAnchorDef)}D.vertices(B,{ui:!0,tool:this.cid}),this.updateHandle(t,j,q,p),n.stopPropagation||s.notifyPointermove(f,d.x,d.y)},onHandleChangeStart:function(t,e){const{options:n,handles:r,relatedView:s}=this,{model:o,paper:l}=s;var f=t.options.index;if(Array.isArray(r)){for(var d=0,m=r.length;d<m;d++)d!==f&&r[d].hide();this.focus(),this.eventData(e,{sourceAnchor:s.sourceAnchor.clone(),targetAnchor:s.targetAnchor.clone(),sourceAnchorDef:mt(o.prop(["source","anchor"])),targetAnchorDef:mt(o.prop(["target","anchor"]))}),o.startBatch("segment-move",{ui:!0,tool:this.cid}),n.stopPropagation||s.notifyPointerdown(...l.getPointerArgs(e))}},onHandleChangeEnd:function(t,e){const{options:n,relatedView:r}=this,{paper:s,model:o}=r;n.redundancyRemoval&&r.removeRedundantLinearVertices({ui:!0,tool:this.cid});const l=fn(e),f=s.snapToGrid(l.clientX,l.clientY);this.render(),this.blur(),o.stopBatch("segment-move",{ui:!0,tool:this.cid}),n.stopPropagation||r.notifyPointerup(l,f.x,f.y),r.checkMouseleave(l)},updateHandle:function(t,e,n,r){var s=Math.abs(e.x-n.x)<this.precision,o=Math.abs(e.y-n.y)<this.precision;if(s||o){var l=new tt(e,n);if(l.length()<this.options.segmentLengthThreshold)t.hide();else{var d=l.midpoint(),m=s?"x":"y";d[m]+=r||0;var A=l.vector().vectorAngle(new I(1,0));t.position(d.x,d.y,A,this.relatedView),t.show(),t.options.axis=m}}else t.hide()},onRemove:function(){this.resetHandles()}},{SegmentHandle:Ou}),nr.extend({tagName:"path",xAxisVector:new I(1,0),events:{mousedown:"onPointerDown",touchstart:"onPointerDown"},documentEvents:{mousemove:"onPointerMove",touchmove:"onPointerMove",mouseup:"onPointerUp",touchend:"onPointerUp",touchcancel:"onPointerUp"},onRender:function(){this.update()},update:function(){var r,s,t=this.ratio,e=this.relatedView,n=e.getTangentAtRatio(t);if(n?(r=n.start,s=n.vector().vectorAngle(this.xAxisVector)||0):(r=e.getPointAtRatio(t),s=0),!r)return this;var o=gt.createSVGMatrix().translate(r.x,r.y).rotate(s);return this.vel.transform(o,{absolute:!0}),this},onPointerDown:function(t){if(!this.guard(t)){t.stopPropagation(),t.preventDefault();var e=this.relatedView;e.model.startBatch("arrowhead-move",{ui:!0,tool:this.cid}),e.can("arrowheadMove")&&(e.startArrowheadMove(this.arrowheadType),this.delegateDocumentEvents(),e.paper.undelegateEvents()),this.focus(),this.el.style.pointerEvents="none"}},onPointerMove:function(t){var e=fn(t),n=this.paper.snapToGrid(e.clientX,e.clientY);this.relatedView.pointermove(e,n.x,n.y)},onPointerUp:function(t){this.undelegateDocumentEvents();var e=this.relatedView,n=e.paper,r=fn(t),s=n.snapToGrid(r.clientX,r.clientY);e.pointerup(r,s.x,s.y),n.delegateEvents(),this.blur(),this.el.style.pointerEvents="",e.model.stopBatch("arrowhead-move",{ui:!0,tool:this.cid})}})),fo=(Ru.extend({name:"target-arrowhead",ratio:1,arrowheadType:"target",attributes:{d:"M -10 -8 10 0 -10 8 Z",fill:"#33334F",stroke:"#FFFFFF","stroke-width":2,cursor:"move",class:"target-arrowhead"}}),Ru.extend({name:"source-arrowhead",ratio:0,arrowheadType:"source",attributes:{d:"M 10 -8 -10 0 10 8 Z",fill:"#33334F",stroke:"#FFFFFF","stroke-width":2,cursor:"move",class:"source-arrowhead"}}),nr.extend({name:"button",events:{mousedown:"onPointerDown",touchstart:"onPointerDown"},options:{distance:0,offset:0,rotate:!1},onRender:function(){this.renderChildren(this.options.markup),this.update()},update:function(){return this.position(),this},position:function(){const{relatedView:t,vel:e}=this,n=t.model.isLink()?this.getLinkMatrix():this.getElementMatrix();e.transform(n,{absolute:!0})},getElementMatrix(){const{relatedView:t,options:e}=this;let{x:n=0,y:r=0,offset:s={},useModelGeometry:o,rotate:l}=e,f=Ua(t,o);const d=t.model.angle();l||(f=f.bbox(d));const{x:m=0,y:A=0}=s;Wn(n)&&(n=parseFloat(n)/100*f.width),Wn(r)&&(r=parseFloat(r)/100*f.height);let p=gt.createSVGMatrix().translate(f.x+f.width/2,f.y+f.height/2);return l&&(p=p.rotate(d)),p=p.translate(n+m-f.width/2,r+A-f.height/2),p},getLinkMatrix(){const{relatedView:t,options:e}=this,{offset:n=0,distance:r=0,rotate:s}=e;let o,l,f;o=Wn(r)?t.getTangentAtRatio(parseFloat(r)/100):t.getTangentAtLength(r),o?(l=o.start,f=o.vector().vectorAngle(new I(1,0))||0):(l=t.getConnection().start,f=0);let d=gt.createSVGMatrix().translate(l.x,l.y).rotate(f).translate(0,n);return s||(d=d.rotate(-f)),d},onPointerDown:function(t){if(!this.guard(t)){t.stopPropagation(),t.preventDefault();var e=this.options.action;"function"==typeof e&&e.call(this.relatedView,t,this.relatedView,this)}}})),ho=fo.extend({children:[{tagName:"circle",selector:"button",attributes:{r:7,fill:"#FF1D00",cursor:"pointer"}},{tagName:"path",selector:"icon",attributes:{d:"M -3 -3 3 3 M -3 3 3 -3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],options:{distance:60,offset:0,action:function(t,e,n){e.model.remove({ui:!0,tool:n.cid})}}});fo.extend({name:"connect",documentEvents:{mousemove:"drag",touchmove:"drag",mouseup:"dragend",touchend:"dragend",touchcancel:"dragend"},children:[{tagName:"circle",selector:"button",attributes:{r:7,fill:"#333333",cursor:"pointer"}},{tagName:"path",selector:"icon",attributes:{d:"M -4 -1 L 0 -1 L 0 -4 L 4 0 L 0 4 0 1 -4 1 z",fill:"#FFFFFF",stroke:"none","stroke-width":2,"pointer-events":"none"}}],options:{distance:80,offset:0,magnet:t=>t.el,action:(t,e,n)=>n.dragstart(t)},getMagnetNode:function(){const{options:t,relatedView:e}=this,{magnet:n}=t;let r;switch(typeof n){case"function":r=n.call(this,e,this);break;case"string":[r]=e.findBySelector(n);break;default:r=n}if(r||(r=e.el),r instanceof SVGElement)return r;throw new Error("Connect: magnet must be an SVGElement")},dragstart:function(t){const{paper:e,relatedView:n}=this,r=fn(t),{x:s,y:o}=e.clientToLocalPoint(r.clientX,r.clientY);n.dragLinkStart(r,this.getMagnetNode(),s,o),e.undelegateEvents(),this.delegateDocumentEvents(null,t.data),this.focus()},drag:function(t){const{paper:e,relatedView:n}=this,r=fn(t),{x:s,y:o}=e.snapToGrid(r.clientX,r.clientY);n.dragLink(r,s,o)},dragend:function(t){const{paper:e,relatedView:n}=this,r=fn(t),{x:s,y:o}=e.snapToGrid(r.clientX,r.clientY);n.dragLinkEnd(r,s,o),this.undelegateDocumentEvents(),e.delegateEvents(),this.blur(),n.checkMouseleave(r)}}),nr.extend({name:"boundary",tagName:"rect",options:{padding:10,useModelGeometry:!1},attributes:{fill:"none",stroke:"#33334F","stroke-width":.5,"stroke-dasharray":"5, 5","pointer-events":"none"},onRender:function(){this.update()},update:function(){const{relatedView:t,options:e,vel:n}=this,{useModelGeometry:r,rotate:s}=e,o=_(e.padding);let l=Ua(t,r).moveAndExpand({x:-o.left,y:-o.top,width:o.left+o.right,height:o.top+o.bottom});var f=t.model;if(f.isElement()){var d=f.angle();if(d)if(s){var m=f.getBBox().center();n.rotate(d,m.x,m.y,{absolute:!0})}else l=l.bbox(d)}return n.attr(l.toJSON()),this}});var Zu=nr.extend({tagName:"g",type:null,children:[{tagName:"circle",selector:"anchor",attributes:{cursor:"pointer"}},{tagName:"rect",selector:"area",attributes:{"pointer-events":"none",fill:"none",stroke:"#33334F","stroke-dasharray":"2,4",rx:5,ry:5}}],events:{mousedown:"onPointerDown",touchstart:"onPointerDown",dblclick:"onPointerDblClick",dbltap:"onPointerDblClick"},documentEvents:{mousemove:"onPointerMove",touchmove:"onPointerMove",mouseup:"onPointerUp",touchend:"onPointerUp",touchcancel:"onPointerUp"},options:{snap:function Ya(t,e,n,r,s,o){var l=o.options.snapRadius,f="source"===r,m=this.model.vertex(f?0:-1)||this.getEndAnchor(f?"target":"source");return m&&(Math.abs(m.x-t.x)<l&&(t.x=m.x),Math.abs(m.y-t.y)<l&&(t.y=m.y)),t},anchor:zu,resetAnchor:!0,customAnchorAttributes:{"stroke-width":4,stroke:"#33334F",fill:"#FFFFFF",r:5},defaultAnchorAttributes:{"stroke-width":2,stroke:"#FFFFFF",fill:"#33334F",r:6},areaPadding:6,snapRadius:10,restrictArea:!0,redundancyRemoval:!0},onRender:function(){this.renderChildren(),this.toggleArea(!1),this.update()},update:function(){return this.relatedView.getEndView(this.type)?(this.updateAnchor(),this.updateArea(),this.el.style.display=""):this.el.style.display="none",this},updateAnchor:function(){var t=this.childNodes;if(t){var e=t.anchor;if(e){var n=this.relatedView,r=this.type,s=n.getEndAnchor(r),o=this.options,l=n.model.prop([r,"anchor"]);e.setAttribute("transform","translate("+s.x+","+s.y+")");var f=l?o.customAnchorAttributes:o.defaultAnchorAttributes;for(var d in f)e.setAttribute(d,f[d])}}},updateArea:function(){var t=this.childNodes;if(t){var e=t.area;if(e){var d,m,A,n=this.relatedView,r=this.type,s=n.getEndView(r),o=s.model,l=n.getEndMagnet(r),f=this.options.areaPadding;isFinite(f)||(f=0),s.isNodeConnection(l)?(m=0,A=(d=s.getBBox()).center()):(d=s.getNodeUnrotatedBBox(l),m=o.angle(),A=d.center(),m&&A.rotate(o.getBBox().center(),-m)),d.inflate(f),e.setAttribute("x",-d.width/2),e.setAttribute("y",-d.height/2),e.setAttribute("width",d.width),e.setAttribute("height",d.height),e.setAttribute("transform","translate("+A.x+","+A.y+") rotate("+m+")")}}},toggleArea:function(t){this.childNodes.area.style.display=t?"":"none"},onPointerDown:function(t){this.guard(t)||(t.stopPropagation(),t.preventDefault(),this.paper.undelegateEvents(),this.delegateDocumentEvents(),this.focus(),this.toggleArea(this.options.restrictArea),this.relatedView.model.startBatch("anchor-move",{ui:!0,tool:this.cid}))},resetAnchor:function(t){var e=this.type,n=this.relatedView.model;t?n.prop([e,"anchor"],t,{rewrite:!0,ui:!0,tool:this.cid}):n.removeProp([e,"anchor"],{ui:!0,tool:this.cid})},onPointerMove:function(t){var e=this.relatedView,n=this.type,r=e.getEndView(n),s=r.model,o=e.getEndMagnet(n),l=fn(t),f=this.paper.clientToLocalPoint(l.clientX,l.clientY),d=this.options.snap;if("function"==typeof d&&(f=d.call(e,f,r,o,n,e,this),f=new I(f)),this.options.restrictArea)if(r.isNodeConnection(o)){var m=r.getClosestPoint(f);m&&(f=m)}else{var A=r.getNodeUnrotatedBBox(o),p=s.angle(),D=s.getBBox().center(),B=f.clone().rotate(D,p);A.containsPoint(B)||(f=A.pointNearestToPoint(B).rotate(D,-p))}var j,q=this.options.anchor;"function"==typeof q&&(j=q.call(e,f,r,o,n,e)),this.resetAnchor(j),this.update()},onPointerUp:function(t){this.paper.delegateEvents(),this.undelegateDocumentEvents(),this.blur(),this.toggleArea(!1);var e=this.relatedView;this.options.redundancyRemoval&&e.removeRedundantLinearVertices({ui:!0,tool:this.cid}),e.model.stopBatch("anchor-move",{ui:!0,tool:this.cid})},onPointerDblClick:function(){var t=this.options.resetAnchor;!1!==t&&(!0===t&&(t=null),this.resetAnchor(kt(t)),this.update())}}),Vl=(Zu.extend({name:"source-anchor",type:"source"}),Zu.extend({name:"target-anchor",type:"target"}),Wt(805)),Es=Wt(961),Hl=Wt(306),uf=Wt(727);class Jl extends uf.w0{constructor(e,n){super()}schedule(e,n=0){return this}}const Ho={setInterval(t,e,...n){const{delegate:r}=Ho;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=Ho;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var lf=Wt(737);const Jo={now:()=>(Jo.delegate||Date).now(),delegate:void 0};class ba{constructor(e,n=ba.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}}ba.now=Jo.now;const Fa=new class Wu extends ba{constructor(e,n=ba.now){super(e,n),this.actions=[],this._active=!1,this._scheduled=void 0}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}(class zs extends Jl{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){if(this.closed)return this;this.state=e;const r=this.id,s=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(s,r,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return Ho.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;Ho.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let s,r=!1;try{this.work(e)}catch(o){r=!0,s=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),s}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,(0,lf.P)(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}});var le=Wt(532);const Qo=De.define("ui.Collapse",{collapsed:!1,expandedSize:null,lazyLoad:!1,attrs:{body:{width:"calc(w)",height:"calc(h)",strokeWidth:2,stroke:"#333333",fill:"transparent"},header:{width:"calc(w)",height:24,fill:"#333333"},headerText:{textVerticalAnchor:"middle",textAnchor:"start",x:8,y:12,fontSize:14,fill:"#FFFFFF"},button:{refDx:-20,refY:4,cursor:"pointer",event:"element:button:pointerclick",title:"Collapse / Expand"},buttonBorder:{width:16,height:16,fill:"transparent",stroke:"#FFFFFF",strokeWidth:1},buttonIcon:{fill:"none",stroke:"#FFFFFF",strokeWidth:1},loading:{textVerticalAnchor:"middle",textAnchor:"middle",x:"calc(0.5*w)",y:"calc(0.5*h)",fontSize:14,text:"Loading...",visibility:"hidden"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"header"},{tagName:"text",selector:"headerText"},{tagName:"g",selector:"button",children:[{tagName:"rect",selector:"buttonBorder"},{tagName:"path",selector:"buttonIcon"}]},{tagName:"text",selector:"loading"}],isCollapsed:function(){return Boolean(this.get("collapsed"))},toggle:function(t){let e;const n=void 0===t?!this.get("collapsed"):t;n?(e="M 2 7 12 7 M 7 2 7 12",this.set("expandedSize",this.get("size")),this.resize(140,24)):(e="M 2 7 12 7",this.get("expandedSize")&&this.resize(this.get("expandedSize").width,this.get("expandedSize").height),this.get("lazyLoad")&&0===this.getEmbeddedCells().length&&(this.attr("loading/visibility","visible"),this.trigger("lazyload"))),this.attr(["buttonIcon","d"],e),this.set("collapsed",n)}}),Uu=De.define("ui.Group",{attrs:{body:{width:"calc(w)",height:"calc(h)",rx:8,ry:8,strokeWidth:2,stroke:"#333333",strokeDasharray:"4,4,1",fill:"transparent",pointerEvents:"none"},wrapper:{width:"calc(w)",height:"calc(h)",strokeWidth:10,stroke:"transparent",fill:"none",pointerEvents:"stroke"},label:{x:"calc(0.5*w)",y:12,textAnchor:"middle",fontSize:14,fontWeight:"bold"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"wrapper"},{tagName:"text",selector:"label"}]});class Ur{constructor(e){this.mousemoveHandler=null,this.selectedViews=null,this.selectedRect=null,this.paper=e.paper,this.graph=e.graph,this.selectionEl=document.createElement("div"),this.selectionEl.classList.add("joint-selection","joint-theme-material"),this.selectionEl.style.pointerEvents="none",this.paper.el.appendChild(this.selectionEl),this.selectionWrapperEl=document.createElement("div"),this.selectionWrapperEl.classList.add("selection-wrapper"),this.selectionEl.appendChild(this.selectionWrapperEl);const n=document.createElement("div");n.className="handle nw",n.textContent="+Group",n.addEventListener("click",()=>this.onGroupElements()),this.selectionWrapperEl.appendChild(n)}cancelSelection(){this.selectionEl.classList.remove("lasso","selected"),this.selectionEl.style.width="",this.selectionEl.style.height="",this.selectionWrapperEl.setAttribute("data-selection-length","0"),this.mousemoveHandler&&(this.paper.el.removeEventListener("mousemove",this.mousemoveHandler),this.mousemoveHandler=null),this.selectedViews=null,this.selectedRect=null}startSelecting(e){this.cancelSelection();const n=new I(e.offsetX,e.offsetY);this.selectionEl.style.left=`${n.x}px`,this.selectionEl.style.top=`${n.y}px`,this.selectionEl.classList.add("lasso"),this.mousemoveHandler=r=>{const s=new I(r.offsetX,r.offsetY),o=Lt.fromPointUnion(n,s);this.selectionEl.style.left=`${o?.x}px`,this.selectionEl.style.top=`${o?.y}px`,this.selectionEl.style.width=`${o?.width}px`,this.selectionEl.style.height=`${o?.height}px`},this.paper.el.addEventListener("mousemove",this.mousemoveHandler),this.paper.el.addEventListener("mouseup",r=>{this.cancelSelection();const s=new I(r.offsetX,r.offsetY),o=Lt.fromPointUnion(n,s);if(!o)return;const l=this.paper.findViewsInArea(o).filter(d=>!["ui.Group","ui.Collapse"].includes(d.model.get("type"))&&!d.model.isEmbedded());if(0===l.length)return;this.selectionEl.classList.add("selected"),this.selectionWrapperEl.setAttribute("data-selection-length",l.length.toString());const f=Lt.fromRectUnion(...l.map(d=>d.getBBox()));this.selectionWrapperEl.style.left=`${f?.x}px`,this.selectionWrapperEl.style.top=`${f?.y}px`,this.selectionWrapperEl.style.width=`${f?.width}px`,this.selectionWrapperEl.style.height=`${f?.height}px`,this.selectedViews=l,this.selectedRect=f},{once:!0})}onGroupElements(){if(!this.selectedViews||!this.selectedRect)return;const e=new Uu;e.position(this.selectedRect.x-10,this.selectedRect.y-10),e.resize(this.selectedRect.width+20,this.selectedRect.height+20),e.embed(this.selectedViews.map(s=>s.model));const n=new ho,r=new ci({tools:[n]});this.graph.addCell(e),e.findView(this.paper).addTools(r),this.paper.hideTools(),this.cancelSelection()}}var ze=Wt(256);const cf=["paper"];let Kl=(()=>{class t{constructor(){this.nodeCount=0,this.groupCount=0,this.collapseCount=0,this.nodePosition=50,this.groupPosition=150,this.collapsePosition=300}ngOnInit(){this.graph=new $s,this.paper=new Vo({el:this.paperRef.nativeElement,width:"100%",height:"100%",background:{color:"#eee"},gridSize:1,model:this.graph,async:!0,embeddingMode:!0,frontParentOnly:!1,validateEmbedding:function(r,s){const o=s.model.get("type"),l=r.model.get("type");return"ui.Group"===o&&"standard.Rectangle"===l||"ui.Collapse"===o&&"standard.Rectangle"===l},viewport:function(r){return!r.model.getAncestors().some(o=>"ui.Collapse"===o.get("type")&&o.isCollapsed())}}).on("blank:pointerdown",(r,s,o)=>{this.paper.hideTools(),n.startSelecting(r)}).on("cell:pointerdown",r=>{this.paper.hideTools(),r.hasTools()&&r.showTools()}).on("element:button:pointerclick",r=>{"ui.Collapse"===r.model.get("type")&&r.model.toggle()});const n=new Ur({paper:this.paper,graph:this.graph})}logJSON(){console.log(this.graph.toJSON())}addNode(){const n=new Aa;this.nodePosition=(this.nodePosition+=10)%100+100,n.position(this.nodePosition,this.nodePosition),n.resize(50,50),n.attr({body:{fill:"white"},label:{text:"Node "+ ++this.nodeCount,fill:"black"}});const r=new ho,s=new ci({tools:[r]});this.graph.addCell(n),n.findView(this.paper).addTools(s)}addGroup(){const n=new Uu;this.groupPosition=(this.groupPosition+=10)%200+200,n.position(this.groupPosition,this.groupPosition),n.resize(200,200),n.attr("label/text","Group "+ ++this.groupCount);const r=new ho,s=new ci({tools:[r]});this.graph.addCell(n),n.findView(this.paper).addTools(s)}addCollapse(){const n=new Qo;this.collapsePosition=(this.collapsePosition+=10)%300+300,n.position(this.collapsePosition,this.collapsePosition),n.resize(200,200),n.attr({headerText:{text:"Collapse "+ ++this.collapseCount}});const r=new ho,s=new ci({tools:[r]});this.graph.addCell(n),n.findView(this.paper).addTools(s),n.toggle(!1)}addLazyLoadCollapse(){var n=this;this.collapsePosition=(this.collapsePosition+=10)%300+300;const r=new Qo({lazyLoad:!0,position:{x:this.collapsePosition,y:this.collapsePosition},size:{width:200,height:200},attrs:{headerText:{text:"Collapse(Lazy) "+ ++this.collapseCount}}}).on("lazyload",sr(function*(){yield function Xl(t,e){const n="object"==typeof e;return new Promise((r,s)=>{const o=new Es.Hp({next:l=>{r(l),o.unsubscribe()},error:s,complete:()=>{n?r(e.defaultValue):s(new Vl.K)}});t.subscribe(o)})}(function Yu(t=0,e,n=Fa){let r=-1;return null!=e&&((0,le.K)(e)?n=e:r=e),new Hl.y(s=>{let o=function Ko(t){return t instanceof Date&&!isNaN(t)}(t)?+t-n.now():t;o<0&&(o=0);let l=0;return n.schedule(function(){s.closed||(s.next(l++),0<=r?this.schedule(void 0,r):s.complete())},o)})}(2e3)),r.attr("loading/visibility","hidden");const{x:l,y:f}=r.getBBox(),d=[];for(let m=0;m<100;++m){const A=new Aa;A.position(l+m%10*50,f+50*Math.floor(m/10)),A.resize(40,40),A.attr({body:{fill:"white"},label:{text:`EN ${m+1}`,fill:"black"}}),d.push(A)}n.graph.addCells(d),r.embed(d),r.fitEmbeds({padding:{left:10,top:34,right:10,bottom:10}})})),s=new ho,o=new ci({tools:[s]});this.graph.addCell(r),r.findView(this.paper).addTools(o),r.toggle(!0)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=ze.Xpm({type:t,selectors:[["app-editor"]],viewQuery:function(n,r){if(1&n&&ze.Gf(cf,7),2&n){let s;ze.iGM(s=ze.CRH())&&(r.paperRef=s.first)}},decls:13,vars:0,consts:[["id","toolbar"],[3,"click"],["paper",""]],template:function(n,r){1&n&&(ze.TgZ(0,"div",0)(1,"button",1),ze.NdJ("click",function(){return r.logJSON()}),ze._uU(2,"Log JSON"),ze.qZA(),ze.TgZ(3,"button",1),ze.NdJ("click",function(){return r.addNode()}),ze._uU(4,"Add Node"),ze.qZA(),ze.TgZ(5,"button",1),ze.NdJ("click",function(){return r.addGroup()}),ze._uU(6,"Add Group"),ze.qZA(),ze.TgZ(7,"button",1),ze.NdJ("click",function(){return r.addCollapse()}),ze._uU(8,"Add Collapse"),ze.qZA(),ze.TgZ(9,"button",1),ze.NdJ("click",function(){return r.addLazyLoadCollapse()}),ze._uU(10,"Add Lazy Load Collapse"),ze.qZA()(),ze._UZ(11,"div",null,2))},styles:["#toolbar[_ngcontent-%COMP%]{position:absolute;top:32px;left:32px;z-index:100;display:flex;height:24px}#toolbar[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:not(:last-child){margin-right:8px}"]}),t})();const Xe=De.define("basic.Generic",{attrs:{".":{fill:"#ffffff",stroke:"none"}}}),Ql=Xe.define("basic.Rect",{attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:100,height:60},text:{fill:"#000000",text:"","font-size":14,"ref-x":.5,"ref-y":.5,"text-anchor":"middle","y-alignment":"middle","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><rect/></g><text/></g>'}),ff=Jn.extend({presentationAttributes:Jn.addPresentationAttributes({attrs:["SCALE"]}),confirmUpdate:function(){var t=Jn.prototype.confirmUpdate.apply(this,arguments);return this.hasFlag(t,"SCALE")&&(this.resize(),t=this.removeFlag(t,"SCALE")),t}}),hf=Xe.define("basic.Text",{attrs:{text:{"font-size":18,fill:"#000000"}}},{markup:'<g class="rotatable"><g class="scalable"><text/></g></g>'}),Fu=Xe.define("basic.Circle",{size:{width:60,height:60},attrs:{circle:{fill:"#ffffff",stroke:"#000000",r:30,cx:30,cy:30},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-y":.5,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><circle/></g><text/></g>'}),Os=Xe.define("basic.Ellipse",{size:{width:60,height:40},attrs:{ellipse:{fill:"#ffffff",stroke:"#000000",rx:30,ry:20,cx:30,cy:20},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-y":.5,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><ellipse/></g><text/></g>'}),ti=Xe.define("basic.Polygon",{size:{width:60,height:40},attrs:{polygon:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><polygon/></g><text/></g>'}),Vu=Xe.define("basic.Polyline",{size:{width:60,height:40},attrs:{polyline:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><polyline/></g><text/></g>'}),df=Xe.define("basic.Image",{attrs:{text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><image/></g><text/></g>'}),qo=Xe.define("basic.Path",{size:{width:60,height:60},attrs:{path:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle",ref:"path","ref-x":.5,"ref-dy":10,fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><path/></g><text/></g>'}),gf=qo.define("basic.Rhombus",{attrs:{path:{d:"M 30 0 L 60 30 30 60 0 30 z"},text:{"ref-y":.5,"ref-dy":null,"y-alignment":"middle"}}}),$o=qs.test("svgforeignobject"),po=Xe.define("basic.TextBlock",{attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:80,height:100},text:{fill:"#000000","font-size":14,"font-family":"Arial, helvetica, sans-serif"},".content":{text:"","ref-x":.5,"ref-y":.5,"y-alignment":"middle","x-alignment":"middle"}},content:""},{markup:['<g class="rotatable">','<g class="scalable"><rect/></g>',$o?'<foreignObject class="fobj"><body xmlns="http://www.w3.org/1999/xhtml"><div class="content"/></body></foreignObject>':'<text class="content"/>',"</g>"].join(""),initialize:function(){this.listenTo(this,"change:size",this.updateSize),this.listenTo(this,"change:content",this.updateContent),this.updateSize(this,this.get("size")),this.updateContent(this,this.get("content")),Xe.prototype.initialize.apply(this,arguments)},updateSize:function(t,e){this.attr({".fobj":R({},e),div:{style:R({},e)}})},updateContent:function(t,e){this.attr($o?{".content":{html:La(e)}}:{".content":{text:e}})},setForeignObjectSize:function(){this.updateSize.apply(this,arguments)},setDivContent:function(){this.updateContent.apply(this,arguments)}}),ql=Jn.extend({presentationAttributes:$o?Jn.prototype.presentationAttributes:Jn.addPresentationAttributes({content:["CONTENT"],size:["CONTENT"]}),initFlag:["RENDER","CONTENT"],confirmUpdate:function(){var t=Jn.prototype.confirmUpdate.apply(this,arguments);return this.hasFlag(t,"CONTENT")&&(this.updateContent(this.model),t=this.removeFlag(t,"CONTENT")),t},update:function(t,e){var n=this.model;if($o)Jn.prototype.update.call(this,n,e);else{var r=mn(e||n.get("attrs"),".content");Jn.prototype.update.call(this,n,r),(!e||fr(e,".content"))&&this.updateContent(n,e)}},updateContent:function(t,e){var n=zn({},(e||t.get("attrs"))[".content"]);n=mn(n,"text");var r=fs(t.get("content"),t.get("size"),n,{svgDocument:this.paper.svg}),s=Us({},".content",n,"/");s[".content"].text=r,Jn.prototype.update.call(this,t,s)}}),tu=Xe.define("devs.Model",{inPorts:[],outPorts:[],size:{width:80,height:80},attrs:{".":{magnet:!1},".label":{text:"Model","ref-x":.5,"ref-y":10,"font-size":18,"text-anchor":"middle",fill:"#000"},".body":{"ref-width":"100%","ref-height":"100%",stroke:"#000"}},ports:{groups:{in:{position:{name:"left"},attrs:{".port-label":{fill:"#000"},".port-body":{fill:"#fff",stroke:"#000",r:10,magnet:!0}},label:{position:{name:"left",args:{y:10}}}},out:{position:{name:"right"},attrs:{".port-label":{fill:"#000"},".port-body":{fill:"#fff",stroke:"#000",r:10,magnet:!0}},label:{position:{name:"right",args:{y:10}}}}}}},{markup:'<g class="rotatable"><rect class="body"/><text class="label"/></g>',portMarkup:'<circle class="port-body"/>',portLabelMarkup:'<text class="port-label"/>',initialize:function(){Xe.prototype.initialize.apply(this,arguments),this.on("change:inPorts change:outPorts",this.updatePortItems,this),this.updatePortItems()},updatePortItems:function(t,e,n){var r=ct(this.get("inPorts")),s=Hs(ct(this.get("outPorts")),r),o=this.createPortItems("in",r),l=this.createPortItems("out",s);this.prop("ports/items",o.concat(l),R({rewrite:!0},n))},createPortItem:function(t,e){return{id:e,group:t,attrs:{".port-label":{text:e}}}},createPortItems:function(t,e){return te(e).map(this.createPortItem.bind(this,t))},_addGroupPort:function(t,e,n){var r=this.get(e);return this.set(e,Array.isArray(r)?r.concat(t):[t],n)},addOutPort:function(t,e){return this._addGroupPort(t,"outPorts",e)},addInPort:function(t,e){return this._addGroupPort(t,"inPorts",e)},_removeGroupPort:function(t,e,n){return this.set(e,hn(this.get(e),t),n)},removeOutPort:function(t,e){return this._removeGroupPort(t,"outPorts",e)},removeInPort:function(t,e){return this._removeGroupPort(t,"inPorts",e)},_changeGroup:function(t,e,n){return this.prop("ports/groups/"+t,Fe(e)?e:{},n)},changeInGroup:function(t,e){return this._changeGroup("in",t,e)},changeOutGroup:function(t,e){return this._changeGroup("out",t,e)}}),pf=tu.define("devs.Atomic",{size:{width:80,height:80},attrs:{".label":{text:"Atomic"}}}),vf=tu.define("devs.Coupled",{size:{width:200,height:300},attrs:{".label":{text:"Coupled"}}}),mf=Yn.define("devs.Link",{attrs:{".connection":{"stroke-width":2}}}),eu=Xe.define("logic.Gate",{size:{width:80,height:40},attrs:{".":{magnet:!1},".body":{width:100,height:50},circle:{r:7,stroke:"black",fill:"transparent","stroke-width":2}}},{operation:function(){return!0}}),nu=eu.define("logic.IO",{size:{width:60,height:30},attrs:{".body":{fill:"white",stroke:"black","stroke-width":2},".wire":{ref:".body","ref-y":.5,stroke:"black"},text:{fill:"black",ref:".body","ref-x":.5,"ref-y":.5,"y-alignment":"middle","text-anchor":"middle","font-weight":"bold","font-variant":"small-caps","text-transform":"capitalize","font-size":"14px"}}},{markup:'<g class="rotatable"><g class="scalable"><rect class="body"/></g><path class="wire"/><circle/><text/></g>'}),$l=nu.define("logic.Input",{attrs:{".wire":{"ref-dx":0,d:"M 0 0 L 23 0"},circle:{ref:".body","ref-dx":30,"ref-y":.5,magnet:!0,class:"output",port:"out"},text:{text:"input"}}}),If=nu.define("logic.Output",{attrs:{".wire":{"ref-x":0,d:"M 0 0 L -23 0"},circle:{ref:".body","ref-x":-30,"ref-y":.5,magnet:"passive",class:"input",port:"in"},text:{text:"output"}}}),vo=eu.define("logic.Gate11",{attrs:{".input":{ref:".body","ref-x":-2,"ref-y":.5,magnet:"passive",port:"in"},".output":{ref:".body","ref-dx":2,"ref-y":.5,magnet:!0,port:"out"}}},{markup:'<g class="rotatable"><g class="scalable"><image class="body"/></g><circle class="input"/><circle class="output"/></g>'}),aa=eu.define("logic.Gate21",{attrs:{".input1":{ref:".body","ref-x":-2,"ref-y":.3,magnet:"passive",port:"in1"},".input2":{ref:".body","ref-x":-2,"ref-y":.7,magnet:"passive",port:"in2"},".output":{ref:".body","ref-dx":2,"ref-y":.5,magnet:!0,port:"out"}}},{markup:'<g class="rotatable"><g class="scalable"><image class="body"/></g><circle class="input input1"/><circle  class="input input2"/><circle class="output"/></g>'}),mo=vo.define("logic.Repeater",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PVCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjgiCiAgICAgaW5rc2NhcGU6Y3g9Ijg0LjY4NTM1MiIKICAgICBpbmtzY2FwZTpjeT0iMTUuMjg4NjI4IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzIuMTU2OTEsMjUgTCA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAyOS4wNDM0NzgsMjUgTCA1LjA0MzQ3ODEsMjUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgZD0iTSAyOC45Njg3NSwyLjU5Mzc1IEwgMjguOTY4NzUsNSBMIDI4Ljk2ODc1LDQ1IEwgMjguOTY4NzUsNDcuNDA2MjUgTCAzMS4xMjUsNDYuMzQzNzUgTCA3Mi4xNTYyNSwyNi4zNDM3NSBMIDcyLjE1NjI1LDIzLjY1NjI1IEwgMzEuMTI1LDMuNjU2MjUgTCAyOC45Njg3NSwyLjU5Mzc1IHogTSAzMS45Njg3NSw3LjQwNjI1IEwgNjguMDkzNzUsMjUgTCAzMS45Njg3NSw0Mi41OTM3NSBMIDMxLjk2ODc1LDcuNDA2MjUgeiIKICAgICAgIGlkPSJwYXRoMjYzOCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2NjY2NjY2NjYyIgLz4KICA8L2c+Cjwvc3ZnPgo="}}},{operation:function(t){return t}}),Xu=vo.define("logic.Not",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PVCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjgiCiAgICAgaW5rc2NhcGU6Y3g9Ijg0LjY4NTM1MiIKICAgICBpbmtzY2FwZTpjeT0iMTUuMjg4NjI4IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzkuMTU2OTEsMjUgTCA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAyOS4wNDM0NzgsMjUgTCA1LjA0MzQ3ODEsMjUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgZD0iTSAyOC45Njg3NSwyLjU5Mzc1IEwgMjguOTY4NzUsNSBMIDI4Ljk2ODc1LDQ1IEwgMjguOTY4NzUsNDcuNDA2MjUgTCAzMS4xMjUsNDYuMzQzNzUgTCA3Mi4xNTYyNSwyNi4zNDM3NSBMIDcyLjE1NjI1LDIzLjY1NjI1IEwgMzEuMTI1LDMuNjU2MjUgTCAyOC45Njg3NSwyLjU5Mzc1IHogTSAzMS45Njg3NSw3LjQwNjI1IEwgNjguMDkzNzUsMjUgTCAzMS45Njg3NSw0Mi41OTM3NSBMIDMxLjk2ODc1LDcuNDA2MjUgeiIKICAgICAgIGlkPSJwYXRoMjYzOCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2NjY2NjY2NjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDI2NzEiCiAgICAgICBzb2RpcG9kaTpjeD0iNzYiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA4MCwyNSBBIDQsNCAwIDEgMSA3MiwyNSBBIDQsNCAwIDEgMSA4MCwyNSB6IgogICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEsMCkiIC8+CiAgPC9nPgo8L3N2Zz4K"}}},{operation:function(t){return!t}}),tc=aa.define("logic.Or",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik9SIEFOU0kuc3ZnIgogICBpbmtzY2FwZTpvdXRwdXRfZXh0ZW5zaW9uPSJvcmcuaW5rc2NhcGUub3V0cHV0LnN2Zy5pbmtzY2FwZSI+CiAgPGRlZnMKICAgICBpZD0iZGVmczQiPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjUwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjI1IDogMTAgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjcxNCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iMSA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMC41IDogMC4zMzMzMzMzMyA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyODA2IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyODE5IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjM3Mi4wNDcyNCA6IDM1MC43ODczOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI3NDQuMDk0NDggOiA1MjYuMTgxMDkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzc3IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49Ijc1IDogNDAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iMTUwIDogNjAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDYwIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTMyNzUiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNTAgOiAzMy4zMzMzMzMgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iMTAwIDogNTAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDUwIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTU1MzMiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzIgOiAyMS4zMzMzMzMgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNjQgOiAzMiA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMzIgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjU1NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDE2LjY2NjY2NyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDI1IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAyNSA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogIDwvZGVmcz4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9ImJhc2UiCiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IgogICAgIGJvcmRlcm9wYWNpdHk9IjEuMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6em9vbT0iNCIKICAgICBpbmtzY2FwZTpjeD0iMTEzLjAwMDM5IgogICAgIGlua3NjYXBlOmN5PSIxMi44OTM3MzEiCiAgICAgaW5rc2NhcGU6ZG9jdW1lbnQtdW5pdHM9InB4IgogICAgIGlua3NjYXBlOmN1cnJlbnQtbGF5ZXI9ImcyNTYwIgogICAgIHNob3dncmlkPSJmYWxzZSIKICAgICBpbmtzY2FwZTpncmlkLWJib3g9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1wb2ludHM9InRydWUiCiAgICAgZ3JpZHRvbGVyYW5jZT0iMTAwMDAiCiAgICAgaW5rc2NhcGU6d2luZG93LXdpZHRoPSIxMzk5IgogICAgIGlua3NjYXBlOndpbmRvdy1oZWlnaHQ9Ijg3NCIKICAgICBpbmtzY2FwZTp3aW5kb3cteD0iMzciCiAgICAgaW5rc2NhcGU6d2luZG93LXk9Ii00IgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Im0gNzAsMjUgYyAyMCwwIDI1LDAgMjUsMCIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMSwxNSA1LDE1IgogICAgICAgaWQ9InBhdGgzMDYxIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzIsMzUgNSwzNSIKICAgICAgIGlkPSJwYXRoMzk0NCIgLz4KICAgIDxnCiAgICAgICBpZD0iZzI1NjAiCiAgICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICAgIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI2LjUsLTM5LjUpIj4KICAgICAgPHBhdGgKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjQwNjI1LDQ0LjUgTCAtMC40MDYyNSw0Ni45Mzc1IEMgLTAuNDA2MjUsNDYuOTM3NSA1LjI1LDUzLjkzNzU0OSA1LjI1LDY0LjUgQyA1LjI1LDc1LjA2MjQ1MSAtMC40MDYyNSw4Mi4wNjI1IC0wLjQwNjI1LDgyLjA2MjUgTCAtMi40MDYyNSw4NC41IEwgMC43NSw4NC41IEwgMTQuNzUsODQuNSBDIDE3LjE1ODA3Niw4NC41MDAwMDEgMjIuNDM5Njk5LDg0LjUyNDUxNCAyOC4zNzUsODIuMDkzNzUgQyAzNC4zMTAzMDEsNzkuNjYyOTg2IDQwLjkxMTUzNiw3NC43NTA0ODQgNDYuMDYyNSw2NS4yMTg3NSBMIDQ0Ljc1LDY0LjUgTCA0Ni4wNjI1LDYzLjc4MTI1IEMgMzUuNzU5Mzg3LDQ0LjcxNTU5IDE5LjUwNjU3NCw0NC41IDE0Ljc1LDQ0LjUgTCAwLjc1LDQ0LjUgTCAtMi40MDYyNSw0NC41IHogTSAzLjQ2ODc1LDQ3LjUgTCAxNC43NSw0Ny41IEMgMTkuNDM0MTczLDQ3LjUgMzMuMDM2ODUsNDcuMzY5NzkzIDQyLjcxODc1LDY0LjUgQyAzNy45NTE5NjQsNzIuOTI5MDc1IDMyLjE5NzQ2OSw3Ny4xODM5MSAyNyw3OS4zMTI1IEMgMjEuNjM5MzM5LDgxLjUwNzkyNCAxNy4xNTgwNzUsODEuNTAwMDAxIDE0Ljc1LDgxLjUgTCAzLjUsODEuNSBDIDUuMzczNTg4NCw3OC4zOTE1NjYgOC4yNSw3Mi40NTA2NSA4LjI1LDY0LjUgQyA4LjI1LDU2LjUyNjY0NiA1LjM0MTQ2ODYsNTAuNTk5ODE1IDMuNDY4NzUsNDcuNSB6IgogICAgICAgICBpZD0icGF0aDQ5NzMiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NzY2NjY3NjY2NjY2NjY2NzY2NzYyIgLz4KICAgIDwvZz4KICA8L2c+Cjwvc3ZnPgo="}}},{operation:function(t,e){return t||e}}),ec=aa.define("logic.And",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IkFORCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgPC9kZWZzPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0iYmFzZSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMS4wIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwLjAiCiAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTp6b29tPSI4IgogICAgIGlua3NjYXBlOmN4PSI1Ni42OTgzNDgiCiAgICAgaW5rc2NhcGU6Y3k9IjI1LjMyNjg5OSIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJtIDcwLDI1IGMgMjAsMCAyNSwwIDI1LDAiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEsMTUgNSwxNSIKICAgICAgIGlkPSJwYXRoMzA2MSIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjk5OTk5OTg4O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMyLDM1IDUsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZvbnQtc2l6ZTptZWRpdW07Zm9udC1zdHlsZTpub3JtYWw7Zm9udC12YXJpYW50Om5vcm1hbDtmb250LXdlaWdodDpub3JtYWw7Zm9udC1zdHJldGNoOm5vcm1hbDt0ZXh0LWluZGVudDowO3RleHQtYWxpZ246c3RhcnQ7dGV4dC1kZWNvcmF0aW9uOm5vbmU7bGluZS1oZWlnaHQ6bm9ybWFsO2xldHRlci1zcGFjaW5nOm5vcm1hbDt3b3JkLXNwYWNpbmc6bm9ybWFsO3RleHQtdHJhbnNmb3JtOm5vbmU7ZGlyZWN0aW9uOmx0cjtibG9jay1wcm9ncmVzc2lvbjp0Yjt3cml0aW5nLW1vZGU6bHItdGI7dGV4dC1hbmNob3I6c3RhcnQ7ZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDozO21hcmtlcjpub25lO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGU7Zm9udC1mYW1pbHk6Qml0c3RyZWFtIFZlcmEgU2FuczstaW5rc2NhcGUtZm9udC1zcGVjaWZpY2F0aW9uOkJpdHN0cmVhbSBWZXJhIFNhbnMiCiAgICAgICBkPSJNIDMwLDUgTCAzMCw2LjQyODU3MTQgTCAzMCw0My41NzE0MjkgTCAzMCw0NSBMIDMxLjQyODU3MSw0NSBMIDUwLjQ3NjE5LDQ1IEMgNjEuNzQ0MDk4LDQ1IDcwLjQ3NjE5LDM1Ljk5OTk1NSA3MC40NzYxOSwyNSBDIDcwLjQ3NjE5LDE0LjAwMDA0NSA2MS43NDQwOTksNS4wMDAwMDAyIDUwLjQ3NjE5LDUgQyA1MC40NzYxOSw1IDUwLjQ3NjE5LDUgMzEuNDI4NTcxLDUgTCAzMCw1IHogTSAzMi44NTcxNDMsNy44NTcxNDI5IEMgNDAuODM0MjY0LDcuODU3MTQyOSA0NS45MTgzNjgsNy44NTcxNDI5IDQ4LjA5NTIzOCw3Ljg1NzE0MjkgQyA0OS4yODU3MTQsNy44NTcxNDI5IDQ5Ljg4MDk1Miw3Ljg1NzE0MjkgNTAuMTc4NTcxLDcuODU3MTQyOSBDIDUwLjMyNzM4MSw3Ljg1NzE0MjkgNTAuNDA5MjI3LDcuODU3MTQyOSA1MC40NDY0MjksNy44NTcxNDI5IEMgNTAuNDY1MDI5LDcuODU3MTQyOSA1MC40NzE1NDMsNy44NTcxNDI5IDUwLjQ3NjE5LDcuODU3MTQyOSBDIDYwLjIzNjg1Myw3Ljg1NzE0MyA2Ny4xNDI4NTcsMTUuNDk3MDk4IDY3LjE0Mjg1NywyNSBDIDY3LjE0Mjg1NywzNC41MDI5MDIgNTkuNzYwNjYyLDQyLjE0Mjg1NyA1MCw0Mi4xNDI4NTcgTCAzMi44NTcxNDMsNDIuMTQyODU3IEwgMzIuODU3MTQzLDcuODU3MTQyOSB6IgogICAgICAgaWQ9InBhdGgyODg0IgogICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjY2NjY2NzY2NjY3Nzc3NzY2NjIiAvPgogIDwvZz4KPC9zdmc+Cg=="}}},{operation:function(t,e){return t&&e}}),ru=aa.define("logic.Nor",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PUiBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjEiCiAgICAgaW5rc2NhcGU6Y3g9Ijc4LjY3NzY0NCIKICAgICBpbmtzY2FwZTpjeT0iMjIuMTAyMzQ0IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjM3IgogICAgIGlua3NjYXBlOndpbmRvdy15PSItNCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDc5LDI1IEMgOTksMjUgOTUsMjUgOTUsMjUiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEsMTUgNSwxNSIKICAgICAgIGlkPSJwYXRoMzA2MSIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjk5OTk5OTg4O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMyLDM1IDUsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8ZwogICAgICAgaWQ9ImcyNTYwIgogICAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNi41LC0zOS41KSI+CiAgICAgIDxwYXRoCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi40MDYyNSw0NC41IEwgLTAuNDA2MjUsNDYuOTM3NSBDIC0wLjQwNjI1LDQ2LjkzNzUgNS4yNSw1My45Mzc1NDkgNS4yNSw2NC41IEMgNS4yNSw3NS4wNjI0NTEgLTAuNDA2MjUsODIuMDYyNSAtMC40MDYyNSw4Mi4wNjI1IEwgLTIuNDA2MjUsODQuNSBMIDAuNzUsODQuNSBMIDE0Ljc1LDg0LjUgQyAxNy4xNTgwNzYsODQuNTAwMDAxIDIyLjQzOTY5OSw4NC41MjQ1MTQgMjguMzc1LDgyLjA5Mzc1IEMgMzQuMzEwMzAxLDc5LjY2Mjk4NiA0MC45MTE1MzYsNzQuNzUwNDg0IDQ2LjA2MjUsNjUuMjE4NzUgTCA0NC43NSw2NC41IEwgNDYuMDYyNSw2My43ODEyNSBDIDM1Ljc1OTM4Nyw0NC43MTU1OSAxOS41MDY1NzQsNDQuNSAxNC43NSw0NC41IEwgMC43NSw0NC41IEwgLTIuNDA2MjUsNDQuNSB6IE0gMy40Njg3NSw0Ny41IEwgMTQuNzUsNDcuNSBDIDE5LjQzNDE3Myw0Ny41IDMzLjAzNjg1LDQ3LjM2OTc5MyA0Mi43MTg3NSw2NC41IEMgMzcuOTUxOTY0LDcyLjkyOTA3NSAzMi4xOTc0NjksNzcuMTgzOTEgMjcsNzkuMzEyNSBDIDIxLjYzOTMzOSw4MS41MDc5MjQgMTcuMTU4MDc1LDgxLjUwMDAwMSAxNC43NSw4MS41IEwgMy41LDgxLjUgQyA1LjM3MzU4ODQsNzguMzkxNTY2IDguMjUsNzIuNDUwNjUgOC4yNSw2NC41IEMgOC4yNSw1Ni41MjY2NDYgNS4zNDE0Njg2LDUwLjU5OTgxNSAzLjQ2ODc1LDQ3LjUgeiIKICAgICAgICAgaWQ9InBhdGg0OTczIgogICAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjc2NjY2NzY2NjY2NjY2Njc2Njc2MiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIHNvZGlwb2RpOnR5cGU9ImFyYyIKICAgICAgICAgc3R5bGU9ImZpbGw6bm9uZTtmaWxsLW9wYWNpdHk6MTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgICBpZD0icGF0aDI2MDQiCiAgICAgICAgIHNvZGlwb2RpOmN4PSI3NSIKICAgICAgICAgc29kaXBvZGk6Y3k9IjI1IgogICAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgICAgc29kaXBvZGk6cnk9IjQiCiAgICAgICAgIGQ9Ik0gNzksMjUgQSA0LDQgMCAxIDEgNzEsMjUgQSA0LDQgMCAxIDEgNzksMjUgeiIKICAgICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI2LjUsMzkuNSkiIC8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K"}}},{operation:function(t,e){return!(t||e)}}),nc=aa.define("logic.Nand",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5BTkQgQU5TSS5zdmciCiAgIGlua3NjYXBlOm91dHB1dF9leHRlbnNpb249Im9yZy5pbmtzY2FwZS5vdXRwdXQuc3ZnLmlua3NjYXBlIj4KICA8ZGVmcwogICAgIGlkPSJkZWZzNCI+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxMCA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzE0IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIwLjUgOiAwLjMzMzMzMzMzIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MDYiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MTkiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzcyLjA0NzI0IDogMzUwLjc4NzM5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9Ijc0NC4wOTQ0OCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTI2LjE4MTA5IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3NzciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNzUgOiA0MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxNTAgOiA2MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNjAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMzI3NSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI1MCA6IDMzLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxMDAgOiA1MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlNTUzMyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzMiA6IDIxLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI2NCA6IDMyIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAzMiA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogIDwvZGVmcz4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9ImJhc2UiCiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IgogICAgIGJvcmRlcm9wYWNpdHk9IjEuMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6em9vbT0iMTYiCiAgICAgaW5rc2NhcGU6Y3g9Ijc4LjI4MzMwNyIKICAgICBpbmtzY2FwZTpjeT0iMTYuNDQyODQzIgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzksMjUgQyA5MS44LDI1IDk1LDI1IDk1LDI1IgogICAgICAgaWQ9InBhdGgzMDU5IgogICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMxLDE1IDUsMTUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk4ODtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMiwzNSA1LDM1IgogICAgICAgaWQ9InBhdGgzOTQ0IiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmb250LXNpemU6bWVkaXVtO2ZvbnQtc3R5bGU6bm9ybWFsO2ZvbnQtdmFyaWFudDpub3JtYWw7Zm9udC13ZWlnaHQ6bm9ybWFsO2ZvbnQtc3RyZXRjaDpub3JtYWw7dGV4dC1pbmRlbnQ6MDt0ZXh0LWFsaWduOnN0YXJ0O3RleHQtZGVjb3JhdGlvbjpub25lO2xpbmUtaGVpZ2h0Om5vcm1hbDtsZXR0ZXItc3BhY2luZzpub3JtYWw7d29yZC1zcGFjaW5nOm5vcm1hbDt0ZXh0LXRyYW5zZm9ybTpub25lO2RpcmVjdGlvbjpsdHI7YmxvY2stcHJvZ3Jlc3Npb246dGI7d3JpdGluZy1tb2RlOmxyLXRiO3RleHQtYW5jaG9yOnN0YXJ0O2ZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MzttYXJrZXI6bm9uZTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlO2ZvbnQtZmFtaWx5OkJpdHN0cmVhbSBWZXJhIFNhbnM7LWlua3NjYXBlLWZvbnQtc3BlY2lmaWNhdGlvbjpCaXRzdHJlYW0gVmVyYSBTYW5zIgogICAgICAgZD0iTSAzMCw1IEwgMzAsNi40Mjg1NzE0IEwgMzAsNDMuNTcxNDI5IEwgMzAsNDUgTCAzMS40Mjg1NzEsNDUgTCA1MC40NzYxOSw0NSBDIDYxLjc0NDA5OCw0NSA3MC40NzYxOSwzNS45OTk5NTUgNzAuNDc2MTksMjUgQyA3MC40NzYxOSwxNC4wMDAwNDUgNjEuNzQ0MDk5LDUuMDAwMDAwMiA1MC40NzYxOSw1IEMgNTAuNDc2MTksNSA1MC40NzYxOSw1IDMxLjQyODU3MSw1IEwgMzAsNSB6IE0gMzIuODU3MTQzLDcuODU3MTQyOSBDIDQwLjgzNDI2NCw3Ljg1NzE0MjkgNDUuOTE4MzY4LDcuODU3MTQyOSA0OC4wOTUyMzgsNy44NTcxNDI5IEMgNDkuMjg1NzE0LDcuODU3MTQyOSA0OS44ODA5NTIsNy44NTcxNDI5IDUwLjE3ODU3MSw3Ljg1NzE0MjkgQyA1MC4zMjczODEsNy44NTcxNDI5IDUwLjQwOTIyNyw3Ljg1NzE0MjkgNTAuNDQ2NDI5LDcuODU3MTQyOSBDIDUwLjQ2NTAyOSw3Ljg1NzE0MjkgNTAuNDcxNTQzLDcuODU3MTQyOSA1MC40NzYxOSw3Ljg1NzE0MjkgQyA2MC4yMzY4NTMsNy44NTcxNDMgNjcuMTQyODU3LDE1LjQ5NzA5OCA2Ny4xNDI4NTcsMjUgQyA2Ny4xNDI4NTcsMzQuNTAyOTAyIDU5Ljc2MDY2Miw0Mi4xNDI4NTcgNTAsNDIuMTQyODU3IEwgMzIuODU3MTQzLDQyLjE0Mjg1NyBMIDMyLjg1NzE0Myw3Ljg1NzE0MjkgeiIKICAgICAgIGlkPSJwYXRoMjg4NCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2Njc2NjY2Nzc3Nzc2NjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDQwMDgiCiAgICAgICBzb2RpcG9kaTpjeD0iNzUiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA3OSwyNSBBIDQsNCAwIDEgMSA3MSwyNSBBIDQsNCAwIDEgMSA3OSwyNSB6IiAvPgogIDwvZz4KPC9zdmc+Cg=="}}},{operation:function(t,e){return!(t&&e)}}),Is=aa.define("logic.Xor",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IlhPUiBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjUuNjU2ODU0MiIKICAgICBpbmtzY2FwZTpjeD0iMjUuOTM4MTE2IgogICAgIGlua3NjYXBlOmN5PSIxNy4yMzAwNSIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJtIDcwLDI1IGMgMjAsMCAyNSwwIDI1LDAiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzAuMzg1NzE3LDE1IEwgNC45OTk5OTk4LDE1IgogICAgICAgaWQ9InBhdGgzMDYxIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5NzY7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEuMzYyMDkxLDM1IEwgNC45OTk5OTk4LDM1IgogICAgICAgaWQ9InBhdGgzOTQ0IiAvPgogICAgPGcKICAgICAgIGlkPSJnMjU2MCIKICAgICAgIGlua3NjYXBlOmxhYmVsPSJMYXllciAxIgogICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjYuNSwtMzkuNSkiPgogICAgICA8cGF0aAogICAgICAgICBpZD0icGF0aDM1MTYiCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi4yNSw4MS41MDAwMDUgQyAtMy44NDczNzQsODQuMTQ0NDA1IC00LjUsODQuNTAwMDA1IC00LjUsODQuNTAwMDA1IEwgLTguMTU2MjUsODQuNTAwMDA1IEwgLTYuMTU2MjUsODIuMDYyNTA1IEMgLTYuMTU2MjUsODIuMDYyNTA1IC0wLjUsNzUuMDYyNDUxIC0wLjUsNjQuNSBDIC0wLjUsNTMuOTM3NTQ5IC02LjE1NjI1LDQ2LjkzNzUgLTYuMTU2MjUsNDYuOTM3NSBMIC04LjE1NjI1LDQ0LjUgTCAtNC41LDQ0LjUgQyAtMy43MTg3NSw0NS40Mzc1IC0zLjA3ODEyNSw0Ni4xNTYyNSAtMi4yODEyNSw0Ny41IEMgLTAuNDA4NTMxLDUwLjU5OTgxNSAyLjUsNTYuNTI2NjQ2IDIuNSw2NC41IEMgMi41LDcyLjQ1MDY1IC0wLjM5NjY5Nyw3OC4zNzk0MjUgLTIuMjUsODEuNTAwMDA1IHoiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY3NjY2Njc2MiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi40MDYyNSw0NC41IEwgLTAuNDA2MjUsNDYuOTM3NSBDIC0wLjQwNjI1LDQ2LjkzNzUgNS4yNSw1My45Mzc1NDkgNS4yNSw2NC41IEMgNS4yNSw3NS4wNjI0NTEgLTAuNDA2MjUsODIuMDYyNSAtMC40MDYyNSw4Mi4wNjI1IEwgLTIuNDA2MjUsODQuNSBMIDAuNzUsODQuNSBMIDE0Ljc1LDg0LjUgQyAxNy4xNTgwNzYsODQuNTAwMDAxIDIyLjQzOTY5OSw4NC41MjQ1MTQgMjguMzc1LDgyLjA5Mzc1IEMgMzQuMzEwMzAxLDc5LjY2Mjk4NiA0MC45MTE1MzYsNzQuNzUwNDg0IDQ2LjA2MjUsNjUuMjE4NzUgTCA0NC43NSw2NC41IEwgNDYuMDYyNSw2My43ODEyNSBDIDM1Ljc1OTM4Nyw0NC43MTU1OSAxOS41MDY1NzQsNDQuNSAxNC43NSw0NC41IEwgMC43NSw0NC41IEwgLTIuNDA2MjUsNDQuNSB6IE0gMy40Njg3NSw0Ny41IEwgMTQuNzUsNDcuNSBDIDE5LjQzNDE3Myw0Ny41IDMzLjAzNjg1LDQ3LjM2OTc5MyA0Mi43MTg3NSw2NC41IEMgMzcuOTUxOTY0LDcyLjkyOTA3NSAzMi4xOTc0NjksNzcuMTgzOTEgMjcsNzkuMzEyNSBDIDIxLjYzOTMzOSw4MS41MDc5MjQgMTcuMTU4MDc1LDgxLjUwMDAwMSAxNC43NSw4MS41IEwgMy41LDgxLjUgQyA1LjM3MzU4ODQsNzguMzkxNTY2IDguMjUsNzIuNDUwNjUgOC4yNSw2NC41IEMgOC4yNSw1Ni41MjY2NDYgNS4zNDE0Njg2LDUwLjU5OTgxNSAzLjQ2ODc1LDQ3LjUgeiIKICAgICAgICAgaWQ9InBhdGg0OTczIgogICAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjc2NjY2NzY2NjY2NjY2Njc2Njc2MiIC8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K"}}},{operation:function(t,e){return(!t||e)&&(t||!e)}}),xa=aa.define("logic.Xnor",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IlhOT1IgQU5TSS5zdmciCiAgIGlua3NjYXBlOm91dHB1dF9leHRlbnNpb249Im9yZy5pbmtzY2FwZS5vdXRwdXQuc3ZnLmlua3NjYXBlIj4KICA8ZGVmcwogICAgIGlkPSJkZWZzNCI+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxMCA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzE0IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIwLjUgOiAwLjMzMzMzMzMzIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MDYiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MTkiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzcyLjA0NzI0IDogMzUwLjc4NzM5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9Ijc0NC4wOTQ0OCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTI2LjE4MTA5IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3NzciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNzUgOiA0MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxNTAgOiA2MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNjAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMzI3NSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI1MCA6IDMzLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxMDAgOiA1MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlNTUzMyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzMiA6IDIxLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI2NCA6IDMyIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAzMiA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNTU3IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjI1IDogMTYuNjY2NjY3IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjUwIDogMjUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDI1IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgPC9kZWZzPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0iYmFzZSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMS4wIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwLjAiCiAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTp6b29tPSI0IgogICAgIGlua3NjYXBlOmN4PSI5NS43MjM2NiIKICAgICBpbmtzY2FwZTpjeT0iLTI2Ljc3NTAyMyIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyLjAwMDAwMDI0O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDc4LjMzMzMzMiwyNSBDIDkxLjY2NjY2NiwyNSA5NSwyNSA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk4ODtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMC4zODU3MTcsMTUgTCA0Ljk5OTk5OTgsMTUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk3NjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMS4zNjIwOTEsMzUgTCA0Ljk5OTk5OTgsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8ZwogICAgICAgaWQ9ImcyNTYwIgogICAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNi41LC0zOS41KSI+CiAgICAgIDxwYXRoCiAgICAgICAgIGlkPSJwYXRoMzUxNiIKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjI1LDgxLjUwMDAwNSBDIC0zLjg0NzM3NCw4NC4xNDQ0MDUgLTQuNSw4NC41MDAwMDUgLTQuNSw4NC41MDAwMDUgTCAtOC4xNTYyNSw4NC41MDAwMDUgTCAtNi4xNTYyNSw4Mi4wNjI1MDUgQyAtNi4xNTYyNSw4Mi4wNjI1MDUgLTAuNSw3NS4wNjI0NTEgLTAuNSw2NC41IEMgLTAuNSw1My45Mzc1NDkgLTYuMTU2MjUsNDYuOTM3NSAtNi4xNTYyNSw0Ni45Mzc1IEwgLTguMTU2MjUsNDQuNSBMIC00LjUsNDQuNSBDIC0zLjcxODc1LDQ1LjQzNzUgLTMuMDc4MTI1LDQ2LjE1NjI1IC0yLjI4MTI1LDQ3LjUgQyAtMC40MDg1MzEsNTAuNTk5ODE1IDIuNSw1Ni41MjY2NDYgMi41LDY0LjUgQyAyLjUsNzIuNDUwNjUgLTAuMzk2Njk3LDc4LjM3OTQyNSAtMi4yNSw4MS41MDAwMDUgeiIKICAgICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjY2Njc2NjY2NzYyIgLz4KICAgICAgPHBhdGgKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjQwNjI1LDQ0LjUgTCAtMC40MDYyNSw0Ni45Mzc1IEMgLTAuNDA2MjUsNDYuOTM3NSA1LjI1LDUzLjkzNzU0OSA1LjI1LDY0LjUgQyA1LjI1LDc1LjA2MjQ1MSAtMC40MDYyNSw4Mi4wNjI1IC0wLjQwNjI1LDgyLjA2MjUgTCAtMi40MDYyNSw4NC41IEwgMC43NSw4NC41IEwgMTQuNzUsODQuNSBDIDE3LjE1ODA3Niw4NC41MDAwMDEgMjIuNDM5Njk5LDg0LjUyNDUxNCAyOC4zNzUsODIuMDkzNzUgQyAzNC4zMTAzMDEsNzkuNjYyOTg2IDQwLjkxMTUzNiw3NC43NTA0ODQgNDYuMDYyNSw2NS4yMTg3NSBMIDQ0Ljc1LDY0LjUgTCA0Ni4wNjI1LDYzLjc4MTI1IEMgMzUuNzU5Mzg3LDQ0LjcxNTU5IDE5LjUwNjU3NCw0NC41IDE0Ljc1LDQ0LjUgTCAwLjc1LDQ0LjUgTCAtMi40MDYyNSw0NC41IHogTSAzLjQ2ODc1LDQ3LjUgTCAxNC43NSw0Ny41IEMgMTkuNDM0MTczLDQ3LjUgMzMuMDM2ODUsNDcuMzY5NzkzIDQyLjcxODc1LDY0LjUgQyAzNy45NTE5NjQsNzIuOTI5MDc1IDMyLjE5NzQ2OSw3Ny4xODM5MSAyNyw3OS4zMTI1IEMgMjEuNjM5MzM5LDgxLjUwNzkyNCAxNy4xNTgwNzUsODEuNTAwMDAxIDE0Ljc1LDgxLjUgTCAzLjUsODEuNSBDIDUuMzczNTg4NCw3OC4zOTE1NjYgOC4yNSw3Mi40NTA2NSA4LjI1LDY0LjUgQyA4LjI1LDU2LjUyNjY0NiA1LjM0MTQ2ODYsNTAuNTk5ODE1IDMuNDY4NzUsNDcuNSB6IgogICAgICAgICBpZD0icGF0aDQ5NzMiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NzY2NjY3NjY2NjY2NjY2NzY2NzYyIgLz4KICAgIDwvZz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDM1NTEiCiAgICAgICBzb2RpcG9kaTpjeD0iNzUiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA3OSwyNSBBIDQsNCAwIDEgMSA3MSwyNSBBIDQsNCAwIDEgMSA3OSwyNSB6IiAvPgogIDwvZz4KPC9zdmc+Cg=="}}},{operation:function(t,e){return(!t||!e)&&(t||e)}}),Af=Yn.define("logic.Wire",{attrs:{".connection":{"stroke-width":2},".marker-vertex":{r:7}},router:{name:"orthogonal"},connector:{name:"rounded",args:{radius:10}}},{arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<circle class="marker-arrowhead" end="<%= end %>" r="7"/>',"</g>"].join(""),vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<g class="marker-vertex-remove-group">','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>","</g>"].join("")}),rc=Xe.define("chess.KingWhite",{size:{width:42,height:38}},{markup:'<g class="rotatable"><g class="scalable"><g style="fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;"><path      d="M 22.5,11.63 L 22.5,6"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />    <path      d="M 20,8 L 25,8"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />    <path      d="M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25"      style="fill:#ffffff; stroke:#000000; stroke-linecap:butt; stroke-linejoin:miter;" />    <path      d="M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z "      style="fill:#ffffff; stroke:#000000;" />    <path      d="M 11.5,30 C 17,27 27,27 32.5,30"      style="fill:none; stroke:#000000;" />    <path      d="M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5"      style="fill:none; stroke:#000000;" />    <path      d="M 11.5,37 C 17,34 27,34 32.5,37"      style="fill:none; stroke:#000000;" />  </g></g></g>'}),Cf=Xe.define("chess.KingBlack",{size:{width:42,height:38}},{markup:'<g class="rotatable"><g class="scalable"><g style="fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path       d="M 22.5,11.63 L 22.5,6"       style="fill:none; stroke:#000000; stroke-linejoin:miter;"       id="path6570" />    <path       d="M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25"       style="fill:#000000;fill-opacity:1; stroke-linecap:butt; stroke-linejoin:miter;" />    <path       d="M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z "       style="fill:#000000; stroke:#000000;" />    <path       d="M 20,8 L 25,8"       style="fill:none; stroke:#000000; stroke-linejoin:miter;" />    <path       d="M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.51,26.6 L 22.5,24.5 C 20,18 9.906,14 6.997,19.85 C 4.5,25.5 11.85,28.85 11.85,28.85"       style="fill:none; stroke:#ffffff;" />    <path       d="M 11.5,30 C 17,27 27,27 32.5,30 M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5 M 11.5,37 C 17,34 27,34 32.5,37"       style="fill:none; stroke:#ffffff;" />  </g></g></g>'}),yf=Xe.define("chess.QueenWhite",{size:{width:42,height:38}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(-1,-1)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(15.5,-5.5)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(32,-1)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(7,-4.5)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(24,-4)" />    <path      d="M 9,26 C 17.5,24.5 30,24.5 36,26 L 38,14 L 31,25 L 31,11 L 25.5,24.5 L 22.5,9.5 L 19.5,24.5 L 14,10.5 L 14,25 L 7,14 L 9,26 z "      style="stroke-linecap:butt;" />    <path      d="M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z "      style="stroke-linecap:butt;" />    <path      d="M 11.5,30 C 15,29 30,29 33.5,30"      style="fill:none;" />    <path      d="M 12,33.5 C 18,32.5 27,32.5 33,33.5"      style="fill:none;" />  </g></g></g>'}),wf=Xe.define("chess.QueenBlack",{size:{width:42,height:38}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#000000; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <g style="fill:#000000; stroke:none;">      <circle cx="6"    cy="12" r="2.75" />      <circle cx="14"   cy="9"  r="2.75" />      <circle cx="22.5" cy="8"  r="2.75" />      <circle cx="31"   cy="9"  r="2.75" />      <circle cx="39"   cy="12" r="2.75" />    </g>    <path       d="M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z"       style="stroke-linecap:butt; stroke:#000000;" />    <path       d="M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z"       style="stroke-linecap:butt;" />    <path       d="M 11,38.5 A 35,35 1 0 0 34,38.5"       style="fill:none; stroke:#000000; stroke-linecap:butt;" />    <path       d="M 11,29 A 35,35 1 0 1 34,29"       style="fill:none; stroke:#ffffff;" />    <path       d="M 12.5,31.5 L 32.5,31.5"       style="fill:none; stroke:#ffffff;" />    <path       d="M 11.5,34.5 A 35,35 1 0 0 33.5,34.5"       style="fill:none; stroke:#ffffff;" />    <path       d="M 10.5,37.5 A 35,35 1 0 0 34.5,37.5"       style="fill:none; stroke:#ffffff;" />  </g></g></g>'}),bf=Xe.define("chess.RookWhite",{size:{width:32,height:34}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z "      style="stroke-linecap:butt;" />    <path      d="M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z "      style="stroke-linecap:butt;" />    <path      d="M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14"      style="stroke-linecap:butt;" />    <path      d="M 34,14 L 31,17 L 14,17 L 11,14" />    <path      d="M 31,17 L 31,29.5 L 14,29.5 L 14,17"      style="stroke-linecap:butt; stroke-linejoin:miter;" />    <path      d="M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5" />    <path      d="M 11,14 L 34,14"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />  </g></g></g>'}),xf=Xe.define("chess.RookBlack",{size:{width:32,height:34}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#000000; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z "      style="stroke-linecap:butt;" />    <path      d="M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z "      style="stroke-linecap:butt;" />    <path      d="M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z "      style="stroke-linecap:butt;" />    <path      d="M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z "      style="stroke-linecap:butt;stroke-linejoin:miter;" />    <path      d="M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z "      style="stroke-linecap:butt;" />    <path      d="M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z "      style="stroke-linecap:butt;" />    <path      d="M 12,35.5 L 33,35.5 L 33,35.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 13,31.5 L 32,31.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 14,29.5 L 31,29.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 14,16.5 L 31,16.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 11,14 L 34,14"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />  </g></g></g>'}),Nf=Xe.define("chess.BishopWhite",{size:{width:38,height:38}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-rule:evenodd; fill-opacity:1; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:round; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <g style="fill:#ffffff; stroke:#000000; stroke-linecap:butt;">       <path        d="M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z" />      <path        d="M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z" />      <path        d="M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z" />    </g>    <path      d="M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />  </g></g></g>'}),Mf=Xe.define("chess.BishopBlack",{size:{width:38,height:38}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-rule:evenodd; fill-opacity:1; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:round; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <g style="fill:#000000; stroke:#000000; stroke-linecap:butt;">       <path        d="M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z" />      <path        d="M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z" />      <path        d="M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z" />    </g>    <path       d="M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18"       style="fill:none; stroke:#ffffff; stroke-linejoin:miter;" />  </g></g></g>'}),Sf=Xe.define("chess.KnightWhite",{size:{width:38,height:37}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18"      style="fill:#ffffff; stroke:#000000;" />    <path      d="M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10"      style="fill:#ffffff; stroke:#000000;" />    <path      d="M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z"      style="fill:#000000; stroke:#000000;" />    <path      d="M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z"      transform="matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)"      style="fill:#000000; stroke:#000000;" />  </g></g></g>'}),Tf=Xe.define("chess.KnightBlack",{size:{width:38,height:37}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18"      style="fill:#000000; stroke:#000000;" />    <path      d="M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10"      style="fill:#000000; stroke:#000000;" />    <path      d="M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z"      style="fill:#ffffff; stroke:#ffffff;" />    <path      d="M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z"      transform="matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)"      style="fill:#ffffff; stroke:#ffffff;" />    <path      d="M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z "      style="fill:#ffffff; stroke:none;" />  </g></g></g>'}),Df=Xe.define("chess.PawnWhite",{size:{width:28,height:33}},{markup:'<g class="rotatable"><g class="scalable"><path d="M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z "  style="opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:nonzero; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:miter; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;" /></g></g>'}),Lf=Xe.define("chess.PawnBlack",{size:{width:28,height:33}},{markup:'<g class="rotatable"><g class="scalable"><path d="M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z "  style="opacity:1; fill:#000000; fill-opacity:1; fill-rule:nonzero; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:miter; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;" /></g></g>'}),Hu=De.define("erd.Entity",{size:{width:150,height:60},attrs:{".outer":{fill:"#2ECC71",stroke:"#27AE60","stroke-width":2,points:"100,0 100,60 0,60 0,0"},".inner":{fill:"#2ECC71",stroke:"#27AE60","stroke-width":2,points:"95,5 95,55 5,55 5,5",display:"none"},text:{text:"Entity","font-family":"Arial","font-size":14,"ref-x":.5,"ref-y":.5,"y-alignment":"middle","text-anchor":"middle"}}},{markup:'<g class="rotatable"><g class="scalable"><polygon class="outer"/><polygon class="inner"/></g><text/></g>'}),ic=Hu.define("erd.WeakEntity",{attrs:{".inner":{display:"auto"},text:{text:"Weak Entity"}}}),Ju=De.define("erd.Relationship",{size:{width:80,height:80},attrs:{".outer":{fill:"#3498DB",stroke:"#2980B9","stroke-width":2,points:"40,0 80,40 40,80 0,40"},".inner":{fill:"#3498DB",stroke:"#2980B9","stroke-width":2,points:"40,5 75,40 40,75 5,40",display:"none"},text:{text:"Relationship","font-family":"Arial","font-size":12,"ref-x":.5,"ref-y":.5,"y-alignment":"middle","text-anchor":"middle"}}},{markup:'<g class="rotatable"><g class="scalable"><polygon class="outer"/><polygon class="inner"/></g><text/></g>'}),Pf=Ju.define("erd.IdentifyingRelationship",{attrs:{".inner":{display:"auto"},text:{text:"Identifying"}}}),Io=De.define("erd.Attribute",{size:{width:100,height:50},attrs:{ellipse:{transform:"translate(50, 25)"},".outer":{stroke:"#D35400","stroke-width":2,cx:0,cy:0,rx:50,ry:25,fill:"#E67E22"},".inner":{stroke:"#D35400","stroke-width":2,cx:0,cy:0,rx:45,ry:20,fill:"#E67E22",display:"none"},text:{"font-family":"Arial","font-size":14,"ref-x":.5,"ref-y":.5,"y-alignment":"middle","text-anchor":"middle"}}},{markup:'<g class="rotatable"><g class="scalable"><ellipse class="outer"/><ellipse class="inner"/></g><text/></g>'}),kf=Io.define("erd.Multivalued",{attrs:{".inner":{display:"block"},text:{text:"multivalued"}}}),sc=Io.define("erd.Derived",{attrs:{".outer":{"stroke-dasharray":"3,5"},text:{text:"derived"}}}),Ef=Io.define("erd.Key",{attrs:{ellipse:{"stroke-width":4},text:{text:"key","font-weight":"800","text-decoration":"underline"}}}),zf=Io.define("erd.Normal",{attrs:{text:{text:"Normal"}}}),Of=De.define("erd.ISA",{type:"erd.ISA",size:{width:100,height:50},attrs:{polygon:{points:"0,0 50,50 100,0",fill:"#F1C40F",stroke:"#F39C12","stroke-width":2},text:{text:"ISA","font-size":18,"ref-x":.5,"ref-y":.3,"y-alignment":"middle","text-anchor":"middle"}}},{markup:'<g class="rotatable"><g class="scalable"><polygon/></g><text/></g>'}),Bf=Yn.define("erd.Line",{},{cardinality:function(t){this.set("labels",[{position:-20,attrs:{text:{dy:-8,text:t}}}])}}),Rf=Fu.define("fsa.State",{attrs:{circle:{"stroke-width":3},text:{"font-weight":"800"}}}),Gf=De.define("fsa.StartState",{size:{width:20,height:20},attrs:{circle:{transform:"translate(10, 10)",r:10,fill:"#000000"}}},{markup:'<g class="rotatable"><g class="scalable"><circle/></g></g>'}),zi=De.define("fsa.EndState",{size:{width:20,height:20},attrs:{".outer":{transform:"translate(10, 10)",r:10,fill:"#ffffff",stroke:"#000000"},".inner":{transform:"translate(10, 10)",r:6,fill:"#000000"}}},{markup:'<g class="rotatable"><g class="scalable"><circle class="outer"/><circle class="inner"/></g></g>'}),jf=Yn.define("fsa.Arrow",{attrs:{".marker-target":{d:"M 10 0 L 0 5 L 10 10 z"}},smooth:!0}),Zf=De.define("org.Member",{size:{width:180,height:70},attrs:{rect:{width:170,height:60},".card":{fill:"#FFFFFF",stroke:"#000000","stroke-width":2,"pointer-events":"visiblePainted",rx:10,ry:10},image:{width:48,height:48,ref:".card","ref-x":10,"ref-y":5},".rank":{"text-decoration":"underline",ref:".card","ref-x":.9,"ref-y":.2,"font-family":"Courier New","font-size":14,"text-anchor":"end"},".name":{"font-weight":"800",ref:".card","ref-x":.9,"ref-y":.6,"font-family":"Courier New","font-size":14,"text-anchor":"end"}}},{markup:'<g class="rotatable"><g class="scalable"><rect class="card"/><image/></g><text class="rank"/><text class="name"/></g>'}),Wf=Yn.define("org.Arrow",{source:{selector:".card"},target:{selector:".card"},attrs:{".connection":{stroke:"#585858","stroke-width":3}},z:-1}),ac=Xe.define("pn.Place",{size:{width:50,height:50},attrs:{".root":{r:25,fill:"#ffffff",stroke:"#000000",transform:"translate(25, 25)"},".label":{"text-anchor":"middle","ref-x":.5,"ref-y":-20,ref:".root",fill:"#000000","font-size":12},".tokens > circle":{fill:"#000000",r:5},".tokens.one > circle":{transform:"translate(25, 25)"},".tokens.two > circle:nth-child(1)":{transform:"translate(19, 25)"},".tokens.two > circle:nth-child(2)":{transform:"translate(31, 25)"},".tokens.three > circle:nth-child(1)":{transform:"translate(18, 29)"},".tokens.three > circle:nth-child(2)":{transform:"translate(25, 19)"},".tokens.three > circle:nth-child(3)":{transform:"translate(32, 29)"},".tokens.alot > text":{transform:"translate(25, 18)","text-anchor":"middle",fill:"#000000"}}},{markup:'<g class="rotatable"><g class="scalable"><circle class="root"/><g class="tokens" /></g><text class="label"/></g>'}),_f=Jn.extend({presentationAttributes:Jn.addPresentationAttributes({tokens:["TOKENS"]}),initFlag:Jn.prototype.initFlag.concat(["TOKENS"]),confirmUpdate:function(...t){let e=Jn.prototype.confirmUpdate.call(this,...t);return this.hasFlag(e,"TOKENS")&&(this.renderTokens(),this.update(),e=this.removeFlag(e,"TOKENS")),e},renderTokens:function(){const t=this.vel.findOne(".tokens").empty();["one","two","three","alot"].forEach(function(n){t.removeClass(n)});var e=this.model.get("tokens");if(e)switch(e){case 1:t.addClass("one"),t.append(gt("circle"));break;case 2:t.addClass("two"),t.append([gt("circle"),gt("circle")]);break;case 3:t.addClass("three"),t.append([gt("circle"),gt("circle"),gt("circle")]);break;default:t.addClass("alot"),t.append(gt("text").text(e+""))}}}),Yf=Xe.define("pn.Transition",{size:{width:12,height:50},attrs:{rect:{width:12,height:50,fill:"#000000",stroke:"#000000"},".label":{"text-anchor":"middle","ref-x":.5,"ref-y":-20,ref:"rect",fill:"#000000","font-size":12}}},{markup:'<g class="rotatable"><g class="scalable"><rect class="root"/></g></g><text class="label"/>'}),Uf=Yn.define("pn.Link",{attrs:{".marker-target":{d:"M 10 0 L 0 5 L 10 10 z"}}}),Ku=Xe.define("uml.Class",{attrs:{rect:{width:200},".uml-class-name-rect":{stroke:"black","stroke-width":2,fill:"#3498db"},".uml-class-attrs-rect":{stroke:"black","stroke-width":2,fill:"#2980b9"},".uml-class-methods-rect":{stroke:"black","stroke-width":2,fill:"#2980b9"},".uml-class-name-text":{ref:".uml-class-name-rect","ref-y":.5,"ref-x":.5,"text-anchor":"middle","y-alignment":"middle","font-weight":"bold",fill:"black","font-size":12,"font-family":"Times New Roman"},".uml-class-attrs-text":{ref:".uml-class-attrs-rect","ref-y":5,"ref-x":5,fill:"black","font-size":12,"font-family":"Times New Roman"},".uml-class-methods-text":{ref:".uml-class-methods-rect","ref-y":5,"ref-x":5,fill:"black","font-size":12,"font-family":"Times New Roman"}},name:[],attributes:[],methods:[]},{markup:['<g class="rotatable">','<g class="scalable">','<rect class="uml-class-name-rect"/><rect class="uml-class-attrs-rect"/><rect class="uml-class-methods-rect"/>',"</g>",'<text class="uml-class-name-text"/><text class="uml-class-attrs-text"/><text class="uml-class-methods-text"/>',"</g>"].join(""),initialize:function(){this.on("change:name change:attributes change:methods",function(){this.updateRectangles(),this.trigger("uml-update")},this),this.updateRectangles(),Xe.prototype.initialize.apply(this,arguments)},getClassName:function(){return this.get("name")},updateRectangles:function(){var t=this.get("attrs"),e=[{type:"name",text:this.getClassName()},{type:"attrs",text:this.get("attributes")},{type:"methods",text:this.get("methods")}],n=0;e.forEach(function(r){var s=Array.isArray(r.text)?r.text:[r.text],o=20*s.length+20;t[".uml-class-"+r.type+"-text"].text=s.join("\n"),t[".uml-class-"+r.type+"-rect"].height=o,t[".uml-class-"+r.type+"-rect"].transform="translate(0,"+n+")",n+=o})}}),Ao=Jn.extend({initialize:function(){Jn.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"uml-update",function(){this.update(),this.resize()})}}),Ff=Ku.define("uml.Abstract",{attrs:{".uml-class-name-rect":{fill:"#e74c3c"},".uml-class-attrs-rect":{fill:"#c0392b"},".uml-class-methods-rect":{fill:"#c0392b"}}},{getClassName:function(){return["<<Abstract>>",this.get("name")]}}),Vf=Ao,Xf=Ku.define("uml.Interface",{attrs:{".uml-class-name-rect":{fill:"#f1c40f"},".uml-class-attrs-rect":{fill:"#f39c12"},".uml-class-methods-rect":{fill:"#f39c12"}}},{getClassName:function(){return["<<Interface>>",this.get("name")]}}),Hf=Ao,Jf=Yn.define("uml.Generalization",{attrs:{".marker-target":{d:"M 20 0 L 0 10 L 20 20 z",fill:"white"}}}),Kf=Yn.define("uml.Implementation",{attrs:{".marker-target":{d:"M 20 0 L 0 10 L 20 20 z",fill:"white"},".connection":{"stroke-dasharray":"3,3"}}}),Qf=Yn.define("uml.Aggregation",{attrs:{".marker-target":{d:"M 40 10 L 20 20 L 0 10 L 20 0 z",fill:"white"}}}),qf=Yn.define("uml.Composition",{attrs:{".marker-target":{d:"M 40 10 L 20 20 L 0 10 L 20 0 z",fill:"black"}}}),$f=Yn.define("uml.Association"),th=Xe.define("uml.State",{attrs:{".uml-state-body":{width:200,height:200,rx:10,ry:10,fill:"#ecf0f1",stroke:"#bdc3c7","stroke-width":3},".uml-state-separator":{stroke:"#bdc3c7","stroke-width":2},".uml-state-name":{ref:".uml-state-body","ref-x":.5,"ref-y":5,"text-anchor":"middle",fill:"#000000","font-family":"Courier New","font-size":14},".uml-state-events":{ref:".uml-state-separator","ref-x":5,"ref-y":5,fill:"#000000","font-family":"Courier New","font-size":14}},name:"State",events:[]},{markup:['<g class="rotatable">','<g class="scalable">','<rect class="uml-state-body"/>',"</g>",'<path class="uml-state-separator"/>','<text class="uml-state-name"/>','<text class="uml-state-events"/>',"</g>"].join(""),initialize:function(){this.on({"change:name":this.updateName,"change:events":this.updateEvents,"change:size":this.updatePath},this),this.updateName(),this.updateEvents(),this.updatePath(),Xe.prototype.initialize.apply(this,arguments)},updateName:function(){this.attr(".uml-state-name/text",this.get("name"))},updateEvents:function(){this.attr(".uml-state-events/text",this.get("events").join("\n"))},updatePath:function(){var t="M 0 20 L "+this.get("size").width+" 20";this.attr(".uml-state-separator/d",t,{silent:!0})}}),eh=Fu.define("uml.StartState",{type:"uml.StartState",attrs:{circle:{fill:"#34495e",stroke:"#2c3e50","stroke-width":2,rx:1}}}),nh=Xe.define("uml.EndState",{size:{width:20,height:20},attrs:{"circle.outer":{transform:"translate(10, 10)",r:10,fill:"#ffffff",stroke:"#2c3e50"},"circle.inner":{transform:"translate(10, 10)",r:6,fill:"#34495e"}}},{markup:'<g class="rotatable"><g class="scalable"><circle class="outer"/><circle class="inner"/></g></g>'}),rh=Yn.define("uml.Transition",{attrs:{".marker-target":{d:"M 10 0 L 0 5 L 10 10 z",fill:"#34495e",stroke:"#2c3e50"},".connection":{stroke:"#2c3e50"}}}),ih=["myholder"];let sh=(()=>{class t{constructor(){}ngOnInit(){const n=gn,r=new $s({},{cellNamespace:n}),o=(new Vo({el:this.myholder.nativeElement,model:r,width:600,height:100,gridSize:1,cellViewNamespace:n}),new Aa);o.position(100,30),o.resize(100,40),o.attr({body:{fill:"blue"},label:{text:"Hello",fill:"white"}}),o.addTo(r);const l=o.clone();l.translate(300,0),l.attr("label/text","World!"),l.addTo(r);const f=new Po;f.source(o),f.target(l),f.addTo(r)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=ze.Xpm({type:t,selectors:[["app-hello-world"]],viewQuery:function(n,r){if(1&n&&ze.Gf(ih,7),2&n){let s;ze.iGM(s=ze.CRH())&&(r.myholder=s.first)}},decls:2,vars:0,consts:[["myholder",""]],template:function(n,r){1&n&&ze._UZ(0,"div",null,0)}}),t})();const ah=["paper"],Co=yn,oh=[{path:"hello-world",component:sh},{path:"uml-class-diagram",component:(()=>{class t{constructor(){}ngOnInit(){const n=new $s,r=new Vo({el:this.paperRef.nativeElement,width:"100%",height:"100%",background:{color:"#eee"},gridSize:1,model:n}),s={".uml-class-name-rect":{fill:"#fff",stroke:"#000","stroke-width":1},".uml-class-name-text":{"font-size":"14px"},".uml-class-attrs-rect":{fill:"#fff",stroke:"#000","stroke-width":1},".uml-class-attrs-text":{"font-size":"14px"},".uml-class-methods-rect":{fill:"#fff",stroke:"#000","stroke-width":1},".uml-class-methods-text":{"font-size":"14px"}},o={cell:new Co.Class({position:{x:r.getComputedSize().width/2-100,y:20},size:{width:200,height:150},name:["dia.Cell"],attributes:["+ id: string | number","+ graph: Graph","+ markup: string | MarkupJSON"],methods:["+ toJSON()","+ isLink(): boolean","+ isElement(): boolean","..."],attrs:s}),element:new Co.Class({position:{x:r.getComputedSize().width/2-400,y:300},size:{width:250,height:110},name:["dia.Element"],attributes:[],methods:["+ position(): g.Point","+ resize(width: number, height: number)","+ addPort(port: Element.Port)","..."],attrs:s}),link:new Co.Class({position:{x:r.getComputedSize().width/2+150,y:300},size:{width:280,height:160},name:["dia.Link"],attributes:["+ toolMarkup: string","+ vertexMarkup: string","+ arrowHeadMarkup: string","..."],methods:["+ source(source: Cell)","+ target(target: Cell)","+ appendLabel(label: Link.Label): Link.Label[]","..."],attrs:s})};Object.values(o).forEach(f=>n.addCell(f));const l=[new Co.Generalization({source:{id:o.element.id},target:{id:o.cell.id}}),new Co.Generalization({source:{id:o.link.id},target:{id:o.cell.id}})];Object.values(l).forEach(f=>n.addCell(f))}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=ze.Xpm({type:t,selectors:[["app-uml-class-diagram"]],viewQuery:function(n,r){if(1&n&&ze.Gf(ah,7),2&n){let s;ze.iGM(s=ze.CRH())&&(r.paperRef=s.first)}},decls:2,vars:0,consts:[["id","paper"],["paper",""]],template:function(n,r){1&n&&ze._UZ(0,"div",0,1)},styles:["#paper[_ngcontent-%COMP%]{width:100%;height:100%}"]}),t})()},{path:"editor",component:Kl}];let uh=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=ze.oAB({type:t}),t.\u0275inj=ze.cJS({imports:[y.Bz.forChild(oh),y.Bz]}),t})(),Qu=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=ze.oAB({type:t}),t.\u0275inj=ze.cJS({imports:[ri.ez,uh]}),t})()},66:(ei,Vr,Wt)=>{var xr,G,se;se="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global,xr=[Wt(610),Wt(259),Vr],void 0!==(G=function(Ci,Mr,nn){se.Backbone=function(Nr,se,St,Je){var Ci=Nr.Backbone,Mr=Array.prototype.slice;se.VERSION="1.4.1",se.$=Je,se.noConflict=function(){return Nr.Backbone=Ci,this},se.emulateHTTP=!1,se.emulateJSON=!1;var bn,nn=se.Events={},zr=/\s+/,qn=function(I,T,W,K,tt){var jt,Ct=0;if(W&&"object"==typeof W)for((void 0!==K&&"context"in tt&&void 0===tt.context&&(tt.context=K),jt=St.keys(W));Ct<jt.length;Ct++)T=qn(I,T,jt[Ct],W[jt[Ct]],tt);else if(W&&zr.test(W))for(jt=W.split(zr);Ct<jt.length;Ct++)T=I(T,jt[Ct],K,tt);else T=I(T,W,K,tt);return T};nn.on=function(I,T,W){return this._events=qn(Or,this._events||{},I,T,{context:W,ctx:this,listening:bn}),bn&&((this._listeners||(this._listeners={}))[bn.id]=bn,bn.interop=!1),this},nn.listenTo=function(I,T,W){if(!I)return this;var K=I._listenId||(I._listenId=St.uniqueId("l")),tt=this._listeningTo||(this._listeningTo={}),Ct=bn=tt[K];Ct||(this._listenId||(this._listenId=St.uniqueId("l")),Ct=bn=tt[K]=new Ye(this,I));var jt=ni(I,T,W,this);if(bn=void 0,jt)throw jt;return Ct.interop&&Ct.on(T,W),this};var Or=function(I,T,W,K){if(W){var tt=I[T]||(I[T]=[]),Ct=K.context,jt=K.ctx,ue=K.listening;ue&&ue.count++,tt.push({callback:W,context:Ct,ctx:Ct||jt,listening:ue})}return I},ni=function(I,T,W,K){try{I.on(T,W,K)}catch(tt){return tt}};nn.off=function(I,T,W){return this._events?(this._events=qn(Ce,this._events,I,T,{context:W,listeners:this._listeners}),this):this},nn.stopListening=function(I,T,W){var K=this._listeningTo;if(!K)return this;for(var tt=I?[I._listenId]:St.keys(K),Ct=0;Ct<tt.length;Ct++){var jt=K[tt[Ct]];if(!jt)break;jt.obj.off(T,W,this),jt.interop&&jt.off(T,W)}return St.isEmpty(K)&&(this._listeningTo=void 0),this};var Ce=function(I,T,W,K){if(I){var ue,tt=K.context,Ct=K.listeners,jt=0;if(!T&&!tt&&!W){for(ue=St.keys(Ct);jt<ue.length;jt++)Ct[ue[jt]].cleanup();return}for(ue=T?[T]:St.keys(I);jt<ue.length;jt++){var Qe=I[T=ue[jt]];if(!Qe)break;for(var ce=[],vn=0;vn<Qe.length;vn++){var Me=Qe[vn];if(W&&W!==Me.callback&&W!==Me.callback._callback||tt&&tt!==Me.context)ce.push(Me);else{var On=Me.listening;On&&On.off(T,W)}}ce.length?I[T]=ce:delete I[T]}return I}};nn.once=function(I,T,W){var K=qn(Ut,{},I,T,this.off.bind(this));return"string"==typeof I&&null==W&&(T=void 0),this.on(K,T,W)},nn.listenToOnce=function(I,T,W){var K=qn(Ut,{},T,W,this.stopListening.bind(this,I));return this.listenTo(I,K)};var Ut=function(I,T,W,K){if(W){var tt=I[T]=St.once(function(){K(T,tt),W.apply(this,arguments)});tt._callback=W}return I};nn.trigger=function(I){if(!this._events)return this;for(var T=Math.max(0,arguments.length-1),W=Array(T),K=0;K<T;K++)W[K]=arguments[K+1];return qn(Un,this._events,I,void 0,W),this};var Un=function(I,T,W,K){if(I){var tt=I[T],Ct=I.all;tt&&Ct&&(Ct=Ct.slice()),tt&&Ie(tt,K),Ct&&Ie(Ct,[T].concat(K))}return I},Ie=function(I,T){var W,K=-1,tt=I.length,Ct=T[0],jt=T[1],ue=T[2];switch(T.length){case 0:for(;++K<tt;)(W=I[K]).callback.call(W.ctx);return;case 1:for(;++K<tt;)(W=I[K]).callback.call(W.ctx,Ct);return;case 2:for(;++K<tt;)(W=I[K]).callback.call(W.ctx,Ct,jt);return;case 3:for(;++K<tt;)(W=I[K]).callback.call(W.ctx,Ct,jt,ue);return;default:for(;++K<tt;)(W=I[K]).callback.apply(W.ctx,T);return}},Ye=function(I,T){this.id=I._listenId,this.listener=I,this.obj=T,this.interop=!0,this.count=0,this._events=void 0};Ye.prototype.on=nn.on,Ye.prototype.off=function(I,T){var W;this.interop?(this._events=qn(Ce,this._events,I,T,{context:void 0,listeners:void 0}),W=!this._events):(this.count--,W=0===this.count),W&&this.cleanup()},Ye.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},nn.bind=nn.on,nn.unbind=nn.off,St.extend(se,nn);var yn=se.Model=function(I,T){var W=I||{};T||(T={}),this.preinitialize.apply(this,arguments),this.cid=St.uniqueId(this.cidPrefix),this.attributes={},T.collection&&(this.collection=T.collection),T.parse&&(W=this.parse(W,T)||{});var K=St.result(this,"defaults");W=St.defaults(St.extend({},K,W),K),this.set(W,T),this.changed={},this.initialize.apply(this,arguments)};St.extend(yn.prototype,nn,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(I){return St.clone(this.attributes)},sync:function(){return se.sync.apply(this,arguments)},get:function(I){return this.attributes[I]},escape:function(I){return St.escape(this.get(I))},has:function(I){return null!=this.get(I)},matches:function(I){return!!St.iteratee(I,this)(this.attributes)},set:function(I,T,W){if(null==I)return this;var K;if("object"==typeof I?(K=I,W=T):(K={})[I]=T,W||(W={}),!this._validate(K,W))return!1;var tt=W.unset,Ct=W.silent,jt=[],ue=this._changing;this._changing=!0,ue||(this._previousAttributes=St.clone(this.attributes),this.changed={});var Qe=this.attributes,ce=this.changed,vn=this._previousAttributes;for(var Me in K)St.isEqual(Qe[Me],T=K[Me])||jt.push(Me),St.isEqual(vn[Me],T)?delete ce[Me]:ce[Me]=T,tt?delete Qe[Me]:Qe[Me]=T;if(this.idAttribute in K){var On=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,On,W)}if(!Ct){jt.length&&(this._pending=W);for(var or=0;or<jt.length;or++)this.trigger("change:"+jt[or],this,Qe[jt[or]],W)}if(ue)return this;if(!Ct)for(;this._pending;)W=this._pending,this._pending=!1,this.trigger("change",this,W);return this._pending=!1,this._changing=!1,this},unset:function(I,T){return this.set(I,void 0,St.extend({},T,{unset:!0}))},clear:function(I){var T={};for(var W in this.attributes)T[W]=void 0;return this.set(T,St.extend({},I,{unset:!0}))},hasChanged:function(I){return null==I?!St.isEmpty(this.changed):St.has(this.changed,I)},changedAttributes:function(I){if(!I)return!!this.hasChanged()&&St.clone(this.changed);var K,T=this._changing?this._previousAttributes:this.attributes,W={};for(var tt in I){var Ct=I[tt];St.isEqual(T[tt],Ct)||(W[tt]=Ct,K=!0)}return!!K&&W},previous:function(I){return null!=I&&this._previousAttributes?this._previousAttributes[I]:null},previousAttributes:function(){return St.clone(this._previousAttributes)},fetch:function(I){I=St.extend({parse:!0},I);var T=this,W=I.success;return I.success=function(K){var tt=I.parse?T.parse(K,I):K;if(!T.set(tt,I))return!1;W&&W.call(I.context,T,K,I),T.trigger("sync",T,K,I)},Ke(this,I),this.sync("read",this,I)},save:function(I,T,W){var K;null==I||"object"==typeof I?(K=I,W=T):(K={})[I]=T;var tt=(W=St.extend({validate:!0,parse:!0},W)).wait;if(K&&!tt){if(!this.set(K,W))return!1}else if(!this._validate(K,W))return!1;var Ct=this,jt=W.success,ue=this.attributes;W.success=function(vn){Ct.attributes=ue;var Me=W.parse?Ct.parse(vn,W):vn;if(tt&&(Me=St.extend({},K,Me)),Me&&!Ct.set(Me,W))return!1;jt&&jt.call(W.context,Ct,vn,W),Ct.trigger("sync",Ct,vn,W)},Ke(this,W),K&&tt&&(this.attributes=St.extend({},ue,K));var Qe=this.isNew()?"create":W.patch?"patch":"update";"patch"===Qe&&!W.attrs&&(W.attrs=K);var ce=this.sync(Qe,this,W);return this.attributes=ue,ce},destroy:function(I){I=I?St.clone(I):{};var T=this,W=I.success,K=I.wait,tt=function(){T.stopListening(),T.trigger("destroy",T,T.collection,I)};I.success=function(jt){K&&tt(),W&&W.call(I.context,T,jt,I),T.isNew()||T.trigger("sync",T,jt,I)};var Ct=!1;return this.isNew()?St.defer(I.success):(Ke(this,I),Ct=this.sync("delete",this,I)),K||tt(),Ct},url:function(){var I=St.result(this,"urlRoot")||St.result(this.collection,"url")||pn();if(this.isNew())return I;var T=this.get(this.idAttribute);return I.replace(/[^\/]$/,"$&/")+encodeURIComponent(T)},parse:function(I,T){return I},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(I){return this._validate({},St.extend({},I,{validate:!0}))},_validate:function(I,T){if(!T.validate||!this.validate)return!0;I=St.extend({},this.attributes,I);var W=this.validationError=this.validate(I,T)||null;return!W||(this.trigger("invalid",this,W,St.extend(T,{validationError:W})),!1)}});var gn=se.Collection=function(I,T){T||(T={}),this.preinitialize.apply(this,arguments),T.model&&(this.model=T.model),void 0!==T.comparator&&(this.comparator=T.comparator),this._reset(),this.initialize.apply(this,arguments),I&&this.reset(I,St.extend({silent:!0},T))},ri={add:!0,remove:!0,merge:!0},y={add:!0,remove:!1},Sr=function(I,T,W){W=Math.min(Math.max(W,0),I.length);var Ct,K=Array(I.length-W),tt=T.length;for(Ct=0;Ct<K.length;Ct++)K[Ct]=I[Ct+W];for(Ct=0;Ct<tt;Ct++)I[Ct+W]=T[Ct];for(Ct=0;Ct<K.length;Ct++)I[Ct+tt+W]=K[Ct]};St.extend(gn.prototype,nn,{model:yn,preinitialize:function(){},initialize:function(){},toJSON:function(I){return this.map(function(T){return T.toJSON(I)})},sync:function(){return se.sync.apply(this,arguments)},add:function(I,T){return this.set(I,St.extend({merge:!1},T,y))},remove:function(I,T){T=St.extend({},T);var W=!St.isArray(I);I=W?[I]:I.slice();var K=this._removeModels(I,T);return!T.silent&&K.length&&(T.changes={added:[],merged:[],removed:K},this.trigger("update",this,T)),W?K[0]:K},set:function(I,T){if(null!=I){(T=St.extend({},ri,T)).parse&&!this._isModel(I)&&(I=this.parse(I,T)||[]);var W=!St.isArray(I);I=W?[I]:I.slice();var K=T.at;null!=K&&(K=+K),K>this.length&&(K=this.length),K<0&&(K+=this.length+1);var cn,wn,tt=[],Ct=[],jt=[],ue=[],Qe={},ce=T.add,vn=T.merge,Me=T.remove,On=!1,or=this.comparator&&null==K&&!1!==T.sort,Hr=St.isString(this.comparator)?this.comparator:null;for(wn=0;wn<I.length;wn++){var Pn=this.get(cn=I[wn]);if(Pn){if(vn&&cn!==Pn){var Lt=this._isModel(cn)?cn.attributes:cn;T.parse&&(Lt=Pn.parse(Lt,T)),Pn.set(Lt,T),jt.push(Pn),or&&!On&&(On=Pn.hasChanged(Hr))}Qe[Pn.cid]||(Qe[Pn.cid]=!0,tt.push(Pn)),I[wn]=Pn}else ce&&(cn=I[wn]=this._prepareModel(cn,T))&&(Ct.push(cn),this._addReference(cn,T),Qe[cn.cid]=!0,tt.push(cn))}if(Me){for(wn=0;wn<this.length;wn++)Qe[(cn=this.models[wn]).cid]||ue.push(cn);ue.length&&this._removeModels(ue,T)}var ji=!1;if(tt.length&&!or&&ce&&Me?(ji=this.length!==tt.length||St.some(this.models,function(Bn,kn){return Bn!==tt[kn]}),this.models.length=0,Sr(this.models,tt,0),this.length=this.models.length):Ct.length&&(or&&(On=!0),Sr(this.models,Ct,K??this.length),this.length=this.models.length),On&&this.sort({silent:!0}),!T.silent){for(wn=0;wn<Ct.length;wn++)null!=K&&(T.index=K+wn),(cn=Ct[wn]).trigger("add",cn,this,T);(On||ji)&&this.trigger("sort",this,T),(Ct.length||ue.length||jt.length)&&(T.changes={added:Ct,removed:ue,merged:jt},this.trigger("update",this,T))}return W?I[0]:I}},reset:function(I,T){T=T?St.clone(T):{};for(var W=0;W<this.models.length;W++)this._removeReference(this.models[W],T);return T.previousModels=this.models,this._reset(),I=this.add(I,St.extend({silent:!0},T)),T.silent||this.trigger("reset",this,T),I},push:function(I,T){return this.add(I,St.extend({at:this.length},T))},pop:function(I){var T=this.at(this.length-1);return this.remove(T,I)},unshift:function(I,T){return this.add(I,St.extend({at:0},T))},shift:function(I){var T=this.at(0);return this.remove(T,I)},slice:function(){return Mr.apply(this.models,arguments)},get:function(I){if(null!=I)return this._byId[I]||this._byId[this.modelId(this._isModel(I)?I.attributes:I,I.idAttribute)]||I.cid&&this._byId[I.cid]},has:function(I){return null!=this.get(I)},at:function(I){return I<0&&(I+=this.length),this.models[I]},where:function(I,T){return this[T?"find":"filter"](I)},findWhere:function(I){return this.where(I,!0)},sort:function(I){var T=this.comparator;if(!T)throw new Error("Cannot sort a set without a comparator");I||(I={});var W=T.length;return St.isFunction(T)&&(T=T.bind(this)),1===W||St.isString(T)?this.models=this.sortBy(T):this.models.sort(T),I.silent||this.trigger("sort",this,I),this},pluck:function(I){return this.map(I+"")},fetch:function(I){var T=(I=St.extend({parse:!0},I)).success,W=this;return I.success=function(K){W[I.reset?"reset":"set"](K,I),T&&T.call(I.context,W,K,I),W.trigger("sync",W,K,I)},Ke(this,I),this.sync("read",this,I)},create:function(I,T){var W=(T=T?St.clone(T):{}).wait;if(!(I=this._prepareModel(I,T)))return!1;W||this.add(I,T);var K=this,tt=T.success;return T.success=function(Ct,jt,ue){W&&K.add(Ct,ue),tt&&tt.call(ue.context,Ct,jt,ue)},I.save(null,T),I},parse:function(I,T){return I},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(I,T){return I[T||this.model.prototype.idAttribute||"id"]},values:function(){return new Br(this,ys)},keys:function(){return new Br(this,$i)},entries:function(){return new Br(this,ar)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(I,T){return this._isModel(I)?(I.collection||(I.collection=this),I):((T=T?St.clone(T):{}).collection=this,(W=this.model.prototype?new this.model(I,T):this.model(I,T)).validationError?(this.trigger("invalid",this,W.validationError,T),!1):W);var W},_removeModels:function(I,T){for(var W=[],K=0;K<I.length;K++){var tt=this.get(I[K]);if(tt){var Ct=this.indexOf(tt);this.models.splice(Ct,1),this.length--,delete this._byId[tt.cid];var jt=this.modelId(tt.attributes,tt.idAttribute);null!=jt&&delete this._byId[jt],T.silent||(T.index=Ct,tt.trigger("remove",tt,this,T)),W.push(tt),this._removeReference(tt,T)}}return W},_isModel:function(I){return I instanceof yn},_addReference:function(I,T){this._byId[I.cid]=I;var W=this.modelId(I.attributes,I.idAttribute);null!=W&&(this._byId[W]=I),I.on("all",this._onModelEvent,this)},_removeReference:function(I,T){delete this._byId[I.cid];var W=this.modelId(I.attributes,I.idAttribute);null!=W&&delete this._byId[W],this===I.collection&&delete I.collection,I.off("all",this._onModelEvent,this)},_onModelEvent:function(I,T,W,K){if(T){if(("add"===I||"remove"===I)&&W!==this)return;if("destroy"===I&&this.remove(T,K),"changeId"===I){var tt=this.modelId(T.previousAttributes(),T.idAttribute),Ct=this.modelId(T.attributes,T.idAttribute);null!=tt&&delete this._byId[tt],null!=Ct&&(this._byId[Ct]=T)}}this.trigger.apply(this,arguments)}});var sr="function"==typeof Symbol&&Symbol.iterator;sr&&(gn.prototype[sr]=gn.prototype.values);var Br=function(I,T){this._collection=I,this._kind=T,this._index=0},ys=1,$i=2,ar=3;sr&&(Br.prototype[sr]=function(){return this}),Br.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var T,I=this._collection.at(this._index);if(this._index++,this._kind===ys)T=I;else{var W=this._collection.modelId(I.attributes,I.idAttribute);T=this._kind===$i?W:[W,I]}return{value:T,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var $n=se.View=function(I){this.cid=St.uniqueId("view"),this.preinitialize.apply(this,arguments),St.extend(this,St.pick(I,Gi)),this._ensureElement(),this.initialize.apply(this,arguments)},Rr=/^(\S+)\s*(.*)$/,Gi=["model","collection","el","id","attributes","className","tagName","events"];St.extend($n.prototype,nn,{tagName:"div",$:function(I){return this.$el.find(I)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(I){return this.undelegateEvents(),this._setElement(I),this.delegateEvents(),this},_setElement:function(I){this.$el=I instanceof se.$?I:se.$(I),this.el=this.$el[0]},delegateEvents:function(I){if(I||(I=St.result(this,"events")),!I)return this;for(var T in this.undelegateEvents(),I){var W=I[T];if(St.isFunction(W)||(W=this[W]),W){var K=T.match(Rr);this.delegate(K[1],K[2],W.bind(this))}}return this},delegate:function(I,T,W){return this.$el.on(I+".delegateEvents"+this.cid,T,W),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(I,T,W){return this.$el.off(I+".delegateEvents"+this.cid,T,W),this},_createElement:function(I){return document.createElement(I)},_ensureElement:function(){if(this.el)this.setElement(St.result(this,"el"));else{var I=St.extend({},St.result(this,"attributes"));this.id&&(I.id=St.result(this,"id")),this.className&&(I.class=St.result(this,"className")),this.setElement(this._createElement(St.result(this,"tagName"))),this._setAttributes(I)}},_setAttributes:function(I){this.$el.attr(I)}});var Ir=function(I,T,W,K){St.each(W,function(tt,Ct){T[Ct]&&(I.prototype[Ct]=function(I,T,W,K){switch(T){case 1:return function(){return I[W](this[K])};case 2:return function(tt){return I[W](this[K],tt)};case 3:return function(tt,Ct){return I[W](this[K],yi(tt,this),Ct)};case 4:return function(tt,Ct,jt){return I[W](this[K],yi(tt,this),Ct,jt)};default:return function(){var tt=Mr.call(arguments);return tt.unshift(this[K]),I[W].apply(I,tt)}}}(T,tt,Ct,K))})},yi=function(I,T){return St.isFunction(I)?I:St.isObject(I)&&!T._isModel(I)?ii(I):St.isString(I)?function(W){return W.get(I)}:I},ii=function(I){var T=St.matches(I);return function(W){return T(W.attributes)}};St.each([[gn,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models"],[yn,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes"]],function(I){var T=I[0],W=I[1],K=I[2];T.mixin=function(tt){var Ct=St.reduce(St.functions(tt),function(jt,ue){return jt[ue]=0,jt},{});Ir(T,tt,Ct,K)},Ir(T,St,W,K)}),se.sync=function(I,T,W){var K=Xr[I];St.defaults(W||(W={}),{emulateHTTP:se.emulateHTTP,emulateJSON:se.emulateJSON});var tt={type:K,dataType:"json"};if(W.url||(tt.url=St.result(T,"url")||pn()),null==W.data&&T&&("create"===I||"update"===I||"patch"===I)&&(tt.contentType="application/json",tt.data=JSON.stringify(W.attrs||T.toJSON(W))),W.emulateJSON&&(tt.contentType="application/x-www-form-urlencoded",tt.data=tt.data?{model:tt.data}:{}),W.emulateHTTP&&("PUT"===K||"DELETE"===K||"PATCH"===K)){tt.type="POST",W.emulateJSON&&(tt.data._method=K);var Ct=W.beforeSend;W.beforeSend=function(Qe){if(Qe.setRequestHeader("X-HTTP-Method-Override",K),Ct)return Ct.apply(this,arguments)}}"GET"!==tt.type&&!W.emulateJSON&&(tt.processData=!1);var jt=W.error;W.error=function(Qe,ce,vn){W.textStatus=ce,W.errorThrown=vn,jt&&jt.call(W.context,Qe,ce,vn)};var ue=W.xhr=se.ajax(St.extend(tt,W));return T.trigger("request",T,ue,W),ue};var Xr={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};se.ajax=function(){return se.$.ajax.apply(se.$,arguments)};var Fn=se.Router=function(I){I||(I={}),this.preinitialize.apply(this,arguments),I.routes&&(this.routes=I.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},Ht=/\((.*?)\)/g,Gr=/(\(\?)?:\w+/g,ts=/\*\w+/g,jr=/[\-{}\[\]+?.,\\\^$|#\s]/g;St.extend(Fn.prototype,nn,{preinitialize:function(){},initialize:function(){},route:function(I,T,W){St.isRegExp(I)||(I=this._routeToRegExp(I)),St.isFunction(T)&&(W=T,T=""),W||(W=this[T]);var K=this;return se.history.route(I,function(tt){var Ct=K._extractParameters(I,tt);!1!==K.execute(W,Ct,T)&&(K.trigger.apply(K,["route:"+T].concat(Ct)),K.trigger("route",T,Ct),se.history.trigger("route",K,T,Ct))}),this},execute:function(I,T,W){I&&I.apply(this,T)},navigate:function(I,T){return se.history.navigate(I,T),this},_bindRoutes:function(){if(this.routes){this.routes=St.result(this,"routes");for(var I,T=St.keys(this.routes);null!=(I=T.pop());)this.route(I,this.routes[I])}},_routeToRegExp:function(I){return I=I.replace(jr,"\\$&").replace(Ht,"(?:$1)?").replace(Gr,function(T,W){return W?T:"([^/?]+)"}).replace(ts,"([^?]*?)"),new RegExp("^"+I+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(I,T){var W=I.exec(T).slice(1);return St.map(W,function(K,tt){return tt===W.length-1?K||null:K?decodeURIComponent(K):null})}});var Ln=se.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),typeof window<"u"&&(this.location=window.location,this.history=window.history)},Dr=/^[#\/]|\s+$/g,si=/^\/+|\/+$/g,es=/#.*$/;Ln.started=!1,St.extend(Ln.prototype,nn,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(I){return decodeURI(I.replace(/%25/g,"%2525"))},getSearch:function(){var I=this.location.href.replace(/#.*/,"").match(/\?.+/);return I?I[0]:""},getHash:function(I){var T=(I||this).location.href.match(/#(.*)$/);return T?T[1]:""},getPath:function(){var I=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===I.charAt(0)?I.slice(1):I},getFragment:function(I){return null==I&&(I=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),I.replace(Dr,"")},start:function(I){if(Ln.started)throw new Error("Backbone.history has already been started");if(Ln.started=!0,this.options=St.extend({root:"/"},this.options,I),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(si,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var T=this.root.slice(0,-1)||"/";return this.location.replace(T+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var W=document.body,K=W.insertBefore(this.iframe,W.firstChild).contentWindow;K.document.open(),K.document.close(),K.location.hash="#"+this.fragment}var tt=window.addEventListener||function(Ct,jt){return attachEvent("on"+Ct,jt)};if(this._usePushState?tt("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?tt("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var I=window.removeEventListener||function(T,W){return detachEvent("on"+T,W)};this._usePushState?I("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&I("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),Ln.started=!1},route:function(I,T){this.handlers.unshift({route:I,callback:T})},checkUrl:function(I){var T=this.getFragment();if(T===this.fragment&&this.iframe&&(T=this.getHash(this.iframe.contentWindow)),T===this.fragment)return!1;this.iframe&&this.navigate(T),this.loadUrl()},loadUrl:function(I){return!!this.matchRoot()&&(I=this.fragment=this.getFragment(I),St.some(this.handlers,function(T){if(T.route.test(I))return T.callback(I),!0}))},navigate:function(I,T){if(!Ln.started)return!1;(!T||!0===T)&&(T={trigger:!!T}),I=this.getFragment(I||"");var W=this.root;(""===I||"?"===I.charAt(0))&&(W=W.slice(0,-1)||"/");var K=W+I;I=I.replace(es,"");var tt=this.decodeFragment(I);if(this.fragment!==tt){if(this.fragment=tt,this._usePushState)this.history[T.replace?"replaceState":"pushState"]({},document.title,K);else{if(!this._wantsHashChange)return this.location.assign(K);if(this._updateHash(this.location,I,T.replace),this.iframe&&I!==this.getHash(this.iframe.contentWindow)){var Ct=this.iframe.contentWindow;T.replace||(Ct.document.open(),Ct.document.close()),this._updateHash(Ct.location,I,T.replace)}}if(T.trigger)return this.loadUrl(I)}},_updateHash:function(I,T,W){if(W){var K=I.href.replace(/(javascript:|#).*$/,"");I.replace(K+"#"+T)}else I.hash="#"+T}}),se.history=new Ln;yn.extend=gn.extend=Fn.extend=$n.extend=Ln.extend=function(I,T){var K,W=this;return K=I&&St.has(I,"constructor")?I.constructor:function(){return W.apply(this,arguments)},St.extend(K,W,T),K.prototype=St.create(W.prototype,I),K.prototype.constructor=K,K.__super__=W.prototype,K};var pn=function(){throw new Error('A "url" property or function must be specified')},Ke=function(I,T){var W=T.error;T.error=function(K){W&&W.call(T.context,I,K,T),I.trigger("error",I,K,T)}};return se}(se,nn,Ci,Mr)}.apply(Vr,xr))&&(ei.exports=G)},259:function(ei,Vr){var xr;!function(G,Nr){"use strict";"object"==typeof ei.exports?ei.exports=G.document?Nr(G,!0):function(se){if(!se.document)throw new Error("jQuery requires a window with a document");return Nr(se)}:Nr(G)}(typeof window<"u"?window:this,function(G,Nr){"use strict";var se=[],St=Object.getPrototypeOf,Je=se.slice,Ci=se.flat?function(u){return se.flat.call(u)}:function(u){return se.concat.apply([],u)},Mr=se.push,nn=se.indexOf,zr={},bn=zr.toString,qn=zr.hasOwnProperty,Or=qn.toString,ni=Or.call(Object),Ce={},Ut=function(c){return"function"==typeof c&&"number"!=typeof c.nodeType&&"function"!=typeof c.item},Un=function(c){return null!=c&&c===c.window},Ie=G.document,Ye={type:!0,src:!0,nonce:!0,noModule:!0};function yn(u,c,g){var v,b,N=(g=g||Ie).createElement("script");if(N.text=u,c)for(v in Ye)(b=c[v]||c.getAttribute&&c.getAttribute(v))&&N.setAttribute(v,b);g.head.appendChild(N).parentNode.removeChild(N)}function gn(u){return null==u?u+"":"object"==typeof u||"function"==typeof u?zr[bn.call(u)]||"object":typeof u}var y=function(u,c){return new y.fn.init(u,c)};function Sr(u){var c=!!u&&"length"in u&&u.length,g=gn(u);return!Ut(u)&&!Un(u)&&("array"===g||0===c||"number"==typeof c&&c>0&&c-1 in u)}y.fn=y.prototype={jquery:"3.6.0",constructor:y,length:0,toArray:function(){return Je.call(this)},get:function(u){return null==u?Je.call(this):u<0?this[u+this.length]:this[u]},pushStack:function(u){var c=y.merge(this.constructor(),u);return c.prevObject=this,c},each:function(u){return y.each(this,u)},map:function(u){return this.pushStack(y.map(this,function(c,g){return u.call(c,g,c)}))},slice:function(){return this.pushStack(Je.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(y.grep(this,function(u,c){return(c+1)%2}))},odd:function(){return this.pushStack(y.grep(this,function(u,c){return c%2}))},eq:function(u){var c=this.length,g=+u+(u<0?c:0);return this.pushStack(g>=0&&g<c?[this[g]]:[])},end:function(){return this.prevObject||this.constructor()},push:Mr,sort:se.sort,splice:se.splice},y.extend=y.fn.extend=function(){var u,c,g,v,b,N,L=arguments[0]||{},R=1,Y=arguments.length,it=!1;for("boolean"==typeof L&&(it=L,L=arguments[R]||{},R++),"object"!=typeof L&&!Ut(L)&&(L={}),R===Y&&(L=this,R--);R<Y;R++)if(null!=(u=arguments[R]))for(c in u)v=u[c],"__proto__"!==c&&L!==v&&(it&&v&&(y.isPlainObject(v)||(b=Array.isArray(v)))?(g=L[c],N=b&&!Array.isArray(g)?[]:b||y.isPlainObject(g)?g:{},b=!1,L[c]=y.extend(it,N,v)):void 0!==v&&(L[c]=v));return L},y.extend({expando:"jQuery"+("3.6.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(u){throw new Error(u)},noop:function(){},isPlainObject:function(u){var c,g;return!(!u||"[object Object]"!==bn.call(u)||(c=St(u))&&("function"!=typeof(g=qn.call(c,"constructor")&&c.constructor)||Or.call(g)!==ni))},isEmptyObject:function(u){var c;for(c in u)return!1;return!0},globalEval:function(u,c,g){yn(u,{nonce:c&&c.nonce},g)},each:function(u,c){var g,v=0;if(Sr(u))for(g=u.length;v<g&&!1!==c.call(u[v],v,u[v]);v++);else for(v in u)if(!1===c.call(u[v],v,u[v]))break;return u},makeArray:function(u,c){var g=c||[];return null!=u&&(Sr(Object(u))?y.merge(g,"string"==typeof u?[u]:u):Mr.call(g,u)),g},inArray:function(u,c,g){return null==c?-1:nn.call(c,u,g)},merge:function(u,c){for(var g=+c.length,v=0,b=u.length;v<g;v++)u[b++]=c[v];return u.length=b,u},grep:function(u,c,g){for(var b=[],N=0,L=u.length,R=!g;N<L;N++)!c(u[N],N)!==R&&b.push(u[N]);return b},map:function(u,c,g){var v,b,N=0,L=[];if(Sr(u))for(v=u.length;N<v;N++)null!=(b=c(u[N],N,g))&&L.push(b);else for(N in u)null!=(b=c(u[N],N,g))&&L.push(b);return Ci(L)},guid:1,support:Ce}),"function"==typeof Symbol&&(y.fn[Symbol.iterator]=se[Symbol.iterator]),y.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(u,c){zr["[object "+c+"]"]=c.toLowerCase()});var sr=function(u){var c,g,v,b,N,L,R,Y,it,dt,Mt,ct,mt,kt,ie,Yt,qt,ye,te,ae="sizzle"+1*new Date,ee=u.document,Lr=0,We=0,hn=Di(),Hs=Di(),Qa=Di(),Pr=Di(),fr=function(z,U){return z===U&&(Mt=!0),0},un={}.hasOwnProperty,mn=[],hs=mn.pop,oi=mn.push,_n=mn.push,ka=mn.slice,Fi=function(z,U){for(var Q=0,At=z.length;Q<At;Q++)if(z[Q]===U)return Q;return-1},zn="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",$e="[\\x20\\t\\r\\n\\f]",Fe="(?:\\\\[\\da-fA-F]{1,6}"+$e+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",hr="\\["+$e+"*("+Fe+")(?:"+$e+"*([*^$|!~]?=)"+$e+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+Fe+"))|)"+$e+"*\\]",Xn=":("+Fe+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+hr+")*)|.*)\\)|)",qa=new RegExp($e+"+","g"),dr=new RegExp("^"+$e+"+|((?:^|[^\\\\])(?:\\\\.)*)"+$e+"+$","g"),pi=new RegExp("^"+$e+"*,"+$e+"*"),Js=new RegExp("^"+$e+"*([>+~]|"+$e+")"+$e+"*"),$a=new RegExp($e+"|>"),xo=new RegExp(Xn),No=new RegExp("^"+Fe+"$"),pa={ID:new RegExp("^#("+Fe+")"),CLASS:new RegExp("^\\.("+Fe+")"),TAG:new RegExp("^("+Fe+"|[*])"),ATTR:new RegExp("^"+hr),PSEUDO:new RegExp("^"+Xn),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+$e+"*(even|odd|(([+-]|)(\\d*)n|)"+$e+"*(?:([+-]|)"+$e+"*(\\d+)|))"+$e+"*\\)|)","i"),bool:new RegExp("^(?:"+zn+")$","i"),needsContext:new RegExp("^"+$e+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+$e+"*((?:-\\d)?\\d*)"+$e+"*\\)|)(?=[^-]|$)","i")},uu=/HTML$/i,lu=/^(?:input|select|textarea|button)$/i,to=/^h\d$/i,vi=/^[^{]+\{\s*\[native \w/,Mo=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,va=/[+~]/,er=new RegExp("\\\\[\\da-fA-F]{1,6}"+$e+"?|\\\\([^\\r\\n\\f])","g"),qr=function(z,U){var Q="0x"+z.slice(1)-65536;return U||(Q<0?String.fromCharCode(Q+65536):String.fromCharCode(Q>>10|55296,1023&Q|56320))},Ti=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Ks=function(z,U){return U?"\0"===z?"\ufffd":z.slice(0,-1)+"\\"+z.charCodeAt(z.length-1).toString(16)+" ":"\\"+z},eo=function(){ct()},So=Zt(function(z){return!0===z.disabled&&"fieldset"===z.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{_n.apply(mn=ka.call(ee.childNodes),ee.childNodes)}catch{_n={apply:mn.length?function(U,Q){oi.apply(U,ka.call(Q))}:function(U,Q){for(var At=U.length,at=0;U[At++]=Q[at++];);U.length=At-1}}}function tn(z,U,Q,At){var at,wt,It,Et,zt,Jt,$t,oe=U&&U.ownerDocument,Te=U?U.nodeType:9;if(Q=Q||[],"string"!=typeof z||!z||1!==Te&&9!==Te&&11!==Te)return Q;if(!At&&(ct(U),U=U||mt,ie)){if(11!==Te&&(zt=Mo.exec(z)))if(at=zt[1]){if(9===Te){if(!(It=U.getElementById(at)))return Q;if(It.id===at)return Q.push(It),Q}else if(oe&&(It=oe.getElementById(at))&&te(U,It)&&It.id===at)return Q.push(It),Q}else{if(zt[2])return _n.apply(Q,U.getElementsByTagName(z)),Q;if((at=zt[3])&&g.getElementsByClassName&&U.getElementsByClassName)return _n.apply(Q,U.getElementsByClassName(at)),Q}if(g.qsa&&!Pr[z+" "]&&(!Yt||!Yt.test(z))&&(1!==Te||"object"!==U.nodeName.toLowerCase())){if($t=z,oe=U,1===Te&&($a.test(z)||Js.test(z))){for(((oe=va.test(z)&&nt(U.parentNode)||U)!==U||!g.scope)&&((Et=U.getAttribute("id"))?Et=Et.replace(Ti,Ks):U.setAttribute("id",Et=ae)),wt=(Jt=L(z)).length;wt--;)Jt[wt]=(Et?"#"+Et:":scope")+" "+pt(Jt[wt]);$t=Jt.join(",")}try{return _n.apply(Q,oe.querySelectorAll($t)),Q}catch{Pr(z,!0)}finally{Et===ae&&U.removeAttribute("id")}}}return Y(z.replace(dr,"$1"),U,Q,At)}function Di(){var z=[];return function U(Q,At){return z.push(Q+" ")>v.cacheLength&&delete U[z.shift()],U[Q+" "]=At}}function In(z){return z[ae]=!0,z}function Cr(z){var U=mt.createElement("fieldset");try{return!!z(U)}catch{return!1}finally{U.parentNode&&U.parentNode.removeChild(U),U=null}}function ma(z,U){for(var Q=z.split("|"),At=Q.length;At--;)v.attrHandle[Q[At]]=U}function no(z,U){var Q=U&&z,At=Q&&1===z.nodeType&&1===U.nodeType&&z.sourceIndex-U.sourceIndex;if(At)return At;if(Q)for(;Q=Q.nextSibling;)if(Q===U)return-1;return z?1:-1}function we(z){return function(U){return"input"===U.nodeName.toLowerCase()&&U.type===z}}function To(z){return function(U){var Q=U.nodeName.toLowerCase();return("input"===Q||"button"===Q)&&U.type===z}}function mi(z){return function(U){return"form"in U?U.parentNode&&!1===U.disabled?"label"in U?"label"in U.parentNode?U.parentNode.disabled===z:U.disabled===z:U.isDisabled===z||U.isDisabled!==!z&&So(U)===z:U.disabled===z:"label"in U&&U.disabled===z}}function Ii(z){return In(function(U){return U=+U,In(function(Q,At){for(var at,wt=z([],Q.length,U),It=wt.length;It--;)Q[at=wt[It]]&&(Q[at]=!(At[at]=Q[at]))})})}function nt(z){return z&&typeof z.getElementsByTagName<"u"&&z}for(c in g=tn.support={},N=tn.isXML=function(z){var Q=z&&(z.ownerDocument||z).documentElement;return!uu.test(z&&z.namespaceURI||Q&&Q.nodeName||"HTML")},ct=tn.setDocument=function(z){var U,Q,At=z?z.ownerDocument||z:ee;return At==mt||9!==At.nodeType||!At.documentElement||(kt=(mt=At).documentElement,ie=!N(mt),ee!=mt&&(Q=mt.defaultView)&&Q.top!==Q&&(Q.addEventListener?Q.addEventListener("unload",eo,!1):Q.attachEvent&&Q.attachEvent("onunload",eo)),g.scope=Cr(function(at){return kt.appendChild(at).appendChild(mt.createElement("div")),typeof at.querySelectorAll<"u"&&!at.querySelectorAll(":scope fieldset div").length}),g.attributes=Cr(function(at){return at.className="i",!at.getAttribute("className")}),g.getElementsByTagName=Cr(function(at){return at.appendChild(mt.createComment("")),!at.getElementsByTagName("*").length}),g.getElementsByClassName=vi.test(mt.getElementsByClassName),g.getById=Cr(function(at){return kt.appendChild(at).id=ae,!mt.getElementsByName||!mt.getElementsByName(ae).length}),g.getById?(v.filter.ID=function(at){var wt=at.replace(er,qr);return function(It){return It.getAttribute("id")===wt}},v.find.ID=function(at,wt){if(typeof wt.getElementById<"u"&&ie){var It=wt.getElementById(at);return It?[It]:[]}}):(v.filter.ID=function(at){var wt=at.replace(er,qr);return function(It){var Et=typeof It.getAttributeNode<"u"&&It.getAttributeNode("id");return Et&&Et.value===wt}},v.find.ID=function(at,wt){if(typeof wt.getElementById<"u"&&ie){var It,Et,zt,Jt=wt.getElementById(at);if(Jt){if((It=Jt.getAttributeNode("id"))&&It.value===at)return[Jt];for(zt=wt.getElementsByName(at),Et=0;Jt=zt[Et++];)if((It=Jt.getAttributeNode("id"))&&It.value===at)return[Jt]}return[]}}),v.find.TAG=g.getElementsByTagName?function(at,wt){return typeof wt.getElementsByTagName<"u"?wt.getElementsByTagName(at):g.qsa?wt.querySelectorAll(at):void 0}:function(at,wt){var It,Et=[],zt=0,Jt=wt.getElementsByTagName(at);if("*"===at){for(;It=Jt[zt++];)1===It.nodeType&&Et.push(It);return Et}return Jt},v.find.CLASS=g.getElementsByClassName&&function(at,wt){if(typeof wt.getElementsByClassName<"u"&&ie)return wt.getElementsByClassName(at)},qt=[],Yt=[],(g.qsa=vi.test(mt.querySelectorAll))&&(Cr(function(at){var wt;kt.appendChild(at).innerHTML="<a id='"+ae+"'></a><select id='"+ae+"-\r\\' msallowcapture=''><option selected=''></option></select>",at.querySelectorAll("[msallowcapture^='']").length&&Yt.push("[*^$]="+$e+"*(?:''|\"\")"),at.querySelectorAll("[selected]").length||Yt.push("\\["+$e+"*(?:value|"+zn+")"),at.querySelectorAll("[id~="+ae+"-]").length||Yt.push("~="),(wt=mt.createElement("input")).setAttribute("name",""),at.appendChild(wt),at.querySelectorAll("[name='']").length||Yt.push("\\["+$e+"*name"+$e+"*="+$e+"*(?:''|\"\")"),at.querySelectorAll(":checked").length||Yt.push(":checked"),at.querySelectorAll("a#"+ae+"+*").length||Yt.push(".#.+[+~]"),at.querySelectorAll("\\\f"),Yt.push("[\\r\\n\\f]")}),Cr(function(at){at.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var wt=mt.createElement("input");wt.setAttribute("type","hidden"),at.appendChild(wt).setAttribute("name","D"),at.querySelectorAll("[name=d]").length&&Yt.push("name"+$e+"*[*^$|!~]?="),2!==at.querySelectorAll(":enabled").length&&Yt.push(":enabled",":disabled"),kt.appendChild(at).disabled=!0,2!==at.querySelectorAll(":disabled").length&&Yt.push(":enabled",":disabled"),at.querySelectorAll("*,:x"),Yt.push(",.*:")})),(g.matchesSelector=vi.test(ye=kt.matches||kt.webkitMatchesSelector||kt.mozMatchesSelector||kt.oMatchesSelector||kt.msMatchesSelector))&&Cr(function(at){g.disconnectedMatch=ye.call(at,"*"),ye.call(at,"[s!='']:x"),qt.push("!=",Xn)}),Yt=Yt.length&&new RegExp(Yt.join("|")),qt=qt.length&&new RegExp(qt.join("|")),U=vi.test(kt.compareDocumentPosition),te=U||vi.test(kt.contains)?function(at,wt){var It=9===at.nodeType?at.documentElement:at,Et=wt&&wt.parentNode;return at===Et||!(!Et||1!==Et.nodeType||!(It.contains?It.contains(Et):at.compareDocumentPosition&&16&at.compareDocumentPosition(Et)))}:function(at,wt){if(wt)for(;wt=wt.parentNode;)if(wt===at)return!0;return!1},fr=U?function(at,wt){if(at===wt)return Mt=!0,0;var It=!at.compareDocumentPosition-!wt.compareDocumentPosition;return It||(1&(It=(at.ownerDocument||at)==(wt.ownerDocument||wt)?at.compareDocumentPosition(wt):1)||!g.sortDetached&&wt.compareDocumentPosition(at)===It?at==mt||at.ownerDocument==ee&&te(ee,at)?-1:wt==mt||wt.ownerDocument==ee&&te(ee,wt)?1:dt?Fi(dt,at)-Fi(dt,wt):0:4&It?-1:1)}:function(at,wt){if(at===wt)return Mt=!0,0;var It,Et=0,zt=at.parentNode,Jt=wt.parentNode,$t=[at],oe=[wt];if(!zt||!Jt)return at==mt?-1:wt==mt?1:zt?-1:Jt?1:dt?Fi(dt,at)-Fi(dt,wt):0;if(zt===Jt)return no(at,wt);for(It=at;It=It.parentNode;)$t.unshift(It);for(It=wt;It=It.parentNode;)oe.unshift(It);for(;$t[Et]===oe[Et];)Et++;return Et?no($t[Et],oe[Et]):$t[Et]==ee?-1:oe[Et]==ee?1:0}),mt},tn.matches=function(z,U){return tn(z,null,null,U)},tn.matchesSelector=function(z,U){if(ct(z),g.matchesSelector&&ie&&!Pr[U+" "]&&(!qt||!qt.test(U))&&(!Yt||!Yt.test(U)))try{var Q=ye.call(z,U);if(Q||g.disconnectedMatch||z.document&&11!==z.document.nodeType)return Q}catch{Pr(U,!0)}return tn(U,mt,null,[z]).length>0},tn.contains=function(z,U){return(z.ownerDocument||z)!=mt&&ct(z),te(z,U)},tn.attr=function(z,U){(z.ownerDocument||z)!=mt&&ct(z);var Q=v.attrHandle[U.toLowerCase()],At=Q&&un.call(v.attrHandle,U.toLowerCase())?Q(z,U,!ie):void 0;return void 0!==At?At:g.attributes||!ie?z.getAttribute(U):(At=z.getAttributeNode(U))&&At.specified?At.value:null},tn.escape=function(z){return(z+"").replace(Ti,Ks)},tn.error=function(z){throw new Error("Syntax error, unrecognized expression: "+z)},tn.uniqueSort=function(z){var U,Q=[],At=0,at=0;if(Mt=!g.detectDuplicates,dt=!g.sortStable&&z.slice(0),z.sort(fr),Mt){for(;U=z[at++];)U===z[at]&&(At=Q.push(at));for(;At--;)z.splice(Q[At],1)}return dt=null,z},b=tn.getText=function(z){var U,Q="",At=0,at=z.nodeType;if(at){if(1===at||9===at||11===at){if("string"==typeof z.textContent)return z.textContent;for(z=z.firstChild;z;z=z.nextSibling)Q+=b(z)}else if(3===at||4===at)return z.nodeValue}else for(;U=z[At++];)Q+=b(U);return Q},(v=tn.selectors={cacheLength:50,createPseudo:In,match:pa,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(z){return z[1]=z[1].replace(er,qr),z[3]=(z[3]||z[4]||z[5]||"").replace(er,qr),"~="===z[2]&&(z[3]=" "+z[3]+" "),z.slice(0,4)},CHILD:function(z){return z[1]=z[1].toLowerCase(),"nth"===z[1].slice(0,3)?(z[3]||tn.error(z[0]),z[4]=+(z[4]?z[5]+(z[6]||1):2*("even"===z[3]||"odd"===z[3])),z[5]=+(z[7]+z[8]||"odd"===z[3])):z[3]&&tn.error(z[0]),z},PSEUDO:function(z){var U,Q=!z[6]&&z[2];return pa.CHILD.test(z[0])?null:(z[3]?z[2]=z[4]||z[5]||"":Q&&xo.test(Q)&&(U=L(Q,!0))&&(U=Q.indexOf(")",Q.length-U)-Q.length)&&(z[0]=z[0].slice(0,U),z[2]=Q.slice(0,U)),z.slice(0,3))}},filter:{TAG:function(z){var U=z.replace(er,qr).toLowerCase();return"*"===z?function(){return!0}:function(Q){return Q.nodeName&&Q.nodeName.toLowerCase()===U}},CLASS:function(z){var U=hn[z+" "];return U||(U=new RegExp("(^|"+$e+")"+z+"("+$e+"|$)"))&&hn(z,function(Q){return U.test("string"==typeof Q.className&&Q.className||typeof Q.getAttribute<"u"&&Q.getAttribute("class")||"")})},ATTR:function(z,U,Q){return function(At){var at=tn.attr(At,z);return null==at?"!="===U:!U||(at+="","="===U?at===Q:"!="===U?at!==Q:"^="===U?Q&&0===at.indexOf(Q):"*="===U?Q&&at.indexOf(Q)>-1:"$="===U?Q&&at.slice(-Q.length)===Q:"~="===U?(" "+at.replace(qa," ")+" ").indexOf(Q)>-1:"|="===U&&(at===Q||at.slice(0,Q.length+1)===Q+"-"))}},CHILD:function(z,U,Q,At,at){var wt="nth"!==z.slice(0,3),It="last"!==z.slice(-4),Et="of-type"===U;return 1===At&&0===at?function(zt){return!!zt.parentNode}:function(zt,Jt,$t){var oe,Te,en,Ft,Sn,gr,yr=wt!==It?"nextSibling":"previousSibling",An=zt.parentNode,Qs=Et&&zt.nodeName.toLowerCase(),ds=!$t&&!Et,De=!1;if(An){if(wt){for(;yr;){for(Ft=zt;Ft=Ft[yr];)if(Et?Ft.nodeName.toLowerCase()===Qs:1===Ft.nodeType)return!1;gr=yr="only"===z&&!gr&&"nextSibling"}return!0}if(gr=[It?An.firstChild:An.lastChild],It&&ds){for(De=(Sn=(oe=(Te=(en=(Ft=An)[ae]||(Ft[ae]={}))[Ft.uniqueID]||(en[Ft.uniqueID]={}))[z]||[])[0]===Lr&&oe[1])&&oe[2],Ft=Sn&&An.childNodes[Sn];Ft=++Sn&&Ft&&Ft[yr]||(De=Sn=0)||gr.pop();)if(1===Ft.nodeType&&++De&&Ft===zt){Te[z]=[Lr,Sn,De];break}}else if(ds&&(De=Sn=(oe=(Te=(en=(Ft=zt)[ae]||(Ft[ae]={}))[Ft.uniqueID]||(en[Ft.uniqueID]={}))[z]||[])[0]===Lr&&oe[1]),!1===De)for(;(Ft=++Sn&&Ft&&Ft[yr]||(De=Sn=0)||gr.pop())&&((Et?Ft.nodeName.toLowerCase()!==Qs:1!==Ft.nodeType)||!++De||(ds&&((Te=(en=Ft[ae]||(Ft[ae]={}))[Ft.uniqueID]||(en[Ft.uniqueID]={}))[z]=[Lr,De]),Ft!==zt)););return(De-=at)===At||De%At==0&&De/At>=0}}},PSEUDO:function(z,U){var Q,At=v.pseudos[z]||v.setFilters[z.toLowerCase()]||tn.error("unsupported pseudo: "+z);return At[ae]?At(U):At.length>1?(Q=[z,z,"",U],v.setFilters.hasOwnProperty(z.toLowerCase())?In(function(at,wt){for(var It,Et=At(at,U),zt=Et.length;zt--;)at[It=Fi(at,Et[zt])]=!(wt[It]=Et[zt])}):function(at){return At(at,0,Q)}):At}},pseudos:{not:In(function(z){var U=[],Q=[],At=R(z.replace(dr,"$1"));return At[ae]?In(function(at,wt,It,Et){for(var zt,Jt=At(at,null,Et,[]),$t=at.length;$t--;)(zt=Jt[$t])&&(at[$t]=!(wt[$t]=zt))}):function(at,wt,It){return U[0]=at,At(U,null,It,Q),U[0]=null,!Q.pop()}}),has:In(function(z){return function(U){return tn(z,U).length>0}}),contains:In(function(z){return z=z.replace(er,qr),function(U){return(U.textContent||b(U)).indexOf(z)>-1}}),lang:In(function(z){return No.test(z||"")||tn.error("unsupported lang: "+z),z=z.replace(er,qr).toLowerCase(),function(U){var Q;do{if(Q=ie?U.lang:U.getAttribute("xml:lang")||U.getAttribute("lang"))return(Q=Q.toLowerCase())===z||0===Q.indexOf(z+"-")}while((U=U.parentNode)&&1===U.nodeType);return!1}}),target:function(z){var U=u.location&&u.location.hash;return U&&U.slice(1)===z.id},root:function(z){return z===kt},focus:function(z){return z===mt.activeElement&&(!mt.hasFocus||mt.hasFocus())&&!!(z.type||z.href||~z.tabIndex)},enabled:mi(!1),disabled:mi(!0),checked:function(z){var U=z.nodeName.toLowerCase();return"input"===U&&!!z.checked||"option"===U&&!!z.selected},selected:function(z){return!0===z.selected},empty:function(z){for(z=z.firstChild;z;z=z.nextSibling)if(z.nodeType<6)return!1;return!0},parent:function(z){return!v.pseudos.empty(z)},header:function(z){return to.test(z.nodeName)},input:function(z){return lu.test(z.nodeName)},button:function(z){var U=z.nodeName.toLowerCase();return"input"===U&&"button"===z.type||"button"===U},text:function(z){var U;return"input"===z.nodeName.toLowerCase()&&"text"===z.type&&(null==(U=z.getAttribute("type"))||"text"===U.toLowerCase())},first:Ii(function(){return[0]}),last:Ii(function(z,U){return[U-1]}),eq:Ii(function(z,U,Q){return[Q<0?Q+U:Q]}),even:Ii(function(z,U){for(var Q=0;Q<U;Q+=2)z.push(Q);return z}),odd:Ii(function(z,U){for(var Q=1;Q<U;Q+=2)z.push(Q);return z}),lt:Ii(function(z,U,Q){for(var At=Q<0?Q+U:Q>U?U:Q;--At>=0;)z.push(At);return z}),gt:Ii(function(z,U,Q){for(var At=Q<0?Q+U:Q;++At<U;)z.push(At);return z})}}).pseudos.nth=v.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})v.pseudos[c]=we(c);for(c in{submit:!0,reset:!0})v.pseudos[c]=To(c);function yt(){}function pt(z){for(var U=0,Q=z.length,At="";U<Q;U++)At+=z[U].value;return At}function Zt(z,U,Q){var At=U.dir,at=U.next,wt=at||At,It=Q&&"parentNode"===wt,Et=We++;return U.first?function(zt,Jt,$t){for(;zt=zt[At];)if(1===zt.nodeType||It)return z(zt,Jt,$t);return!1}:function(zt,Jt,$t){var oe,Te,en,Ft=[Lr,Et];if($t){for(;zt=zt[At];)if((1===zt.nodeType||It)&&z(zt,Jt,$t))return!0}else for(;zt=zt[At];)if(1===zt.nodeType||It)if(Te=(en=zt[ae]||(zt[ae]={}))[zt.uniqueID]||(en[zt.uniqueID]={}),at&&at===zt.nodeName.toLowerCase())zt=zt[At]||zt;else{if((oe=Te[wt])&&oe[0]===Lr&&oe[1]===Et)return Ft[2]=oe[2];if(Te[wt]=Ft,Ft[2]=z(zt,Jt,$t))return!0}return!1}}function fe(z){return z.length>1?function(U,Q,At){for(var at=z.length;at--;)if(!z[at](U,Q,At))return!1;return!0}:z[0]}function Mn(z,U,Q,At,at){for(var wt,It=[],Et=0,zt=z.length,Jt=null!=U;Et<zt;Et++)(wt=z[Et])&&(!Q||Q(wt,At,at))&&(It.push(wt),Jt&&U.push(Et));return It}function rn(z,U,Q,At,at,wt){return At&&!At[ae]&&(At=rn(At)),at&&!at[ae]&&(at=rn(at,wt)),In(function(It,Et,zt,Jt){var $t,oe,Te,en=[],Ft=[],Sn=Et.length,gr=It||function Ve(z,U,Q){for(var At=0,at=U.length;At<at;At++)tn(z,U[At],Q);return Q}(U||"*",zt.nodeType?[zt]:zt,[]),yr=!z||!It&&U?gr:Mn(gr,en,z,zt,Jt),An=Q?at||(It?z:Sn||At)?[]:Et:yr;if(Q&&Q(yr,An,zt,Jt),At)for($t=Mn(An,Ft),At($t,[],zt,Jt),oe=$t.length;oe--;)(Te=$t[oe])&&(An[Ft[oe]]=!(yr[Ft[oe]]=Te));if(It){if(at||z){if(at){for($t=[],oe=An.length;oe--;)(Te=An[oe])&&$t.push(yr[oe]=Te);at(null,An=[],$t,Jt)}for(oe=An.length;oe--;)(Te=An[oe])&&($t=at?Fi(It,Te):en[oe])>-1&&(It[$t]=!(Et[$t]=Te))}}else An=Mn(An===Et?An.splice(Sn,An.length):An),at?at(null,Et,An,Jt):_n.apply(Et,An)})}function Ia(z){for(var U,Q,At,at=z.length,wt=v.relative[z[0].type],It=wt||v.relative[" "],Et=wt?1:0,zt=Zt(function(oe){return oe===U},It,!0),Jt=Zt(function(oe){return Fi(U,oe)>-1},It,!0),$t=[function(oe,Te,en){var Ft=!wt&&(en||Te!==it)||((U=Te).nodeType?zt(oe,Te,en):Jt(oe,Te,en));return U=null,Ft}];Et<at;Et++)if(Q=v.relative[z[Et].type])$t=[Zt(fe($t),Q)];else{if((Q=v.filter[z[Et].type].apply(null,z[Et].matches))[ae]){for(At=++Et;At<at&&!v.relative[z[At].type];At++);return rn(Et>1&&fe($t),Et>1&&pt(z.slice(0,Et-1).concat({value:" "===z[Et-2].type?"*":""})).replace(dr,"$1"),Q,Et<At&&Ia(z.slice(Et,At)),At<at&&Ia(z=z.slice(At)),At<at&&pt(z))}$t.push(Q)}return fe($t)}return yt.prototype=v.filters=v.pseudos,v.setFilters=new yt,L=tn.tokenize=function(z,U){var Q,At,at,wt,It,Et,zt,Jt=Hs[z+" "];if(Jt)return U?0:Jt.slice(0);for(It=z,Et=[],zt=v.preFilter;It;){for(wt in(!Q||(At=pi.exec(It)))&&(At&&(It=It.slice(At[0].length)||It),Et.push(at=[])),Q=!1,(At=Js.exec(It))&&(Q=At.shift(),at.push({value:Q,type:At[0].replace(dr," ")}),It=It.slice(Q.length)),v.filter)(At=pa[wt].exec(It))&&(!zt[wt]||(At=zt[wt](At)))&&(Q=At.shift(),at.push({value:Q,type:wt,matches:At}),It=It.slice(Q.length));if(!Q)break}return U?It.length:It?tn.error(z):Hs(z,Et).slice(0)},R=tn.compile=function(z,U){var Q,At=[],at=[],wt=Qa[z+" "];if(!wt){for(U||(U=L(z)),Q=U.length;Q--;)(wt=Ia(U[Q]))[ae]?At.push(wt):at.push(wt);wt=Qa(z,function cu(z,U){var Q=U.length>0,At=z.length>0,at=function(wt,It,Et,zt,Jt){var $t,oe,Te,en=0,Ft="0",Sn=wt&&[],gr=[],yr=it,An=wt||At&&v.find.TAG("*",Jt),Qs=Lr+=null==yr?1:Math.random()||.1,ds=An.length;for(Jt&&(it=It==mt||It||Jt);Ft!==ds&&null!=($t=An[Ft]);Ft++){if(At&&$t){for(oe=0,!It&&$t.ownerDocument!=mt&&(ct($t),Et=!ie);Te=z[oe++];)if(Te($t,It||mt,Et)){zt.push($t);break}Jt&&(Lr=Qs)}Q&&(($t=!Te&&$t)&&en--,wt&&Sn.push($t))}if(en+=Ft,Q&&Ft!==en){for(oe=0;Te=U[oe++];)Te(Sn,gr,It,Et);if(wt){if(en>0)for(;Ft--;)Sn[Ft]||gr[Ft]||(gr[Ft]=hs.call(zt));gr=Mn(gr)}_n.apply(zt,gr),Jt&&!wt&&gr.length>0&&en+U.length>1&&tn.uniqueSort(zt)}return Jt&&(Lr=Qs,it=yr),Sn};return Q?In(at):at}(at,At)),wt.selector=z}return wt},Y=tn.select=function(z,U,Q,At){var at,wt,It,Et,zt,Jt="function"==typeof z&&z,$t=!At&&L(z=Jt.selector||z);if(Q=Q||[],1===$t.length){if((wt=$t[0]=$t[0].slice(0)).length>2&&"ID"===(It=wt[0]).type&&9===U.nodeType&&ie&&v.relative[wt[1].type]){if(!(U=(v.find.ID(It.matches[0].replace(er,qr),U)||[])[0]))return Q;Jt&&(U=U.parentNode),z=z.slice(wt.shift().value.length)}for(at=pa.needsContext.test(z)?0:wt.length;at--&&!v.relative[Et=(It=wt[at]).type];)if((zt=v.find[Et])&&(At=zt(It.matches[0].replace(er,qr),va.test(wt[0].type)&&nt(U.parentNode)||U))){if(wt.splice(at,1),!(z=At.length&&pt(wt)))return _n.apply(Q,At),Q;break}}return(Jt||R(z,$t))(At,U,!ie,Q,!U||va.test(z)&&nt(U.parentNode)||U),Q},g.sortStable=ae.split("").sort(fr).join("")===ae,g.detectDuplicates=!!Mt,ct(),g.sortDetached=Cr(function(z){return 1&z.compareDocumentPosition(mt.createElement("fieldset"))}),Cr(function(z){return z.innerHTML="<a href='#'></a>","#"===z.firstChild.getAttribute("href")})||ma("type|href|height|width",function(z,U,Q){if(!Q)return z.getAttribute(U,"type"===U.toLowerCase()?1:2)}),(!g.attributes||!Cr(function(z){return z.innerHTML="<input/>",z.firstChild.setAttribute("value",""),""===z.firstChild.getAttribute("value")}))&&ma("value",function(z,U,Q){if(!Q&&"input"===z.nodeName.toLowerCase())return z.defaultValue}),Cr(function(z){return null==z.getAttribute("disabled")})||ma(zn,function(z,U,Q){var At;if(!Q)return!0===z[U]?U.toLowerCase():(At=z.getAttributeNode(U))&&At.specified?At.value:null}),tn}(G);y.find=sr,y.expr=sr.selectors,y.expr[":"]=y.expr.pseudos,y.uniqueSort=y.unique=sr.uniqueSort,y.text=sr.getText,y.isXMLDoc=sr.isXML,y.contains=sr.contains,y.escapeSelector=sr.escape;var Br=function(u,c,g){for(var v=[],b=void 0!==g;(u=u[c])&&9!==u.nodeType;)if(1===u.nodeType){if(b&&y(u).is(g))break;v.push(u)}return v},ys=function(u,c){for(var g=[];u;u=u.nextSibling)1===u.nodeType&&u!==c&&g.push(u);return g},$i=y.expr.match.needsContext;function ar(u,c){return u.nodeName&&u.nodeName.toLowerCase()===c.toLowerCase()}var $n=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Rr(u,c,g){return Ut(c)?y.grep(u,function(v,b){return!!c.call(v,b,v)!==g}):c.nodeType?y.grep(u,function(v){return v===c!==g}):"string"!=typeof c?y.grep(u,function(v){return nn.call(c,v)>-1!==g}):y.filter(c,u,g)}y.filter=function(u,c,g){var v=c[0];return g&&(u=":not("+u+")"),1===c.length&&1===v.nodeType?y.find.matchesSelector(v,u)?[v]:[]:y.find.matches(u,y.grep(c,function(b){return 1===b.nodeType}))},y.fn.extend({find:function(u){var c,g,v=this.length,b=this;if("string"!=typeof u)return this.pushStack(y(u).filter(function(){for(c=0;c<v;c++)if(y.contains(b[c],this))return!0}));for(g=this.pushStack([]),c=0;c<v;c++)y.find(u,b[c],g);return v>1?y.uniqueSort(g):g},filter:function(u){return this.pushStack(Rr(this,u||[],!1))},not:function(u){return this.pushStack(Rr(this,u||[],!0))},is:function(u){return!!Rr(this,"string"==typeof u&&$i.test(u)?y(u):u||[],!1).length}});var Gi,Ne=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Ir=y.fn.init=function(u,c,g){var v,b;if(!u)return this;if(g=g||Gi,"string"==typeof u){if(!(v="<"===u[0]&&">"===u[u.length-1]&&u.length>=3?[null,u,null]:Ne.exec(u))||!v[1]&&c)return!c||c.jquery?(c||g).find(u):this.constructor(c).find(u);if(v[1]){if(y.merge(this,y.parseHTML(v[1],(c=c instanceof y?c[0]:c)&&c.nodeType?c.ownerDocument||c:Ie,!0)),$n.test(v[1])&&y.isPlainObject(c))for(v in c)Ut(this[v])?this[v](c[v]):this.attr(v,c[v]);return this}return(b=Ie.getElementById(v[2]))&&(this[0]=b,this.length=1),this}return u.nodeType?(this[0]=u,this.length=1,this):Ut(u)?void 0!==g.ready?g.ready(u):u(y):y.makeArray(u,this)};Ir.prototype=y.fn,Gi=y(Ie);var yi=/^(?:parents|prev(?:Until|All))/,ii={children:!0,contents:!0,next:!0,prev:!0};function Tr(u,c){for(;(u=u[c])&&1!==u.nodeType;);return u}y.fn.extend({has:function(u){var c=y(u,this),g=c.length;return this.filter(function(){for(var v=0;v<g;v++)if(y.contains(this,c[v]))return!0})},closest:function(u,c){var g,v=0,b=this.length,N=[],L="string"!=typeof u&&y(u);if(!$i.test(u))for(;v<b;v++)for(g=this[v];g&&g!==c;g=g.parentNode)if(g.nodeType<11&&(L?L.index(g)>-1:1===g.nodeType&&y.find.matchesSelector(g,u))){N.push(g);break}return this.pushStack(N.length>1?y.uniqueSort(N):N)},index:function(u){return u?"string"==typeof u?nn.call(y(u),this[0]):nn.call(this,u.jquery?u[0]:u):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(u,c){return this.pushStack(y.uniqueSort(y.merge(this.get(),y(u,c))))},addBack:function(u){return this.add(null==u?this.prevObject:this.prevObject.filter(u))}}),y.each({parent:function(u){var c=u.parentNode;return c&&11!==c.nodeType?c:null},parents:function(u){return Br(u,"parentNode")},parentsUntil:function(u,c,g){return Br(u,"parentNode",g)},next:function(u){return Tr(u,"nextSibling")},prev:function(u){return Tr(u,"previousSibling")},nextAll:function(u){return Br(u,"nextSibling")},prevAll:function(u){return Br(u,"previousSibling")},nextUntil:function(u,c,g){return Br(u,"nextSibling",g)},prevUntil:function(u,c,g){return Br(u,"previousSibling",g)},siblings:function(u){return ys((u.parentNode||{}).firstChild,u)},children:function(u){return ys(u.firstChild)},contents:function(u){return null!=u.contentDocument&&St(u.contentDocument)?u.contentDocument:(ar(u,"template")&&(u=u.content||u),y.merge([],u.childNodes))}},function(u,c){y.fn[u]=function(g,v){var b=y.map(this,c,g);return"Until"!==u.slice(-5)&&(v=g),v&&"string"==typeof v&&(b=y.filter(v,b)),this.length>1&&(ii[u]||y.uniqueSort(b),yi.test(u)&&b.reverse()),this.pushStack(b)}});var tr=/[^\x20\t\r\n\f]+/g;function Fn(u){return u}function Ht(u){throw u}function Gr(u,c,g,v){var b;try{u&&Ut(b=u.promise)?b.call(u).done(c).fail(g):u&&Ut(b=u.then)?b.call(u,c,g):c.apply(void 0,[u].slice(v))}catch(N){g.apply(void 0,[N])}}y.Callbacks=function(u){u="string"==typeof u?function Xr(u){var c={};return y.each(u.match(tr)||[],function(g,v){c[v]=!0}),c}(u):y.extend({},u);var c,g,v,b,N=[],L=[],R=-1,Y=function(){for(b=b||u.once,v=c=!0;L.length;R=-1)for(g=L.shift();++R<N.length;)!1===N[R].apply(g[0],g[1])&&u.stopOnFalse&&(R=N.length,g=!1);u.memory||(g=!1),c=!1,b&&(N=g?[]:"")},it={add:function(){return N&&(g&&!c&&(R=N.length-1,L.push(g)),function dt(Mt){y.each(Mt,function(ct,mt){Ut(mt)?(!u.unique||!it.has(mt))&&N.push(mt):mt&&mt.length&&"string"!==gn(mt)&&dt(mt)})}(arguments),g&&!c&&Y()),this},remove:function(){return y.each(arguments,function(dt,Mt){for(var ct;(ct=y.inArray(Mt,N,ct))>-1;)N.splice(ct,1),ct<=R&&R--}),this},has:function(dt){return dt?y.inArray(dt,N)>-1:N.length>0},empty:function(){return N&&(N=[]),this},disable:function(){return b=L=[],N=g="",this},disabled:function(){return!N},lock:function(){return b=L=[],!g&&!c&&(N=g=""),this},locked:function(){return!!b},fireWith:function(dt,Mt){return b||(Mt=[dt,(Mt=Mt||[]).slice?Mt.slice():Mt],L.push(Mt),c||Y()),this},fire:function(){return it.fireWith(this,arguments),this},fired:function(){return!!v}};return it},y.extend({Deferred:function(u){var c=[["notify","progress",y.Callbacks("memory"),y.Callbacks("memory"),2],["resolve","done",y.Callbacks("once memory"),y.Callbacks("once memory"),0,"resolved"],["reject","fail",y.Callbacks("once memory"),y.Callbacks("once memory"),1,"rejected"]],g="pending",v={state:function(){return g},always:function(){return b.done(arguments).fail(arguments),this},catch:function(N){return v.then(null,N)},pipe:function(){var N=arguments;return y.Deferred(function(L){y.each(c,function(R,Y){var it=Ut(N[Y[4]])&&N[Y[4]];b[Y[1]](function(){var dt=it&&it.apply(this,arguments);dt&&Ut(dt.promise)?dt.promise().progress(L.notify).done(L.resolve).fail(L.reject):L[Y[0]+"With"](this,it?[dt]:arguments)})}),N=null}).promise()},then:function(N,L,R){var Y=0;function it(dt,Mt,ct,mt){return function(){var kt=this,ie=arguments,Yt=function(){var ye,te;if(!(dt<Y)){if((ye=ct.apply(kt,ie))===Mt.promise())throw new TypeError("Thenable self-resolution");Ut(te=ye&&("object"==typeof ye||"function"==typeof ye)&&ye.then)?mt?te.call(ye,it(Y,Mt,Fn,mt),it(Y,Mt,Ht,mt)):(Y++,te.call(ye,it(Y,Mt,Fn,mt),it(Y,Mt,Ht,mt),it(Y,Mt,Fn,Mt.notifyWith))):(ct!==Fn&&(kt=void 0,ie=[ye]),(mt||Mt.resolveWith)(kt,ie))}},qt=mt?Yt:function(){try{Yt()}catch(ye){y.Deferred.exceptionHook&&y.Deferred.exceptionHook(ye,qt.stackTrace),dt+1>=Y&&(ct!==Ht&&(kt=void 0,ie=[ye]),Mt.rejectWith(kt,ie))}};dt?qt():(y.Deferred.getStackHook&&(qt.stackTrace=y.Deferred.getStackHook()),G.setTimeout(qt))}}return y.Deferred(function(dt){c[0][3].add(it(0,dt,Ut(R)?R:Fn,dt.notifyWith)),c[1][3].add(it(0,dt,Ut(N)?N:Fn)),c[2][3].add(it(0,dt,Ut(L)?L:Ht))}).promise()},promise:function(N){return null!=N?y.extend(N,v):v}},b={};return y.each(c,function(N,L){var R=L[2],Y=L[5];v[L[1]]=R.add,Y&&R.add(function(){g=Y},c[3-N][2].disable,c[3-N][3].disable,c[0][2].lock,c[0][3].lock),R.add(L[3].fire),b[L[0]]=function(){return b[L[0]+"With"](this===b?void 0:this,arguments),this},b[L[0]+"With"]=R.fireWith}),v.promise(b),u&&u.call(b,b),b},when:function(u){var c=arguments.length,g=c,v=Array(g),b=Je.call(arguments),N=y.Deferred(),L=function(R){return function(Y){v[R]=this,b[R]=arguments.length>1?Je.call(arguments):Y,--c||N.resolveWith(v,b)}};if(c<=1&&(Gr(u,N.done(L(g)).resolve,N.reject,!c),"pending"===N.state()||Ut(b[g]&&b[g].then)))return N.then();for(;g--;)Gr(b[g],L(g),N.reject);return N.promise()}});var ts=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;y.Deferred.exceptionHook=function(u,c){G.console&&G.console.warn&&u&&ts.test(u.name)&&G.console.warn("jQuery.Deferred exception: "+u.message,u.stack,c)},y.readyException=function(u){G.setTimeout(function(){throw u})};var jr=y.Deferred();function Ln(){Ie.removeEventListener("DOMContentLoaded",Ln),G.removeEventListener("load",Ln),y.ready()}y.fn.ready=function(u){return jr.then(u).catch(function(c){y.readyException(c)}),this},y.extend({isReady:!1,readyWait:1,ready:function(u){(!0===u?--y.readyWait:y.isReady)||(y.isReady=!0,!(!0!==u&&--y.readyWait>0)&&jr.resolveWith(Ie,[y]))}}),y.ready.then=jr.then,"complete"===Ie.readyState||"loading"!==Ie.readyState&&!Ie.documentElement.doScroll?G.setTimeout(y.ready):(Ie.addEventListener("DOMContentLoaded",Ln),G.addEventListener("load",Ln));var Dr=function(u,c,g,v,b,N,L){var R=0,Y=u.length,it=null==g;if("object"===gn(g))for(R in b=!0,g)Dr(u,c,R,g[R],!0,N,L);else if(void 0!==v&&(b=!0,Ut(v)||(L=!0),it&&(L?(c.call(u,v),c=null):(it=c,c=function(dt,Mt,ct){return it.call(y(dt),ct)})),c))for(;R<Y;R++)c(u[R],g,L?v:v.call(u[R],R,c(u[R],g)));return b?u:it?c.call(u):Y?c(u[0],g):N},si=/^-ms-/,es=/-([a-z])/g;function ws(u,c){return c.toUpperCase()}function pn(u){return u.replace(si,"ms-").replace(es,ws)}var Ke=function(u){return 1===u.nodeType||9===u.nodeType||!+u.nodeType};function I(){this.expando=y.expando+I.uid++}I.uid=1,I.prototype={cache:function(u){var c=u[this.expando];return c||(c={},Ke(u)&&(u.nodeType?u[this.expando]=c:Object.defineProperty(u,this.expando,{value:c,configurable:!0}))),c},set:function(u,c,g){var v,b=this.cache(u);if("string"==typeof c)b[pn(c)]=g;else for(v in c)b[pn(v)]=c[v];return b},get:function(u,c){return void 0===c?this.cache(u):u[this.expando]&&u[this.expando][pn(c)]},access:function(u,c,g){return void 0===c||c&&"string"==typeof c&&void 0===g?this.get(u,c):(this.set(u,c,g),void 0!==g?g:c)},remove:function(u,c){var g,v=u[this.expando];if(void 0!==v){if(void 0!==c)for((g=(c=Array.isArray(c)?c.map(pn):(c=pn(c))in v?[c]:c.match(tr)||[]).length);g--;)delete v[c[g]];(void 0===c||y.isEmptyObject(v))&&(u.nodeType?u[this.expando]=void 0:delete u[this.expando])}},hasData:function(u){var c=u[this.expando];return void 0!==c&&!y.isEmptyObject(c)}};var T=new I,W=new I,K=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,tt=/[A-Z]/g;function jt(u,c,g){var v;if(void 0===g&&1===u.nodeType)if(v="data-"+c.replace(tt,"-$&").toLowerCase(),"string"==typeof(g=u.getAttribute(v))){try{g=function Ct(u){return"true"===u||"false"!==u&&("null"===u?null:u===+u+""?+u:K.test(u)?JSON.parse(u):u)}(g)}catch{}W.set(u,c,g)}else g=void 0;return g}y.extend({hasData:function(u){return W.hasData(u)||T.hasData(u)},data:function(u,c,g){return W.access(u,c,g)},removeData:function(u,c){W.remove(u,c)},_data:function(u,c,g){return T.access(u,c,g)},_removeData:function(u,c){T.remove(u,c)}}),y.fn.extend({data:function(u,c){var g,v,b,N=this[0],L=N&&N.attributes;if(void 0===u){if(this.length&&(b=W.get(N),1===N.nodeType&&!T.get(N,"hasDataAttrs"))){for(g=L.length;g--;)L[g]&&0===(v=L[g].name).indexOf("data-")&&(v=pn(v.slice(5)),jt(N,v,b[v]));T.set(N,"hasDataAttrs",!0)}return b}return"object"==typeof u?this.each(function(){W.set(this,u)}):Dr(this,function(R){var Y;if(N&&void 0===R)return void 0!==(Y=W.get(N,u))||void 0!==(Y=jt(N,u))?Y:void 0;this.each(function(){W.set(this,u,R)})},null,c,arguments.length>1,null,!0)},removeData:function(u){return this.each(function(){W.remove(this,u)})}}),y.extend({queue:function(u,c,g){var v;if(u)return v=T.get(u,c=(c||"fx")+"queue"),g&&(!v||Array.isArray(g)?v=T.access(u,c,y.makeArray(g)):v.push(g)),v||[]},dequeue:function(u,c){var g=y.queue(u,c=c||"fx"),v=g.length,b=g.shift(),N=y._queueHooks(u,c);"inprogress"===b&&(b=g.shift(),v--),b&&("fx"===c&&g.unshift("inprogress"),delete N.stop,b.call(u,function(){y.dequeue(u,c)},N)),!v&&N&&N.empty.fire()},_queueHooks:function(u,c){var g=c+"queueHooks";return T.get(u,g)||T.access(u,g,{empty:y.Callbacks("once memory").add(function(){T.remove(u,[c+"queue",g])})})}}),y.fn.extend({queue:function(u,c){var g=2;return"string"!=typeof u&&(c=u,u="fx",g--),arguments.length<g?y.queue(this[0],u):void 0===c?this:this.each(function(){var v=y.queue(this,u,c);y._queueHooks(this,u),"fx"===u&&"inprogress"!==v[0]&&y.dequeue(this,u)})},dequeue:function(u){return this.each(function(){y.dequeue(this,u)})},clearQueue:function(u){return this.queue(u||"fx",[])},promise:function(u,c){var g,v=1,b=y.Deferred(),N=this,L=this.length,R=function(){--v||b.resolveWith(N,[N])};for("string"!=typeof u&&(c=u,u=void 0),u=u||"fx";L--;)(g=T.get(N[L],u+"queueHooks"))&&g.empty&&(v++,g.empty.add(R));return R(),b.promise(c)}});var ue=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Qe=new RegExp("^(?:([+-])=|)("+ue+")([a-z%]*)$","i"),ce=["Top","Right","Bottom","Left"],vn=Ie.documentElement,Me=function(u){return y.contains(u.ownerDocument,u)},On={composed:!0};vn.getRootNode&&(Me=function(u){return y.contains(u.ownerDocument,u)||u.getRootNode(On)===u.ownerDocument});var or=function(u,c){return"none"===(u=c||u).style.display||""===u.style.display&&Me(u)&&"none"===y.css(u,"display")};function Hr(u,c,g,v){var b,N,L=20,R=v?function(){return v.cur()}:function(){return y.css(u,c,"")},Y=R(),it=g&&g[3]||(y.cssNumber[c]?"":"px"),dt=u.nodeType&&(y.cssNumber[c]||"px"!==it&&+Y)&&Qe.exec(y.css(u,c));if(dt&&dt[3]!==it){for(it=it||dt[3],dt=+(Y/=2)||1;L--;)y.style(u,c,dt+it),(1-N)*(1-(N=R()/Y||.5))<=0&&(L=0),dt/=N;y.style(u,c,(dt*=2)+it),g=g||[]}return g&&(dt=+dt||+Y||0,b=g[1]?dt+(g[1]+1)*g[2]:+g[2],v&&(v.unit=it,v.start=dt,v.end=b)),b}var cn={};function wn(u){var c,g=u.ownerDocument,v=u.nodeName,b=cn[v];return b||(c=g.body.appendChild(g.createElement(v)),b=y.css(c,"display"),c.parentNode.removeChild(c),"none"===b&&(b="block"),cn[v]=b,b)}function Pn(u,c){for(var g,v,b=[],N=0,L=u.length;N<L;N++)(v=u[N]).style&&(g=v.style.display,c?("none"===g&&(b[N]=T.get(v,"display")||null,b[N]||(v.style.display="")),""===v.style.display&&or(v)&&(b[N]=wn(v))):"none"!==g&&(b[N]="none",T.set(v,"display",g)));for(N=0;N<L;N++)null!=b[N]&&(u[N].style.display=b[N]);return u}y.fn.extend({show:function(){return Pn(this,!0)},hide:function(){return Pn(this)},toggle:function(u){return"boolean"==typeof u?u?this.show():this.hide():this.each(function(){or(this)?y(this).show():y(this).hide()})}});var c,g,Lt=/^(?:checkbox|radio)$/i,ji=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Zr=/^$|^module$|\/(?:java|ecma)script/i;c=Ie.createDocumentFragment().appendChild(Ie.createElement("div")),(g=Ie.createElement("input")).setAttribute("type","radio"),g.setAttribute("checked","checked"),g.setAttribute("name","t"),c.appendChild(g),Ce.checkClone=c.cloneNode(!0).cloneNode(!0).lastChild.checked,c.innerHTML="<textarea>x</textarea>",Ce.noCloneChecked=!!c.cloneNode(!0).lastChild.defaultValue,c.innerHTML="<option></option>",Ce.option=!!c.lastChild;var Bn={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function kn(u,c){var g;return g=typeof u.getElementsByTagName<"u"?u.getElementsByTagName(c||"*"):typeof u.querySelectorAll<"u"?u.querySelectorAll(c||"*"):[],void 0===c||c&&ar(u,c)?y.merge([u],g):g}function Ue(u,c){for(var g=0,v=u.length;g<v;g++)T.set(u[g],"globalEval",!c||T.get(c[g],"globalEval"))}Bn.tbody=Bn.tfoot=Bn.colgroup=Bn.caption=Bn.thead,Bn.th=Bn.td,Ce.option||(Bn.optgroup=Bn.option=[1,"<select multiple='multiple'>","</select>"]);var bs=/<|&#?\w+;/;function ns(u,c,g,v,b){for(var N,L,R,Y,it,dt,Mt=c.createDocumentFragment(),ct=[],mt=0,kt=u.length;mt<kt;mt++)if((N=u[mt])||0===N)if("object"===gn(N))y.merge(ct,N.nodeType?[N]:N);else if(bs.test(N)){for(L=L||Mt.appendChild(c.createElement("div")),R=(ji.exec(N)||["",""])[1].toLowerCase(),L.innerHTML=(Y=Bn[R]||Bn._default)[1]+y.htmlPrefilter(N)+Y[2],dt=Y[0];dt--;)L=L.lastChild;y.merge(ct,L.childNodes),(L=Mt.firstChild).textContent=""}else ct.push(c.createTextNode(N));for(Mt.textContent="",mt=0;N=ct[mt++];)if(v&&y.inArray(N,v)>-1)b&&b.push(N);else if(it=Me(N),L=kn(Mt.appendChild(N),"script"),it&&Ue(L),g)for(dt=0;N=L[dt++];)Zr.test(N.type||"")&&g.push(N);return Mt}var xs=/^([^.]*)(?:\.(.+)|)/;function wi(){return!0}function fi(){return!1}function Se(u,c){return u===function Zi(){try{return Ie.activeElement}catch{}}()==("focus"===c)}function _t(u,c,g,v,b,N){var L,R;if("object"==typeof c){for(R in"string"!=typeof g&&(v=v||g,g=void 0),c)_t(u,R,g,v,c[R],N);return u}if(null==v&&null==b?(b=g,v=g=void 0):null==b&&("string"==typeof g?(b=v,v=void 0):(b=v,v=g,g=void 0)),!1===b)b=fi;else if(!b)return u;return 1===N&&(L=b,b=function(Y){return y().off(Y),L.apply(this,arguments)},b.guid=L.guid||(L.guid=y.guid++)),u.each(function(){y.event.add(this,c,b,v,g)})}function ur(u,c,g){g?(T.set(u,c,!1),y.event.add(u,c,{namespace:!1,handler:function(v){var b,N,L=T.get(this,c);if(1&v.isTrigger&&this[c]){if(L.length)(y.event.special[c]||{}).delegateType&&v.stopPropagation();else if(L=Je.call(arguments),T.set(this,c,L),b=g(this,c),this[c](),L!==(N=T.get(this,c))||b?T.set(this,c,!1):N={},L!==N)return v.stopImmediatePropagation(),v.preventDefault(),N&&N.value}else L.length&&(T.set(this,c,{value:y.event.trigger(y.extend(L[0],y.Event.prototype),L.slice(1),this)}),v.stopImmediatePropagation())}})):void 0===T.get(u,c)&&y.event.add(u,c,wi)}y.event={global:{},add:function(u,c,g,v,b){var N,L,R,Y,it,dt,Mt,ct,mt,kt,ie,Yt=T.get(u);if(Ke(u))for(g.handler&&(g=(N=g).handler,b=N.selector),b&&y.find.matchesSelector(vn,b),g.guid||(g.guid=y.guid++),(Y=Yt.events)||(Y=Yt.events=Object.create(null)),(L=Yt.handle)||(L=Yt.handle=function(qt){return typeof y<"u"&&y.event.triggered!==qt.type?y.event.dispatch.apply(u,arguments):void 0}),it=(c=(c||"").match(tr)||[""]).length;it--;)mt=ie=(R=xs.exec(c[it])||[])[1],kt=(R[2]||"").split(".").sort(),mt&&(Mt=y.event.special[mt]||{},Mt=y.event.special[mt=(b?Mt.delegateType:Mt.bindType)||mt]||{},dt=y.extend({type:mt,origType:ie,data:v,handler:g,guid:g.guid,selector:b,needsContext:b&&y.expr.match.needsContext.test(b),namespace:kt.join(".")},N),(ct=Y[mt])||((ct=Y[mt]=[]).delegateCount=0,(!Mt.setup||!1===Mt.setup.call(u,v,kt,L))&&u.addEventListener&&u.addEventListener(mt,L)),Mt.add&&(Mt.add.call(u,dt),dt.handler.guid||(dt.handler.guid=g.guid)),b?ct.splice(ct.delegateCount++,0,dt):ct.push(dt),y.event.global[mt]=!0)},remove:function(u,c,g,v,b){var N,L,R,Y,it,dt,Mt,ct,mt,kt,ie,Yt=T.hasData(u)&&T.get(u);if(Yt&&(Y=Yt.events)){for(it=(c=(c||"").match(tr)||[""]).length;it--;)if(mt=ie=(R=xs.exec(c[it])||[])[1],kt=(R[2]||"").split(".").sort(),mt){for(Mt=y.event.special[mt]||{},ct=Y[mt=(v?Mt.delegateType:Mt.bindType)||mt]||[],R=R[2]&&new RegExp("(^|\\.)"+kt.join("\\.(?:.*\\.|)")+"(\\.|$)"),L=N=ct.length;N--;)dt=ct[N],(b||ie===dt.origType)&&(!g||g.guid===dt.guid)&&(!R||R.test(dt.namespace))&&(!v||v===dt.selector||"**"===v&&dt.selector)&&(ct.splice(N,1),dt.selector&&ct.delegateCount--,Mt.remove&&Mt.remove.call(u,dt));L&&!ct.length&&((!Mt.teardown||!1===Mt.teardown.call(u,kt,Yt.handle))&&y.removeEvent(u,mt,Yt.handle),delete Y[mt])}else for(mt in Y)y.event.remove(u,mt+c[it],g,v,!0);y.isEmptyObject(Y)&&T.remove(u,"handle events")}},dispatch:function(u){var c,g,v,b,N,L,R=new Array(arguments.length),Y=y.event.fix(u),it=(T.get(this,"events")||Object.create(null))[Y.type]||[],dt=y.event.special[Y.type]||{};for(R[0]=Y,c=1;c<arguments.length;c++)R[c]=arguments[c];if(Y.delegateTarget=this,!dt.preDispatch||!1!==dt.preDispatch.call(this,Y)){for(L=y.event.handlers.call(this,Y,it),c=0;(b=L[c++])&&!Y.isPropagationStopped();)for(Y.currentTarget=b.elem,g=0;(N=b.handlers[g++])&&!Y.isImmediatePropagationStopped();)(!Y.rnamespace||!1===N.namespace||Y.rnamespace.test(N.namespace))&&(Y.handleObj=N,Y.data=N.data,void 0!==(v=((y.event.special[N.origType]||{}).handle||N.handler).apply(b.elem,R))&&!1===(Y.result=v)&&(Y.preventDefault(),Y.stopPropagation()));return dt.postDispatch&&dt.postDispatch.call(this,Y),Y.result}},handlers:function(u,c){var g,v,b,N,L,R=[],Y=c.delegateCount,it=u.target;if(Y&&it.nodeType&&!("click"===u.type&&u.button>=1))for(;it!==this;it=it.parentNode||this)if(1===it.nodeType&&("click"!==u.type||!0!==it.disabled)){for(N=[],L={},g=0;g<Y;g++)void 0===L[b=(v=c[g]).selector+" "]&&(L[b]=v.needsContext?y(b,this).index(it)>-1:y.find(b,this,null,[it]).length),L[b]&&N.push(v);N.length&&R.push({elem:it,handlers:N})}return it=this,Y<c.length&&R.push({elem:it,handlers:c.slice(Y)}),R},addProp:function(u,c){Object.defineProperty(y.Event.prototype,u,{enumerable:!0,configurable:!0,get:Ut(c)?function(){if(this.originalEvent)return c(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[u]},set:function(g){Object.defineProperty(this,u,{enumerable:!0,configurable:!0,writable:!0,value:g})}})},fix:function(u){return u[y.expando]?u:new y.Event(u)},special:{load:{noBubble:!0},click:{setup:function(u){var c=this||u;return Lt.test(c.type)&&c.click&&ar(c,"input")&&ur(c,"click",wi),!1},trigger:function(u){var c=this||u;return Lt.test(c.type)&&c.click&&ar(c,"input")&&ur(c,"click"),!0},_default:function(u){var c=u.target;return Lt.test(c.type)&&c.click&&ar(c,"input")&&T.get(c,"click")||ar(c,"a")}},beforeunload:{postDispatch:function(u){void 0!==u.result&&u.originalEvent&&(u.originalEvent.returnValue=u.result)}}}},y.removeEvent=function(u,c,g){u.removeEventListener&&u.removeEventListener(c,g)},y.Event=function(u,c){if(!(this instanceof y.Event))return new y.Event(u,c);u&&u.type?(this.originalEvent=u,this.type=u.type,this.isDefaultPrevented=u.defaultPrevented||void 0===u.defaultPrevented&&!1===u.returnValue?wi:fi,this.target=u.target&&3===u.target.nodeType?u.target.parentNode:u.target,this.currentTarget=u.currentTarget,this.relatedTarget=u.relatedTarget):this.type=u,c&&y.extend(this,c),this.timeStamp=u&&u.timeStamp||Date.now(),this[y.expando]=!0},y.Event.prototype={constructor:y.Event,isDefaultPrevented:fi,isPropagationStopped:fi,isImmediatePropagationStopped:fi,isSimulated:!1,preventDefault:function(){var u=this.originalEvent;this.isDefaultPrevented=wi,u&&!this.isSimulated&&u.preventDefault()},stopPropagation:function(){var u=this.originalEvent;this.isPropagationStopped=wi,u&&!this.isSimulated&&u.stopPropagation()},stopImmediatePropagation:function(){var u=this.originalEvent;this.isImmediatePropagationStopped=wi,u&&!this.isSimulated&&u.stopImmediatePropagation(),this.stopPropagation()}},y.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},y.event.addProp),y.each({focus:"focusin",blur:"focusout"},function(u,c){y.event.special[u]={setup:function(){return ur(this,u,Se),!1},trigger:function(){return ur(this,u),!0},_default:function(){return!0},delegateType:c}}),y.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(u,c){y.event.special[u]={delegateType:c,bindType:c,handle:function(g){var v,b=this,N=g.relatedTarget,L=g.handleObj;return(!N||N!==b&&!y.contains(b,N))&&(g.type=L.origType,v=L.handler.apply(this,arguments),g.type=c),v}}}),y.fn.extend({on:function(u,c,g,v){return _t(this,u,c,g,v)},one:function(u,c,g,v){return _t(this,u,c,g,v,1)},off:function(u,c,g){var v,b;if(u&&u.preventDefault&&u.handleObj)return v=u.handleObj,y(u.delegateTarget).off(v.namespace?v.origType+"."+v.namespace:v.origType,v.selector,v.handler),this;if("object"==typeof u){for(b in u)this.off(b,c,u[b]);return this}return(!1===c||"function"==typeof c)&&(g=c,c=void 0),!1===g&&(g=fi),this.each(function(){y.event.remove(this,u,g,c)})}});var Jr=/<script|<style|<link/i,En=/checked\s*(?:[^=]|=\s*.checked.)/i,bi=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function lr(u,c){return ar(u,"table")&&ar(11!==c.nodeType?c:c.firstChild,"tr")&&y(u).children("tbody")[0]||u}function rs(u){return u.type=(null!==u.getAttribute("type"))+"/"+u.type,u}function xn(u){return"true/"===(u.type||"").slice(0,5)?u.type=u.type.slice(5):u.removeAttribute("type"),u}function Ns(u,c){var g,v,b,L,R,Y;if(1===c.nodeType){if(T.hasData(u)&&(Y=T.get(u).events))for(b in T.remove(c,"handle events"),Y)for(g=0,v=Y[b].length;g<v;g++)y.event.add(c,b,Y[b][g]);W.hasData(u)&&(L=W.access(u),R=y.extend({},L),W.set(c,R))}}function xi(u,c){var g=c.nodeName.toLowerCase();"input"===g&&Lt.test(u.type)?c.checked=u.checked:("input"===g||"textarea"===g)&&(c.defaultValue=u.defaultValue)}function Wr(u,c,g,v){c=Ci(c);var b,N,L,R,Y,it,dt=0,Mt=u.length,ct=Mt-1,mt=c[0],kt=Ut(mt);if(kt||Mt>1&&"string"==typeof mt&&!Ce.checkClone&&En.test(mt))return u.each(function(ie){var Yt=u.eq(ie);kt&&(c[0]=mt.call(this,ie,Yt.html())),Wr(Yt,c,g,v)});if(Mt&&(N=(b=ns(c,u[0].ownerDocument,!1,u,v)).firstChild,1===b.childNodes.length&&(b=N),N||v)){for(R=(L=y.map(kn(b,"script"),rs)).length;dt<Mt;dt++)Y=b,dt!==ct&&(Y=y.clone(Y,!0,!0),R&&y.merge(L,kn(Y,"script"))),g.call(u[dt],Y,dt);if(R)for(it=L[L.length-1].ownerDocument,y.map(L,xn),dt=0;dt<R;dt++)Zr.test((Y=L[dt]).type||"")&&!T.access(Y,"globalEval")&&y.contains(it,Y)&&(Y.src&&"module"!==(Y.type||"").toLowerCase()?y._evalUrl&&!Y.noModule&&y._evalUrl(Y.src,{nonce:Y.nonce||Y.getAttribute("nonce")},it):yn(Y.textContent.replace(bi,""),Y,it))}return u}function ua(u,c,g){for(var v,b=c?y.filter(c,u):u,N=0;null!=(v=b[N]);N++)!g&&1===v.nodeType&&y.cleanData(kn(v)),v.parentNode&&(g&&Me(v)&&Ue(kn(v,"script")),v.parentNode.removeChild(v));return u}y.extend({htmlPrefilter:function(u){return u},clone:function(u,c,g){var v,b,N,L,R=u.cloneNode(!0),Y=Me(u);if(!(Ce.noCloneChecked||1!==u.nodeType&&11!==u.nodeType||y.isXMLDoc(u)))for(L=kn(R),v=0,b=(N=kn(u)).length;v<b;v++)xi(N[v],L[v]);if(c)if(g)for(N=N||kn(u),L=L||kn(R),v=0,b=N.length;v<b;v++)Ns(N[v],L[v]);else Ns(u,R);return(L=kn(R,"script")).length>0&&Ue(L,!Y&&kn(u,"script")),R},cleanData:function(u){for(var c,g,v,b=y.event.special,N=0;void 0!==(g=u[N]);N++)if(Ke(g)){if(c=g[T.expando]){if(c.events)for(v in c.events)b[v]?y.event.remove(g,v):y.removeEvent(g,v,c.handle);g[T.expando]=void 0}g[W.expando]&&(g[W.expando]=void 0)}}}),y.fn.extend({detach:function(u){return ua(this,u,!0)},remove:function(u){return ua(this,u)},text:function(u){return Dr(this,function(c){return void 0===c?y.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=c)})},null,u,arguments.length)},append:function(){return Wr(this,arguments,function(u){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||lr(this,u).appendChild(u)})},prepend:function(){return Wr(this,arguments,function(u){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var c=lr(this,u);c.insertBefore(u,c.firstChild)}})},before:function(){return Wr(this,arguments,function(u){this.parentNode&&this.parentNode.insertBefore(u,this)})},after:function(){return Wr(this,arguments,function(u){this.parentNode&&this.parentNode.insertBefore(u,this.nextSibling)})},empty:function(){for(var u,c=0;null!=(u=this[c]);c++)1===u.nodeType&&(y.cleanData(kn(u,!1)),u.textContent="");return this},clone:function(u,c){return u=u??!1,c=c??u,this.map(function(){return y.clone(this,u,c)})},html:function(u){return Dr(this,function(c){var g=this[0]||{},v=0,b=this.length;if(void 0===c&&1===g.nodeType)return g.innerHTML;if("string"==typeof c&&!Jr.test(c)&&!Bn[(ji.exec(c)||["",""])[1].toLowerCase()]){c=y.htmlPrefilter(c);try{for(;v<b;v++)1===(g=this[v]||{}).nodeType&&(y.cleanData(kn(g,!1)),g.innerHTML=c);g=0}catch{}}g&&this.empty().append(c)},null,u,arguments.length)},replaceWith:function(){var u=[];return Wr(this,arguments,function(c){var g=this.parentNode;y.inArray(this,u)<0&&(y.cleanData(kn(this)),g&&g.replaceChild(c,this))},u)}}),y.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(u,c){y.fn[u]=function(g){for(var v,b=[],N=y(g),L=N.length-1,R=0;R<=L;R++)v=R===L?this:this.clone(!0),y(N[R])[c](v),Mr.apply(b,v.get());return this.pushStack(b)}});var Rs=new RegExp("^("+ue+")(?!px)[a-z%]+$","i"),Vn=function(u){var c=u.ownerDocument.defaultView;return(!c||!c.opener)&&(c=G),c.getComputedStyle(u)},la=function(u,c,g){var v,b,N={};for(b in c)N[b]=u.style[b],u.style[b]=c[b];for(b in v=g.call(u),c)u.style[b]=N[b];return v},Ni=new RegExp(ce.join("|"),"i");function hi(u,c,g){var v,b,N,L,R=u.style;return(g=g||Vn(u))&&(""===(L=g.getPropertyValue(c)||g[c])&&!Me(u)&&(L=y.style(u,c)),!Ce.pixelBoxStyles()&&Rs.test(L)&&Ni.test(c)&&(v=R.width,b=R.minWidth,N=R.maxWidth,R.minWidth=R.maxWidth=R.width=L,L=g.width,R.width=v,R.minWidth=b,R.maxWidth=N)),void 0!==L?L+"":L}function ca(u,c){return{get:function(){if(!u())return(this.get=c).apply(this,arguments);delete this.get}}}!function(){function u(){if(it){Y.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",it.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",vn.appendChild(Y).appendChild(it);var dt=G.getComputedStyle(it);g="1%"!==dt.top,R=12===c(dt.marginLeft),it.style.right="60%",N=36===c(dt.right),v=36===c(dt.width),it.style.position="absolute",b=12===c(it.offsetWidth/3),vn.removeChild(Y),it=null}}function c(dt){return Math.round(parseFloat(dt))}var g,v,b,N,L,R,Y=Ie.createElement("div"),it=Ie.createElement("div");!it.style||(it.style.backgroundClip="content-box",it.cloneNode(!0).style.backgroundClip="",Ce.clearCloneStyle="content-box"===it.style.backgroundClip,y.extend(Ce,{boxSizingReliable:function(){return u(),v},pixelBoxStyles:function(){return u(),N},pixelPosition:function(){return u(),g},reliableMarginLeft:function(){return u(),R},scrollboxSize:function(){return u(),b},reliableTrDimensions:function(){var dt,Mt,ct,mt;return null==L&&(dt=Ie.createElement("table"),Mt=Ie.createElement("tr"),ct=Ie.createElement("div"),dt.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Mt.style.cssText="border:1px solid",Mt.style.height="1px",ct.style.height="9px",ct.style.display="block",vn.appendChild(dt).appendChild(Mt).appendChild(ct),mt=G.getComputedStyle(Mt),L=parseInt(mt.height,10)+parseInt(mt.borderTopWidth,10)+parseInt(mt.borderBottomWidth,10)===Mt.offsetHeight,vn.removeChild(dt)),L}}))}();var fa=["Webkit","Moz","ms"],ha=Ie.createElement("div").style,Gs={};function di(u){return y.cssProps[u]||Gs[u]||(u in ha?u:Gs[u]=function js(u){for(var c=u[0].toUpperCase()+u.slice(1),g=fa.length;g--;)if((u=fa[g]+c)in ha)return u}(u)||u)}var Wi=/^(none|table(?!-c[ea]).+)/,_i=/^--/,cr={position:"absolute",visibility:"hidden",display:"block"},Kr={letterSpacing:"0",fontWeight:"400"};function da(u,c,g){var v=Qe.exec(c);return v?Math.max(0,v[2]-(g||0))+(v[3]||"px"):c}function is(u,c,g,v,b,N){var L="width"===c?1:0,R=0,Y=0;if(g===(v?"border":"content"))return 0;for(;L<4;L+=2)"margin"===g&&(Y+=y.css(u,g+ce[L],!0,b)),v?("content"===g&&(Y-=y.css(u,"padding"+ce[L],!0,b)),"margin"!==g&&(Y-=y.css(u,"border"+ce[L]+"Width",!0,b))):(Y+=y.css(u,"padding"+ce[L],!0,b),"padding"!==g?Y+=y.css(u,"border"+ce[L]+"Width",!0,b):R+=y.css(u,"border"+ce[L]+"Width",!0,b));return!v&&N>=0&&(Y+=Math.max(0,Math.ceil(u["offset"+c[0].toUpperCase()+c.slice(1)]-N-Y-R-.5))||0),Y}function Zs(u,c,g){var v=Vn(u),N=(!Ce.boxSizingReliable()||g)&&"border-box"===y.css(u,"boxSizing",!1,v),L=N,R=hi(u,c,v),Y="offset"+c[0].toUpperCase()+c.slice(1);if(Rs.test(R)){if(!g)return R;R="auto"}return(!Ce.boxSizingReliable()&&N||!Ce.reliableTrDimensions()&&ar(u,"tr")||"auto"===R||!parseFloat(R)&&"inline"===y.css(u,"display",!1,v))&&u.getClientRects().length&&(N="border-box"===y.css(u,"boxSizing",!1,v),(L=Y in u)&&(R=u[Y])),(R=parseFloat(R)||0)+is(u,c,g||(N?"border":"content"),L,v,R)+"px"}function Rn(u,c,g,v,b){return new Rn.prototype.init(u,c,g,v,b)}y.extend({cssHooks:{opacity:{get:function(u,c){if(c){var g=hi(u,"opacity");return""===g?"1":g}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(u,c,g,v){if(u&&3!==u.nodeType&&8!==u.nodeType&&u.style){var b,N,L,R=pn(c),Y=_i.test(c),it=u.style;if(Y||(c=di(R)),L=y.cssHooks[c]||y.cssHooks[R],void 0===g)return L&&"get"in L&&void 0!==(b=L.get(u,!1,v))?b:it[c];if("string"==(N=typeof g)&&(b=Qe.exec(g))&&b[1]&&(g=Hr(u,c,b),N="number"),null==g||g!=g)return;"number"===N&&!Y&&(g+=b&&b[3]||(y.cssNumber[R]?"":"px")),!Ce.clearCloneStyle&&""===g&&0===c.indexOf("background")&&(it[c]="inherit"),(!L||!("set"in L)||void 0!==(g=L.set(u,g,v)))&&(Y?it.setProperty(c,g):it[c]=g)}},css:function(u,c,g,v){var b,N,L,R=pn(c);return _i.test(c)||(c=di(R)),(L=y.cssHooks[c]||y.cssHooks[R])&&"get"in L&&(b=L.get(u,!0,g)),void 0===b&&(b=hi(u,c,v)),"normal"===b&&c in Kr&&(b=Kr[c]),""===g||g?(N=parseFloat(b),!0===g||isFinite(N)?N||0:b):b}}),y.each(["height","width"],function(u,c){y.cssHooks[c]={get:function(g,v,b){if(v)return!Wi.test(y.css(g,"display"))||g.getClientRects().length&&g.getBoundingClientRect().width?Zs(g,c,b):la(g,cr,function(){return Zs(g,c,b)})},set:function(g,v,b){var N,L=Vn(g),R=!Ce.scrollboxSize()&&"absolute"===L.position,it=(R||b)&&"border-box"===y.css(g,"boxSizing",!1,L),dt=b?is(g,c,b,it,L):0;return it&&R&&(dt-=Math.ceil(g["offset"+c[0].toUpperCase()+c.slice(1)]-parseFloat(L[c])-is(g,c,"border",!1,L)-.5)),dt&&(N=Qe.exec(v))&&"px"!==(N[3]||"px")&&(g.style[c]=v,v=y.css(g,c)),da(0,v,dt)}}}),y.cssHooks.marginLeft=ca(Ce.reliableMarginLeft,function(u,c){if(c)return(parseFloat(hi(u,"marginLeft"))||u.getBoundingClientRect().left-la(u,{marginLeft:0},function(){return u.getBoundingClientRect().left}))+"px"}),y.each({margin:"",padding:"",border:"Width"},function(u,c){y.cssHooks[u+c]={expand:function(g){for(var v=0,b={},N="string"==typeof g?g.split(" "):[g];v<4;v++)b[u+ce[v]+c]=N[v]||N[v-2]||N[0];return b}},"margin"!==u&&(y.cssHooks[u+c].set=da)}),y.fn.extend({css:function(u,c){return Dr(this,function(g,v,b){var N,L,R={},Y=0;if(Array.isArray(v)){for(N=Vn(g),L=v.length;Y<L;Y++)R[v[Y]]=y.css(g,v[Y],!1,N);return R}return void 0!==b?y.style(g,v,b):y.css(g,v)},u,c,arguments.length>1)}}),y.Tween=Rn,(Rn.prototype={constructor:Rn,init:function(u,c,g,v,b,N){this.elem=u,this.prop=g,this.easing=b||y.easing._default,this.options=c,this.start=this.now=this.cur(),this.end=v,this.unit=N||(y.cssNumber[g]?"":"px")},cur:function(){var u=Rn.propHooks[this.prop];return u&&u.get?u.get(this):Rn.propHooks._default.get(this)},run:function(u){var c,g=Rn.propHooks[this.prop];return this.pos=c=this.options.duration?y.easing[this.easing](u,this.options.duration*u,0,1,this.options.duration):u,this.now=(this.end-this.start)*c+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),g&&g.set?g.set(this):Rn.propHooks._default.set(this),this}}).init.prototype=Rn.prototype,(Rn.propHooks={_default:{get:function(u){var c;return 1!==u.elem.nodeType||null!=u.elem[u.prop]&&null==u.elem.style[u.prop]?u.elem[u.prop]:(c=y.css(u.elem,u.prop,""))&&"auto"!==c?c:0},set:function(u){y.fx.step[u.prop]?y.fx.step[u.prop](u):1!==u.elem.nodeType||!y.cssHooks[u.prop]&&null==u.elem.style[di(u.prop)]?u.elem[u.prop]=u.now:y.style(u.elem,u.prop,u.now+u.unit)}}}).scrollTop=Rn.propHooks.scrollLeft={set:function(u){u.elem.nodeType&&u.elem.parentNode&&(u.elem[u.prop]=u.now)}},y.easing={linear:function(u){return u},swing:function(u){return.5-Math.cos(u*Math.PI)/2},_default:"swing"},y.fx=Rn.prototype.init,y.fx.step={};var Mi,Ms,Ws=/^(?:toggle|show|hide)$/,Ss=/queueHooks$/;function Yi(){Ms&&(!1===Ie.hidden&&G.requestAnimationFrame?G.requestAnimationFrame(Yi):G.setTimeout(Yi,y.fx.interval),y.fx.tick())}function Ts(){return G.setTimeout(function(){Mi=void 0}),Mi=Date.now()}function Ui(u,c){var g,v=0,b={height:u};for(c=c?1:0;v<4;v+=2-c)b["margin"+(g=ce[v])]=b["padding"+g]=u;return c&&(b.opacity=b.width=u),b}function ss(u,c,g){for(var v,b=(Gn.tweeners[c]||[]).concat(Gn.tweeners["*"]),N=0,L=b.length;N<L;N++)if(v=b[N].call(g,c,u))return v}function Gn(u,c,g){var v,b,N=0,L=Gn.prefilters.length,R=y.Deferred().always(function(){delete Y.elem}),Y=function(){if(b)return!1;for(var Mt=Mi||Ts(),ct=Math.max(0,it.startTime+it.duration-Mt),kt=1-(ct/it.duration||0),ie=0,Yt=it.tweens.length;ie<Yt;ie++)it.tweens[ie].run(kt);return R.notifyWith(u,[it,kt,ct]),kt<1&&Yt?ct:(Yt||R.notifyWith(u,[it,1,0]),R.resolveWith(u,[it]),!1)},it=R.promise({elem:u,props:y.extend({},c),opts:y.extend(!0,{specialEasing:{},easing:y.easing._default},g),originalProperties:c,originalOptions:g,startTime:Mi||Ts(),duration:g.duration,tweens:[],createTween:function(Mt,ct){var mt=y.Tween(u,it.opts,Mt,ct,it.opts.specialEasing[Mt]||it.opts.easing);return it.tweens.push(mt),mt},stop:function(Mt){var ct=0,mt=Mt?it.tweens.length:0;if(b)return this;for(b=!0;ct<mt;ct++)it.tweens[ct].run(1);return Mt?(R.notifyWith(u,[it,1,0]),R.resolveWith(u,[it,Mt])):R.rejectWith(u,[it,Mt]),this}}),dt=it.props;for(function Ds(u,c){var g,v,b,N,L;for(g in u)if(b=c[v=pn(g)],N=u[g],Array.isArray(N)&&(b=N[1],N=u[g]=N[0]),g!==v&&(u[v]=N,delete u[g]),(L=y.cssHooks[v])&&"expand"in L)for(g in N=L.expand(N),delete u[v],N)g in u||(u[g]=N[g],c[g]=b);else c[v]=b}(dt,it.opts.specialEasing);N<L;N++)if(v=Gn.prefilters[N].call(it,u,dt,it.opts))return Ut(v.stop)&&(y._queueHooks(it.elem,it.opts.queue).stop=v.stop.bind(v)),v;return y.map(dt,ss,it),Ut(it.opts.start)&&it.opts.start.call(u,it),it.progress(it.opts.progress).done(it.opts.done,it.opts.complete).fail(it.opts.fail).always(it.opts.always),y.fx.timer(y.extend(Y,{elem:u,anim:it,queue:it.opts.queue})),it}y.Animation=y.extend(Gn,{tweeners:{"*":[function(u,c){var g=this.createTween(u,c);return Hr(g.elem,u,Qe.exec(c),g),g}]},tweener:function(u,c){Ut(u)?(c=u,u=["*"]):u=u.match(tr);for(var g,v=0,b=u.length;v<b;v++)(Gn.tweeners[g=u[v]]=Gn.tweeners[g]||[]).unshift(c)},prefilters:[function ga(u,c,g){var v,b,N,L,R,Y,it,dt,Mt="width"in c||"height"in c,ct=this,mt={},kt=u.style,ie=u.nodeType&&or(u),Yt=T.get(u,"fxshow");for(v in g.queue||(null==(L=y._queueHooks(u,"fx")).unqueued&&(L.unqueued=0,R=L.empty.fire,L.empty.fire=function(){L.unqueued||R()}),L.unqueued++,ct.always(function(){ct.always(function(){L.unqueued--,y.queue(u,"fx").length||L.empty.fire()})})),c)if(Ws.test(b=c[v])){if(delete c[v],N=N||"toggle"===b,b===(ie?"hide":"show")){if("show"!==b||!Yt||void 0===Yt[v])continue;ie=!0}mt[v]=Yt&&Yt[v]||y.style(u,v)}if((Y=!y.isEmptyObject(c))||!y.isEmptyObject(mt))for(v in Mt&&1===u.nodeType&&(g.overflow=[kt.overflow,kt.overflowX,kt.overflowY],null==(it=Yt&&Yt.display)&&(it=T.get(u,"display")),"none"===(dt=y.css(u,"display"))&&(it?dt=it:(Pn([u],!0),it=u.style.display||it,dt=y.css(u,"display"),Pn([u]))),("inline"===dt||"inline-block"===dt&&null!=it)&&"none"===y.css(u,"float")&&(Y||(ct.done(function(){kt.display=it}),null==it&&(it="none"===(dt=kt.display)?"":dt)),kt.display="inline-block")),g.overflow&&(kt.overflow="hidden",ct.always(function(){kt.overflow=g.overflow[0],kt.overflowX=g.overflow[1],kt.overflowY=g.overflow[2]})),Y=!1,mt)Y||(Yt?"hidden"in Yt&&(ie=Yt.hidden):Yt=T.access(u,"fxshow",{display:it}),N&&(Yt.hidden=!ie),ie&&Pn([u],!0),ct.done(function(){for(v in ie||Pn([u]),T.remove(u,"fxshow"),mt)y.style(u,v,mt[v])})),Y=ss(ie?Yt[v]:0,v,ct),v in Yt||(Yt[v]=Y.start,ie&&(Y.end=Y.start,Y.start=0))}],prefilter:function(u,c){c?Gn.prefilters.unshift(u):Gn.prefilters.push(u)}}),y.speed=function(u,c,g){var v=u&&"object"==typeof u?y.extend({},u):{complete:g||!g&&c||Ut(u)&&u,duration:u,easing:g&&c||c&&!Ut(c)&&c};return y.fx.off?v.duration=0:"number"!=typeof v.duration&&(v.duration=v.duration in y.fx.speeds?y.fx.speeds[v.duration]:y.fx.speeds._default),(null==v.queue||!0===v.queue)&&(v.queue="fx"),v.old=v.complete,v.complete=function(){Ut(v.old)&&v.old.call(this),v.queue&&y.dequeue(this,v.queue)},v},y.fn.extend({fadeTo:function(u,c,g,v){return this.filter(or).css("opacity",0).show().end().animate({opacity:c},u,g,v)},animate:function(u,c,g,v){var b=y.isEmptyObject(u),N=y.speed(c,g,v),L=function(){var R=Gn(this,y.extend({},u),N);(b||T.get(this,"finish"))&&R.stop(!0)};return L.finish=L,b||!1===N.queue?this.each(L):this.queue(N.queue,L)},stop:function(u,c,g){var v=function(b){var N=b.stop;delete b.stop,N(g)};return"string"!=typeof u&&(g=c,c=u,u=void 0),c&&this.queue(u||"fx",[]),this.each(function(){var b=!0,N=null!=u&&u+"queueHooks",L=y.timers,R=T.get(this);if(N)R[N]&&R[N].stop&&v(R[N]);else for(N in R)R[N]&&R[N].stop&&Ss.test(N)&&v(R[N]);for(N=L.length;N--;)L[N].elem===this&&(null==u||L[N].queue===u)&&(L[N].anim.stop(g),b=!1,L.splice(N,1));(b||!g)&&y.dequeue(this,u)})},finish:function(u){return!1!==u&&(u=u||"fx"),this.each(function(){var c,g=T.get(this),v=g[u+"queue"],b=g[u+"queueHooks"],N=y.timers,L=v?v.length:0;for(g.finish=!0,y.queue(this,u,[]),b&&b.stop&&b.stop.call(this,!0),c=N.length;c--;)N[c].elem===this&&N[c].queue===u&&(N[c].anim.stop(!0),N.splice(c,1));for(c=0;c<L;c++)v[c]&&v[c].finish&&v[c].finish.call(this);delete g.finish})}}),y.each(["toggle","show","hide"],function(u,c){var g=y.fn[c];y.fn[c]=function(v,b,N){return null==v||"boolean"==typeof v?g.apply(this,arguments):this.animate(Ui(c,!0),v,b,N)}}),y.each({slideDown:Ui("show"),slideUp:Ui("hide"),slideToggle:Ui("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(u,c){y.fn[u]=function(g,v,b){return this.animate(c,g,v,b)}}),y.timers=[],y.fx.tick=function(){var u,c=0,g=y.timers;for(Mi=Date.now();c<g.length;c++)!(u=g[c])()&&g[c]===u&&g.splice(c--,1);g.length||y.fx.stop(),Mi=void 0},y.fx.timer=function(u){y.timers.push(u),y.fx.start()},y.fx.interval=13,y.fx.start=function(){Ms||(Ms=!0,Yi())},y.fx.stop=function(){Ms=null},y.fx.speeds={slow:600,fast:200,_default:400},y.fn.delay=function(u,c){return u=y.fx&&y.fx.speeds[u]||u,this.queue(c=c||"fx",function(g,v){var b=G.setTimeout(g,u);v.stop=function(){G.clearTimeout(b)}})},function(){var u=Ie.createElement("input"),g=Ie.createElement("select").appendChild(Ie.createElement("option"));u.type="checkbox",Ce.checkOn=""!==u.value,Ce.optSelected=g.selected,(u=Ie.createElement("input")).value="t",u.type="radio",Ce.radioValue="t"===u.value}();var Qr,Ar=y.expr.attrHandle;y.fn.extend({attr:function(u,c){return Dr(this,y.attr,u,c,arguments.length>1)},removeAttr:function(u){return this.each(function(){y.removeAttr(this,u)})}}),y.extend({attr:function(u,c,g){var v,b,N=u.nodeType;if(3!==N&&8!==N&&2!==N)return typeof u.getAttribute>"u"?y.prop(u,c,g):((1!==N||!y.isXMLDoc(u))&&(b=y.attrHooks[c.toLowerCase()]||(y.expr.match.bool.test(c)?Qr:void 0)),void 0!==g?null===g?void y.removeAttr(u,c):b&&"set"in b&&void 0!==(v=b.set(u,g,c))?v:(u.setAttribute(c,g+""),g):b&&"get"in b&&null!==(v=b.get(u,c))?v:(v=y.find.attr(u,c))??void 0)},attrHooks:{type:{set:function(u,c){if(!Ce.radioValue&&"radio"===c&&ar(u,"input")){var g=u.value;return u.setAttribute("type",c),g&&(u.value=g),c}}}},removeAttr:function(u,c){var g,v=0,b=c&&c.match(tr);if(b&&1===u.nodeType)for(;g=b[v++];)u.removeAttribute(g)}}),Qr={set:function(u,c,g){return!1===c?y.removeAttr(u,g):u.setAttribute(g,g),g}},y.each(y.expr.match.bool.source.match(/\w+/g),function(u,c){var g=Ar[c]||y.find.attr;Ar[c]=function(v,b,N){var L,R,Y=b.toLowerCase();return N||(R=Ar[Y],Ar[Y]=L,L=null!=g(v,b,N)?Y:null,Ar[Y]=R),L}});var ai=/^(?:input|select|textarea|button)$/i,_s=/^(?:a|area)$/i;function gi(u){return(u.match(tr)||[]).join(" ")}function gt(u){return u.getAttribute&&u.getAttribute("class")||""}function Nn(u){return Array.isArray(u)?u:"string"==typeof u&&u.match(tr)||[]}y.fn.extend({prop:function(u,c){return Dr(this,y.prop,u,c,arguments.length>1)},removeProp:function(u){return this.each(function(){delete this[y.propFix[u]||u]})}}),y.extend({prop:function(u,c,g){var v,b,N=u.nodeType;if(3!==N&&8!==N&&2!==N)return(1!==N||!y.isXMLDoc(u))&&(b=y.propHooks[c=y.propFix[c]||c]),void 0!==g?b&&"set"in b&&void 0!==(v=b.set(u,g,c))?v:u[c]=g:b&&"get"in b&&null!==(v=b.get(u,c))?v:u[c]},propHooks:{tabIndex:{get:function(u){var c=y.find.attr(u,"tabindex");return c?parseInt(c,10):ai.test(u.nodeName)||_s.test(u.nodeName)&&u.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),Ce.optSelected||(y.propHooks.selected={get:function(u){return null},set:function(u){}}),y.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){y.propFix[this.toLowerCase()]=this}),y.fn.extend({addClass:function(u){var c,g,v,b,N,L,R,Y=0;if(Ut(u))return this.each(function(it){y(this).addClass(u.call(this,it,gt(this)))});if((c=Nn(u)).length)for(;g=this[Y++];)if(b=gt(g),v=1===g.nodeType&&" "+gi(b)+" "){for(L=0;N=c[L++];)v.indexOf(" "+N+" ")<0&&(v+=N+" ");b!==(R=gi(v))&&g.setAttribute("class",R)}return this},removeClass:function(u){var c,g,v,b,N,L,R,Y=0;if(Ut(u))return this.each(function(it){y(this).removeClass(u.call(this,it,gt(this)))});if(!arguments.length)return this.attr("class","");if((c=Nn(u)).length)for(;g=this[Y++];)if(b=gt(g),v=1===g.nodeType&&" "+gi(b)+" "){for(L=0;N=c[L++];)for(;v.indexOf(" "+N+" ")>-1;)v=v.replace(" "+N+" "," ");b!==(R=gi(v))&&g.setAttribute("class",R)}return this},toggleClass:function(u,c){var g=typeof u,v="string"===g||Array.isArray(u);return"boolean"==typeof c&&v?c?this.addClass(u):this.removeClass(u):Ut(u)?this.each(function(b){y(this).toggleClass(u.call(this,b,gt(this),c),c)}):this.each(function(){var b,N,L,R;if(v)for(N=0,L=y(this),R=Nn(u);b=R[N++];)L.hasClass(b)?L.removeClass(b):L.addClass(b);else(void 0===u||"boolean"===g)&&((b=gt(this))&&T.set(this,"__className__",b),this.setAttribute&&this.setAttribute("class",b||!1===u?"":T.get(this,"__className__")||""))})},hasClass:function(u){var c,g,v=0;for(c=" "+u+" ";g=this[v++];)if(1===g.nodeType&&(" "+gi(gt(g))+" ").indexOf(c)>-1)return!0;return!1}});var Ae=/\r/g;y.fn.extend({val:function(u){var c,g,v,b=this[0];return arguments.length?(v=Ut(u),this.each(function(N){var L;1===this.nodeType&&(null==(L=v?u.call(this,N,y(this).val()):u)?L="":"number"==typeof L?L+="":Array.isArray(L)&&(L=y.map(L,function(R){return null==R?"":R+""})),(!(c=y.valHooks[this.type]||y.valHooks[this.nodeName.toLowerCase()])||!("set"in c)||void 0===c.set(this,L,"value"))&&(this.value=L))})):b?(c=y.valHooks[b.type]||y.valHooks[b.nodeName.toLowerCase()])&&"get"in c&&void 0!==(g=c.get(b,"value"))?g:"string"==typeof(g=b.value)?g.replace(Ae,""):g??"":void 0}}),y.extend({valHooks:{option:{get:function(u){return y.find.attr(u,"value")??gi(y.text(u))}},select:{get:function(u){var c,g,v,b=u.options,N=u.selectedIndex,L="select-one"===u.type,R=L?null:[],Y=L?N+1:b.length;for(v=N<0?Y:L?N:0;v<Y;v++)if(((g=b[v]).selected||v===N)&&!g.disabled&&(!g.parentNode.disabled||!ar(g.parentNode,"optgroup"))){if(c=y(g).val(),L)return c;R.push(c)}return R},set:function(u,c){for(var g,v,b=u.options,N=y.makeArray(c),L=b.length;L--;)((v=b[L]).selected=y.inArray(y.valHooks.option.get(v),N)>-1)&&(g=!0);return g||(u.selectedIndex=-1),N}}}}),y.each(["radio","checkbox"],function(){y.valHooks[this]={set:function(u,c){if(Array.isArray(c))return u.checked=y.inArray(y(u).val(),c)>-1}},Ce.checkOn||(y.valHooks[this].get=function(u){return null===u.getAttribute("value")?"on":u.value})}),Ce.focusin="onfocusin"in G;var ve=/^(?:focusinfocus|focusoutblur)$/,jn=function(u){u.stopPropagation()};y.extend(y.event,{trigger:function(u,c,g,v){var b,N,L,R,Y,it,dt,Mt,ct=[g||Ie],mt=qn.call(u,"type")?u.type:u,kt=qn.call(u,"namespace")?u.namespace.split("."):[];if(N=Mt=L=g=g||Ie,3!==g.nodeType&&8!==g.nodeType&&!ve.test(mt+y.event.triggered)&&(mt.indexOf(".")>-1&&(kt=mt.split("."),mt=kt.shift(),kt.sort()),Y=mt.indexOf(":")<0&&"on"+mt,(u=u[y.expando]?u:new y.Event(mt,"object"==typeof u&&u)).isTrigger=v?2:3,u.namespace=kt.join("."),u.rnamespace=u.namespace?new RegExp("(^|\\.)"+kt.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,u.result=void 0,u.target||(u.target=g),c=null==c?[u]:y.makeArray(c,[u]),dt=y.event.special[mt]||{},v||!dt.trigger||!1!==dt.trigger.apply(g,c))){if(!v&&!dt.noBubble&&!Un(g)){for(ve.test((R=dt.delegateType||mt)+mt)||(N=N.parentNode);N;N=N.parentNode)ct.push(N),L=N;L===(g.ownerDocument||Ie)&&ct.push(L.defaultView||L.parentWindow||G)}for(b=0;(N=ct[b++])&&!u.isPropagationStopped();)Mt=N,u.type=b>1?R:dt.bindType||mt,(it=(T.get(N,"events")||Object.create(null))[u.type]&&T.get(N,"handle"))&&it.apply(N,c),(it=Y&&N[Y])&&it.apply&&Ke(N)&&(u.result=it.apply(N,c),!1===u.result&&u.preventDefault());return u.type=mt,!v&&!u.isDefaultPrevented()&&(!dt._default||!1===dt._default.apply(ct.pop(),c))&&Ke(g)&&Y&&Ut(g[mt])&&!Un(g)&&((L=g[Y])&&(g[Y]=null),y.event.triggered=mt,u.isPropagationStopped()&&Mt.addEventListener(mt,jn),g[mt](),u.isPropagationStopped()&&Mt.removeEventListener(mt,jn),y.event.triggered=void 0,L&&(g[Y]=L)),u.result}},simulate:function(u,c,g){var v=y.extend(new y.Event,g,{type:u,isSimulated:!0});y.event.trigger(v,null,c)}}),y.fn.extend({trigger:function(u,c){return this.each(function(){y.event.trigger(u,c,this)})},triggerHandler:function(u,c){var g=this[0];if(g)return y.event.trigger(u,c,g,!0)}}),Ce.focusin||y.each({focus:"focusin",blur:"focusout"},function(u,c){var g=function(v){y.event.simulate(c,v.target,y.event.fix(v))};y.event.special[c]={setup:function(){var v=this.ownerDocument||this.document||this,b=T.access(v,c);b||v.addEventListener(u,g,!0),T.access(v,c,(b||0)+1)},teardown:function(){var v=this.ownerDocument||this.document||this,b=T.access(v,c)-1;b?T.access(v,c,b):(v.removeEventListener(u,g,!0),T.remove(v,c))}}});var Zn=G.location,Ys={guid:Date.now()},as=/\?/;y.parseXML=function(u){var c,g;if(!u||"string"!=typeof u)return null;try{c=(new G.DOMParser).parseFromString(u,"text/xml")}catch{}return g=c&&c.getElementsByTagName("parsererror")[0],(!c||g)&&y.error("Invalid XML: "+(g?y.map(g.childNodes,function(v){return v.textContent}).join("\n"):u)),c};var os=/\[\]$/,Si=/\r?\n/g,us=/^(?:submit|button|image|reset|file)$/i,Us=/^(?:input|select|textarea|keygen)/i;function Fs(u,c,g,v){var b;if(Array.isArray(c))y.each(c,function(N,L){g||os.test(u)?v(u,L):Fs(u+"["+("object"==typeof L&&null!=L?N:"")+"]",L,g,v)});else if(g||"object"!==gn(c))v(u,c);else for(b in c)Fs(u+"["+b+"]",c[b],g,v)}y.param=function(u,c){var g,v=[],b=function(N,L){var R=Ut(L)?L():L;v[v.length]=encodeURIComponent(N)+"="+encodeURIComponent(R??"")};if(null==u)return"";if(Array.isArray(u)||u.jquery&&!y.isPlainObject(u))y.each(u,function(){b(this.name,this.value)});else for(g in u)Fs(g,u[g],c,b);return v.join("&")},y.fn.extend({serialize:function(){return y.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var u=y.prop(this,"elements");return u?y.makeArray(u):this}).filter(function(){var u=this.type;return this.name&&!y(this).is(":disabled")&&Us.test(this.nodeName)&&!us.test(u)&&(this.checked||!Lt.test(u))}).map(function(u,c){var g=y(this).val();return null==g?null:Array.isArray(g)?y.map(g,function(v){return{name:c.name,value:v.replace(Si,"\r\n")}}):{name:c.name,value:g.replace(Si,"\r\n")}}).get()}});var Ha=/%20/g,Ja=/#.*$/,ls=/([?&])_=[^&]*/,Ta=/^(.*?):[ \t]*([^\r\n]*)$/gm,Vs=/^(?:GET|HEAD)$/,Ls=/^\/\//,cs={},Wn={},Da="*/".concat("*"),fs=Ie.createElement("a");function La(u){return function(c,g){"string"!=typeof c&&(g=c,c="*");var v,b=0,N=c.toLowerCase().match(tr)||[];if(Ut(g))for(;v=N[b++];)"+"===v[0]?(v=v.slice(1)||"*",(u[v]=u[v]||[]).unshift(g)):(u[v]=u[v]||[]).push(g)}}function Xs(u,c,g,v){var b={},N=u===Wn;function L(R){var Y;return b[R]=!0,y.each(u[R]||[],function(it,dt){var Mt=dt(c,g,v);return"string"!=typeof Mt||N||b[Mt]?N?!(Y=Mt):void 0:(c.dataTypes.unshift(Mt),L(Mt),!1)}),Y}return L(c.dataTypes[0])||!b["*"]&&L("*")}function on(u,c){var g,v,b=y.ajaxSettings.flatOptions||{};for(g in c)void 0!==c[g]&&((b[g]?u:v||(v={}))[g]=c[g]);return v&&y.extend(!0,u,v),u}fs.href=Zn.href,y.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Zn.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Zn.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Da,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":y.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(u,c){return c?on(on(u,y.ajaxSettings),c):on(y.ajaxSettings,u)},ajaxPrefilter:La(cs),ajaxTransport:La(Wn),ajax:function(u,c){"object"==typeof u&&(c=u,u=void 0);var g,v,b,N,L,R,Y,it,dt,Mt,ct=y.ajaxSetup({},c=c||{}),mt=ct.context||ct,kt=ct.context&&(mt.nodeType||mt.jquery)?y(mt):y.event,ie=y.Deferred(),Yt=y.Callbacks("once memory"),qt=ct.statusCode||{},ye={},te={},ae="canceled",ee={readyState:0,getResponseHeader:function(We){var hn;if(Y){if(!N)for(N={};hn=Ta.exec(b);)N[hn[1].toLowerCase()+" "]=(N[hn[1].toLowerCase()+" "]||[]).concat(hn[2]);hn=N[We.toLowerCase()+" "]}return null==hn?null:hn.join(", ")},getAllResponseHeaders:function(){return Y?b:null},setRequestHeader:function(We,hn){return null==Y&&(We=te[We.toLowerCase()]=te[We.toLowerCase()]||We,ye[We]=hn),this},overrideMimeType:function(We){return null==Y&&(ct.mimeType=We),this},statusCode:function(We){var hn;if(We)if(Y)ee.always(We[ee.status]);else for(hn in We)qt[hn]=[qt[hn],We[hn]];return this},abort:function(We){var hn=We||ae;return g&&g.abort(hn),Lr(0,hn),this}};if(ie.promise(ee),ct.url=((u||ct.url||Zn.href)+"").replace(Ls,Zn.protocol+"//"),ct.type=c.method||c.type||ct.method||ct.type,ct.dataTypes=(ct.dataType||"*").toLowerCase().match(tr)||[""],null==ct.crossDomain){R=Ie.createElement("a");try{R.href=ct.url,R.href=R.href,ct.crossDomain=fs.protocol+"//"+fs.host!=R.protocol+"//"+R.host}catch{ct.crossDomain=!0}}if(ct.data&&ct.processData&&"string"!=typeof ct.data&&(ct.data=y.param(ct.data,ct.traditional)),Xs(cs,ct,c,ee),Y)return ee;for(dt in(it=y.event&&ct.global)&&0==y.active++&&y.event.trigger("ajaxStart"),ct.type=ct.type.toUpperCase(),ct.hasContent=!Vs.test(ct.type),v=ct.url.replace(Ja,""),ct.hasContent?ct.data&&ct.processData&&0===(ct.contentType||"").indexOf("application/x-www-form-urlencoded")&&(ct.data=ct.data.replace(Ha,"+")):(Mt=ct.url.slice(v.length),ct.data&&(ct.processData||"string"==typeof ct.data)&&(v+=(as.test(v)?"&":"?")+ct.data,delete ct.data),!1===ct.cache&&(v=v.replace(ls,"$1"),Mt=(as.test(v)?"&":"?")+"_="+Ys.guid+++Mt),ct.url=v+Mt),ct.ifModified&&(y.lastModified[v]&&ee.setRequestHeader("If-Modified-Since",y.lastModified[v]),y.etag[v]&&ee.setRequestHeader("If-None-Match",y.etag[v])),(ct.data&&ct.hasContent&&!1!==ct.contentType||c.contentType)&&ee.setRequestHeader("Content-Type",ct.contentType),ee.setRequestHeader("Accept",ct.dataTypes[0]&&ct.accepts[ct.dataTypes[0]]?ct.accepts[ct.dataTypes[0]]+("*"!==ct.dataTypes[0]?", "+Da+"; q=0.01":""):ct.accepts["*"]),ct.headers)ee.setRequestHeader(dt,ct.headers[dt]);if(ct.beforeSend&&(!1===ct.beforeSend.call(mt,ee,ct)||Y))return ee.abort();if(ae="abort",Yt.add(ct.complete),ee.done(ct.success),ee.fail(ct.error),g=Xs(Wn,ct,c,ee)){if(ee.readyState=1,it&&kt.trigger("ajaxSend",[ee,ct]),Y)return ee;ct.async&&ct.timeout>0&&(L=G.setTimeout(function(){ee.abort("timeout")},ct.timeout));try{Y=!1,g.send(ye,Lr)}catch(We){if(Y)throw We;Lr(-1,We)}}else Lr(-1,"No Transport");function Lr(We,hn,Hs,Qa){var Pr,fr,un,mn,hs,oi=hn;Y||(Y=!0,L&&G.clearTimeout(L),g=void 0,b=Qa||"",ee.readyState=We>0?4:0,Pr=We>=200&&We<300||304===We,Hs&&(mn=function qe(u,c,g){for(var v,b,N,L,R=u.contents,Y=u.dataTypes;"*"===Y[0];)Y.shift(),void 0===v&&(v=u.mimeType||c.getResponseHeader("Content-Type"));if(v)for(b in R)if(R[b]&&R[b].test(v)){Y.unshift(b);break}if(Y[0]in g)N=Y[0];else{for(b in g){if(!Y[0]||u.converters[b+" "+Y[0]]){N=b;break}L||(L=b)}N=N||L}if(N)return N!==Y[0]&&Y.unshift(N),g[N]}(ct,ee,Hs)),!Pr&&y.inArray("script",ct.dataTypes)>-1&&y.inArray("json",ct.dataTypes)<0&&(ct.converters["text script"]=function(){}),mn=function Ka(u,c,g,v){var b,N,L,R,Y,it={},dt=u.dataTypes.slice();if(dt[1])for(L in u.converters)it[L.toLowerCase()]=u.converters[L];for(N=dt.shift();N;)if(u.responseFields[N]&&(g[u.responseFields[N]]=c),!Y&&v&&u.dataFilter&&(c=u.dataFilter(c,u.dataType)),Y=N,N=dt.shift())if("*"===N)N=Y;else if("*"!==Y&&Y!==N){if(!(L=it[Y+" "+N]||it["* "+N]))for(b in it)if((R=b.split(" "))[1]===N&&(L=it[Y+" "+R[0]]||it["* "+R[0]])){!0===L?L=it[b]:!0!==it[b]&&(N=R[0],dt.unshift(R[1]));break}if(!0!==L)if(L&&u.throws)c=L(c);else try{c=L(c)}catch(Mt){return{state:"parsererror",error:L?Mt:"No conversion from "+Y+" to "+N}}}return{state:"success",data:c}}(ct,mn,ee,Pr),Pr?(ct.ifModified&&((hs=ee.getResponseHeader("Last-Modified"))&&(y.lastModified[v]=hs),(hs=ee.getResponseHeader("etag"))&&(y.etag[v]=hs)),204===We||"HEAD"===ct.type?oi="nocontent":304===We?oi="notmodified":(oi=mn.state,fr=mn.data,Pr=!(un=mn.error))):(un=oi,(We||!oi)&&(oi="error",We<0&&(We=0))),ee.status=We,ee.statusText=(hn||oi)+"",Pr?ie.resolveWith(mt,[fr,oi,ee]):ie.rejectWith(mt,[ee,oi,un]),ee.statusCode(qt),qt=void 0,it&&kt.trigger(Pr?"ajaxSuccess":"ajaxError",[ee,ct,Pr?fr:un]),Yt.fireWith(mt,[ee,oi]),it&&(kt.trigger("ajaxComplete",[ee,ct]),--y.active||y.event.trigger("ajaxStop")))}return ee},getJSON:function(u,c,g){return y.get(u,c,g,"json")},getScript:function(u,c){return y.get(u,void 0,c,"script")}}),y.each(["get","post"],function(u,c){y[c]=function(g,v,b,N){return Ut(v)&&(N=N||b,b=v,v=void 0),y.ajax(y.extend({url:g,type:c,dataType:N,data:v,success:b},y.isPlainObject(g)&&g))}}),y.ajaxPrefilter(function(u){var c;for(c in u.headers)"content-type"===c.toLowerCase()&&(u.contentType=u.headers[c]||"")}),y._evalUrl=function(u,c,g){return y.ajax({url:u,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(v){y.globalEval(v,c,g)}})},y.fn.extend({wrapAll:function(u){var c;return this[0]&&(Ut(u)&&(u=u.call(this[0])),c=y(u,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&c.insertBefore(this[0]),c.map(function(){for(var g=this;g.firstElementChild;)g=g.firstElementChild;return g}).append(this)),this},wrapInner:function(u){return Ut(u)?this.each(function(c){y(this).wrapInner(u.call(this,c))}):this.each(function(){var c=y(this),g=c.contents();g.length?g.wrapAll(u):c.append(u)})},wrap:function(u){var c=Ut(u);return this.each(function(g){y(this).wrapAll(c?u.call(this,g):u)})},unwrap:function(u){return this.parent(u).not("body").each(function(){y(this).replaceWith(this.childNodes)}),this}}),y.expr.pseudos.hidden=function(u){return!y.expr.pseudos.visible(u)},y.expr.pseudos.visible=function(u){return!!(u.offsetWidth||u.offsetHeight||u.getClientRects().length)},y.ajaxSettings.xhr=function(){try{return new G.XMLHttpRequest}catch{}};var Pa={0:200,1223:204},x=y.ajaxSettings.xhr();Ce.cors=!!x&&"withCredentials"in x,Ce.ajax=x=!!x,y.ajaxTransport(function(u){var c,g;if(Ce.cors||x&&!u.crossDomain)return{send:function(v,b){var N,L=u.xhr();if(L.open(u.type,u.url,u.async,u.username,u.password),u.xhrFields)for(N in u.xhrFields)L[N]=u.xhrFields[N];for(N in u.mimeType&&L.overrideMimeType&&L.overrideMimeType(u.mimeType),!u.crossDomain&&!v["X-Requested-With"]&&(v["X-Requested-With"]="XMLHttpRequest"),v)L.setRequestHeader(N,v[N]);c=function(R){return function(){c&&(c=g=L.onload=L.onerror=L.onabort=L.ontimeout=L.onreadystatechange=null,"abort"===R?L.abort():"error"===R?"number"!=typeof L.status?b(0,"error"):b(L.status,L.statusText):b(Pa[L.status]||L.status,L.statusText,"text"!==(L.responseType||"text")||"string"!=typeof L.responseText?{binary:L.response}:{text:L.responseText},L.getAllResponseHeaders()))}},L.onload=c(),g=L.onerror=L.ontimeout=c("error"),void 0!==L.onabort?L.onabort=g:L.onreadystatechange=function(){4===L.readyState&&G.setTimeout(function(){c&&g()})},c=c("abort");try{L.send(u.hasContent&&u.data||null)}catch(R){if(c)throw R}},abort:function(){c&&c()}}}),y.ajaxPrefilter(function(u){u.crossDomain&&(u.contents.script=!1)}),y.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(u){return y.globalEval(u),u}}}),y.ajaxPrefilter("script",function(u){void 0===u.cache&&(u.cache=!1),u.crossDomain&&(u.type="GET")}),y.ajaxTransport("script",function(u){var c,g;if(u.crossDomain||u.scriptAttrs)return{send:function(v,b){c=y("<script>").attr(u.scriptAttrs||{}).prop({charset:u.scriptCharset,src:u.url}).on("load error",g=function(N){c.remove(),g=null,N&&b("error"===N.type?404:200,N.type)}),Ie.head.appendChild(c[0])},abort:function(){g&&g()}}});var u,k=[],_=/(=)\?(?=&|$)|\?\?/;y.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var u=k.pop()||y.expando+"_"+Ys.guid++;return this[u]=!0,u}}),y.ajaxPrefilter("json jsonp",function(u,c,g){var v,b,N,L=!1!==u.jsonp&&(_.test(u.url)?"url":"string"==typeof u.data&&0===(u.contentType||"").indexOf("application/x-www-form-urlencoded")&&_.test(u.data)&&"data");if(L||"jsonp"===u.dataTypes[0])return v=u.jsonpCallback=Ut(u.jsonpCallback)?u.jsonpCallback():u.jsonpCallback,L?u[L]=u[L].replace(_,"$1"+v):!1!==u.jsonp&&(u.url+=(as.test(u.url)?"&":"?")+u.jsonp+"="+v),u.converters["script json"]=function(){return N||y.error(v+" was not called"),N[0]},u.dataTypes[0]="json",b=G[v],G[v]=function(){N=arguments},g.always(function(){void 0===b?y(G).removeProp(v):G[v]=b,u[v]&&(u.jsonpCallback=c.jsonpCallback,k.push(v)),N&&Ut(b)&&b(N[0]),N=b=void 0}),"script"}),Ce.createHTMLDocument=((u=Ie.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===u.childNodes.length),y.parseHTML=function(u,c,g){return"string"!=typeof u?[]:("boolean"==typeof c&&(g=c,c=!1),c||(Ce.createHTMLDocument?((v=(c=Ie.implementation.createHTMLDocument("")).createElement("base")).href=Ie.location.href,c.head.appendChild(v)):c=Ie),N=!g&&[],(b=$n.exec(u))?[c.createElement(b[1])]:(b=ns([u],c,N),N&&N.length&&y(N).remove(),y.merge([],b.childNodes)));var v,b,N},y.fn.load=function(u,c,g){var v,b,N,L=this,R=u.indexOf(" ");return R>-1&&(v=gi(u.slice(R)),u=u.slice(0,R)),Ut(c)?(g=c,c=void 0):c&&"object"==typeof c&&(b="POST"),L.length>0&&y.ajax({url:u,type:b||"GET",dataType:"html",data:c}).done(function(Y){N=arguments,L.html(v?y("<div>").append(y.parseHTML(Y)).find(v):Y)}).always(g&&function(Y,it){L.each(function(){g.apply(this,N||[Y.responseText,it,Y])})}),this},y.expr.pseudos.animated=function(u){return y.grep(y.timers,function(c){return u===c.elem}).length},y.offset={setOffset:function(u,c,g){var v,b,N,L,R,Y,dt=y.css(u,"position"),Mt=y(u),ct={};"static"===dt&&(u.style.position="relative"),R=Mt.offset(),N=y.css(u,"top"),Y=y.css(u,"left"),("absolute"===dt||"fixed"===dt)&&(N+Y).indexOf("auto")>-1?(L=(v=Mt.position()).top,b=v.left):(L=parseFloat(N)||0,b=parseFloat(Y)||0),Ut(c)&&(c=c.call(u,g,y.extend({},R))),null!=c.top&&(ct.top=c.top-R.top+L),null!=c.left&&(ct.left=c.left-R.left+b),"using"in c?c.using.call(u,ct):Mt.css(ct)}},y.fn.extend({offset:function(u){if(arguments.length)return void 0===u?this:this.each(function(b){y.offset.setOffset(this,u,b)});var c,g,v=this[0];return v?v.getClientRects().length?{top:(c=v.getBoundingClientRect()).top+(g=v.ownerDocument.defaultView).pageYOffset,left:c.left+g.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var u,c,g,v=this[0],b={top:0,left:0};if("fixed"===y.css(v,"position"))c=v.getBoundingClientRect();else{for(c=this.offset(),g=v.ownerDocument,u=v.offsetParent||g.documentElement;u&&(u===g.body||u===g.documentElement)&&"static"===y.css(u,"position");)u=u.parentNode;u&&u!==v&&1===u.nodeType&&((b=y(u).offset()).top+=y.css(u,"borderTopWidth",!0),b.left+=y.css(u,"borderLeftWidth",!0))}return{top:c.top-b.top-y.css(v,"marginTop",!0),left:c.left-b.left-y.css(v,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var u=this.offsetParent;u&&"static"===y.css(u,"position");)u=u.offsetParent;return u||vn})}}),y.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(u,c){var g="pageYOffset"===c;y.fn[u]=function(v){return Dr(this,function(b,N,L){var R;if(Un(b)?R=b:9===b.nodeType&&(R=b.defaultView),void 0===L)return R?R[c]:b[N];R?R.scrollTo(g?R.pageXOffset:L,g?L:R.pageYOffset):b[N]=L},u,v,arguments.length)}}),y.each(["top","left"],function(u,c){y.cssHooks[c]=ca(Ce.pixelPosition,function(g,v){if(v)return v=hi(g,c),Rs.test(v)?y(g).position()[c]+"px":v})}),y.each({Height:"height",Width:"width"},function(u,c){y.each({padding:"inner"+u,content:c,"":"outer"+u},function(g,v){y.fn[v]=function(b,N){var L=arguments.length&&(g||"boolean"!=typeof b),R=g||(!0===b||!0===N?"margin":"border");return Dr(this,function(Y,it,dt){var Mt;return Un(Y)?0===v.indexOf("outer")?Y["inner"+u]:Y.document.documentElement["client"+u]:9===Y.nodeType?(Mt=Y.documentElement,Math.max(Y.body["scroll"+u],Mt["scroll"+u],Y.body["offset"+u],Mt["offset"+u],Mt["client"+u])):void 0===dt?y.css(Y,it,R):y.style(Y,it,dt,R)},c,L?b:void 0,L)}})}),y.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(u,c){y.fn[c]=function(g){return this.on(c,g)}}),y.fn.extend({bind:function(u,c,g){return this.on(u,null,c,g)},unbind:function(u,c){return this.off(u,null,c)},delegate:function(u,c,g,v){return this.on(c,u,g,v)},undelegate:function(u,c,g){return 1===arguments.length?this.off(u,"**"):this.off(c,u||"**",g)},hover:function(u,c){return this.mouseenter(u).mouseleave(c||u)}}),y.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(u,c){y.fn[c]=function(g,v){return arguments.length>0?this.on(c,null,g,v):this.trigger(c)}});var H=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;y.proxy=function(u,c){var g,v,b;if("string"==typeof c&&(g=u[c],c=u,u=g),Ut(u))return v=Je.call(arguments,2),b=function(){return u.apply(c||this,v.concat(Je.call(arguments)))},b.guid=u.guid=u.guid||y.guid++,b},y.holdReady=function(u){u?y.readyWait++:y.ready(!0)},y.isArray=Array.isArray,y.parseJSON=JSON.parse,y.nodeName=ar,y.isFunction=Ut,y.isWindow=Un,y.camelCase=pn,y.type=gn,y.now=Date.now,y.isNumeric=function(u){var c=y.type(u);return("number"===c||"string"===c)&&!isNaN(u-parseFloat(u))},y.trim=function(u){return null==u?"":(u+"").replace(H,"")},void 0!==(xr=function(){return y}.apply(Vr,[]))&&(ei.exports=xr);var lt=G.jQuery,rt=G.$;return y.noConflict=function(u){return G.$===y&&(G.$=rt),u&&G.jQuery===y&&(G.jQuery=lt),y},typeof Nr>"u"&&(G.jQuery=G.$=y),y})},489:function(ei,Vr,Wt){var xr;ei=Wt.nmd(ei),function(){var G,Je="Expected a function",Mr="__lodash_hash_undefined__",zr="__lodash_placeholder__",y=128,Ne=1/0,Ir=9007199254740991,Tr=4294967295,Fn=[["ary",y],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],Ht="[object Arguments]",Gr="[object Array]",jr="[object Boolean]",Ln="[object Date]",si="[object Error]",es="[object Function]",ws="[object GeneratorFunction]",pn="[object Map]",Ke="[object Number]",T="[object Object]",W="[object Promise]",tt="[object RegExp]",Ct="[object Set]",jt="[object String]",ue="[object Symbol]",ce="[object WeakMap]",Me="[object ArrayBuffer]",On="[object DataView]",or="[object Float32Array]",Hr="[object Float64Array]",cn="[object Int8Array]",wn="[object Int16Array]",Pn="[object Int32Array]",Lt="[object Uint8Array]",ji="[object Uint8ClampedArray]",Zr="[object Uint16Array]",Bn="[object Uint32Array]",kn=/\b__p \+= '';/g,Ue=/\b(__p \+=) '' \+/g,bs=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ns=/&(?:amp|lt|gt|quot|#39);/g,xs=/[&<>"']/g,wi=RegExp(ns.source),fi=RegExp(xs.source),Se=/<%-([\s\S]+?)%>/g,Zi=/<%([\s\S]+?)%>/g,_t=/<%=([\s\S]+?)%>/g,ur=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Jr=/^\w*$/,En=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,bi=/[\\^$.*+?()[\]{}|]/g,lr=RegExp(bi.source),rs=/^\s+/,xn=/\s/,Ns=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,xi=/\{\n\/\* \[wrapped with (.+)\] \*/,Wr=/,? & /,ua=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Rs=/[()=,{}\[\]\/\s]/,Vn=/\\(\\)?/g,la=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ni=/\w*$/,hi=/^[-+]0x[0-9a-f]+$/i,ca=/^0b[01]+$/i,fa=/^\[object .+?Constructor\]$/,ha=/^0o[0-7]+$/i,Gs=/^(?:0|[1-9]\d*)$/,js=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,di=/($^)/,Wi=/['\n\r\u2028\u2029\\]/g,_i="\\ud800-\\udfff",is="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Zs="\\u2700-\\u27bf",Rn="a-z\\xdf-\\xf6\\xf8-\\xff",Yi="A-Z\\xc0-\\xd6\\xd8-\\xde",Ts="\\ufe0e\\ufe0f",Ui="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ga="["+_i+"]",Ds="["+Ui+"]",Gn="["+is+"]",Qr="\\d+",Ar="["+Zs+"]",ai="["+Rn+"]",_s="[^"+_i+Ui+Qr+Zs+Rn+Yi+"]",gi="\\ud83c[\\udffb-\\udfff]",Nn="[^"+_i+"]",Ae="(?:\\ud83c[\\udde6-\\uddff]){2}",ve="[\\ud800-\\udbff][\\udc00-\\udfff]",jn="["+Yi+"]",Ys="(?:"+ai+"|"+_s+")",as="(?:"+jn+"|"+_s+")",os="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Si="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",us="(?:"+Gn+"|"+gi+")?",Us="["+Ts+"]?",ls=Us+us+"(?:\\u200d(?:"+[Nn,Ae,ve].join("|")+")"+Us+us+")*",Ta="(?:"+[Ar,Ae,ve].join("|")+")"+ls,fn="(?:"+[Nn+Gn+"?",Gn,Ae,ve,ga].join("|")+")",Vs=RegExp("['\u2019]","g"),Ls=RegExp(Gn,"g"),cs=RegExp(gi+"(?="+gi+")|"+fn+ls,"g"),Wn=RegExp([jn+"?"+ai+"+"+os+"(?="+[Ds,jn,"$"].join("|")+")",as+"+"+Si+"(?="+[Ds,jn+Ys,"$"].join("|")+")",jn+"?"+Ys+"+"+os,jn+"+"+Si,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Qr,Ta].join("|"),"g"),Da=RegExp("[\\u200d"+_i+is+Ts+"]"),fs=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,La=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Xs=-1,on={};on[or]=on[Hr]=on[cn]=on[wn]=on[Pn]=on[Lt]=on[ji]=on[Zr]=on[Bn]=!0,on[Ht]=on[Gr]=on[Me]=on[jr]=on[On]=on[Ln]=on[si]=on[es]=on[pn]=on[Ke]=on[T]=on[tt]=on[Ct]=on[jt]=on[ce]=!1;var qe={};qe[Ht]=qe[Gr]=qe[Me]=qe[On]=qe[jr]=qe[Ln]=qe[or]=qe[Hr]=qe[cn]=qe[wn]=qe[Pn]=qe[pn]=qe[Ke]=qe[T]=qe[tt]=qe[Ct]=qe[jt]=qe[ue]=qe[Lt]=qe[ji]=qe[Zr]=qe[Bn]=!0,qe[si]=qe[es]=qe[ce]=!1;var k={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},_=parseFloat,H=parseInt,lt="object"==typeof global&&global&&global.Object===Object&&global,rt="object"==typeof self&&self&&self.Object===Object&&self,u=lt||rt||Function("return this")(),c=Vr&&!Vr.nodeType&&Vr,g=c&&ei&&!ei.nodeType&&ei,v=g&&g.exports===c,b=v&&lt.process,N=function(){try{return g&&g.require&&g.require("util").types||b&&b.binding&&b.binding("util")}catch{}}(),L=N&&N.isArrayBuffer,R=N&&N.isDate,Y=N&&N.isMap,it=N&&N.isRegExp,dt=N&&N.isSet,Mt=N&&N.isTypedArray;function ct(nt,yt,pt){switch(pt.length){case 0:return nt.call(yt);case 1:return nt.call(yt,pt[0]);case 2:return nt.call(yt,pt[0],pt[1]);case 3:return nt.call(yt,pt[0],pt[1],pt[2])}return nt.apply(yt,pt)}function mt(nt,yt,pt,Zt){for(var fe=-1,Ve=null==nt?0:nt.length;++fe<Ve;){var Mn=nt[fe];yt(Zt,Mn,pt(Mn),nt)}return Zt}function kt(nt,yt){for(var pt=-1,Zt=null==nt?0:nt.length;++pt<Zt&&!1!==yt(nt[pt],pt,nt););return nt}function ie(nt,yt){for(var pt=null==nt?0:nt.length;pt--&&!1!==yt(nt[pt],pt,nt););return nt}function Yt(nt,yt){for(var pt=-1,Zt=null==nt?0:nt.length;++pt<Zt;)if(!yt(nt[pt],pt,nt))return!1;return!0}function qt(nt,yt){for(var pt=-1,Zt=null==nt?0:nt.length,fe=0,Ve=[];++pt<Zt;){var Mn=nt[pt];yt(Mn,pt,nt)&&(Ve[fe++]=Mn)}return Ve}function ye(nt,yt){return!(null==nt||!nt.length)&&mn(nt,yt,0)>-1}function te(nt,yt,pt){for(var Zt=-1,fe=null==nt?0:nt.length;++Zt<fe;)if(pt(yt,nt[Zt]))return!0;return!1}function ae(nt,yt){for(var pt=-1,Zt=null==nt?0:nt.length,fe=Array(Zt);++pt<Zt;)fe[pt]=yt(nt[pt],pt,nt);return fe}function ee(nt,yt){for(var pt=-1,Zt=yt.length,fe=nt.length;++pt<Zt;)nt[fe+pt]=yt[pt];return nt}function Lr(nt,yt,pt,Zt){var fe=-1,Ve=null==nt?0:nt.length;for(Zt&&Ve&&(pt=nt[++fe]);++fe<Ve;)pt=yt(pt,nt[fe],fe,nt);return pt}function We(nt,yt,pt,Zt){var fe=null==nt?0:nt.length;for(Zt&&fe&&(pt=nt[--fe]);fe--;)pt=yt(pt,nt[fe],fe,nt);return pt}function hn(nt,yt){for(var pt=-1,Zt=null==nt?0:nt.length;++pt<Zt;)if(yt(nt[pt],pt,nt))return!0;return!1}var Hs=ka("length");function fr(nt,yt,pt){var Zt;return pt(nt,function(fe,Ve,Mn){if(yt(fe,Ve,Mn))return Zt=Ve,!1}),Zt}function un(nt,yt,pt,Zt){for(var fe=nt.length,Ve=pt+(Zt?1:-1);Zt?Ve--:++Ve<fe;)if(yt(nt[Ve],Ve,nt))return Ve;return-1}function mn(nt,yt,pt){return yt==yt?function So(nt,yt,pt){for(var Zt=pt-1,fe=nt.length;++Zt<fe;)if(nt[Zt]===yt)return Zt;return-1}(nt,yt,pt):un(nt,oi,pt)}function hs(nt,yt,pt,Zt){for(var fe=pt-1,Ve=nt.length;++fe<Ve;)if(Zt(nt[fe],yt))return fe;return-1}function oi(nt){return nt!=nt}function _n(nt,yt){var pt=null==nt?0:nt.length;return pt?Fe(nt,yt)/pt:NaN}function ka(nt){return function(yt){return null==yt?G:yt[nt]}}function Fi(nt){return function(yt){return null==nt?G:nt[yt]}}function zn(nt,yt,pt,Zt,fe){return fe(nt,function(Ve,Mn,rn){pt=Zt?(Zt=!1,Ve):yt(pt,Ve,Mn,rn)}),pt}function Fe(nt,yt){for(var pt,Zt=-1,fe=nt.length;++Zt<fe;){var Ve=yt(nt[Zt]);Ve!==G&&(pt=pt===G?Ve:pt+Ve)}return pt}function hr(nt,yt){for(var pt=-1,Zt=Array(nt);++pt<nt;)Zt[pt]=yt(pt);return Zt}function qa(nt){return nt&&nt.slice(0,Cr(nt)+1).replace(rs,"")}function dr(nt){return function(yt){return nt(yt)}}function pi(nt,yt){return ae(yt,function(pt){return nt[pt]})}function Js(nt,yt){return nt.has(yt)}function $a(nt,yt){for(var pt=-1,Zt=nt.length;++pt<Zt&&mn(yt,nt[pt],0)>-1;);return pt}function xo(nt,yt){for(var pt=nt.length;pt--&&mn(yt,nt[pt],0)>-1;);return pt}function No(nt,yt){for(var pt=nt.length,Zt=0;pt--;)nt[pt]===yt&&++Zt;return Zt}var pa=Fi({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),uu=Fi({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function lu(nt){return"\\"+k[nt]}function vi(nt){return Da.test(nt)}function er(nt){var yt=-1,pt=Array(nt.size);return nt.forEach(function(Zt,fe){pt[++yt]=[fe,Zt]}),pt}function qr(nt,yt){return function(pt){return nt(yt(pt))}}function Ti(nt,yt){for(var pt=-1,Zt=nt.length,fe=0,Ve=[];++pt<Zt;){var Mn=nt[pt];(Mn===yt||Mn===zr)&&(nt[pt]=zr,Ve[fe++]=pt)}return Ve}function Ks(nt){var yt=-1,pt=Array(nt.size);return nt.forEach(function(Zt){pt[++yt]=Zt}),pt}function Di(nt){return vi(nt)?function no(nt){for(var yt=cs.lastIndex=0;cs.test(nt);)++yt;return yt}(nt):Hs(nt)}function In(nt){return vi(nt)?function we(nt){return nt.match(cs)||[]}(nt):function Qa(nt){return nt.split("")}(nt)}function Cr(nt){for(var yt=nt.length;yt--&&xn.test(nt.charAt(yt)););return yt}var ma=Fi({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Ii=function nt(yt){var i,pt=(yt=null==yt?u:Ii.defaults(u.Object(),yt,Ii.pick(u,La))).Array,Zt=yt.Date,fe=yt.Error,Ve=yt.Function,Mn=yt.Math,rn=yt.Object,Ia=yt.RegExp,cu=yt.String,z=yt.TypeError,U=pt.prototype,At=rn.prototype,at=yt["__core-js_shared__"],wt=Ve.prototype.toString,It=At.hasOwnProperty,Et=0,zt=(i=/[^.]+$/.exec(at&&at.keys&&at.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"",Jt=At.toString,$t=wt.call(rn),oe=u._,Te=Ia("^"+wt.call(It).replace(bi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),en=v?yt.Buffer:G,Ft=yt.Symbol,Sn=yt.Uint8Array,gr=en?en.allocUnsafe:G,yr=qr(rn.getPrototypeOf,rn),An=rn.create,Qs=At.propertyIsEnumerable,ds=U.splice,De=Ft?Ft.isConcatSpreadable:G,Yn=Ft?Ft.iterator:G,qs=Ft?Ft.toStringTag:G,Aa=function(){try{var i=Hi(rn,"defineProperty");return i({},"",{}),i}catch{}}(),Ac=yt.clearTimeout!==u.clearTimeout&&yt.clearTimeout,Cc=Zt&&Zt.now!==u.Date.now&&Zt.now,yc=yt.setTimeout!==u.setTimeout&&yt.setTimeout,Do=Mn.ceil,Lo=Mn.floor,fu=rn.getOwnPropertySymbols,wc=en?en.isBuffer:G,el=yt.isFinite,bc=U.join,xc=qr(rn.keys,rn),Hn=Mn.max,_r=Mn.min,Nc=Zt.now,Mc=yt.parseInt,nl=Mn.random,Sc=U.reverse,Po=Hi(yt,"DataView"),ro=Hi(yt,"Map"),hu=Hi(yt,"Promise"),Ea=Hi(yt,"Set"),Ca=Hi(yt,"WeakMap"),io=Hi(rn,"create"),$s=Ca&&new Ca,Li={},gs=xa(Po),rl=xa(ro),du=xa(hu),ta=xa(Ea),za=xa(Ca),Pe=Ft?Ft.prototype:G,ke=Pe?Pe.valueOf:G,Jn=Pe?Pe.toString:G;function E(i){if(ir(i)&&!xe(i)&&!(i instanceof Ee)){if(i instanceof Pi)return i;if(It.call(i,"__wrapped__"))return rc(i)}return new Pi(i)}var Oa=function(){function i(){}return function(a){if(!Qn(a))return{};if(An)return An(a);i.prototype=a;var h=new i;return i.prototype=G,h}}();function ko(){}function Pi(i,a){this.__wrapped__=i,this.__actions__=[],this.__chain__=!!a,this.__index__=0,this.__values__=G}function Ee(i){this.__wrapped__=i,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Tr,this.__views__=[]}function ps(i){var a=-1,h=null==i?0:i.length;for(this.clear();++a<h;){var C=i[a];this.set(C[0],C[1])}}function ki(i){var a=-1,h=null==i?0:i.length;for(this.clear();++a<h;){var C=i[a];this.set(C[0],C[1])}}function Vi(i){var a=-1,h=null==i?0:i.length;for(this.clear();++a<h;){var C=i[a];this.set(C[0],C[1])}}function Ps(i){var a=-1,h=null==i?0:i.length;for(this.__data__=new Vi;++a<h;)this.add(i[a])}function Xi(i){var a=this.__data__=new ki(i);this.size=a.size}function Ba(i,a){var h=xe(i),C=!h&&bo(i),M=!h&&!C&&Xa(i),O=!h&&!C&&!M&&au(i),F=h||C||M||O,J=F?hr(i.length,cu):[],ut=J.length;for(var bt in i)(a||It.call(i,bt))&&(!F||!("length"==bt||M&&("offset"==bt||"parent"==bt)||O&&("buffer"==bt||"byteLength"==bt||"byteOffset"==bt)||Os(bt,ut)))&&J.push(bt);return J}function Oo(i){var a=i.length;return a?i[Mu(0,a-1)]:G}function Bc(i,a){return ru(nr(i),ea(a,0,i.length))}function dl(i){return ru(nr(i))}function Bo(i,a,h){(h!==G&&!Ji(i[a],h)||h===G&&!(a in i))&&ks(i,a,h)}function ao(i,a,h){var C=i[a];(!It.call(i,a)||!Ji(C,h)||h===G&&!(a in i))&&ks(i,a,h)}function Ro(i,a){for(var h=i.length;h--;)if(Ji(i[h][0],a))return h;return-1}function Rc(i,a,h,C){return vs(i,function(M,O,F){a(C,M,h(M),F)}),C}function Go(i,a){return i&&ci(a,Fr(a),i)}function ks(i,a,h){"__proto__"==a&&Aa?Aa(i,a,{configurable:!0,enumerable:!0,value:h,writable:!0}):i[a]=h}function mu(i,a){for(var h=-1,C=a.length,M=pt(C),O=null==i;++h<C;)M[h]=O?G:vh(i,a[h]);return M}function ea(i,a,h){return i==i&&(h!==G&&(i=i<=h?i:h),a!==G&&(i=i>=a?i:a)),i}function Ei(i,a,h,C,M,O){var F,J=1&a,ut=2&a,bt=4&a;if(h&&(F=M?h(i,C,M,O):h(i)),F!==G)return F;if(!Qn(i))return i;var Nt=xe(i);if(Nt){if(F=function Xe(i){var a=i.length,h=new i.constructor(a);return a&&"string"==typeof i[0]&&It.call(i,"index")&&(h.index=i.index,h.input=i.input),h}(i),!J)return nr(i,F)}else{var Dt=Ur(i),Gt=Dt==es||Dt==ws;if(Xa(i))return Rl(i,J);if(Dt==T||Dt==Ht||Gt&&!M){if(F=ut||Gt?{}:Ql(i),!J)return ut?function _l(i,a){return ci(i,Uu(i),a)}(i,function Gc(i,a){return i&&ci(a,Bi(a),i)}(F,i)):function Wl(i,a){return ci(i,Qo(i),a)}(i,Go(F,i))}else{if(!qe[Dt])return M?i:{};F=function ff(i,a,h){var C=i.constructor;switch(a){case Me:return Eu(i);case jr:case Ln:return new C(+i);case On:return function Wa(i,a){var h=a?Eu(i.buffer):i.buffer;return new i.constructor(h,i.byteOffset,i.byteLength)}(i,h);case or:case Hr:case cn:case wn:case Pn:case Lt:case ji:case Zr:case Bn:return co(i,h);case pn:return new C;case Ke:case jt:return new C(i);case tt:return function Gl(i){var a=new i.constructor(i.source,Ni.exec(i));return a.lastIndex=i.lastIndex,a}(i);case Ct:return new C;case ue:return function ef(i){return ke?rn(ke.call(i)):{}}(i)}}(i,Dt,J)}}O||(O=new Xi);var Xt=O.get(i);if(Xt)return Xt;O.set(i,F),Lh(i)?i.forEach(function(pe){F.add(Ei(pe,a,h,pe,i,O))}):Th(i)&&i.forEach(function(pe,_e){F.set(_e,Ei(pe,a,h,_e,i,O))});var je=Nt?G:(bt?ut?ba:Jo:ut?Bi:Fr)(i);return kt(je||i,function(pe,_e){je&&(pe=i[_e=pe]),ao(F,_e,Ei(pe,a,h,_e,i,O))}),F}function pl(i,a,h){var C=h.length;if(null==i)return!C;for(i=rn(i);C--;){var M=h[C],F=i[M];if(F===G&&!(M in i)||!(0,a[M])(F))return!1}return!0}function oo(i,a,h){if("function"!=typeof i)throw new z(Je);return mo(function(){i.apply(G,h)},a)}function na(i,a,h,C){var M=-1,O=ye,F=!0,J=i.length,ut=[],bt=a.length;if(!J)return ut;h&&(a=ae(a,dr(h))),C?(O=te,F=!1):a.length>=200&&(O=Js,F=!1,a=new Ps(a));t:for(;++M<J;){var Nt=i[M],Dt=null==h?Nt:h(Nt);if(Nt=C||0!==Nt?Nt:0,F&&Dt==Dt){for(var Gt=bt;Gt--;)if(a[Gt]===Dt)continue t;ut.push(Nt)}else O(a,Dt,C)||ut.push(Nt)}return ut}E.templateSettings={escape:Se,evaluate:Zi,interpolate:_t,variable:"",imports:{_:E}},(E.prototype=ko.prototype).constructor=E,(Pi.prototype=Oa(ko.prototype)).constructor=Pi,(Ee.prototype=Oa(ko.prototype)).constructor=Ee,ps.prototype.clear=function il(){this.__data__=io?io(null):{},this.size=0},ps.prototype.delete=function sl(i){var a=this.has(i)&&delete this.__data__[i];return this.size-=a?1:0,a},ps.prototype.get=function Tc(i){var a=this.__data__;if(io){var h=a[i];return h===Mr?G:h}return It.call(a,i)?a[i]:G},ps.prototype.has=function Dc(i){var a=this.__data__;return io?a[i]!==G:It.call(a,i)},ps.prototype.set=function al(i,a){var h=this.__data__;return this.size+=this.has(i)?0:1,h[i]=io&&a===G?Mr:a,this},ki.prototype.clear=function Lc(){this.__data__=[],this.size=0},ki.prototype.delete=function Pc(i){var a=this.__data__,h=Ro(a,i);return!(h<0||(h==a.length-1?a.pop():ds.call(a,h,1),--this.size,0))},ki.prototype.get=function pu(i){var a=this.__data__,h=Ro(a,i);return h<0?G:a[h][1]},ki.prototype.has=function vu(i){return Ro(this.__data__,i)>-1},ki.prototype.set=function ol(i,a){var h=this.__data__,C=Ro(h,i);return C<0?(++this.size,h.push([i,a])):h[C][1]=a,this},Vi.prototype.clear=function ya(){this.size=0,this.__data__={hash:new ps,map:new(ro||ki),string:new ps}},Vi.prototype.delete=function ul(i){var a=Ko(this,i).delete(i);return this.size-=a?1:0,a},Vi.prototype.get=function ll(i){return Ko(this,i).get(i)},Vi.prototype.has=function cl(i){return Ko(this,i).has(i)},Vi.prototype.set=function kc(i,a){var h=Ko(this,i),C=h.size;return h.set(i,a),this.size+=h.size==C?0:1,this},Ps.prototype.add=Ps.prototype.push=function Ec(i){return this.__data__.set(i,Mr),this},Ps.prototype.has=function fl(i){return this.__data__.has(i)},Xi.prototype.clear=function zc(){this.__data__=new ki,this.size=0},Xi.prototype.delete=function hl(i){var a=this.__data__,h=a.delete(i);return this.size=a.size,h},Xi.prototype.get=function Oc(i){return this.__data__.get(i)},Xi.prototype.has=function so(i){return this.__data__.has(i)},Xi.prototype.set=function zo(i,a){var h=this.__data__;if(h instanceof ki){var C=h.__data__;if(!ro||C.length<199)return C.push([i,a]),this.size=++h.size,this;h=this.__data__=new Vi(C)}return h.set(i,a),this.size=h.size,this};var vs=nf(ms),vl=nf(Au,!0);function jc(i,a){var h=!0;return vs(i,function(C,M,O){return h=!!a(C,M,O)}),h}function jo(i,a,h){for(var C=-1,M=i.length;++C<M;){var O=i[C],F=a(O);if(null!=F&&(J===G?F==F&&!Ki(F):h(F,J)))var J=F,ut=O}return ut}function Il(i,a){var h=[];return vs(i,function(C,M,O){a(C,M,O)&&h.push(C)}),h}function wr(i,a,h,C,M){var O=-1,F=i.length;for(h||(h=Fu),M||(M=[]);++O<F;){var J=i[O];a>0&&h(J)?a>1?wr(J,a-1,h,C,M):ee(M,J):C||(M[M.length]=J)}return M}var Iu=rf(),Al=rf(!0);function ms(i,a){return i&&Iu(i,a,Fr)}function Au(i,a){return i&&Al(i,a,Fr)}function Zo(i,a){return qt(a,function(h){return Na(i[h])})}function br(i,a){for(var h=0,C=(a=ia(a,i)).length;null!=i&&h<C;)i=i[Is(a[h++])];return h&&h==C?i:G}function Yr(i,a,h){var C=a(i);return xe(i)?C:ee(C,h(i))}function kr(i){return null==i?i===G?"[object Undefined]":"[object Null]":qs&&qs in rn(i)?function go(i){var a=It.call(i,qs),h=i[qs];try{i[qs]=G;var C=!0}catch{}var M=Jt.call(i);return C&&(a?i[qs]=h:delete i[qs]),M}(i):function eu(i){return Jt.call(i)}(i)}function Cu(i,a){return i>a}function Zc(i,a){return null!=i&&It.call(i,a)}function Wc(i,a){return null!=i&&a in rn(i)}function Wo(i,a,h){for(var C=h?te:ye,M=i[0].length,O=i.length,F=O,J=pt(O),ut=1/0,bt=[];F--;){var Nt=i[F];F&&a&&(Nt=ae(Nt,dr(a))),ut=_r(Nt.length,ut),J[F]=!h&&(a||M>=120&&Nt.length>=120)?new Ps(F&&Nt):G}Nt=i[0];var Dt=-1,Gt=J[0];t:for(;++Dt<M&&bt.length<ut;){var Xt=Nt[Dt],ge=a?a(Xt):Xt;if(Xt=h||0!==Xt?Xt:0,!(Gt?Js(Gt,ge):C(bt,ge,h))){for(F=O;--F;){var je=J[F];if(!(je?Js(je,ge):C(i[F],ge,h)))continue t}Gt&&Gt.push(ge),bt.push(Xt)}}return bt}function Ra(i,a,h){var C=null==(i=$l(i,a=ia(a,i)))?i:i[Is(zi(a))];return null==C?G:ct(C,i,h)}function yu(i){return ir(i)&&kr(i)==Ht}function uo(i,a,h,C,M){return i===a||(null==i||null==a||!ir(i)&&!ir(a)?i!=i&&a!=a:function Yc(i,a,h,C,M,O){var F=xe(i),J=xe(a),ut=F?Gr:Ur(i),bt=J?Gr:Ur(a),Nt=(ut=ut==Ht?T:ut)==T,Dt=(bt=bt==Ht?T:bt)==T,Gt=ut==bt;if(Gt&&Xa(i)){if(!Xa(a))return!1;F=!0,Nt=!1}if(Gt&&!Nt)return O||(O=new Xi),F||au(i)?Jl(i,a,h,C,M,O):function Ho(i,a,h,C,M,O,F){switch(h){case On:if(i.byteLength!=a.byteLength||i.byteOffset!=a.byteOffset)return!1;i=i.buffer,a=a.buffer;case Me:return!(i.byteLength!=a.byteLength||!O(new Sn(i),new Sn(a)));case jr:case Ln:case Ke:return Ji(+i,+a);case si:return i.name==a.name&&i.message==a.message;case tt:case jt:return i==a+"";case pn:var J=er;case Ct:if(J||(J=Ks),i.size!=a.size&&!(1&C))return!1;var bt=F.get(i);if(bt)return bt==a;C|=2,F.set(i,a);var Nt=Jl(J(i),J(a),C,M,O,F);return F.delete(i),Nt;case ue:if(ke)return ke.call(i)==ke.call(a)}return!1}(i,a,ut,h,C,M,O);if(!(1&h)){var Xt=Nt&&It.call(i,"__wrapped__"),ge=Dt&&It.call(a,"__wrapped__");if(Xt||ge){var je=Xt?i.value():i,pe=ge?a.value():a;return O||(O=new Xi),M(je,pe,h,C,O)}}return!!Gt&&(O||(O=new Xi),function lf(i,a,h,C,M,O){var F=1&h,J=Jo(i),ut=J.length;if(ut!=Jo(a).length&&!F)return!1;for(var Dt=ut;Dt--;){var Gt=J[Dt];if(!(F?Gt in a:It.call(a,Gt)))return!1}var Xt=O.get(i),ge=O.get(a);if(Xt&&ge)return Xt==a&&ge==i;var je=!0;O.set(i,a),O.set(a,i);for(var pe=F;++Dt<ut;){var _e=i[Gt=J[Dt]],He=a[Gt];if(C)var Qi=F?C(He,_e,Gt,a,i,O):C(_e,He,Gt,i,a,O);if(!(Qi===G?_e===He||M(_e,He,h,C,O):Qi)){je=!1;break}pe||(pe="constructor"==Gt)}if(je&&!pe){var Ai=i.constructor,qi=a.constructor;Ai!=qi&&"constructor"in i&&"constructor"in a&&!("function"==typeof Ai&&Ai instanceof Ai&&"function"==typeof qi&&qi instanceof qi)&&(je=!1)}return O.delete(i),O.delete(a),je}(i,a,h,C,M,O))}(i,a,h,C,uo,M))}function lo(i,a,h,C){var M=h.length,O=M,F=!C;if(null==i)return!O;for(i=rn(i);M--;){var J=h[M];if(F&&J[2]?J[1]!==i[J[0]]:!(J[0]in i))return!1}for(;++M<O;){var ut=(J=h[M])[0],bt=i[ut],Nt=J[1];if(F&&J[2]){if(bt===G&&!(ut in i))return!1}else{var Dt=new Xi;if(C)var Gt=C(bt,Nt,ut,i,a,Dt);if(!(Gt===G?uo(Nt,bt,3,C,Dt):Gt))return!1}}return!0}function wu(i){return!(!Qn(i)||function gf(i){return!!zt&&zt in i}(i))&&(Na(i)?Te:fa).test(xa(i))}function Ga(i){return"function"==typeof i?i:null==i?Ri:"object"==typeof i?xe(i)?xl(i[0],i[1]):bl(i):Yh(i)}function ui(i){if(!po(i))return xc(i);var a=[];for(var h in rn(i))It.call(i,h)&&"constructor"!=h&&a.push(h);return a}function bu(i,a){return i<a}function xu(i,a){var h=-1,C=Oi(i)?pt(i.length):[];return vs(i,function(M,O,F){C[++h]=a(M,O,F)}),C}function bl(i){var a=Yu(i);return 1==a.length&&a[0][2]?tu(a[0][0],a[0][1]):function(h){return h===i||lo(h,i,a)}}function xl(i,a){return Vu(i)&&ql(a)?tu(Is(i),a):function(h){var C=vh(h,i);return C===G&&C===a?mh(h,i):uo(a,C,3)}}function _o(i,a,h,C,M){i!==a&&Iu(a,function(O,F){if(M||(M=new Xi),Qn(O))!function Nl(i,a,h,C,M,O,F){var J=vo(i,h),ut=vo(a,h),bt=F.get(ut);if(bt)Bo(i,h,bt);else{var Nt=O?O(J,ut,h+"",i,a,F):G,Dt=Nt===G;if(Dt){var Gt=xe(ut),Xt=!Gt&&Xa(ut),ge=!Gt&&!Xt&&au(ut);Nt=ut,Gt||Xt||ge?xe(J)?Nt=J:vr(J)?Nt=nr(J):Xt?(Dt=!1,Nt=Rl(ut,!0)):ge?(Dt=!1,Nt=co(ut,!0)):Nt=[]:tl(ut)||bo(ut)?(Nt=J,bo(J)?Nt=Eh(J):(!Qn(J)||Na(J))&&(Nt=Ql(ut))):Dt=!1}Dt&&(F.set(ut,Nt),M(Nt,ut,C,O,F),F.delete(ut)),Bo(i,h,Nt)}}(i,a,F,h,_o,C,M);else{var J=C?C(vo(i,F),O,F+"",i,a,M):G;J===G&&(J=O),Bo(i,F,J)}},Bi)}function Ml(i,a){var h=i.length;if(h)return Os(a+=a<0?h:0,h)?i[a]:G}function Sl(i,a,h){a=a.length?ae(a,function(O){return xe(O)?function(F){return br(F,1===O.length?O[0]:O)}:O}):[Ri];var C=-1;return a=ae(a,dr(le())),function $e(nt,yt){var pt=nt.length;for(nt.sort(yt);pt--;)nt[pt]=nt[pt].value;return nt}(xu(i,function(O,F,J){return{criteria:ae(a,function(bt){return bt(O)}),index:++C,value:O}}),function(O,F){return function jl(i,a,h){for(var C=-1,M=i.criteria,O=a.criteria,F=M.length,J=h.length;++C<F;){var ut=Fo(M[C],O[C]);if(ut)return C>=J?ut:ut*("desc"==h[C]?-1:1)}return i.index-a.index}(O,F,h)})}function Tl(i,a,h){for(var C=-1,M=a.length,O={};++C<M;){var F=a[C],J=br(i,F);h(J,F)&&Za(O,ia(F,i),J)}return O}function wa(i,a,h,C){var M=C?hs:mn,O=-1,F=a.length,J=i;for(i===a&&(a=nr(a)),h&&(J=ae(i,dr(h)));++O<F;)for(var ut=0,bt=a[O],Nt=h?h(bt):bt;(ut=M(J,Nt,ut,C))>-1;)J!==i&&ds.call(J,ut,1),ds.call(i,ut,1);return i}function Nu(i,a){for(var h=i?a.length:0,C=h-1;h--;){var M=a[h];if(h==C||M!==O){var O=M;Os(M)?ds.call(i,M,1):Du(i,M)}}return i}function Mu(i,a){return i+Lo(nl()*(a-i+1))}function ja(i,a){var h="";if(!i||a<1||a>Ir)return h;do{a%2&&(h+=i),(a=Lo(a/2))&&(i+=i)}while(a);return h}function be(i,a){return Xu(nu(i,a,Ri),i+"")}function Kc(i){return Oo(ou(i))}function Qc(i,a){var h=ou(i);return ru(h,ea(a,0,h.length))}function Za(i,a,h,C){if(!Qn(i))return i;for(var M=-1,O=(a=ia(a,i)).length,F=O-1,J=i;null!=J&&++M<O;){var ut=Is(a[M]),bt=h;if("__proto__"===ut||"constructor"===ut||"prototype"===ut)return i;if(M!=F){var Nt=J[ut];(bt=C?C(Nt,ut,J):G)===G&&(bt=Qn(Nt)?Nt:Os(a[M+1])?[]:{})}ao(J,ut,bt),J=J[ut]}return i}var Ll=$s?function(i,a){return $s.set(i,a),i}:Ri,qc=Aa?function(i,a){return Aa(i,"toString",{configurable:!0,enumerable:!1,value:Ah(a),writable:!0})}:Ri;function Su(i){return ru(ou(i))}function li(i,a,h){var C=-1,M=i.length;a<0&&(a=-a>M?0:M+a),(h=h>M?M:h)<0&&(h+=M),M=a>h?0:h-a>>>0,a>>>=0;for(var O=pt(M);++C<M;)O[C]=i[C+a];return O}function $c(i,a){var h;return vs(i,function(C,M,O){return!(h=a(C,M,O))}),!!h}function Yo(i,a,h){var C=0,M=null==i?C:i.length;if("number"==typeof a&&a==a&&M<=2147483647){for(;C<M;){var O=C+M>>>1,F=i[O];null!==F&&!Ki(F)&&(h?F<=a:F<a)?C=O+1:M=O}return M}return Tu(i,a,Ri,h)}function Tu(i,a,h,C){var M=0,O=null==i?0:i.length;if(0===O)return 0;for(var F=(a=h(a))!=a,J=null===a,ut=Ki(a),bt=a===G;M<O;){var Nt=Lo((M+O)/2),Dt=h(i[Nt]),Gt=Dt!==G,Xt=null===Dt,ge=Dt==Dt,je=Ki(Dt);if(F)var pe=C||ge;else pe=bt?ge&&(C||Gt):J?ge&&Gt&&(C||!Xt):ut?ge&&Gt&&!Xt&&(C||!je):!Xt&&!je&&(C?Dt<=a:Dt<a);pe?M=Nt+1:O=Nt}return _r(O,4294967294)}function Pl(i,a){for(var h=-1,C=i.length,M=0,O=[];++h<C;){var F=i[h],J=a?a(F):F;if(!h||!Ji(J,ut)){var ut=J;O[M++]=0===F?0:F}}return O}function kl(i){return"number"==typeof i?i:Ki(i)?NaN:+i}function Kn(i){if("string"==typeof i)return i;if(xe(i))return ae(i,Kn)+"";if(Ki(i))return Jn?Jn.call(i):"";var a=i+"";return"0"==a&&1/i==-Ne?"-0":a}function ra(i,a,h){var C=-1,M=ye,O=i.length,F=!0,J=[],ut=J;if(h)F=!1,M=te;else if(O>=200){var bt=a?null:Nh(i);if(bt)return Ks(bt);F=!1,M=Js,ut=new Ps}else ut=a?[]:J;t:for(;++C<O;){var Nt=i[C],Dt=a?a(Nt):Nt;if(Nt=h||0!==Nt?Nt:0,F&&Dt==Dt){for(var Gt=ut.length;Gt--;)if(ut[Gt]===Dt)continue t;a&&ut.push(Dt),J.push(Nt)}else M(ut,Dt,h)||(ut!==J&&ut.push(Dt),J.push(Nt))}return J}function Du(i,a){return null==(i=$l(i,a=ia(a,i)))||delete i[Is(zi(a))]}function El(i,a,h,C){return Za(i,a,h(br(i,a)),C)}function Uo(i,a,h,C){for(var M=i.length,O=C?M:-1;(C?O--:++O<M)&&a(i[O],O,i););return h?li(i,C?0:O,C?O+1:M):li(i,C?O+1:0,C?M:O)}function zl(i,a){var h=i;return h instanceof Ee&&(h=h.value()),Lr(a,function(C,M){return M.func.apply(M.thisArg,ee([C],M.args))},h)}function Lu(i,a,h){var C=i.length;if(C<2)return C?ra(i[0]):[];for(var M=-1,O=pt(C);++M<C;)for(var F=i[M],J=-1;++J<C;)J!=M&&(O[M]=na(O[M]||F,i[J],a,h));return ra(wr(O,1),a,h)}function Ol(i,a,h){for(var C=-1,M=i.length,O=a.length,F={};++C<M;)h(F,i[C],C<O?a[C]:G);return F}function Pu(i){return vr(i)?i:[]}function ku(i){return"function"==typeof i?i:Ri}function ia(i,a){return xe(i)?i:Vu(i,a)?[i]:nc(Cn(i))}var tf=be;function sa(i,a,h){var C=i.length;return h=h===G?C:h,!a&&h>=C?i:li(i,a,h)}var Bl=Ac||function(i){return u.clearTimeout(i)};function Rl(i,a){if(a)return i.slice();var h=i.length,C=gr?gr(h):new i.constructor(h);return i.copy(C),C}function Eu(i){var a=new i.constructor(i.byteLength);return new Sn(a).set(new Sn(i)),a}function co(i,a){var h=a?Eu(i.buffer):i.buffer;return new i.constructor(h,i.byteOffset,i.length)}function Fo(i,a){if(i!==a){var h=i!==G,C=null===i,M=i==i,O=Ki(i),F=a!==G,J=null===a,ut=a==a,bt=Ki(a);if(!J&&!bt&&!O&&i>a||O&&F&&ut&&!J&&!bt||C&&F&&ut||!h&&ut||!M)return 1;if(!C&&!O&&!bt&&i<a||bt&&h&&M&&!C&&!O||J&&h&&M||!F&&M||!ut)return-1}return 0}function Zl(i,a,h,C){for(var M=-1,O=i.length,F=h.length,J=-1,ut=a.length,bt=Hn(O-F,0),Nt=pt(ut+bt),Dt=!C;++J<ut;)Nt[J]=a[J];for(;++M<F;)(Dt||M<O)&&(Nt[h[M]]=i[M]);for(;bt--;)Nt[J++]=i[M++];return Nt}function Vo(i,a,h,C){for(var M=-1,O=i.length,F=-1,J=h.length,ut=-1,bt=a.length,Nt=Hn(O-J,0),Dt=pt(Nt+bt),Gt=!C;++M<Nt;)Dt[M]=i[M];for(var Xt=M;++ut<bt;)Dt[Xt+ut]=a[ut];for(;++F<J;)(Gt||M<O)&&(Dt[Xt+h[F]]=i[M++]);return Dt}function nr(i,a){var h=-1,C=i.length;for(a||(a=pt(C));++h<C;)a[h]=i[h];return a}function ci(i,a,h,C){var M=!h;h||(h={});for(var O=-1,F=a.length;++O<F;){var J=a[O],ut=C?C(h[J],i[J],J,h,i):G;ut===G&&(ut=i[J]),M?ks(h,J,ut):ao(h,J,ut)}return h}function Xo(i,a){return function(h,C){var M=xe(h)?mt:Rc,O=a?a():{};return M(h,i,le(C,2),O)}}function _a(i){return be(function(a,h){var C=-1,M=h.length,O=M>1?h[M-1]:G,F=M>2?h[2]:G;for(O=i.length>3&&"function"==typeof O?(M--,O):G,F&&ti(h[0],h[1],F)&&(O=M<3?G:O,M=1),a=rn(a);++C<M;){var J=h[C];J&&i(a,J,C,O)}return a})}function nf(i,a){return function(h,C){if(null==h)return h;if(!Oi(h))return i(h,C);for(var M=h.length,O=a?M:-1,F=rn(h);(a?O--:++O<M)&&!1!==C(F[O],O,F););return h}}function rf(i){return function(a,h,C){for(var M=-1,O=rn(a),F=C(a),J=F.length;J--;){var ut=F[i?J:++M];if(!1===h(O[ut],ut,O))break}return a}}function zu(i){return function(a){var h=vi(a=Cn(a))?In(a):G,C=h?h[0]:a.charAt(0),M=h?sa(h,1).join(""):a.slice(1);return C[i]()+M}}function Ya(i){return function(a){return Lr(Wh(Zh(a).replace(Vs,"")),i,"")}}function Ua(i){return function(){var a=arguments;switch(a.length){case 0:return new i;case 1:return new i(a[0]);case 2:return new i(a[0],a[1]);case 3:return new i(a[0],a[1],a[2]);case 4:return new i(a[0],a[1],a[2],a[3]);case 5:return new i(a[0],a[1],a[2],a[3],a[4]);case 6:return new i(a[0],a[1],a[2],a[3],a[4],a[5]);case 7:return new i(a[0],a[1],a[2],a[3],a[4],a[5],a[6])}var h=Oa(i.prototype),C=i.apply(h,a);return Qn(C)?C:h}}function af(i){return function(a,h,C){var M=rn(a);if(!Oi(a)){var O=le(h,3);a=Fr(a),h=function(J){return O(M[J],J,M)}}var F=i(a,h,C);return F>-1?M[O?a[F]:F]:G}}function Ou(i){return zs(function(a){var h=a.length,C=h,M=Pi.prototype.thru;for(i&&a.reverse();C--;){var O=a[C];if("function"!=typeof O)throw new z(Je);if(M&&!F&&"wrapper"==_u(O))var F=new Pi([],!0)}for(C=F?C:h;++C<h;){var J=_u(O=a[C]),ut="wrapper"==J?Wu(O):G;F=ut&&qo(ut[0])&&424==ut[1]&&!ut[4].length&&1==ut[9]?F[_u(ut[0])].apply(F,ut[3]):1==O.length&&qo(O)?F[J]():F.thru(O)}return function(){var bt=arguments,Nt=bt[0];if(F&&1==bt.length&&xe(Nt))return F.plant(Nt).value();for(var Dt=0,Gt=h?a[Dt].apply(this,bt):Nt;++Dt<h;)Gt=a[Dt].call(this,Gt);return Gt}})}function Bu(i,a,h,C,M,O,F,J,ut,bt){var Nt=a&y,Dt=1&a,Gt=2&a,Xt=24&a,ge=512&a,je=Gt?G:Ua(i);return function pe(){for(var _e=arguments.length,He=pt(_e),Qi=_e;Qi--;)He[Qi]=arguments[Qi];if(Xt)var Ai=Fa(pe),qi=No(He,Ai);if(C&&(He=Zl(He,C,M,Xt)),O&&(He=Vo(He,O,F,Xt)),_e-=qi,Xt&&_e<bt){var mr=Ti(He,Ai);return Zu(i,a,Bu,pe.placeholder,h,He,mr,J,ut,bt-_e)}var Bs=Dt?h:this,Sa=Gt?Bs[i]:i;return _e=He.length,J?He=If(He,J):ge&&_e>1&&He.reverse(),Nt&&ut<_e&&(He.length=ut),this&&this!==u&&this instanceof pe&&(Sa=je||Ua(Sa)),Sa.apply(Bs,He)}}function Ru(i,a){return function(h,C){return function Cl(i,a,h,C){return ms(i,function(M,O,F){a(C,h(M),O,F)}),C}(h,i,a(C),{})}}function Gu(i,a){return function(h,C){var M;if(h===G&&C===G)return a;if(h!==G&&(M=h),C!==G){if(M===G)return C;"string"==typeof h||"string"==typeof C?(h=Kn(h),C=Kn(C)):(h=kl(h),C=kl(C)),M=i(h,C)}return M}}function Ul(i){return zs(function(a){return a=ae(a,dr(le())),be(function(h){var C=this;return i(a,function(M){return ct(M,C,h)})})})}function fo(i,a){var h=(a=a===G?" ":Kn(a)).length;if(h<2)return h?ja(a,i):a;var C=ja(a,Do(i/Di(a)));return vi(a)?sa(In(C),0,i).join(""):C.slice(0,i)}function of(i){return function(a,h,C){return C&&"number"!=typeof C&&ti(a,h,C)&&(h=C=G),a=Ma(a),h===G?(h=a,a=0):h=Ma(h),function Dl(i,a,h,C){for(var M=-1,O=Hn(Do((a-i)/(h||1)),0),F=pt(O);O--;)F[C?O:++M]=i,i+=h;return F}(a,h,C=C===G?a<h?1:-1:Ma(C),i)}}function ju(i){return function(a,h){return"string"==typeof a&&"string"==typeof h||(a=Cs(a),h=Cs(h)),i(a,h)}}function Zu(i,a,h,C,M,O,F,J,ut,bt){var Nt=8&a;a|=Nt?32:64,4&(a&=~(Nt?64:32))||(a&=-4);var je=[i,a,M,Nt?O:G,Nt?F:G,Nt?G:O,Nt?G:F,J,ut,bt],pe=h.apply(G,je);return qo(i)&&aa(pe,je),pe.placeholder=C,tc(pe,i,a)}function Fl(i){var a=Mn[i];return function(h,C){if(h=Cs(h),(C=null==C?0:_r(Be(C),292))&&el(h)){var M=(Cn(h)+"e").split("e");return+((M=(Cn(a(M[0]+"e"+(+M[1]+C)))+"e").split("e"))[0]+"e"+(+M[1]-C))}return a(h)}}var Nh=Ea&&1/Ks(new Ea([,-0]))[1]==Ne?function(i){return new Ea(i)}:wh;function Vl(i){return function(a){var h=Ur(a);return h==pn?er(a):h==Ct?function eo(nt){var yt=-1,pt=Array(nt.size);return nt.forEach(function(Zt){pt[++yt]=[Zt,Zt]}),pt}(a):function Xn(nt,yt){return ae(yt,function(pt){return[pt,nt[pt]]})}(a,i(a))}}function Es(i,a,h,C,M,O,F,J){var ut=2&a;if(!ut&&"function"!=typeof i)throw new z(Je);var bt=C?C.length:0;if(bt||(a&=-97,C=M=G),F=F===G?F:Hn(Be(F),0),J=J===G?J:Be(J),bt-=M?M.length:0,64&a){var Nt=C,Dt=M;C=M=G}var Gt=ut?G:Wu(i),Xt=[i,a,h,C,M,Nt,Dt,O,F,J];if(Gt&&function vf(i,a){var h=i[1],C=a[1],M=h|C;if(!(M<131||(C==y&&8==h||C==y&&256==h&&i[7].length<=a[8]||384==C&&a[7].length<=a[8]&&8==h)))return i;1&C&&(i[2]=a[2],M|=1&h?0:4);var J=a[3];if(J){var ut=i[3];i[3]=ut?Zl(ut,J,a[4]):J,i[4]=ut?Ti(i[3],zr):a[4]}(J=a[5])&&(i[5]=(ut=i[5])?Vo(ut,J,a[6]):J,i[6]=ut?Ti(i[5],zr):a[6]),(J=a[7])&&(i[7]=J),C&y&&(i[8]=null==i[8]?a[8]:_r(i[8],a[8])),null==i[9]&&(i[9]=a[9]),i[0]=a[0],i[1]=M}(Xt,Gt),i=Xt[0],a=Xt[1],h=Xt[2],C=Xt[3],M=Xt[4],!(J=Xt[9]=Xt[9]===G?ut?0:i.length:Hn(Xt[9]-bt,0))&&24&a&&(a&=-25),a&&1!=a)ge=8==a||16==a?function Yl(i,a,h){var C=Ua(i);return function M(){for(var O=arguments.length,F=pt(O),J=O,ut=Fa(M);J--;)F[J]=arguments[J];var bt=O<3&&F[0]!==ut&&F[O-1]!==ut?[]:Ti(F,ut);return(O-=bt.length)<h?Zu(i,a,Bu,M.placeholder,G,F,bt,G,G,h-O):ct(this&&this!==u&&this instanceof M?C:i,this,F)}}(i,a,J):32!=a&&33!=a||M.length?Bu.apply(G,Xt):function ho(i,a,h,C){var M=1&a,O=Ua(i);return function F(){for(var J=-1,ut=arguments.length,bt=-1,Nt=C.length,Dt=pt(Nt+ut),Gt=this&&this!==u&&this instanceof F?O:i;++bt<Nt;)Dt[bt]=C[bt];for(;ut--;)Dt[bt++]=arguments[++J];return ct(Gt,M?h:this,Dt)}}(i,a,h,C);else var ge=function sf(i,a,h){var C=1&a,M=Ua(i);return function O(){return(this&&this!==u&&this instanceof O?M:i).apply(C?h:this,arguments)}}(i,a,h);return tc((Gt?Ll:aa)(ge,Xt),i,a)}function Xl(i,a,h,C){return i===G||Ji(i,At[h])&&!It.call(C,h)?a:i}function Hl(i,a,h,C,M,O){return Qn(i)&&Qn(a)&&(O.set(a,i),_o(i,a,G,Hl,O),O.delete(a)),i}function uf(i){return tl(i)?G:i}function Jl(i,a,h,C,M,O){var F=1&h,J=i.length,ut=a.length;if(J!=ut&&!(F&&ut>J))return!1;var bt=O.get(i),Nt=O.get(a);if(bt&&Nt)return bt==a&&Nt==i;var Dt=-1,Gt=!0,Xt=2&h?new Ps:G;for(O.set(i,a),O.set(a,i);++Dt<J;){var ge=i[Dt],je=a[Dt];if(C)var pe=F?C(je,ge,Dt,a,i,O):C(ge,je,Dt,i,a,O);if(pe!==G){if(pe)continue;Gt=!1;break}if(Xt){if(!hn(a,function(_e,He){if(!Js(Xt,He)&&(ge===_e||M(ge,_e,h,C,O)))return Xt.push(He)})){Gt=!1;break}}else if(ge!==je&&!M(ge,je,h,C,O)){Gt=!1;break}}return O.delete(i),O.delete(a),Gt}function zs(i){return Xu(nu(i,G,Ju),i+"")}function Jo(i){return Yr(i,Fr,Qo)}function ba(i){return Yr(i,Bi,Uu)}var Wu=$s?function(i){return $s.get(i)}:wh;function _u(i){for(var a=i.name+"",h=Li[a],C=It.call(Li,a)?h.length:0;C--;){var M=h[C],O=M.func;if(null==O||O==i)return M.name}return a}function Fa(i){return(It.call(E,"placeholder")?E:i).placeholder}function le(){var i=E.iteratee||Ch;return i=i===Ch?Ga:i,arguments.length?i(arguments[0],arguments[1]):i}function Ko(i,a){var h=i.__data__;return function df(i){var a=typeof i;return"string"==a||"number"==a||"symbol"==a||"boolean"==a?"__proto__"!==i:null===i}(a)?h["string"==typeof a?"string":"hash"]:h.map}function Yu(i){for(var a=Fr(i),h=a.length;h--;){var C=a[h],M=i[C];a[h]=[C,M,ql(M)]}return a}function Hi(i,a){var h=function to(nt,yt){return null==nt?G:nt[yt]}(i,a);return wu(h)?h:G}var Qo=fu?function(i){return null==i?[]:(i=rn(i),qt(fu(i),function(a){return Qs.call(i,a)}))}:bh,Uu=fu?function(i){for(var a=[];i;)ee(a,Qo(i)),i=yr(i);return a}:bh,Ur=kr;function Kl(i,a,h){for(var C=-1,M=(a=ia(a,i)).length,O=!1;++C<M;){var F=Is(a[C]);if(!(O=null!=i&&h(i,F)))break;i=i[F]}return O||++C!=M?O:!!(M=null==i?0:i.length)&&vc(M)&&Os(F,M)&&(xe(i)||bo(i))}function Ql(i){return"function"!=typeof i.constructor||po(i)?{}:Oa(yr(i))}function Fu(i){return xe(i)||bo(i)||!!(De&&i&&i[De])}function Os(i,a){var h=typeof i;return!!(a=a??Ir)&&("number"==h||"symbol"!=h&&Gs.test(i))&&i>-1&&i%1==0&&i<a}function ti(i,a,h){if(!Qn(h))return!1;var C=typeof a;return!!("number"==C?Oi(h)&&Os(a,h.length):"string"==C&&a in h)&&Ji(h[a],i)}function Vu(i,a){if(xe(i))return!1;var h=typeof i;return!("number"!=h&&"symbol"!=h&&"boolean"!=h&&null!=i&&!Ki(i))||Jr.test(i)||!ur.test(i)||null!=a&&i in rn(a)}function qo(i){var a=_u(i),h=E[a];if("function"!=typeof h||!(a in Ee.prototype))return!1;if(i===h)return!0;var C=Wu(h);return!!C&&i===C[0]}(Po&&Ur(new Po(new ArrayBuffer(1)))!=On||ro&&Ur(new ro)!=pn||hu&&Ur(hu.resolve())!=W||Ea&&Ur(new Ea)!=Ct||Ca&&Ur(new Ca)!=ce)&&(Ur=function(i){var a=kr(i),h=a==T?i.constructor:G,C=h?xa(h):"";if(C)switch(C){case gs:return On;case rl:return pn;case du:return W;case ta:return Ct;case za:return ce}return a});var $o=at?Na:xh;function po(i){var a=i&&i.constructor;return i===("function"==typeof a&&a.prototype||At)}function ql(i){return i==i&&!Qn(i)}function tu(i,a){return function(h){return null!=h&&h[i]===a&&(a!==G||i in rn(h))}}function nu(i,a,h){return a=Hn(a===G?i.length-1:a,0),function(){for(var C=arguments,M=-1,O=Hn(C.length-a,0),F=pt(O);++M<O;)F[M]=C[a+M];M=-1;for(var J=pt(a+1);++M<a;)J[M]=C[M];return J[a]=h(F),ct(i,this,J)}}function $l(i,a){return a.length<2?i:br(i,li(a,0,-1))}function If(i,a){for(var h=i.length,C=_r(a.length,h),M=nr(i);C--;){var O=a[C];i[C]=Os(O,h)?M[O]:G}return i}function vo(i,a){if(("constructor"!==a||"function"!=typeof i[a])&&"__proto__"!=a)return i[a]}var aa=ec(Ll),mo=yc||function(i,a){return u.setTimeout(i,a)},Xu=ec(qc);function tc(i,a,h){var C=a+"";return Xu(i,function hf(i,a){var h=a.length;if(!h)return i;var C=h-1;return a[C]=(h>1?"& ":"")+a[C],a=a.join(h>2?", ":" "),i.replace(Ns,"{\n/* [wrapped with "+a+"] */\n")}(C,function Af(i,a){return kt(Fn,function(h){var C="_."+h[0];a&h[1]&&!ye(i,C)&&i.push(C)}),i.sort()}(function cf(i){var a=i.match(xi);return a?a[1].split(Wr):[]}(C),h)))}function ec(i){var a=0,h=0;return function(){var C=Nc(),M=16-(C-h);if(h=C,M>0){if(++a>=800)return arguments[0]}else a=0;return i.apply(G,arguments)}}function ru(i,a){var h=-1,C=i.length,M=C-1;for(a=a===G?C:a;++h<a;){var O=Mu(h,M),F=i[O];i[O]=i[h],i[h]=F}return i.length=a,i}var nc=function pf(i){var a=rr(i,function(C){return 500===h.size&&h.clear(),C}),h=a.cache;return a}(function(i){var a=[];return 46===i.charCodeAt(0)&&a.push(""),i.replace(En,function(h,C,M,O){a.push(M?O.replace(Vn,"$1"):C||h)}),a});function Is(i){if("string"==typeof i||Ki(i))return i;var a=i+"";return"0"==a&&1/i==-Ne?"-0":a}function xa(i){if(null!=i){try{return wt.call(i)}catch{}try{return i+""}catch{}}return""}function rc(i){if(i instanceof Ee)return i.clone();var a=new Pi(i.__wrapped__,i.__chain__);return a.__actions__=nr(i.__actions__),a.__index__=i.__index__,a.__values__=i.__values__,a}var bf=be(function(i,a){return vr(i)?na(i,wr(a,1,vr,!0)):[]}),xf=be(function(i,a){var h=zi(a);return vr(h)&&(h=G),vr(i)?na(i,wr(a,1,vr,!0),le(h,2)):[]}),Nf=be(function(i,a){var h=zi(a);return vr(h)&&(h=G),vr(i)?na(i,wr(a,1,vr,!0),G,h):[]});function Hu(i,a,h){var C=null==i?0:i.length;if(!C)return-1;var M=null==h?0:Be(h);return M<0&&(M=Hn(C+M,0)),un(i,le(a,3),M)}function ic(i,a,h){var C=null==i?0:i.length;if(!C)return-1;var M=C-1;return h!==G&&(M=Be(h),M=h<0?Hn(C+M,0):_r(M,C-1)),un(i,le(a,3),M,!0)}function Ju(i){return null!=i&&i.length?wr(i,1):[]}function sc(i){return i&&i.length?i[0]:G}var Of=be(function(i){var a=ae(i,Pu);return a.length&&a[0]===i[0]?Wo(a):[]}),Bf=be(function(i){var a=zi(i),h=ae(i,Pu);return a===zi(h)?a=G:h.pop(),h.length&&h[0]===i[0]?Wo(h,le(a,2)):[]}),Rf=be(function(i){var a=zi(i),h=ae(i,Pu);return(a="function"==typeof a?a:G)&&h.pop(),h.length&&h[0]===i[0]?Wo(h,G,a):[]});function zi(i){var a=null==i?0:i.length;return a?i[a-1]:G}var Wf=be(ac);function ac(i,a){return i&&i.length&&a&&a.length?wa(i,a):i}var Uf=zs(function(i,a){var h=null==i?0:i.length,C=mu(i,a);return Nu(i,ae(a,function(M){return Os(M,h)?+M:M}).sort(Fo)),C});function Ao(i){return null==i?i:Sc.call(i)}var sh=be(function(i){return ra(wr(i,1,vr,!0))}),ah=be(function(i){var a=zi(i);return vr(a)&&(a=G),ra(wr(i,1,vr,!0),le(a,2))}),Co=be(function(i){var a=zi(i);return a="function"==typeof a?a:G,ra(wr(i,1,vr,!0),G,a)});function Qu(i){if(!i||!i.length)return[];var a=0;return i=qt(i,function(h){if(vr(h))return a=Hn(h.length,a),!0}),hr(a,function(h){return ae(i,ka(h))})}function t(i,a){if(!i||!i.length)return[];var h=Qu(i);return null==a?h:ae(h,function(C){return ct(a,G,C)})}var e=be(function(i,a){return vr(i)?na(i,a):[]}),n=be(function(i){return Lu(qt(i,vr))}),r=be(function(i){var a=zi(i);return vr(a)&&(a=G),Lu(qt(i,vr),le(a,2))}),s=be(function(i){var a=zi(i);return a="function"==typeof a?a:G,Lu(qt(i,vr),G,a)}),o=be(Qu),d=be(function(i){var a=i.length,h=a>1?i[a-1]:G;return h="function"==typeof h?(i.pop(),h):G,t(i,h)});function m(i){var a=E(i);return a.__chain__=!0,a}function p(i,a){return a(i)}var D=zs(function(i){var a=i.length,h=a?i[0]:0,C=this.__wrapped__,M=function(O){return mu(O,i)};return!(a>1||this.__actions__.length)&&C instanceof Ee&&Os(h)?((C=C.slice(h,+h+(a?1:0))).__actions__.push({func:p,args:[M],thisArg:G}),new Pi(C,this.__chain__).thru(function(O){return a&&!O.length&&O.push(G),O})):this.thru(M)}),S=Xo(function(i,a,h){It.call(i,h)?++i[h]:ks(i,h,1)}),X=af(Hu),st=af(ic);function xt(i,a){return(xe(i)?kt:vs)(i,le(a,3))}function Pt(i,a){return(xe(i)?ie:vl)(i,le(a,3))}var Ot=Xo(function(i,a,h){It.call(i,h)?i[h].push(a):ks(i,h,[a])}),Vt=be(function(i,a,h){var C=-1,M="function"==typeof a,O=Oi(i)?pt(i.length):[];return vs(i,function(F){O[++C]=M?ct(a,F,h):Ra(F,a,h)}),O}),sn=Xo(function(i,a,h){ks(i,h,a)});function Re(i,a){return(xe(i)?ae:xu)(i,le(a,3))}var Kt=Xo(function(i,a,h){i[h?0:1].push(a)},function(){return[[],[]]}),Ze=be(function(i,a){if(null==i)return[];var h=a.length;return h>1&&ti(i,a[0],a[1])?a=[]:h>2&&ti(a[0],a[1],a[2])&&(a=[a[0]]),Sl(i,wr(a,1),[])}),de=Cc||function(){return u.Date.now()};function Qt(i,a,h){return a=h?G:a,Es(i,y,G,G,G,G,a=i&&null==a?i.length:a)}function Rt(i,a){var h;if("function"!=typeof a)throw new z(Je);return i=Be(i),function(){return--i>0&&(h=a.apply(this,arguments)),i<=1&&(a=G),h}}var pr=be(function(i,a,h){var C=1;if(h.length){var M=Ti(h,Fa(pr));C|=32}return Es(i,C,a,h,M)}),Er=be(function(i,a,h){var C=3;if(h.length){var M=Ti(h,Fa(Er));C|=32}return Es(a,C,i,h,M)});function su(i,a,h){var C,M,O,F,J,ut,bt=0,Nt=!1,Dt=!1,Gt=!0;if("function"!=typeof i)throw new z(Je);function Xt(mr){var Bs=C,Sa=M;return C=M=G,bt=mr,F=i.apply(Sa,Bs)}function ge(mr){return bt=mr,J=mo(_e,a),Nt?Xt(mr):F}function pe(mr){var Bs=mr-ut;return ut===G||Bs>=a||Bs<0||Dt&&mr-bt>=O}function _e(){var mr=de();if(pe(mr))return He(mr);J=mo(_e,function je(mr){var Uh=a-(mr-ut);return Dt?_r(Uh,O-(mr-bt)):Uh}(mr))}function He(mr){return J=G,Gt&&C?Xt(mr):(C=M=G,F)}function qi(){var mr=de(),Bs=pe(mr);if(C=arguments,M=this,ut=mr,Bs){if(J===G)return ge(ut);if(Dt)return Bl(J),J=mo(_e,a),Xt(ut)}return J===G&&(J=mo(_e,a)),F}return a=Cs(a)||0,Qn(h)&&(Nt=!!h.leading,O=(Dt="maxWait"in h)?Hn(Cs(h.maxWait)||0,a):O,Gt="trailing"in h?!!h.trailing:Gt),qi.cancel=function Qi(){J!==G&&Bl(J),bt=0,C=ut=M=J=G},qi.flush=function Ai(){return J===G?F:He(de())},qi}var oc=be(function(i,a){return oo(i,1,a)}),yo=be(function(i,a,h){return oo(i,Cs(a)||0,h)});function rr(i,a){if("function"!=typeof i||null!=a&&"function"!=typeof a)throw new z(Je);var h=function(){var C=arguments,M=a?a.apply(this,C):C[0],O=h.cache;if(O.has(M))return O.get(M);var F=i.apply(this,C);return h.cache=O.set(M,F)||O,F};return h.cache=new(rr.Cache||Vi),h}function Dn(i){if("function"!=typeof i)throw new z(Je);return function(){var a=arguments;switch(a.length){case 0:return!i.call(this);case 1:return!i.call(this,a[0]);case 2:return!i.call(this,a[0],a[1]);case 3:return!i.call(this,a[0],a[1],a[2])}return!i.apply(this,a)}}rr.Cache=Vi;var lh=tf(function(i,a){var h=(a=1==a.length&&xe(a[0])?ae(a[0],dr(le())):ae(wr(a,1),dr(le()))).length;return be(function(C){for(var M=-1,O=_r(C.length,h);++M<O;)C[M]=a[M].call(this,C[M]);return ct(i,this,C)})}),$u=be(function(i,a){var h=Ti(a,Fa($u));return Es(i,32,G,a,h)}),uc=be(function(i,a){var h=Ti(a,Fa(uc));return Es(i,64,G,a,h)}),ch=zs(function(i,a){return Es(i,256,G,G,G,a)});function Ji(i,a){return i===a||i!=i&&a!=a}var oa=ju(Cu),Fh=ju(function(i,a){return i>=a}),bo=yu(function(){return arguments}())?yu:function(i){return ir(i)&&It.call(i,"callee")&&!Qs.call(i,"callee")},xe=pt.isArray,Vh=L?dr(L):function yl(i){return ir(i)&&kr(i)==Me};function Oi(i){return null!=i&&vc(i.length)&&!Na(i)}function vr(i){return ir(i)&&Oi(i)}var Xa=wc||xh,Hh=R?dr(R):function wl(i){return ir(i)&&kr(i)==Ln};function gh(i){if(!ir(i))return!1;var a=kr(i);return a==si||"[object DOMException]"==a||"string"==typeof i.message&&"string"==typeof i.name&&!tl(i)}function Na(i){if(!Qn(i))return!1;var a=kr(i);return a==es||a==ws||"[object AsyncFunction]"==a||"[object Proxy]"==a}function Sh(i){return"number"==typeof i&&i==Be(i)}function vc(i){return"number"==typeof i&&i>-1&&i%1==0&&i<=Ir}function Qn(i){var a=typeof i;return null!=i&&("object"==a||"function"==a)}function ir(i){return null!=i&&"object"==typeof i}var Th=Y?dr(Y):function Uc(i){return ir(i)&&Ur(i)==pn};function Dh(i){return"number"==typeof i||ir(i)&&kr(i)==Ke}function tl(i){if(!ir(i)||kr(i)!=T)return!1;var a=yr(i);if(null===a)return!0;var h=It.call(a,"constructor")&&a.constructor;return"function"==typeof h&&h instanceof h&&wt.call(h)==$t}var ph=it?dr(it):function Fc(i){return ir(i)&&kr(i)==tt},Lh=dt?dr(dt):function Vc(i){return ir(i)&&Ur(i)==Ct};function mc(i){return"string"==typeof i||!xe(i)&&ir(i)&&kr(i)==jt}function Ki(i){return"symbol"==typeof i||ir(i)&&kr(i)==ue}var au=Mt?dr(Mt):function me(i){return ir(i)&&vc(i.length)&&!!on[kr(i)]},cd=ju(bu),fd=ju(function(i,a){return i<=a});function Ph(i){if(!i)return[];if(Oi(i))return mc(i)?In(i):nr(i);if(Yn&&i[Yn])return function va(nt){for(var yt,pt=[];!(yt=nt.next()).done;)pt.push(yt.value);return pt}(i[Yn]());var a=Ur(i);return(a==pn?er:a==Ct?Ks:ou)(i)}function Ma(i){return i?(i=Cs(i))===Ne||i===-Ne?17976931348623157e292*(i<0?-1:1):i==i?i:0:0===i?i:0}function Be(i){var a=Ma(i),h=a%1;return a==a?h?a-h:a:0}function kh(i){return i?ea(Be(i),0,Tr):0}function Cs(i){if("number"==typeof i)return i;if(Ki(i))return NaN;if(Qn(i)){var a="function"==typeof i.valueOf?i.valueOf():i;i=Qn(a)?a+"":a}if("string"!=typeof i)return 0===i?i:+i;i=qa(i);var h=ca.test(i);return h||ha.test(i)?H(i.slice(2),h?2:8):hi.test(i)?NaN:+i}function Eh(i){return ci(i,Bi(i))}function Cn(i){return null==i?"":Kn(i)}var dd=_a(function(i,a){if(po(a)||Oi(a))ci(a,Fr(a),i);else for(var h in a)It.call(a,h)&&ao(i,h,a[h])}),zh=_a(function(i,a){ci(a,Bi(a),i)}),Ic=_a(function(i,a,h,C){ci(a,Bi(a),i,C)}),gd=_a(function(i,a,h,C){ci(a,Fr(a),i,C)}),pd=zs(mu),md=be(function(i,a){i=rn(i);var h=-1,C=a.length,M=C>2?a[2]:G;for(M&&ti(a[0],a[1],M)&&(C=1);++h<C;)for(var O=a[h],F=Bi(O),J=-1,ut=F.length;++J<ut;){var bt=F[J],Nt=i[bt];(Nt===G||Ji(Nt,At[bt])&&!It.call(i,bt))&&(i[bt]=O[bt])}return i}),Id=be(function(i){return i.push(G,Hl),ct(Oh,G,i)});function vh(i,a,h){var C=null==i?G:br(i,a);return C===G?h:C}function mh(i,a){return null!=i&&Kl(i,a,Wc)}var Td=Ru(function(i,a,h){null!=a&&"function"!=typeof a.toString&&(a=Jt.call(a)),i[a]=h},Ah(Ri)),Dd=Ru(function(i,a,h){null!=a&&"function"!=typeof a.toString&&(a=Jt.call(a)),It.call(i,a)?i[a].push(h):i[a]=[h]},le),Ld=be(Ra);function Fr(i){return Oi(i)?Ba(i):ui(i)}function Bi(i){return Oi(i)?Ba(i,!0):function Xc(i){if(!Qn(i))return function mf(i){var a=[];if(null!=i)for(var h in rn(i))a.push(h);return a}(i);var a=po(i),h=[];for(var C in i)"constructor"==C&&(a||!It.call(i,C))||h.push(C);return h}(i)}var Ed=_a(function(i,a,h){_o(i,a,h)}),Oh=_a(function(i,a,h,C){_o(i,a,h,C)}),zd=zs(function(i,a){var h={};if(null==i)return h;var C=!1;a=ae(a,function(O){return O=ia(O,i),C||(C=O.length>1),O}),ci(i,ba(i),h),C&&(h=Ei(h,7,uf));for(var M=a.length;M--;)Du(h,a[M]);return h}),Bd=zs(function(i,a){return null==i?{}:function Hc(i,a){return Tl(i,a,function(h,C){return mh(i,C)})}(i,a)});function Bh(i,a){if(null==i)return{};var h=ae(ba(i),function(C){return[C]});return a=le(a),Tl(i,h,function(C,M){return a(C,M[0])})}var Rh=Vl(Fr),Gh=Vl(Bi);function ou(i){return null==i?[]:pi(i,Fr(i))}var Hd=Ya(function(i,a,h){return a=a.toLowerCase(),i+(h?jh(a):a)});function jh(i){return Ih(Cn(i).toLowerCase())}function Zh(i){return(i=Cn(i))&&i.replace(js,pa).replace(Ls,"")}var qd=Ya(function(i,a,h){return i+(h?"-":"")+a.toLowerCase()}),$d=Ya(function(i,a,h){return i+(h?" ":"")+a.toLowerCase()}),tg=zu("toLowerCase"),og=Ya(function(i,a,h){return i+(h?"_":"")+a.toLowerCase()}),lg=Ya(function(i,a,h){return i+(h?" ":"")+Ih(a)}),Ag=Ya(function(i,a,h){return i+(h?" ":"")+a.toUpperCase()}),Ih=zu("toUpperCase");function Wh(i,a,h){return i=Cn(i),(a=h?G:a)===G?function Mo(nt){return fs.test(nt)}(i)?function To(nt){return nt.match(Wn)||[]}(i):function Pr(nt){return nt.match(ua)||[]}(i):i.match(a)||[]}var _h=be(function(i,a){try{return ct(i,G,a)}catch(h){return gh(h)?h:new fe(h)}}),Cg=zs(function(i,a){return kt(a,function(h){h=Is(h),ks(i,h,pr(i[h],i))}),i});function Ah(i){return function(){return i}}var xg=Ou(),Ng=Ou(!0);function Ri(i){return i}function Ch(i){return Ga("function"==typeof i?i:Ei(i,1))}var Tg=be(function(i,a){return function(h){return Ra(h,i,a)}}),Dg=be(function(i,a){return function(h){return Ra(i,h,a)}});function yh(i,a,h){var C=Fr(a),M=Zo(a,C);null==h&&(!Qn(a)||!M.length&&C.length)&&(h=a,a=i,i=this,M=Zo(a,Fr(a)));var O=!(Qn(h)&&"chain"in h&&!h.chain),F=Na(i);return kt(M,function(J){var ut=a[J];i[J]=ut,F&&(i.prototype[J]=function(){var bt=this.__chain__;if(O||bt){var Nt=i(this.__wrapped__),Dt=Nt.__actions__=nr(this.__actions__);return Dt.push({func:ut,args:arguments,thisArg:i}),Nt.__chain__=bt,Nt}return ut.apply(i,ee([this.value()],arguments))})}),i}function wh(){}var kg=Ul(ae),Eg=Ul(Yt),zg=Ul(hn);function Yh(i){return Vu(i)?ka(Is(i)):function Jc(i){return function(a){return br(a,i)}}(i)}var Bg=of(),Rg=of(!0);function bh(){return[]}function xh(){return!1}var Ug=Gu(function(i,a){return i+a},0),Fg=Fl("ceil"),Vg=Gu(function(i,a){return i/a},1),Xg=Fl("floor"),tp=Gu(function(i,a){return i*a},1),ep=Fl("round"),np=Gu(function(i,a){return i-a},0);return E.after=function Ge(i,a){if("function"!=typeof a)throw new z(Je);return i=Be(i),function(){if(--i<1)return a.apply(this,arguments)}},E.ary=Qt,E.assign=dd,E.assignIn=zh,E.assignInWith=Ic,E.assignWith=gd,E.at=pd,E.before=Rt,E.bind=pr,E.bindAll=Cg,E.bindKey=Er,E.castArray=function fc(){if(!arguments.length)return[];var i=arguments[0];return xe(i)?i:[i]},E.chain=m,E.chunk=function Cf(i,a,h){a=(h?ti(i,a,h):a===G)?1:Hn(Be(a),0);var C=null==i?0:i.length;if(!C||a<1)return[];for(var M=0,O=0,F=pt(Do(C/a));M<C;)F[O++]=li(i,M,M+=a);return F},E.compact=function yf(i){for(var a=-1,h=null==i?0:i.length,C=0,M=[];++a<h;){var O=i[a];O&&(M[C++]=O)}return M},E.concat=function wf(){var i=arguments.length;if(!i)return[];for(var a=pt(i-1),h=arguments[0],C=i;C--;)a[C-1]=arguments[C];return ee(xe(h)?nr(h):[h],wr(a,1))},E.cond=function yg(i){var a=null==i?0:i.length,h=le();return i=a?ae(i,function(C){if("function"!=typeof C[1])throw new z(Je);return[h(C[0]),C[1]]}):[],be(function(C){for(var M=-1;++M<a;){var O=i[M];if(ct(O[0],this,C))return ct(O[1],this,C)}})},E.conforms=function wg(i){return function gl(i){var a=Fr(i);return function(h){return pl(h,i,a)}}(Ei(i,1))},E.constant=Ah,E.countBy=S,E.create=function vd(i,a){var h=Oa(i);return null==a?h:Go(h,a)},E.curry=function As(i,a,h){var C=Es(i,8,G,G,G,G,G,a=h?G:a);return C.placeholder=As.placeholder,C},E.curryRight=function iu(i,a,h){var C=Es(i,16,G,G,G,G,G,a=h?G:a);return C.placeholder=iu.placeholder,C},E.debounce=su,E.defaults=md,E.defaultsDeep=Id,E.defer=oc,E.delay=yo,E.difference=bf,E.differenceBy=xf,E.differenceWith=Nf,E.drop=function Mf(i,a,h){var C=null==i?0:i.length;return C?li(i,(a=h||a===G?1:Be(a))<0?0:a,C):[]},E.dropRight=function Sf(i,a,h){var C=null==i?0:i.length;return C?li(i,0,(a=C-(a=h||a===G?1:Be(a)))<0?0:a):[]},E.dropRightWhile=function Tf(i,a){return i&&i.length?Uo(i,le(a,3),!0,!0):[]},E.dropWhile=function Df(i,a){return i&&i.length?Uo(i,le(a,3),!0):[]},E.fill=function Lf(i,a,h,C){var M=null==i?0:i.length;return M?(h&&"number"!=typeof h&&ti(i,a,h)&&(h=0,C=M),function ml(i,a,h,C){var M=i.length;for((h=Be(h))<0&&(h=-h>M?0:M+h),(C=C===G||C>M?M:Be(C))<0&&(C+=M),C=h>C?0:kh(C);h<C;)i[h++]=a;return i}(i,a,h,C)):[]},E.filter=function Z(i,a){return(xe(i)?qt:Il)(i,le(a,3))},E.flatMap=function ot(i,a){return wr(Re(i,a),1)},E.flatMapDeep=function vt(i,a){return wr(Re(i,a),Ne)},E.flatMapDepth=function Tt(i,a,h){return h=h===G?1:Be(h),wr(Re(i,a),h)},E.flatten=Ju,E.flattenDeep=function Pf(i){return null!=i&&i.length?wr(i,Ne):[]},E.flattenDepth=function Io(i,a){return null!=i&&i.length?wr(i,a=a===G?1:Be(a)):[]},E.flip=function wo(i){return Es(i,512)},E.flow=xg,E.flowRight=Ng,E.fromPairs=function kf(i){for(var a=-1,h=null==i?0:i.length,C={};++a<h;){var M=i[a];C[M[0]]=M[1]}return C},E.functions=function Nd(i){return null==i?[]:Zo(i,Fr(i))},E.functionsIn=function Md(i){return null==i?[]:Zo(i,Bi(i))},E.groupBy=Ot,E.initial=function zf(i){return null!=i&&i.length?li(i,0,-1):[]},E.intersection=Of,E.intersectionBy=Bf,E.intersectionWith=Rf,E.invert=Td,E.invertBy=Dd,E.invokeMap=Vt,E.iteratee=Ch,E.keyBy=sn,E.keys=Fr,E.keysIn=Bi,E.map=Re,E.mapKeys=function Pd(i,a){var h={};return a=le(a,3),ms(i,function(C,M,O){ks(h,a(C,M,O),C)}),h},E.mapValues=function kd(i,a){var h={};return a=le(a,3),ms(i,function(C,M,O){ks(h,M,a(C,M,O))}),h},E.matches=function Mg(i){return bl(Ei(i,1))},E.matchesProperty=function Sg(i,a){return xl(i,Ei(a,1))},E.memoize=rr,E.merge=Ed,E.mergeWith=Oh,E.method=Tg,E.methodOf=Dg,E.mixin=yh,E.negate=Dn,E.nthArg=function Pg(i){return i=Be(i),be(function(a){return Ml(a,i)})},E.omit=zd,E.omitBy=function Od(i,a){return Bh(i,Dn(le(a)))},E.once=function qu(i){return Rt(2,i)},E.orderBy=function dn(i,a,h,C){return null==i?[]:(xe(a)||(a=null==a?[]:[a]),xe(h=C?G:h)||(h=null==h?[]:[h]),Sl(i,a,h))},E.over=kg,E.overArgs=lh,E.overEvery=Eg,E.overSome=zg,E.partial=$u,E.partialRight=uc,E.partition=Kt,E.pick=Bd,E.pickBy=Bh,E.property=Yh,E.propertyOf=function Og(i){return function(a){return null==i?G:br(i,a)}},E.pull=Wf,E.pullAll=ac,E.pullAllBy=function _f(i,a,h){return i&&i.length&&a&&a.length?wa(i,a,le(h,2)):i},E.pullAllWith=function Yf(i,a,h){return i&&i.length&&a&&a.length?wa(i,a,G,h):i},E.pullAt=Uf,E.range=Bg,E.rangeRight=Rg,E.rearg=ch,E.reject=function re(i,a){return(xe(i)?qt:Il)(i,Dn(le(a,3)))},E.remove=function Ku(i,a){var h=[];if(!i||!i.length)return h;var C=-1,M=[],O=i.length;for(a=le(a,3);++C<O;){var F=i[C];a(F,C,i)&&(h.push(F),M.push(C))}return Nu(i,M),h},E.rest=function fh(i,a){if("function"!=typeof i)throw new z(Je);return be(i,a=a===G?a:Be(a))},E.reverse=Ao,E.sampleSize=function an(i,a,h){return a=(h?ti(i,a,h):a===G)?1:Be(a),(xe(i)?Bc:Qc)(i,a)},E.set=function Gd(i,a,h){return null==i?i:Za(i,a,h)},E.setWith=function jd(i,a,h,C){return C="function"==typeof C?C:G,null==i?i:Za(i,a,h,C)},E.shuffle=function ln(i){return(xe(i)?dl:Su)(i)},E.slice=function Ff(i,a,h){var C=null==i?0:i.length;return C?(h&&"number"!=typeof h&&ti(i,a,h)?(a=0,h=C):(a=null==a?0:Be(a),h=h===G?C:Be(h)),li(i,a,h)):[]},E.sortBy=Ze,E.sortedUniq=function qf(i){return i&&i.length?Pl(i):[]},E.sortedUniqBy=function $f(i,a){return i&&i.length?Pl(i,le(a,2)):[]},E.split=function ug(i,a,h){return h&&"number"!=typeof h&&ti(i,a,h)&&(a=h=G),(h=h===G?Tr:h>>>0)?(i=Cn(i))&&("string"==typeof a||null!=a&&!ph(a))&&!(a=Kn(a))&&vi(i)?sa(In(i),0,h):i.split(a,h):[]},E.spread=function hh(i,a){if("function"!=typeof i)throw new z(Je);return a=null==a?0:Hn(Be(a),0),be(function(h){var C=h[a],M=sa(h,0,a);return C&&ee(M,C),ct(i,this,M)})},E.tail=function th(i){var a=null==i?0:i.length;return a?li(i,1,a):[]},E.take=function eh(i,a,h){return i&&i.length?li(i,0,(a=h||a===G?1:Be(a))<0?0:a):[]},E.takeRight=function nh(i,a,h){var C=null==i?0:i.length;return C?li(i,(a=C-(a=h||a===G?1:Be(a)))<0?0:a,C):[]},E.takeRightWhile=function rh(i,a){return i&&i.length?Uo(i,le(a,3),!1,!0):[]},E.takeWhile=function ih(i,a){return i&&i.length?Uo(i,le(a,3)):[]},E.tap=function A(i,a){return a(i),i},E.throttle=function dh(i,a,h){var C=!0,M=!0;if("function"!=typeof i)throw new z(Je);return Qn(h)&&(C="leading"in h?!!h.leading:C,M="trailing"in h?!!h.trailing:M),su(i,a,{leading:C,maxWait:a,trailing:M})},E.thru=p,E.toArray=Ph,E.toPairs=Rh,E.toPairsIn=Gh,E.toPath=function _g(i){return xe(i)?ae(i,Is):Ki(i)?[i]:nr(nc(Cn(i)))},E.toPlainObject=Eh,E.transform=function Zd(i,a,h){var C=xe(i),M=C||Xa(i)||au(i);if(a=le(a,4),null==h){var O=i&&i.constructor;h=M?C?new O:[]:Qn(i)&&Na(O)?Oa(yr(i)):{}}return(M?kt:ms)(i,function(F,J,ut){return a(h,F,J,ut)}),h},E.unary=function lc(i){return Qt(i,1)},E.union=sh,E.unionBy=ah,E.unionWith=Co,E.uniq=function Mh(i){return i&&i.length?ra(i):[]},E.uniqBy=function oh(i,a){return i&&i.length?ra(i,le(a,2)):[]},E.uniqWith=function uh(i,a){return a="function"==typeof a?a:G,i&&i.length?ra(i,G,a):[]},E.unset=function Wd(i,a){return null==i||Du(i,a)},E.unzip=Qu,E.unzipWith=t,E.update=function _d(i,a,h){return null==i?i:El(i,a,ku(h))},E.updateWith=function Yd(i,a,h,C){return C="function"==typeof C?C:G,null==i?i:El(i,a,ku(h),C)},E.values=ou,E.valuesIn=function Ud(i){return null==i?[]:pi(i,Bi(i))},E.without=e,E.words=Wh,E.wrap=function cc(i,a){return $u(ku(a),i)},E.xor=n,E.xorBy=r,E.xorWith=s,E.zip=o,E.zipObject=function l(i,a){return Ol(i||[],a||[],ao)},E.zipObjectDeep=function f(i,a){return Ol(i||[],a||[],Za)},E.zipWith=d,E.entries=Rh,E.entriesIn=Gh,E.extend=zh,E.extendWith=Ic,yh(E,E),E.add=Ug,E.attempt=_h,E.camelCase=Hd,E.capitalize=jh,E.ceil=Fg,E.clamp=function Fd(i,a,h){return h===G&&(h=a,a=G),h!==G&&(h=(h=Cs(h))==h?h:0),a!==G&&(a=(a=Cs(a))==a?a:0),ea(Cs(i),a,h)},E.clone=function hc(i){return Ei(i,4)},E.cloneDeep=function dc(i){return Ei(i,5)},E.cloneDeepWith=function gc(i,a){return Ei(i,5,a="function"==typeof a?a:G)},E.cloneWith=function Va(i,a){return Ei(i,4,a="function"==typeof a?a:G)},E.conformsTo=function pc(i,a){return null==a||pl(i,a,Fr(a))},E.deburr=Zh,E.defaultTo=function bg(i,a){return null==i||i!=i?a:i},E.divide=Vg,E.endsWith=function Jd(i,a,h){i=Cn(i),a=Kn(a);var C=i.length,M=h=h===G?C:ea(Be(h),0,C);return(h-=a.length)>=0&&i.slice(h,M)==a},E.eq=Ji,E.escape=function Kd(i){return(i=Cn(i))&&fi.test(i)?i.replace(xs,uu):i},E.escapeRegExp=function Qd(i){return(i=Cn(i))&&lr.test(i)?i.replace(bi,"\\$&"):i},E.every=function P(i,a,h){var C=xe(i)?Yt:jc;return h&&ti(i,a,h)&&(a=G),C(i,le(a,3))},E.find=X,E.findIndex=Hu,E.findKey=function Ad(i,a){return fr(i,le(a,3),ms)},E.findLast=st,E.findLastIndex=ic,E.findLastKey=function Cd(i,a){return fr(i,le(a,3),Au)},E.floor=Xg,E.forEach=xt,E.forEachRight=Pt,E.forIn=function yd(i,a){return null==i?i:Iu(i,le(a,3),Bi)},E.forInRight=function wd(i,a){return null==i?i:Al(i,le(a,3),Bi)},E.forOwn=function bd(i,a){return i&&ms(i,le(a,3))},E.forOwnRight=function xd(i,a){return i&&Au(i,le(a,3))},E.get=vh,E.gt=oa,E.gte=Fh,E.has=function Sd(i,a){return null!=i&&Kl(i,a,Zc)},E.hasIn=mh,E.head=sc,E.identity=Ri,E.includes=function Bt(i,a,h,C){i=Oi(i)?i:ou(i),h=h&&!C?Be(h):0;var M=i.length;return h<0&&(h=Hn(M+h,0)),mc(i)?h<=M&&i.indexOf(a,h)>-1:!!M&&mn(i,a,h)>-1},E.indexOf=function Ef(i,a,h){var C=null==i?0:i.length;if(!C)return-1;var M=null==h?0:Be(h);return M<0&&(M=Hn(C+M,0)),mn(i,a,M)},E.inRange=function Vd(i,a,h){return a=Ma(a),h===G?(h=a,a=0):h=Ma(h),function _c(i,a,h){return i>=_r(a,h)&&i<Hn(a,h)}(i=Cs(i),a,h)},E.invoke=Ld,E.isArguments=bo,E.isArray=xe,E.isArrayBuffer=Vh,E.isArrayLike=Oi,E.isArrayLikeObject=vr,E.isBoolean=function Xh(i){return!0===i||!1===i||ir(i)&&kr(i)==jr},E.isBuffer=Xa,E.isDate=Hh,E.isElement=function Jh(i){return ir(i)&&1===i.nodeType&&!tl(i)},E.isEmpty=function Kh(i){if(null==i)return!0;if(Oi(i)&&(xe(i)||"string"==typeof i||"function"==typeof i.splice||Xa(i)||au(i)||bo(i)))return!i.length;var a=Ur(i);if(a==pn||a==Ct)return!i.size;if(po(i))return!ui(i).length;for(var h in i)if(It.call(i,h))return!1;return!0},E.isEqual=function Qh(i,a){return uo(i,a)},E.isEqualWith=function qh(i,a,h){var C=(h="function"==typeof h?h:G)?h(i,a):G;return C===G?uo(i,a,G,h):!!C},E.isError=gh,E.isFinite=function $h(i){return"number"==typeof i&&el(i)},E.isFunction=Na,E.isInteger=Sh,E.isLength=vc,E.isMap=Th,E.isMatch=function td(i,a){return i===a||lo(i,a,Yu(a))},E.isMatchWith=function ed(i,a,h){return h="function"==typeof h?h:G,lo(i,a,Yu(a),h)},E.isNaN=function nd(i){return Dh(i)&&i!=+i},E.isNative=function rd(i){if($o(i))throw new fe("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return wu(i)},E.isNil=function sd(i){return null==i},E.isNull=function id(i){return null===i},E.isNumber=Dh,E.isObject=Qn,E.isObjectLike=ir,E.isPlainObject=tl,E.isRegExp=ph,E.isSafeInteger=function ad(i){return Sh(i)&&i>=-Ir&&i<=Ir},E.isSet=Lh,E.isString=mc,E.isSymbol=Ki,E.isTypedArray=au,E.isUndefined=function od(i){return i===G},E.isWeakMap=function ud(i){return ir(i)&&Ur(i)==ce},E.isWeakSet=function ld(i){return ir(i)&&"[object WeakSet]"==kr(i)},E.join=function Gf(i,a){return null==i?"":bc.call(i,a)},E.kebabCase=qd,E.last=zi,E.lastIndexOf=function jf(i,a,h){var C=null==i?0:i.length;if(!C)return-1;var M=C;return h!==G&&(M=(M=Be(h))<0?Hn(C+M,0):_r(M,C-1)),a==a?function tn(nt,yt,pt){for(var Zt=pt+1;Zt--;)if(nt[Zt]===yt)return Zt;return Zt}(i,a,M):un(i,oi,M,!0)},E.lowerCase=$d,E.lowerFirst=tg,E.lt=cd,E.lte=fd,E.max=function Hg(i){return i&&i.length?jo(i,Ri,Cu):G},E.maxBy=function Jg(i,a){return i&&i.length?jo(i,le(a,2),Cu):G},E.mean=function Kg(i){return _n(i,Ri)},E.meanBy=function Qg(i,a){return _n(i,le(a,2))},E.min=function qg(i){return i&&i.length?jo(i,Ri,bu):G},E.minBy=function $g(i,a){return i&&i.length?jo(i,le(a,2),bu):G},E.stubArray=bh,E.stubFalse=xh,E.stubObject=function Gg(){return{}},E.stubString=function jg(){return""},E.stubTrue=function Zg(){return!0},E.multiply=tp,E.nth=function Zf(i,a){return i&&i.length?Ml(i,Be(a)):G},E.noConflict=function Lg(){return u._===this&&(u._=oe),this},E.noop=wh,E.now=de,E.pad=function eg(i,a,h){i=Cn(i);var C=(a=Be(a))?Di(i):0;if(!a||C>=a)return i;var M=(a-C)/2;return fo(Lo(M),h)+i+fo(Do(M),h)},E.padEnd=function ng(i,a,h){i=Cn(i);var C=(a=Be(a))?Di(i):0;return a&&C<a?i+fo(a-C,h):i},E.padStart=function rg(i,a,h){i=Cn(i);var C=(a=Be(a))?Di(i):0;return a&&C<a?fo(a-C,h)+i:i},E.parseInt=function ig(i,a,h){return h||null==a?a=0:a&&(a=+a),Mc(Cn(i).replace(rs,""),a||0)},E.random=function Xd(i,a,h){if(h&&"boolean"!=typeof h&&ti(i,a,h)&&(a=h=G),h===G&&("boolean"==typeof a?(h=a,a=G):"boolean"==typeof i&&(h=i,i=G)),i===G&&a===G?(i=0,a=1):(i=Ma(i),a===G?(a=i,i=0):a=Ma(a)),i>a){var C=i;i=a,a=C}if(h||i%1||a%1){var M=nl();return _r(i+M*(a-i+_("1e-"+((M+"").length-1))),a)}return Mu(i,a)},E.reduce=function he(i,a,h){var C=xe(i)?Lr:zn,M=arguments.length<3;return C(i,le(a,4),h,M,vs)},E.reduceRight=function ne(i,a,h){var C=xe(i)?We:zn,M=arguments.length<3;return C(i,le(a,4),h,M,vl)},E.repeat=function sg(i,a,h){return a=(h?ti(i,a,h):a===G)?1:Be(a),ja(Cn(i),a)},E.replace=function ag(){var i=arguments,a=Cn(i[0]);return i.length<3?a:a.replace(i[1],i[2])},E.result=function Rd(i,a,h){var C=-1,M=(a=ia(a,i)).length;for(M||(M=1,i=G);++C<M;){var O=null==i?G:i[Is(a[C])];O===G&&(C=M,O=h),i=Na(O)?O.call(i):O}return i},E.round=ep,E.runInContext=nt,E.sample=function Oe(i){return(xe(i)?Oo:Kc)(i)},E.size=function Le(i){if(null==i)return 0;if(Oi(i))return mc(i)?Di(i):i.length;var a=Ur(i);return a==pn||a==Ct?i.size:ui(i).length},E.snakeCase=og,E.some=function Tn(i,a,h){var C=xe(i)?hn:$c;return h&&ti(i,a,h)&&(a=G),C(i,le(a,3))},E.sortedIndex=function Vf(i,a){return Yo(i,a)},E.sortedIndexBy=function Xf(i,a,h){return Tu(i,a,le(h,2))},E.sortedIndexOf=function Hf(i,a){var h=null==i?0:i.length;if(h){var C=Yo(i,a);if(C<h&&Ji(i[C],a))return C}return-1},E.sortedLastIndex=function Jf(i,a){return Yo(i,a,!0)},E.sortedLastIndexBy=function Kf(i,a,h){return Tu(i,a,le(h,2),!0)},E.sortedLastIndexOf=function Qf(i,a){if(null!=i&&i.length){var C=Yo(i,a,!0)-1;if(Ji(i[C],a))return C}return-1},E.startCase=lg,E.startsWith=function cg(i,a,h){return i=Cn(i),h=null==h?0:ea(Be(h),0,i.length),a=Kn(a),i.slice(h,h+a.length)==a},E.subtract=np,E.sum=function rp(i){return i&&i.length?Fe(i,Ri):0},E.sumBy=function ip(i,a){return i&&i.length?Fe(i,le(a,2)):0},E.template=function fg(i,a,h){var C=E.templateSettings;h&&ti(i,a,h)&&(a=G),i=Cn(i),a=Ic({},a,C,Xl);var J,ut,M=Ic({},a.imports,C.imports,Xl),O=Fr(M),F=pi(M,O),bt=0,Nt=a.interpolate||di,Dt="__p += '",Gt=Ia((a.escape||di).source+"|"+Nt.source+"|"+(Nt===_t?la:di).source+"|"+(a.evaluate||di).source+"|$","g"),Xt="//# sourceURL="+(It.call(a,"sourceURL")?(a.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Xs+"]")+"\n";i.replace(Gt,function(pe,_e,He,Qi,Ai,qi){return He||(He=Qi),Dt+=i.slice(bt,qi).replace(Wi,lu),_e&&(J=!0,Dt+="' +\n__e("+_e+") +\n'"),Ai&&(ut=!0,Dt+="';\n"+Ai+";\n__p += '"),He&&(Dt+="' +\n((__t = ("+He+")) == null ? '' : __t) +\n'"),bt=qi+pe.length,pe}),Dt+="';\n";var ge=It.call(a,"variable")&&a.variable;if(ge){if(Rs.test(ge))throw new fe("Invalid `variable` option passed into `_.template`")}else Dt="with (obj) {\n"+Dt+"\n}\n";Dt=(ut?Dt.replace(kn,""):Dt).replace(Ue,"$1").replace(bs,"$1;"),Dt="function("+(ge||"obj")+") {\n"+(ge?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(J?", __e = _.escape":"")+(ut?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+Dt+"return __p\n}";var je=_h(function(){return Ve(O,Xt+"return "+Dt).apply(G,F)});if(je.source=Dt,gh(je))throw je;return je},E.times=function Wg(i,a){if((i=Be(i))<1||i>Ir)return[];var h=Tr,C=_r(i,Tr);a=le(a),i-=Tr;for(var M=hr(C,a);++h<i;)a(h);return M},E.toFinite=Ma,E.toInteger=Be,E.toLength=kh,E.toLower=function hg(i){return Cn(i).toLowerCase()},E.toNumber=Cs,E.toSafeInteger=function hd(i){return i?ea(Be(i),-Ir,Ir):0===i?i:0},E.toString=Cn,E.toUpper=function dg(i){return Cn(i).toUpperCase()},E.trim=function gg(i,a,h){if((i=Cn(i))&&(h||a===G))return qa(i);if(!i||!(a=Kn(a)))return i;var C=In(i),M=In(a);return sa(C,$a(C,M),xo(C,M)+1).join("")},E.trimEnd=function pg(i,a,h){if((i=Cn(i))&&(h||a===G))return i.slice(0,Cr(i)+1);if(!i||!(a=Kn(a)))return i;var C=In(i);return sa(C,0,xo(C,In(a))+1).join("")},E.trimStart=function vg(i,a,h){if((i=Cn(i))&&(h||a===G))return i.replace(rs,"");if(!i||!(a=Kn(a)))return i;var C=In(i);return sa(C,$a(C,In(a))).join("")},E.truncate=function mg(i,a){var h=30,C="...";if(Qn(a)){var M="separator"in a?a.separator:M;h="length"in a?Be(a.length):h,C="omission"in a?Kn(a.omission):C}var O=(i=Cn(i)).length;if(vi(i)){var F=In(i);O=F.length}if(h>=O)return i;var J=h-Di(C);if(J<1)return C;var ut=F?sa(F,0,J).join(""):i.slice(0,J);if(M===G)return ut+C;if(F&&(J+=ut.length-J),ph(M)){if(i.slice(J).search(M)){var bt,Nt=ut;for(M.global||(M=Ia(M.source,Cn(Ni.exec(M))+"g")),M.lastIndex=0;bt=M.exec(Nt);)var Dt=bt.index;ut=ut.slice(0,Dt===G?J:Dt)}}else if(i.indexOf(Kn(M),J)!=J){var Gt=ut.lastIndexOf(M);Gt>-1&&(ut=ut.slice(0,Gt))}return ut+C},E.unescape=function Ig(i){return(i=Cn(i))&&wi.test(i)?i.replace(ns,ma):i},E.uniqueId=function Yg(i){var a=++Et;return Cn(i)+a},E.upperCase=Ag,E.upperFirst=Ih,E.each=xt,E.eachRight=Pt,E.first=sc,yh(E,function(){var i={};return ms(E,function(a,h){It.call(E.prototype,h)||(i[h]=a)}),i}(),{chain:!1}),E.VERSION="4.17.21",kt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(i){E[i].placeholder=E}),kt(["drop","take"],function(i,a){Ee.prototype[i]=function(h){h=h===G?1:Hn(Be(h),0);var C=this.__filtered__&&!a?new Ee(this):this.clone();return C.__filtered__?C.__takeCount__=_r(h,C.__takeCount__):C.__views__.push({size:_r(h,Tr),type:i+(C.__dir__<0?"Right":"")}),C},Ee.prototype[i+"Right"]=function(h){return this.reverse()[i](h).reverse()}}),kt(["filter","map","takeWhile"],function(i,a){var h=a+1,C=1==h||3==h;Ee.prototype[i]=function(M){var O=this.clone();return O.__iteratees__.push({iteratee:le(M,3),type:h}),O.__filtered__=O.__filtered__||C,O}}),kt(["head","last"],function(i,a){var h="take"+(a?"Right":"");Ee.prototype[i]=function(){return this[h](1).value()[0]}}),kt(["initial","tail"],function(i,a){var h="drop"+(a?"":"Right");Ee.prototype[i]=function(){return this.__filtered__?new Ee(this):this[h](1)}}),Ee.prototype.compact=function(){return this.filter(Ri)},Ee.prototype.find=function(i){return this.filter(i).head()},Ee.prototype.findLast=function(i){return this.reverse().find(i)},Ee.prototype.invokeMap=be(function(i,a){return"function"==typeof i?new Ee(this):this.map(function(h){return Ra(h,i,a)})}),Ee.prototype.reject=function(i){return this.filter(Dn(le(i)))},Ee.prototype.slice=function(i,a){i=Be(i);var h=this;return h.__filtered__&&(i>0||a<0)?new Ee(h):(i<0?h=h.takeRight(-i):i&&(h=h.drop(i)),a!==G&&(h=(a=Be(a))<0?h.dropRight(-a):h.take(a-i)),h)},Ee.prototype.takeRightWhile=function(i){return this.reverse().takeWhile(i).reverse()},Ee.prototype.toArray=function(){return this.take(Tr)},ms(Ee.prototype,function(i,a){var h=/^(?:filter|find|map|reject)|While$/.test(a),C=/^(?:head|last)$/.test(a),M=E[C?"take"+("last"==a?"Right":""):a],O=C||/^find/.test(a);!M||(E.prototype[a]=function(){var F=this.__wrapped__,J=C?[1]:arguments,ut=F instanceof Ee,bt=J[0],Nt=ut||xe(F),Dt=function(_e){var He=M.apply(E,ee([_e],J));return C&&Gt?He[0]:He};Nt&&h&&"function"==typeof bt&&1!=bt.length&&(ut=Nt=!1);var Gt=this.__chain__,Xt=!!this.__actions__.length,ge=O&&!Gt,je=ut&&!Xt;if(!O&&Nt){F=je?F:new Ee(this);var pe=i.apply(F,J);return pe.__actions__.push({func:p,args:[Dt],thisArg:G}),new Pi(pe,Gt)}return ge&&je?i.apply(this,J):(pe=this.thru(Dt),ge?C?pe.value()[0]:pe.value():pe)})}),kt(["pop","push","shift","sort","splice","unshift"],function(i){var a=U[i],h=/^(?:push|sort|unshift)$/.test(i)?"tap":"thru",C=/^(?:pop|shift)$/.test(i);E.prototype[i]=function(){var M=arguments;if(C&&!this.__chain__){var O=this.value();return a.apply(xe(O)?O:[],M)}return this[h](function(F){return a.apply(xe(F)?F:[],M)})}}),ms(Ee.prototype,function(i,a){var h=E[a];if(h){var C=h.name+"";It.call(Li,C)||(Li[C]=[]),Li[C].push({name:a,func:h})}}),Li[Bu(G,2).name]=[{name:"wrapper",func:G}],Ee.prototype.clone=function gu(){var i=new Ee(this.__wrapped__);return i.__actions__=nr(this.__actions__),i.__dir__=this.__dir__,i.__filtered__=this.__filtered__,i.__iteratees__=nr(this.__iteratees__),i.__takeCount__=this.__takeCount__,i.__views__=nr(this.__views__),i},Ee.prototype.reverse=function $r(){if(this.__filtered__){var i=new Ee(this);i.__dir__=-1,i.__filtered__=!0}else(i=this.clone()).__dir__*=-1;return i},Ee.prototype.value=function Eo(){var i=this.__wrapped__.value(),a=this.__dir__,h=xe(i),C=a<0,M=h?i.length:0,O=function ze(i,a,h){for(var C=-1,M=h.length;++C<M;){var O=h[C],F=O.size;switch(O.type){case"drop":i+=F;break;case"dropRight":a-=F;break;case"take":a=_r(a,i+F);break;case"takeRight":i=Hn(i,a-F)}}return{start:i,end:a}}(0,M,this.__views__),F=O.start,J=O.end,ut=J-F,bt=C?J:F-1,Nt=this.__iteratees__,Dt=Nt.length,Gt=0,Xt=_r(ut,this.__takeCount__);if(!h||!C&&M==ut&&Xt==ut)return zl(i,this.__actions__);var ge=[];t:for(;ut--&&Gt<Xt;){for(var je=-1,pe=i[bt+=a];++je<Dt;){var _e=Nt[je],Qi=_e.type,Ai=(0,_e.iteratee)(pe);if(2==Qi)pe=Ai;else if(!Ai){if(1==Qi)continue t;break t}}ge[Gt++]=pe}return ge},E.prototype.at=D,E.prototype.chain=function B(){return m(this)},E.prototype.commit=function j(){return new Pi(this.value(),this.__chain__)},E.prototype.next=function q(){this.__values__===G&&(this.__values__=Ph(this.value()));var i=this.__index__>=this.__values__.length;return{done:i,value:i?G:this.__values__[this.__index__++]}},E.prototype.plant=function ht(i){for(var a,h=this;h instanceof ko;){var C=rc(h);C.__index__=0,C.__values__=G,a?M.__wrapped__=C:a=C;var M=C;h=h.__wrapped__}return M.__wrapped__=i,a},E.prototype.reverse=function ft(){var i=this.__wrapped__;if(i instanceof Ee){var a=i;return this.__actions__.length&&(a=new Ee(this)),(a=a.reverse()).__actions__.push({func:p,args:[Ao],thisArg:G}),new Pi(a,this.__chain__)}return this.thru(Ao)},E.prototype.toJSON=E.prototype.valueOf=E.prototype.value=function w(){return zl(this.__wrapped__,this.__actions__)},E.prototype.first=E.prototype.head,Yn&&(E.prototype[Yn]=function et(){return this}),E}();u._=Ii,(xr=function(){return Ii}.call(Vr,Wt,Vr,ei))!==G&&(ei.exports=xr)}.call(this)},610:function(ei){ei.exports=function(){var Wt="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},xr=Array.prototype,G=Object.prototype,Nr=typeof Symbol<"u"?Symbol.prototype:null,se=xr.push,St=xr.slice,Je=G.toString,Ci=G.hasOwnProperty,Mr=typeof ArrayBuffer<"u",nn=typeof DataView<"u",zr=Array.isArray,bn=Object.keys,qn=Object.create,Or=Mr&&ArrayBuffer.isView,ni=isNaN,Ce=isFinite,Ut=!{toString:null}.propertyIsEnumerable("toString"),Un=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Ie=Math.pow(2,53)-1;function Ye(x,k){return k=null==k?x.length-1:+k,function(){for(var _=Math.max(arguments.length-k,0),H=Array(_),lt=0;lt<_;lt++)H[lt]=arguments[lt+k];switch(k){case 0:return x.call(this,H);case 1:return x.call(this,arguments[0],H);case 2:return x.call(this,arguments[0],arguments[1],H)}var rt=Array(k+1);for(lt=0;lt<k;lt++)rt[lt]=arguments[lt];return rt[k]=H,x.apply(this,rt)}}function yn(x){var k=typeof x;return"function"===k||"object"===k&&!!x}function gn(x){return void 0===x}function ri(x){return!0===x||!1===x||"[object Boolean]"===Je.call(x)}function y(x){var k="[object "+x+"]";return function(_){return Je.call(_)===k}}var Sr=y("String"),sr=y("Number"),Br=y("Date"),ys=y("RegExp"),$i=y("Error"),ar=y("Symbol"),$n=y("ArrayBuffer"),Rr=y("Function");"object"!=typeof Int8Array&&"function"!=typeof(Wt.document&&Wt.document.childNodes)&&(Rr=function(x){return"function"==typeof x||!1});var Ne=Rr,Ir=y("Object"),yi=nn&&Ir(new DataView(new ArrayBuffer(8))),ii=typeof Map<"u"&&Ir(new Map),Tr=y("DataView"),tr=yi?function(x){return null!=x&&Ne(x.getInt8)&&$n(x.buffer)}:Tr,Xr=zr||y("Array");function Fn(x,k){return null!=x&&Ci.call(x,k)}var Ht=y("Arguments");!function(){Ht(arguments)||(Ht=function(x){return Fn(x,"callee")})}();var Gr=Ht;function ts(x){return sr(x)&&ni(x)}function jr(x){return function(){return x}}function Ln(x){return function(k){var _=x(k);return"number"==typeof _&&_>=0&&_<=Ie}}function Dr(x){return function(k){return k?.[x]}}var si=Dr("byteLength"),es=Ln(si),ws=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/,pn=Mr?function(x){return Or?Or(x)&&!tr(x):es(x)&&ws.test(Je.call(x))}:jr(!1),Ke=Dr("length");function I(x,k){k=function(u){for(var c={},g=u.length,v=0;v<g;++v)c[u[v]]=!0;return{contains:function(b){return!0===c[b]},push:function(b){return c[b]=!0,u.push(b)}}}(k);var _=Un.length,H=x.constructor,lt=Ne(H)&&H.prototype||G,rt="constructor";for(Fn(x,rt)&&!k.contains(rt)&&k.push(rt);_--;)(rt=Un[_])in x&&x[rt]!==lt[rt]&&!k.contains(rt)&&k.push(rt)}function T(x){if(!yn(x))return[];if(bn)return bn(x);var k=[];for(var _ in x)Fn(x,_)&&k.push(_);return Ut&&I(x,k),k}function W(x,k){var _=T(k),H=_.length;if(null==x)return!H;for(var lt=Object(x),rt=0;rt<H;rt++){var u=_[rt];if(k[u]!==lt[u]||!(u in lt))return!1}return!0}function K(x){return x instanceof K?x:this instanceof K?void(this._wrapped=x):new K(x)}function tt(x){return new Uint8Array(x.buffer||x,x.byteOffset||0,si(x))}K.VERSION="1.13.4",K.prototype.valueOf=K.prototype.toJSON=K.prototype.value=function(){return this._wrapped},K.prototype.toString=function(){return String(this._wrapped)};var Ct="[object DataView]";function jt(x,k,_,H){if(x===k)return 0!==x||1/x==1/k;if(null==x||null==k)return!1;if(x!=x)return k!=k;var lt=typeof x;return("function"===lt||"object"===lt||"object"==typeof k)&&function rt(u,c,g,v){u instanceof K&&(u=u._wrapped),c instanceof K&&(c=c._wrapped);var b=Je.call(u);if(b!==Je.call(c))return!1;if(yi&&"[object Object]"==b&&tr(u)){if(!tr(c))return!1;b=Ct}switch(b){case"[object RegExp]":case"[object String]":return""+u==""+c;case"[object Number]":return+u!=+u?+c!=+c:0==+u?1/+u==1/c:+u==+c;case"[object Date]":case"[object Boolean]":return+u==+c;case"[object Symbol]":return Nr.valueOf.call(u)===Nr.valueOf.call(c);case"[object ArrayBuffer]":case Ct:return rt(tt(u),tt(c),g,v)}var N="[object Array]"===b;if(!N&&pn(u)){if(si(u)!==si(c))return!1;if(u.buffer===c.buffer&&u.byteOffset===c.byteOffset)return!0;N=!0}if(!N){if("object"!=typeof u||"object"!=typeof c)return!1;var L=u.constructor,R=c.constructor;if(L!==R&&!(Ne(L)&&L instanceof L&&Ne(R)&&R instanceof R)&&"constructor"in u&&"constructor"in c)return!1}v=v||[];for(var Y=(g=g||[]).length;Y--;)if(g[Y]===u)return v[Y]===c;if(g.push(u),v.push(c),N){if((Y=u.length)!==c.length)return!1;for(;Y--;)if(!jt(u[Y],c[Y],g,v))return!1}else{var it,dt=T(u);if(Y=dt.length,T(c).length!==Y)return!1;for(;Y--;)if(!Fn(c,it=dt[Y])||!jt(u[it],c[it],g,v))return!1}return g.pop(),v.pop(),!0}(x,k,_,H)}function ue(x){if(!yn(x))return[];var k=[];for(var _ in x)k.push(_);return Ut&&I(x,k),k}function Qe(x){var k=Ke(x);return function(_){if(null==_)return!1;var H=ue(_);if(Ke(H))return!1;for(var lt=0;lt<k;lt++)if(!Ne(_[x[lt]]))return!1;return x!==Hr||!Ne(_[ce])}}var ce="forEach",Me=["clear","delete"],On=["get","has","set"],or=Me.concat(ce,On),Hr=Me.concat(On),cn=["add"].concat(Me,ce,"has"),wn=ii?Qe(or):y("Map"),Pn=ii?Qe(Hr):y("WeakMap"),Lt=ii?Qe(cn):y("Set"),ji=y("WeakSet");function Zr(x){for(var k=T(x),_=k.length,H=Array(_),lt=0;lt<_;lt++)H[lt]=x[k[lt]];return H}function Bn(x){for(var k={},_=T(x),H=0,lt=_.length;H<lt;H++)k[x[_[H]]]=_[H];return k}function kn(x){var k=[];for(var _ in x)Ne(x[_])&&k.push(_);return k.sort()}function Ue(x,k){return function(_){var H=arguments.length;if(k&&(_=Object(_)),H<2||null==_)return _;for(var lt=1;lt<H;lt++)for(var rt=arguments[lt],u=x(rt),c=u.length,g=0;g<c;g++){var v=u[g];k&&void 0!==_[v]||(_[v]=rt[v])}return _}}var bs=Ue(ue),ns=Ue(T),xs=Ue(ue,!0);function wi(x){if(!yn(x))return{};if(qn)return qn(x);var k=function(){};k.prototype=x;var _=new k;return k.prototype=null,_}function fi(x){return Xr(x)?x:[x]}function Se(x){return K.toPath(x)}function Zi(x,k){for(var _=k.length,H=0;H<_;H++){if(null==x)return;x=x[k[H]]}return _?x:void 0}function _t(x,k,_){var H=Zi(x,Se(k));return gn(H)?_:H}function ur(x){return x}function Jr(x){return x=ns({},x),function(k){return W(k,x)}}function En(x){return x=Se(x),function(k){return Zi(k,x)}}function bi(x,k,_){if(void 0===k)return x;switch(_??3){case 1:return function(H){return x.call(k,H)};case 3:return function(H,lt,rt){return x.call(k,H,lt,rt)};case 4:return function(H,lt,rt,u){return x.call(k,H,lt,rt,u)}}return function(){return x.apply(k,arguments)}}function lr(x,k,_){return null==x?ur:Ne(x)?bi(x,k,_):yn(x)&&!Xr(x)?Jr(x):En(x)}function rs(x,k){return lr(x,k,1/0)}function xn(x,k,_){return K.iteratee!==rs?K.iteratee(x,k):lr(x,k,_)}function Ns(){}function xi(x,k){return null==k&&(k=x,x=0),x+Math.floor(Math.random()*(k-x+1))}K.toPath=fi,K.iteratee=rs;var Wr=Date.now||function(){return(new Date).getTime()};function ua(x){var k=function(rt){return x[rt]},_="(?:"+T(x).join("|")+")",H=RegExp(_),lt=RegExp(_,"g");return function(rt){return H.test(rt=null==rt?"":""+rt)?rt.replace(lt,k):rt}}var Rs={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Vn=ua(Rs),la=ua(Bn(Rs)),Ni=K.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},hi=/(.)^/,ca={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},fa=/\\|'|\r|\n|\u2028|\u2029/g;function ha(x){return"\\"+ca[x]}var Gs=/^\s*(\w|\$)+\s*$/,js=0;function di(x,k,_,H,lt){if(!(H instanceof k))return x.apply(_,lt);var rt=wi(x.prototype),u=x.apply(rt,lt);return yn(u)?u:rt}var Wi=Ye(function(x,k){var _=Wi.placeholder,H=function(){for(var lt=0,rt=k.length,u=Array(rt),c=0;c<rt;c++)u[c]=k[c]===_?arguments[lt++]:k[c];for(;lt<arguments.length;)u.push(arguments[lt++]);return di(x,H,this,this,u)};return H});Wi.placeholder=K;var _i=Ye(function(x,k,_){if(!Ne(x))throw new TypeError("Bind must be called on a function");var H=Ye(function(lt){return di(x,H,k,this,_.concat(lt))});return H}),cr=Ln(Ke);function Kr(x,k,_,H){if(H=H||[],k||0===k){if(k<=0)return H.concat(x)}else k=1/0;for(var lt=H.length,rt=0,u=Ke(x);rt<u;rt++){var c=x[rt];if(cr(c)&&(Xr(c)||Gr(c)))if(k>1)Kr(c,k-1,_,H),lt=H.length;else for(var g=0,v=c.length;g<v;)H[lt++]=c[g++];else _||(H[lt++]=c)}return H}var da=Ye(function(x,k){var _=(k=Kr(k,!1,!1)).length;if(_<1)throw new Error("bindAll must be passed function names");for(;_--;){var H=k[_];x[H]=_i(x[H],x)}return x}),is=Ye(function(x,k,_){return setTimeout(function(){return x.apply(null,_)},k)}),Zs=Wi(is,K,1);function Rn(x){return function(){return!x.apply(this,arguments)}}function Mi(x,k){var _;return function(){return--x>0&&(_=k.apply(this,arguments)),x<=1&&(k=null),_}}var Ms=Wi(Mi,2);function Ws(x,k,_){k=xn(k,_);for(var H,lt=T(x),rt=0,u=lt.length;rt<u;rt++)if(k(x[H=lt[rt]],H,x))return H}function Ss(x){return function(k,_,H){_=xn(_,H);for(var lt=Ke(k),rt=x>0?0:lt-1;rt>=0&&rt<lt;rt+=x)if(_(k[rt],rt,k))return rt;return-1}}var Yi=Ss(1),Ts=Ss(-1);function Ui(x,k,_,H){for(var lt=(_=xn(_,H,1))(k),rt=0,u=Ke(x);rt<u;){var c=Math.floor((rt+u)/2);_(x[c])<lt?rt=c+1:u=c}return rt}function ss(x,k,_){return function(H,lt,rt){var u=0,c=Ke(H);if("number"==typeof rt)x>0?u=rt>=0?rt:Math.max(rt+c,u):c=rt>=0?Math.min(rt+1,c):rt+c+1;else if(_&&rt&&c)return H[rt=_(H,lt)]===lt?rt:-1;if(lt!=lt)return(rt=k(St.call(H,u,c),ts))>=0?rt+u:-1;for(rt=x>0?u:c-1;rt>=0&&rt<c;rt+=x)if(H[rt]===lt)return rt;return-1}}var ga=ss(1,Yi,Ui),Ds=ss(-1,Ts);function Gn(x,k,_){var H=(cr(x)?Yi:Ws)(x,k,_);if(void 0!==H&&-1!==H)return x[H]}function Qr(x,k,_){var H,lt;if(k=bi(k,_),cr(x))for(H=0,lt=x.length;H<lt;H++)k(x[H],H,x);else{var rt=T(x);for(H=0,lt=rt.length;H<lt;H++)k(x[rt[H]],rt[H],x)}return x}function Ar(x,k,_){k=xn(k,_);for(var H=!cr(x)&&T(x),lt=(H||x).length,rt=Array(lt),u=0;u<lt;u++){var c=H?H[u]:u;rt[u]=k(x[c],c,x)}return rt}function ai(x){var k=function(_,H,lt,rt){var u=!cr(_)&&T(_),c=(u||_).length,g=x>0?0:c-1;for(rt||(lt=_[u?u[g]:g],g+=x);g>=0&&g<c;g+=x){var v=u?u[g]:g;lt=H(lt,_[v],v,_)}return lt};return function(_,H,lt,rt){var u=arguments.length>=3;return k(_,bi(H,rt,4),lt,u)}}var _s=ai(1),gi=ai(-1);function gt(x,k,_){var H=[];return k=xn(k,_),Qr(x,function(lt,rt,u){k(lt,rt,u)&&H.push(lt)}),H}function Nn(x,k,_){k=xn(k,_);for(var H=!cr(x)&&T(x),lt=(H||x).length,rt=0;rt<lt;rt++){var u=H?H[rt]:rt;if(!k(x[u],u,x))return!1}return!0}function Ae(x,k,_){k=xn(k,_);for(var H=!cr(x)&&T(x),lt=(H||x).length,rt=0;rt<lt;rt++){var u=H?H[rt]:rt;if(k(x[u],u,x))return!0}return!1}function ve(x,k,_,H){return cr(x)||(x=Zr(x)),("number"!=typeof _||H)&&(_=0),ga(x,k,_)>=0}var jn=Ye(function(x,k,_){var H,lt;return Ne(k)?lt=k:(k=Se(k),H=k.slice(0,-1),k=k[k.length-1]),Ar(x,function(rt){var u=lt;if(!u){if(H&&H.length&&(rt=Zi(rt,H)),null==rt)return;u=rt[k]}return null==u?u:u.apply(rt,_)})});function Zn(x,k){return Ar(x,En(k))}function Ys(x,k,_){var H,lt,rt=-1/0,u=-1/0;if(null==k||"number"==typeof k&&"object"!=typeof x[0]&&null!=x)for(var c=0,g=(x=cr(x)?x:Zr(x)).length;c<g;c++)null!=(H=x[c])&&H>rt&&(rt=H);else k=xn(k,_),Qr(x,function(v,b,N){((lt=k(v,b,N))>u||lt===-1/0&&rt===-1/0)&&(rt=v,u=lt)});return rt}var as=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function os(x){return x?Xr(x)?St.call(x):Sr(x)?x.match(as):cr(x)?Ar(x,ur):Zr(x):[]}function Si(x,k,_){if(null==k||_)return cr(x)||(x=Zr(x)),x[xi(x.length-1)];var H=os(x),lt=Ke(H);k=Math.max(Math.min(k,lt),0);for(var rt=lt-1,u=0;u<k;u++){var c=xi(u,rt),g=H[u];H[u]=H[c],H[c]=g}return H.slice(0,k)}function us(x,k){return function(_,H,lt){var rt=k?[[],[]]:{};return H=xn(H,lt),Qr(_,function(u,c){var g=H(u,c,_);x(rt,u,g)}),rt}}var Us=us(function(x,k,_){Fn(x,_)?x[_].push(k):x[_]=[k]}),Fs=us(function(x,k,_){x[_]=k}),Ha=us(function(x,k,_){Fn(x,_)?x[_]++:x[_]=1}),Ja=us(function(x,k,_){x[_?0:1].push(k)},!0);function ls(x,k,_){return k in _}var Ta=Ye(function(x,k){var _={},H=k[0];if(null==x)return _;Ne(H)?(k.length>1&&(H=bi(H,k[1])),k=ue(x)):(H=ls,k=Kr(k,!1,!1),x=Object(x));for(var lt=0,rt=k.length;lt<rt;lt++){var u=k[lt],c=x[u];H(c,u,x)&&(_[u]=c)}return _}),fn=Ye(function(x,k){var _,H=k[0];return Ne(H)?(H=Rn(H),k.length>1&&(_=k[1])):(k=Ar(Kr(k,!1,!1),String),H=function(lt,rt){return!ve(k,rt)}),Ta(x,H,_)});function Vs(x,k,_){return St.call(x,0,Math.max(0,x.length-(null==k||_?1:k)))}function Ls(x,k,_){return null==x||x.length<1?null==k||_?void 0:[]:null==k||_?x[0]:Vs(x,x.length-k)}function cs(x,k,_){return St.call(x,null==k||_?1:k)}var Wn=Ye(function(x,k){return k=Kr(k,!0,!0),gt(x,function(_){return!ve(k,_)})}),Da=Ye(function(x,k){return Wn(x,k)});function fs(x,k,_,H){ri(k)||(H=_,_=k,k=!1),null!=_&&(_=xn(_,H));for(var lt=[],rt=[],u=0,c=Ke(x);u<c;u++){var g=x[u],v=_?_(g,u,x):g;k&&!_?(u&&rt===v||lt.push(g),rt=v):_?ve(rt,v)||(rt.push(v),lt.push(g)):ve(lt,g)||lt.push(g)}return lt}var La=Ye(function(x){return fs(Kr(x,!0,!0))});function Xs(x){for(var k=x&&Ys(x,Ke).length||0,_=Array(k),H=0;H<k;H++)_[H]=Zn(x,H);return _}var on=Ye(Xs);function qe(x,k){return x._chain?K(k).chain():k}function Ka(x){return Qr(kn(x),function(k){var _=K[k]=x[k];K.prototype[k]=function(){var H=[this._wrapped];return se.apply(H,arguments),qe(this,_.apply(K,H))}}),K}Qr(["pop","push","reverse","shift","sort","splice","unshift"],function(x){var k=xr[x];K.prototype[x]=function(){var _=this._wrapped;return null!=_&&(k.apply(_,arguments),"shift"!==x&&"splice"!==x||0!==_.length||delete _[0]),qe(this,_)}}),Qr(["concat","join","slice"],function(x){var k=xr[x];K.prototype[x]=function(){var _=this._wrapped;return null!=_&&(_=k.apply(_,arguments)),qe(this,_)}});var Pa=Ka({__proto__:null,VERSION:"1.13.4",restArguments:Ye,isObject:yn,isNull:function(x){return null===x},isUndefined:gn,isBoolean:ri,isElement:function(x){return!(!x||1!==x.nodeType)},isString:Sr,isNumber:sr,isDate:Br,isRegExp:ys,isError:$i,isSymbol:ar,isArrayBuffer:$n,isDataView:tr,isArray:Xr,isFunction:Ne,isArguments:Gr,isFinite:function(x){return!ar(x)&&Ce(x)&&!isNaN(parseFloat(x))},isNaN:ts,isTypedArray:pn,isEmpty:function(x){if(null==x)return!0;var k=Ke(x);return"number"==typeof k&&(Xr(x)||Sr(x)||Gr(x))?0===k:0===Ke(T(x))},isMatch:W,isEqual:function(x,k){return jt(x,k)},isMap:wn,isWeakMap:Pn,isSet:Lt,isWeakSet:ji,keys:T,allKeys:ue,values:Zr,pairs:function(x){for(var k=T(x),_=k.length,H=Array(_),lt=0;lt<_;lt++)H[lt]=[k[lt],x[k[lt]]];return H},invert:Bn,functions:kn,methods:kn,extend:bs,extendOwn:ns,assign:ns,defaults:xs,create:function(x,k){var _=wi(x);return k&&ns(_,k),_},clone:function(x){return yn(x)?Xr(x)?x.slice():bs({},x):x},tap:function(x,k){return k(x),x},get:_t,has:function(x,k){for(var _=(k=Se(k)).length,H=0;H<_;H++){var lt=k[H];if(!Fn(x,lt))return!1;x=x[lt]}return!!_},mapObject:function(x,k,_){k=xn(k,_);for(var H=T(x),lt=H.length,rt={},u=0;u<lt;u++){var c=H[u];rt[c]=k(x[c],c,x)}return rt},identity:ur,constant:jr,noop:Ns,toPath:fi,property:En,propertyOf:function(x){return null==x?Ns:function(k){return _t(x,k)}},matcher:Jr,matches:Jr,times:function(x,k,_){var H=Array(Math.max(0,x));k=bi(k,_,1);for(var lt=0;lt<x;lt++)H[lt]=k(lt);return H},random:xi,now:Wr,escape:Vn,unescape:la,templateSettings:Ni,template:function(x,k,_){!k&&_&&(k=_),k=xs({},k,K.templateSettings);var H=RegExp([(k.escape||hi).source,(k.interpolate||hi).source,(k.evaluate||hi).source].join("|")+"|$","g"),lt=0,rt="__p+='";x.replace(H,function(v,b,N,L,R){return rt+=x.slice(lt,R).replace(fa,ha),lt=R+v.length,b?rt+="'+\n((__t=("+b+"))==null?'':_.escape(__t))+\n'":N?rt+="'+\n((__t=("+N+"))==null?'':__t)+\n'":L&&(rt+="';\n"+L+"\n__p+='"),v}),rt+="';\n";var u,c=k.variable;if(c){if(!Gs.test(c))throw new Error("variable is not a bare identifier: "+c)}else rt="with(obj||{}){\n"+rt+"}\n",c="obj";rt="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+rt+"return __p;\n";try{u=new Function(c,"_",rt)}catch(v){throw v.source=rt,v}var g=function(v){return u.call(this,v,K)};return g.source="function("+c+"){\n"+rt+"}",g},result:function(x,k,_){var H=(k=Se(k)).length;if(!H)return Ne(_)?_.call(x):_;for(var lt=0;lt<H;lt++){var rt=x?.[k[lt]];void 0===rt&&(rt=_,lt=H),x=Ne(rt)?rt.call(x):rt}return x},uniqueId:function(x){var k=++js+"";return x?x+k:k},chain:function(x){var k=K(x);return k._chain=!0,k},iteratee:rs,partial:Wi,bind:_i,bindAll:da,memoize:function(x,k){var _=function(H){var lt=_.cache,rt=""+(k?k.apply(this,arguments):H);return Fn(lt,rt)||(lt[rt]=x.apply(this,arguments)),lt[rt]};return _.cache={},_},delay:is,defer:Zs,throttle:function(x,k,_){var H,lt,rt,u,c=0;_||(_={});var g=function(){c=!1===_.leading?0:Wr(),H=null,u=x.apply(lt,rt),H||(lt=rt=null)},v=function(){var b=Wr();c||!1!==_.leading||(c=b);var N=k-(b-c);return lt=this,rt=arguments,N<=0||N>k?(H&&(clearTimeout(H),H=null),c=b,u=x.apply(lt,rt),H||(lt=rt=null)):H||!1===_.trailing||(H=setTimeout(g,N)),u};return v.cancel=function(){clearTimeout(H),c=0,H=lt=rt=null},v},debounce:function(x,k,_){var H,lt,rt,u,c,g=function(){var b=Wr()-lt;k>b?H=setTimeout(g,k-b):(H=null,_||(u=x.apply(c,rt)),H||(rt=c=null))},v=Ye(function(b){return c=this,rt=b,lt=Wr(),H||(H=setTimeout(g,k),_&&(u=x.apply(c,rt))),u});return v.cancel=function(){clearTimeout(H),H=rt=c=null},v},wrap:function(x,k){return Wi(k,x)},negate:Rn,compose:function(){var x=arguments,k=x.length-1;return function(){for(var _=k,H=x[k].apply(this,arguments);_--;)H=x[_].call(this,H);return H}},after:function(x,k){return function(){if(--x<1)return k.apply(this,arguments)}},before:Mi,once:Ms,findKey:Ws,findIndex:Yi,findLastIndex:Ts,sortedIndex:Ui,indexOf:ga,lastIndexOf:Ds,find:Gn,detect:Gn,findWhere:function(x,k){return Gn(x,Jr(k))},each:Qr,forEach:Qr,map:Ar,collect:Ar,reduce:_s,foldl:_s,inject:_s,reduceRight:gi,foldr:gi,filter:gt,select:gt,reject:function(x,k,_){return gt(x,Rn(xn(k)),_)},every:Nn,all:Nn,some:Ae,any:Ae,contains:ve,includes:ve,include:ve,invoke:jn,pluck:Zn,where:function(x,k){return gt(x,Jr(k))},max:Ys,min:function(x,k,_){var H,lt,rt=1/0,u=1/0;if(null==k||"number"==typeof k&&"object"!=typeof x[0]&&null!=x)for(var c=0,g=(x=cr(x)?x:Zr(x)).length;c<g;c++)null!=(H=x[c])&&H<rt&&(rt=H);else k=xn(k,_),Qr(x,function(v,b,N){((lt=k(v,b,N))<u||lt===1/0&&rt===1/0)&&(rt=v,u=lt)});return rt},shuffle:function(x){return Si(x,1/0)},sample:Si,sortBy:function(x,k,_){var H=0;return k=xn(k,_),Zn(Ar(x,function(lt,rt,u){return{value:lt,index:H++,criteria:k(lt,rt,u)}}).sort(function(lt,rt){var u=lt.criteria,c=rt.criteria;if(u!==c){if(u>c||void 0===u)return 1;if(u<c||void 0===c)return-1}return lt.index-rt.index}),"value")},groupBy:Us,indexBy:Fs,countBy:Ha,partition:Ja,toArray:os,size:function(x){return null==x?0:cr(x)?x.length:T(x).length},pick:Ta,omit:fn,first:Ls,head:Ls,take:Ls,initial:Vs,last:function(x,k,_){return null==x||x.length<1?null==k||_?void 0:[]:null==k||_?x[x.length-1]:cs(x,Math.max(0,x.length-k))},rest:cs,tail:cs,drop:cs,compact:function(x){return gt(x,Boolean)},flatten:function(x,k){return Kr(x,k,!1)},without:Da,uniq:fs,unique:fs,union:La,intersection:function(x){for(var k=[],_=arguments.length,H=0,lt=Ke(x);H<lt;H++){var rt=x[H];if(!ve(k,rt)){var u;for(u=1;u<_&&ve(arguments[u],rt);u++);u===_&&k.push(rt)}}return k},difference:Wn,unzip:Xs,transpose:Xs,zip:on,object:function(x,k){for(var _={},H=0,lt=Ke(x);H<lt;H++)k?_[x[H]]=k[H]:_[x[H][0]]=x[H][1];return _},range:function(x,k,_){null==k&&(k=x||0,x=0),_||(_=k<x?-1:1);for(var H=Math.max(Math.ceil((k-x)/_),0),lt=Array(H),rt=0;rt<H;rt++,x+=_)lt[rt]=x;return lt},chunk:function(x,k){if(null==k||k<1)return[];for(var _=[],H=0,lt=x.length;H<lt;)_.push(St.call(x,H,H+=k));return _},mixin:Ka,default:K});return Pa._=Pa,Pa}()}}]);